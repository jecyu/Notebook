webpackJsonp([4],{1001:function(t,e,i){var n=i(974);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("4c0188c8",n,!0,{})},1011:function(t,e,i){var n=i(984);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("3afd6f7c",n,!0,{})},1012:function(t,e,i){var n=i(985);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("1b702841",n,!0,{})},1015:function(t,e,i){var n=i(988);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("21492ef8",n,!0,{})},1049:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMUAAABjCAYAAAArfcQDAAAbqElEQVR4Xu2dCXgV1dnH/2dm7k1CFgRERcun1ootuG9VAUtFcalrK5+lChWthdraulf7tSU8amtdWKKoaAVlU/OoENEoawA1LIIIQlhUdggQIYHcm9xl5pzvOWdybuZO7p6b5CaZeZ48uffcM2d5z/ub933POTND4ByOBBwJhEmAOPJwJOBIIFwCMaFgjDnQOBqTsAQIISzhzBmckTiKn8Gj0wGb1h7AiQvF2LFjHWvRAZWzpbo0ZsyYpKxFJkISgiJR5e/bt68DSUtpVDsst6KiImEIEgEmEyAhhYWFin0sElH8ip49HTjaoRKns8l9q6riAhELmniQtBUgAopIEMRS+l5b8x0g0qld7bisyj61McGIBE4kUGIB0tpwkOLiYlWOiR2EaMpf2W2bA0U7VuR0N71X9Q+jgmGHxg5JMoC0FhyksKxMk0KyQ2BX/u778+LCcDg/J26edA+KU176JdC9tj6ua2Sv9fAJnibn2IGxQhIPkGjWo6XhEFBYYZAg2AGIpOwFuVkOAOnXx3ZT4lGvPyI4dqCssFghiQaI3XpEgqMlwSCTJ6928VGww2CFwK78R6sPRYQhN8ftQNJuVDrxhnrrA3GtRkG3Hk3yWKGxgiIhiQSI1XpY4WhNq0EKi4vdXDzcMkgQrBBYAbAqfZdsB4DE1apj56zzhUNjhcgKi4REApIuONJtNUhRUWkWHzIOhIRBgiAhkAB4ao8SoEdohHOy+Hfn6MwSqPcX2CzEIeTlm2lVVUBuvgmMBEVCEg8Q6VpJyxHPaqQTDFI4tSzbCkNTEFxC8SUAdV4XQbdGNcjyag4YnZCKIwCyc/VwIKqBLrnBUJoEJi/fTJMWJRIgVush3So7GLyMWHCkCwwyrrg8h1sGKwye2kYQJAQ+r0a6Ngy+z90IQpbL60DRCaHgXfYHc21W4giyA2ZaCBoLKCYkpiWxAmK1HonA0dJgkMLJc7uM+f313k46rk630ycBA4CPAdXUYPsZ6HY9aGzy+Pxr1m7ct7r8m8o6blm6BEyrwQHhFkS6WNx6cDisbpU15kjGnWquxSDPTpuX+/DwIZ70ycYpyZFAEwn4DYOV+wKBD77eUjln3lc7arIDOuOuViw4olmNROKM5oBBJhWX5d07dFCtM5COBFpJAvVBw5i979CRSW+Urq+Q1kPCwd0qaTV4e7jl4HBwq2GNNVoSDFI4o7RgzO3XchfQORwJtKYEqG4YH+w94Hli9vy12/wNrlUkOFobDPJ08YKufx16ZU1rSsOpy5GARQJ+f0Cf+P6nm8dt3f29n7tVRMuhPN6wWo1UwUjFjSLjp5Ydc/+dg6qdYXIk0JYSYIxt2Hmw+p45H6/f3Gg1gqzeV8CgeagMwhNxpeyr38mCQf4989Nuj/1mwOG2FIhTtyMBLgHGmNdT5//jpJJFH/gDuay7q55a3Sk1O58majGaAwYZV/xJ9weGXn3IGRZHAhkiAeqtDzz+wuxVr/kDOrO7U6mCkYy1IP96c2GPx0cM/j5DBOI0w5GAMBq+gP6fCe+ueIZDweGwxhmRwLCuY8jFvVStBXluVtmxDw0bVOWMhSOBTJNAnS/wz6L3V71oB6OqOnKMwcGwT9VawUjUWpCiKct63jdy4MFME4jTHkcCAGit13f3pJLVJVYw6n3BqMF3OsDgK9rHPTx8yAFnCBwJZKIEePC9q6r6qrcWVmzmbpQZfAeZ4srmsYfYGqLtr6FycS+eG5WItXCgyERNcNoUJgHGsGHm/DVD9hyq90kwVHcO5esY0eKL5rhRZMKshcf/Zdjg/c44OBLIZAn4A/qzL5Usetof1BlxZVFSay7w2eOLrKzjKO+HdKMiBd3xrAV5ZmrZCY/cOagykwXitM2RAN+pvmV35YDSFeu3EW8WlTNSissr3Ci486h1YS9WbOFA4ehTh5GArhslz85acjfRTCh4fJGIG5WstSBPTf+k19/uuHpfh5Gc05GOLAG6vbJ60JzPVm20ulHW2Sh70G2NLRKdniXjpy/rdf8dAzs8FOzoQaD2IKC6QU7o02zFYdV7wWr2gpzYDyQrN2J59LsyQMuH0vs8QAk9cy5q3azqW/A/5B4L5eQLk24j89WCVW6CcvIFEetjehDswGaw7WVQzh8B0uWYiHVwWbH9G0G6nwJy7KlJt6MlTwgaxltFr3/6Z4/qp1CzaDRrES+2iOVCdRoojM+fB/38eaBbP7juWdB03Ci/cQyJKa/nEPQpVwC+KiiXPgZ14J+blMf8XuiTLzPzXHgf1Csej6srso3klKuh/e9UkZ/Dh7rG/ZpM9wPeKjD/EcCzE/AeBqvZB/b9ZqBuj9mFnz8F9aKRTdukB6G/OgDw7IYy8J9QLx0dsU3G2ndAFzwAdO0D16glcdvdmhkYY74Va7edtWTDjmqi+agMuuNZC7sL1WmgoDtWgK6aDPWGIpCc/LCxigeF8eVM0C+nQr30ASj9fhF3nI3V00AXPwZoedBGr2py1TUWPw26ugjI6w1t5MIm7YlUQSQojHl/A133Rtz2iAzZPUF6XQTS+6dQL7knssKvfhN08eOiXa7R5REvAvrHj4F9PQ3kjF9Cu+nFxOpuxVxer/+hV2YunxbLWiC3ivKbkuwBdyIuFPnPW/NPfPTXV+1txT61SFXsSCX0138G6B6Q02+BdsukhKEIu6qfPRLqNU+FzuVXarryhQhX3QBYxdsinZzUH6THaY3nUANsw0zz+/EXQDm+X5Pzydl3QDnxzIhtDLMU+zbC+OoNEKv75coGXfOqOFe99lWQnn0Adw6gZYEUHBdTvqKvk84TclJ/VQzltAFN8gdfuRw4+i2UwU9DvWBEi4xXcwo1DLZkQvHSoYrmpyK28GRRvjcq3kxUotaiVaFgdYdgzPkdmLcKrns+iyuXZPPTr96BMf8BU1mGjIdy7m2hOmJZCuOTf4Ku/6951b97KUjXXo0KvncD9JlD4rY12Qzq9VOg9L0mLhQ8A6uvBf26GKg7CnWQ2b/gMyeK/9of1oHk94RR/hLoZ09C6f8PqP3/0Nj+2iroL5+TUPNcj3I3bDv0Kf3j5ud52/Dwly7edMa6Pfs8fCaKuHyUPxCBz0TJdYtIAXfGQcEOb4P+7h1AzQ6Qn9wM7YaXYl/RkswvC9Nn/xHsm9mAuxu03y0DyTMf3hYNCrpjJYziW0SeSPFBNEvRXIWQloLFUFql/0NQ+z8EcXV/7XLAdxja6NWiT1YokHOMGSvUHYT220UgPX+YMhTG0udAV46L2702hgIHD3tunT5v9VJuLfi6hWrZ/iFXueO5UNHiilaxFGzPKuizRwL11VAuGg110N8B0uRdMY0DmWR+6wjymRN9ys+BLt2h3TIVpOePYkJhzBsLum4y0PNcaMNLQDTxaN20H6ymEmzfOsCVC+X0gQkpLYeCHHcxEPSCbpkrYCdn3gnllMthfHiXCfLg8cCRPaCrnwc57kIoF98r0skpl5hxDnflvOY9ZPqsocCRreIcpc8VTfvI4XrpQnNy4JJHoZx2ZSiPsWgM2P7lUC4bA+XU/iAnhbt+aRdYnALrfIGnJr61aCJUN5XWgq9yJ+JCybiizaCgm0pglP5FDI565ZNQzvttzO4mmz9SYXTXGpBe/UBc2Y2DGmP2ie5ZB5LbHaRb76htM5ZNAN3yUcy2K+cPj+qD04pPTEW2z35ZlJZ+8TLo6ldAfjAI6g0TAXcX6NNuBqo3Jq1z2u3zmyhu8LWrRFmRXDdhTflkw8JHRMCujSoPm2oOnXvbXHPKt42PgG68P3l6+WiPGgiDwrr1I5oLFS/YbkFLwWCseBF02dOAKwfqja+EXXmayjTZ/OEl0I1zQDeWRB0qVvMtUPOdiBvID2L4zHknQbvuySblGJ88Brp+WmwopLsjg/MuJ0C9/H5xTlQoLCVGnH1aM01cuc1CDNA1bwLZXYGjO8y0vN7mFOt5dwOWdQflrOFNgu6QYg/7GErv8DiDxy36awPMurjr+aevwqxm8LlTAeqHdvcKkB7/08ZIAJSxL8fNWHAt0dzU6kKlI65oGSioDmP+46DrZwJ5x0P71TSQ48+KLshk80coKRQzNHe4oqxjSCjIj4dC/fnfw2ox5v4FbM8ShGIAGZxbykoVClkR8xyCUfJ7sMovof56NoxZ14mftNsXQC+5S0ytqlc/B+XUy6JKQEJBTrgUyC5ozJd3EhA4Arb1vVCadWaKHdoF/fVLzPoe3NliLmYyQ8cY2/v8jAXn26Hg93RzFypaXJFIsJ12KJi/FsYHo8C2LwGO/TG0W6eDFJwU/QqeZP5oBdFd5WC7lycj17C8YjV5a0nUxT0JhXL2CKjXPB12rl48EmzHvLRCoQx4CKjbD3LKz0C/egu0/HlxFVevKYJy9q3hgbbug/7ObcJ6kB/dCHXgo2HBtmyshKKJkLr1g3LmUNBPC0HOvAtswxRw+LUbJzZYuVIYH/4OOO5iuO6ck7KM03kiY6yu6O3FP6zzBWikuMK6pZyvbkfbNRsprkg7FPqb14AdWA9y8uVQb34VJMtyRYoglWTzp1Ow1rLiXclD7lO3PlB6m1dNedBtZaYLI92nZloK7uKJ9ZbjzzGDZM9u4dKo106AcsZVolreHn4og/4PJDsfrK4GRslosN3LRDr58e3Qbnw2rJ3BcX1EuTzQJjldwQ7vBC0fG7oQ0O0rQX5wDvQXzjatQsOipF7yJ7At7wsXTb3qiZYagmTLNSa+tegkxeem9rjCHmxboeCVcGsRK9huOShOuRzqTa+BZIWvLNt7HoIiwfzJSi7R/AlDEaPAVKHg7gn95mPQ9TPMuIcf2T2hXDAadPkzwpcnJw0E6RF7HxLjQfvWUkCvg3LFk1DPvz3UWhb0QR9vTtVq924AyesOFgFe/rv+4YNiYVLp/zcoF46Mu9iXqIzTnC8qFDLYjradvNWhEO4T9313LE3cfUoifyzB8oGHL7XH4tKti0EXPRDXfSK9B0E5J3yVl64oAvv+q5QshVx0s/aLT62qw94Ssz9s3yboMwYnpU/ab5cC3XuHzb6F4gIlC66Ht4vyokHB9m2EPuMqE8yL/ijcKnTpBW30ioyIJ0TbG9wnu6VIdBGvVS2FkLYInPlszawkAu0k8kdRkdDVPikVsmWOE2inO6agO9fAeOcGkBMvAxQDbM9KWLd58NaFFupunx9qrP7BaKB2G/jUqzzkyrtc5bb2jH5XDuO9W4Ee58B198fmMG1eCOODEREvBPo7I8B2LgwVofz0Qag/e7g5kk3ruTzQfu7NpRcSNUCDTDWyc3QmF/ESmYFqfSjM61CrTsmKQZZrAc0Rf7zZpzRbCmHdjh4U05yRpmStUFhXkWXQHJZm2/phFYOx4mXQZU+AnH4ztFvM3QRSXnw2ShvROPMkftu3AcaMhu0tUTY9NkfMzT2XUrb2+WlLr+NQpDIt20ZQmN2mm+bAKL0/icW75PI3V7jy/LaMKWQb4kHBF/5Cx5FvRawRltawyBfJUujvjQL7bi6Uyx6BOsDcPxWCwrJVPSSPXWtgFN9q1nHMadBGLghzx9Il91TLCQT02RNnfXZvu4RC2Iw9K6G/fxfgS3SbR3L5UxVsmHsRbcW5IVNrzj5Fc58S7acdCn5zkf7iuUCgGqplRToaFGzfeujFw0R+eZAf3QTt5hcTut8k0XY2J5+3zvfvl4pXFLUz9ym8y621ITBVQSdqKRKKKdK4op0O94l+swTG7N+Yu4DvWx+64htfTAEt+zvIaTdA+9Vk03rwDZJz7jKBKDgF6oDHYZSOEr+RnwyD9otnMgKMvVVHbnt34eql7SfQjqKZyW4FTyY//XYh2IF1qTIhbgNNefHu7RFguxaGZp8iNSIedPwcY8lToKsmpT3QlkGz/aYheQMTB1258gnQz18E/aLIdJn4zVHD3hX7wYyVr4Mu/YcJxqnXQb2er3PEnmpPeSASO9E/Z/GGfjsPHPBEWqfIuCnZxPqU/lyJ7E1KqNYEZ5+Y5zDoZ89ArA1UvCsUyXpTDg+g6aJCgG9KzM4HrZgLVG8Nm/0R7TGCMBYWmnk2zhYLddbVZKulSKj9lnssxJWfxwZv3yBOVYe+B3ZkN7D/y/B2nzsKdNenwOEKs4pufcydCJYNksayiaAr/mP+zi3I4CehnB5hp22ijWxGvqBuLJv0dvmvuevULhbvmtHXZp1qfPGmubUk1cNzQKw1RLuHu8k2D2ogWHR2o9+tZEG7pzzsBqXgS5cBnoaNew3tUi5+AOqgR8JaGZzyC+D7taE09doXoZz1y9B3OSXLY41YB99qwg9rTEF3lMOYcw9I99OhjZgDY9VroEvGNBbDg+jhpTDmjALbvQRKv+FQhoyNGFTTr2fDWPBX8649201cqYo9lfOqa+v/+nLJsum5qsafEpj52zxS6WQmnMPdJ8r3PmX3jLj9W0JHTh0E9SJz+ztdMx2saqO4ypM+NzW5vZTv3GVyhZq7Ht3PgnLG4CY+Od1cCnZokyiTr1cop14aJhK+t0ooe8PDDKLJS+YT7o1lxyw7sAXMCIr28d2wbPvnZhFZBSAnXyQW5Fj1HrCaXTE3FPJTeD667m2og9pszcK38Mtvzl+7fm91pJmnjNwQmAkK7rSh40ogEDTemTB98YNEcdFUp2O5dNp0naLjDo/TszaQAK3YdmDI/PKtFdHiiQy/yagNROZU2aElENCNDye8u3iUrlMGnyYsRbu8HbVDj5LTuVaTAGMssG5r5RXzP9+4PZrrJN9b0S4eXNBqknMq6rAS8NT7J7xUsuxZt57NIrlOie6OjRdPiMmOjvIwtA6rDU7HQCmrmLnw6+srDx/wE194gN0iD0PrLA9YdnSrfUqAAd6Knftv+Gj511uklQjqBiP1/I676A9ZjvfMJ2ERCGGRpNJpHrDcPlWi07eaHqz23Dtz7qoPBQgN07D8sxlgOw9Y7vQa0tkEcNTje/L198tfCboNxmec+Ao239YRCBqMW4muqvlkwEgvbmnWo/idl7Z0NlVrF/1ltfX+8S+/v3w81CDlbpOwFJYbilr0pS3OO+/ahZJ0pkbSGo9vzKslK95wGVS4TBKIRrephV/v5UDRmfQts/vKGLxVNUceeqN07UccCBlHuLMMJt0mpZv5QOUWfRGk88rgzFaUztI6ndJNFTsq7/tk+TdbBBCWOELA0fB4zFZ5ZfCz0+Yd9/DwIQc6i/CdfmacBAKeev/L7y3Z8MKBw7X+aEDw4DrZt6Lynib7ZlQxVetAkXFK0lkaxF2gjyu+q3ymbN327bpBmXSZdLc50yQthB0IuT2cvz+7oFsPZn+6OBcgfytqKkAIKIqmLOt538iBBzvLSDj9bFsJMAZfIGjM3bb30Gsfr9y8OQSD22BylonHEHYgsgM6k3GE9aWPR71+luhL5WMt2FmlQp6bVXbsQ8MGNTzrvW0F5tTeMSXAN/PpBl3p8fpKl1fs/mjzzoM1vKepAGHdGt4SQAhw/vXmwh6Pjxj8fcccDqdXrSgBgzHmZwxHKVBp6HSnLxjYWnPUt678621f7tpfXedyu8W2CisMqAO4u+TSs8Q6RJaewwLZBpMuk9VCcCDqfAFmfaL44RM8TL4FNZbblKiVEPnGFX/SnepZCtMDiktTScCvEvFf8xFXQCVBVSE8o6YqJBgImJ81M40faqDxcysOgFNVhknAcNOwfUTingcAVhDE94aZJf7Z7i5xl8kdzGF82tUfzBXuEoeCv/k0FhC8LPurgXlavDcWRRMh+ffMT7sx3a+4XSqJBIboiA0OniYBsUOSYWPlNKeFJSCVX1YjIZAWQYIgdMZtMG4Z3G5zhVrGDlbrwJ8Jy6dd/YFc1l283LGANReIZKyEyDt+atkxRwwOhUYkGKIjNqsh4RCds1gPq8ytoLTwWDjFt7IErMoeqWruEoXAsHwWIDRYhTrUgbtJEgahSzbrINylXJ3x+yM4ELGC6kQsRLJAiPxPFy/omuXViBUMt08lfq3edKP8qnCV+Gf+n7tVVkCkICQorTxWTnVtIAHuAkWqVgIgIeD/rSBICLhl8MAD7iqZ8YPOsriFCOQ2cZfktKs9qI4GBE9P1W2SfSKFM0oLst0uwsHwuTWS5fISX71pNSQcVsshOqb5SRd0CclFgtIG4+NU2YYS4DGBtXoJgIAiy7QQXm/jZ2EVsnNEEC0usA0wZAdyw6yDdJeaC0QqVkKcM6m4LK8qUK9ke10mFG6N+Ou9pKAAkHAEfPUkD3ng1sNqNaRApDVpw/Fxqm4DCUjFt1YtNu01HCGLYAHBjBlyGXAE8WDgxaRqIVIFQpz37LR5uV2y3cRT6yI5WUdJncVq8AzScgj6XaYLxS2I7LgEpQ3GxKmyjSXAld7aBOESZZtp0hrwz40gADxmOMLTAjrrkmvGDWLtoQrIzQ8wu3Xg58tpV/450iwTT7e6TM0BQpxbOHlul9wcN7GCwX+QcPDP3IJIQMT3evN7CJA2fdZuG2tGZ62+FuDxgLX7XPlDF0thDfhhWgQBQkMAzVNjwcB/l6vU/LN9HYKnyS0c6QZCQDGuuDznaPUhwsHgCRIO/llYDq+LoBvg82qka0OPJSRWUDqrbnTmfptukPUwATBRMCFANcAtggQBOIS8/AKxCMfTpGXgn6WrxD/brQNP4/uZWhoIAUXh1LLsgtwsAYQdDp7G3SoJCP8vIZGi4AF6Z1aMztr3kNJbBWABoBECgLtHQncsIPDvfDNfMjC0BhACiqKi0ixBZn4OscLB06zWwwTkKAF6hMTALUlnVQqn36YEuBsULgvTEvA0GSdIi2AHgX/nbpK0DPw/d5X4fx478P+JWAehyFGezJHKOJHC4mK3aNz+PMLBEA1vsByC4upDIcWXkPB07malUqFzTseTgLQAsmfcJZKfpTWQFiEWCJFg4Gmx4od0AyHKmzx5tUs0pts2oeQcDkFuAyB2SOygWIfYCk3HG/rO2yOrkkeTglX5ZR4eI8jP0iJEsgqpwtASQIgyC8vKtF5b80NXfTscslNWSEJXAYtF6bwq03l7blV6qxSsAFgh4J+le2QFgX+WbpLdMvDv9unWloJB9kFAIb9Y4bBajxDtDVYklhpEgqfzqk377bldsRPpCZ8xsuezQhALhERhaGkgRPnFxcWq7EhFz55hcYIdEplPWpNEBOXk6fgSsCu+tccyYJZpVosQCYRolqE1YGi0FIWFSt++fZsEzXZArB2NBkvHH36nh3YJ2JXe/rsdgmRBaE0YwqBo0pEIkNjzxILGUZ3OIYFICt9ETyoqIu6ojWURQsqZxmnWZEaEMMaElRg7dmxCU6yRrEoyFTp5O5YErNOl8XoWKWC2n5PO9YZ47Yn2ewiKaBkShSXVBjjndSwJJKL41h5nAgRNwJSWomMNjdObTJVAJkLQBIpYwnOAyVTVysx2tQeFT0RyCcURiRTk5HEk0FEk4EDRUUbS6UfaJOBAkTZROgV1FAn8PwpH1cyRJP8ZAAAAAElFTkSuQmCC"},1050:function(t,e){t.exports="data:image/png;base64,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"},1051:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAGmAQAAAAALhTz7AAAAPUlEQVR4Ae3BMQEAAADCIPuntsUuYAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCcmgABGGp3fgAAAABJRU5ErkJggg=="},1075:function(t,e,i){function n(t){i(1015)}var r=i(22)(i(952),i(1089),n,null,null);t.exports=r.exports},1077:function(t,e,i){function n(t){this.$style=i(995)}var r=i(22)(i(954),i(1087),n,null,null);t.exports=r.exports},1078:function(t,e,i){function n(t){this.$style=i(1012)}var r=i(22)(i(955),i(1109),n,null,null);t.exports=r.exports},1079:function(t,e,i){function n(t){this.$style=i(1011)}var r=i(22)(i(956),i(1107),n,null,null);t.exports=r.exports},1080:function(t,e,i){function n(t){this.$style=i(1001)}var r=i(22)(i(957),i(1095),n,null,null);t.exports=r.exports},1087:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.wrap},[i("video",{ref:"video",class:t.$style.video,attrs:{id:t.id,"webkit-playsinline":"",playsinline:"",poster:t.poster,preload:t.preload}},[t._v("\n    Sorry, your browser doesn't support embedded videos.\n  ")])])},staticRenderFns:[]}},1089:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-bar"},[i("a",{staticClass:"icon-round iconfont",attrs:{href:"javascript:;"},on:{click:t.back}},[t._v("")]),t._v(" "),i("a",{staticClass:"icon-round iconfont",attrs:{href:"javascript:;"},domProps:{innerHTML:t._s(t.shareIcon)},on:{click:t.share}})])},staticRenderFns:[]}},1095:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.wrap},[i("svg",{attrs:{height:"100%",version:"1.1",viewBox:"0 0 22 22"}},t._l(t.svgList,function(t,e){return i("svg",{key:e,attrs:{x:t.x,y:t.y,index:e}},[i("circle",{ref:"circle",refInFor:!0,attrs:{index:e,cx:"4",cy:"4",r:"2"}})])}),0)])},staticRenderFns:[]}},1107:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.wrap},[i("video",{ref:"video",class:t.$style.video,attrs:{poster:t.poster,"webkit-playsinline":"",playsinline:"",preload:t.preload}},[t._v("\n    Sorry, your browser doesn't support embedded videos.\n  ")])])},staticRenderFns:[]}},1109:function(t,e){t.exports={render:function(){var t,e,i,n,r=this,o=r.$createElement,a=r._self._c||o;return a("div",{ref:"playerWrap",class:[r.$style.wrap,(t={},t[r.$style.userInActive]=r.isUserInActive,t)],on:{mousemove:r.mouseMoveHandler,click:r.videoClick}},[a("div",{class:r.$style.videoWrap},[r.options?[r.options.isEncrypt?a("EncryptVideoPlayer",{class:r.$style.video,attrs:{options:r.options},on:{inited:r.playerInited}}):a("VideoPlayer",{class:r.$style.video,attrs:{options:r.options},on:{inited:r.playerInited}})]:r._e()],2),r._v(" "),r.title?a("div",{class:[r.$style.title]},[r._v("当前播放: "+r._s(r.title))]):r._e(),r._v(" "),r.loading?a("Loading"):r._e(),r._v(" "),r.paused&&r.isShowBigPlayBtn?a("div",{class:r.$style.bigPlayBtn,on:{click:function(t){return t.stopPropagation(),r.play(t)}}},[a("div",{class:["iconfont",r.$style.bigPlayIcon]},[r._v("")])]):r._e(),r._v(" "),a("div",{class:r.$style.controlMask,on:{click:function(t){t.stopPropagation()}}}),r._v(" "),a("div",{class:[r.$style.controlWrap],on:{click:function(t){t.stopPropagation()}}},[a("div",{class:r.$style.left},[a("div",{class:r.$style.playIcon,on:{click:function(t){return t.stopPropagation(),r.togglePlay(t)}}},[r.paused?[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 16 32"}},[a("path",{attrs:{d:"M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"}})])]:[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 17 32"}},[a("path",{attrs:{d:"M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"}})])]],2),r._v(" "),a("div",{class:r.$style.time},[r._v(r._s(r.thumbTime)),a("span",{class:r.$style.duration},[r._v(" / "+r._s(r.durationTime))])])]),r._v(" "),a("div",{class:r.$style.right},[a("div",{class:r.$style.quality},[a("span",{class:r.$style.current,on:{click:function(t){return t.stopPropagation(),r.openQualityList(t)}}},[r._v(r._s(r.quality.name))]),r._v(" "),a("ul",{class:[r.$style.qualityList,(e={},e[r.$style.on]=r.isShowQualityList,e)]},r._l(r.qualityList,function(t,e){var i;return a("li",{key:e,class:[r.$style.item,(i={},i[r.$style.active]=t.type===r.quality.type,i)],on:{click:function(e){return e.stopPropagation(),r.switchQuality(t)}}},[r._v("\n            "+r._s(t.name)+"\n          ")])}),0)]),r._v(" "),a("div",{class:r.$style.rate,on:{click:function(t){return t.stopPropagation(),r.openRateList(t)}}},[a("span",{class:r.$style.current},[r._v(r._s(r.rate)+"x")]),r._v(" "),a("ul",{class:[r.$style.rateList,(i={},i[r.$style.on]=r.isShowRateList,i)]},r._l(r.rateList,function(t,e){var i;return a("li",{key:e,class:[r.$style.item,(i={},i[r.$style.active]=t===r.rate,i)],on:{click:function(e){return e.stopPropagation(),r.switchRate(t)}}},[r._v("\n            "+r._s(t)+"x\n          ")])}),0)]),r._v(" "),a("div",{class:["iconfont",r.$style.fullScreenIcon],on:{click:function(t){return t.stopPropagation(),r.toggleFullScreen(t)}}},[a("span",[r._v("")])])]),r._v(" "),a("div",{ref:"progressBarWrap",class:r.$style.barWrap},[a("div",{ref:"touchTime",class:[r.$style.time,(n={},n[r.$style.on]=r.isShowTouchTime,n)]},[r._v(r._s(r.touchTime))]),r._v(" "),a("div",{class:r.$style.bar},[a("div",{class:r.$style.loaded,style:{width:r.loadedPercentage}}),r._v(" "),a("div",{ref:"played",class:r.$style.played,style:{width:r.thumbPercentage}},[a("span",{class:r.$style.tooltip})])])])]),r._v(" "),r.isShowQualityTip?[a("div",{class:r.$style.qualityTip},[r._v("\n      正在为您切换到 "),a("span",{class:r.$style.quality},[r._v(r._s(r.quality.name))]),r._v(" , 请稍后...\n    ")])]:r._e()],2)},staticRenderFns:[]}},1228:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(i(218),i(65)),r=i(146);e.default={props:["requestUrl","id","source"],computed:{count:function(){return 2e3-this.comment.length}},data:function(){return{requesting:!1,comment:""}},mounted:function(){this.$refs.textarea.focus()},methods:{checkCommentEmpty:function(){return!!this.comment.trim()||(n.a.error("留言不能为空"),!1)},checkComment:function(){return!(this.count<0)||(n.a.error("留言内容过长，请删减后重试"),!1)},submit:function(){var t=this;this.requesting||this.checkCommentEmpty()&&this.checkComment()&&r.a.post(this.requestUrl,{aid:this.id,comment_content:this.comment,source:this.source||""}).then(function(e){200===e.status&&0===e.data.code?(n.a.success("留言提交成功"),t.$emit("success"),t.comment="",t.requesting=!1):e.data.error&&-2e3===e.data.error.code?n.a.login():(n.a.parseError("main",e),t.requesting=!1)}).catch(function(t){console.log(t)})},cancel:function(){this.$emit("hide")}}}},1342:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(43),r=i.n(n),o=i(99),a=i.n(o),s=i(218),l=i(65),c=i(219),u=i(702),d=i.n(u),h=i(654),f=i.n(h),p=i(782),m=i.n(p),g=i(821),v=i.n(g),y=i(621),b=i(1894),_=i.n(b),x=i(1075),w=i.n(x),k=i(634),E=i.n(k),A=i(787),T=i.n(A),S=i(797),R=i.n(S);e.default={created:function(){var t=this;this.id=this.$route.params.id||l.a.getQueryString(window.location.href,"id"),this.vid=this.$route.params.vid?Number(this.$route.params.vid):1;var e=window.localStorage.getItem("VdPlayerQuality");this.quality=/[a-z]{2}/i.test(e)?e:"SD",this.requestInfo().then(function(e){t.requestArticleList(),l.a.canNotifyApp()&&l.a.notifyApp({type:"course:data",data:e})}),window.addEventListener("resize",function(e){t.videoItemWidth=t.$refs.detail.offsetWidth/3.05})},components:{TopNav:f.a,SubBottom:m.a,CommentItem:d.a,VideoPlayer:v.a,CommentBox:_.a,NavBar:w.a,RichContent:T.a,BreadCrumb:R.a},data:function(){return{id:0,vid:0,data:{},currentArticle:{},liked:!1,likeCount:0,title:"",commentRequestUrl:s.a.timeServer+"/serv/v1/comment/store",videoList:[],iconTrial:i(1849),videoItemWidth:0,currentIndex:-1,comments:[],isShowCover:!1,isNativeVideoListReady:!1,isShowCommentBox:!1,isInApp:l.a.isInApp(),payUrl:s.a.timeServer+"/serv/v1/column/subscribe",params:{cid:this.$route.params.id},isInAndroidApp:l.a.isInAndroidApp(),isIphoneXSeries:l.a.isIphoneXSeries(),shareSaleCode:l.a.getQueryString(window.location.href,"code"),iOSAppSwitch:l.a.getQueryString(window.location.href,"switch"),lastSyncTime:(new Date).valueOf(),videoHeight:0,quality:1,commentCount:0,notesList:[]}},beforeDestroy:function(){l.a.isInApp()&&document.removeEventListener("notify",this.notifyHandler)},mounted:function(){var t=this;this.videoItemWidth=this.$refs.detail.offsetWidth/3.05,this.$nextTick(function(){t.videoHeight=t.$refs.video.offsetHeight}),l.a.isInApp()&&document.addEventListener("notify",this.notifyHandler),l.a.isInApp()&&!l.a.isInAndroidApp()&&window.addEventListener("resize",this.resizeHandler)},computed:a()({},i.i(c.a)({loginUser:"loginUser"}),{isBottomShow:function(){return!l.a.isInApp()},videoListStyle:function(){return{scrollLeft:"300px"}},videoItemStyle:function(){return{width:this.videoItemWidth+"px"}},isShowPlayer:function(){return!l.a.isInApp()||l.a.ltAndroidVersion("1.0.13")},videoStyle:function(){return{position:l.a.isInAndroidApp()?"fixed":"relative"}},infoStyle:function(){return{marginTop:l.a.isInAndroidApp()?this.videoHeight+"px":0}},showContent:function(){var t=/^<p>无<\/p>/;return!(!this.currentArticle||!this.currentArticle.article_content||t.test(this.currentArticle.article_content))},canNote:function(){return!(!this.loginUser||!l.a.gteqIOSVersion("1.1.6")&&!l.a.gteqAndroidVersion("1.0.11"))},hadJoinGroupon:function(){return!!this.data.groupbuy&&this.data.groupbuy.had_join}}),methods:{requestInfo:function(){var t=this;return new r.a(function(e,i){t.$http.post(s.a.timeServer+"/serv/v1/column/intro",{cid:t.id}).then(function(n){200===n.status&&0===n.data.code?(t.data=n.data.data,t.title=n.data.data.column_title,t.price=n.data.data.column_price,document.title="极客时间 | "+t.title,e(n.data.data)):(l.a.parseError(n),i(n))})})},requestArticleList:function(){var t=this;y.a.getArticles(this.id,0,"earliest",200).then(function(e){var i=e.list.filter(function(t){return 0!==Number(t.chapter_id)});if(t.videoList=t.videoListAdapter(i),1===t.vid)t.currentIndex=0;else{var n=i.findIndex(function(e){return Number(e.id)===Number(t.vid)});t.currentIndex=n>-1?n:0}t.refreshing=!1}).catch(function(e){t.refreshing=!1,console.log(e)})},requestArticleData:function(t){this.requestArticleDetail(t),this.requestComments(t)},requestArticleDetail:function(t){var e=this;y.a.getArticle({id:t}).then(function(i){e.currentArticle=i,console.log("currentArticle---\x3e",i),i.video_id&&i.video_id.length>0?i.column_had_sub||i.article_could_preview?e.videoList[e.currentIndex].media="ACCESS":e.videoList[e.currentIndex].media="FORBIDDEN":e.videoList[e.currentIndex].media=i.video_media?JSON.parse(i.video_media):e.data.had_sub?"VIDEOERROR":"FORBIDDEN",e.videoList[e.currentIndex].sku=i.sku,e.videoList[e.currentIndex].aid=t,e.videoList[e.currentIndex].sourceType=1,e.currentIndex=e.currentIndex,e.shareConfig(),(!e.isNativeVideoListReady||l.a.ltIOSVersion("1.1.7")||l.a.ltAndroidVersion("1.0.13"))&&(e.isNativeVideoListReady=!0,l.a.notifyApp({type:"video:videolist",data:e.videoList,index:e.currentIndex})),e.liked=i.had_liked,e.likeCount=i.like_count,(l.a.gteqIOSVersion("1.1.6")||l.a.gteqAndroidVersion("1.0.11"))&&e.getNoteList(t)}).catch(function(t){e.videoList[e.currentIndex].media="FORBIDDEN",l.a.canNotifyApp()&&l.a.notifyApp({type:"video:videolist",data:e.videoList,index:e.currentIndex})})},shareConfig:function(){var t=this.currentArticle.article_sharetitle,e=this.data.column_subtitle,i=this.data.author_header,n="https://time.geekbang.org/course/detail/"+this.id+"-"+this.currentArticle.id;l.a.isInWeixin()?l.a.shareInWeixin({timelineTitle:t,messageTitle:t,desc:e,img:i,url:n}):l.a.isInApp()&&l.a.canNotifyApp()&&l.a.notifyApp({type:"share-info",data:{title:t,description:e,weiboMessage:t,link:n,img:i}})},videoListAdapter:function(t){var e=[];return t.forEach(function(t,n){e.push({id:t.id,cover:i(1051),media:t.video_media?JSON.parse(t.video_media):"",title:t.article_title,encryptVideoId:t.video_id,trial:t.article_could_preview,totalSecond:t.video_total_seconds||0,played:t.video_play_seconds||0})}),e},requestComments:function(t){var e=this;y.a.getArticleComments(t).then(function(t){e.comments=t.list,e.commentCount=t.page.count}).catch(function(t){})},switchVideo:function(t){this.currentIndex=t,(l.a.gteqIOSVersion("1.1.7")||l.a.gteqAndroidVersion("1.0.13"))&&l.a.notifyApp({type:"video:index",index:this.currentIndex})},switchQuality:function(t){this.quality=t,window.localStorage.setItem("VdPlayerQuality",t)},notifyHandler:function(t){try{var e={};switch(t.detail.type){case"video:index":this.currentIndex=t.detail.data.index;break;case"login:success":window.location.reload();break;case"video:progress":this.loginUser&&(e.id=this.videoList[this.currentIndex].id,e.second=t.detail.data*this.videoList[this.currentIndex].totalSecond,this.updateStudyProgress(e));break;case"video:ended":this.loginUser&&(e.id=this.videoList[this.currentIndex].id,e.second=t.detail.data*this.videoList[this.currentIndex].totalSecond,this.syncStudyProgressNow(e));break;case"note:success":this.getNoteList(this.vid)}}catch(t){console.log(t)}},updateStudyProgress:function(t){if(this.loginUser){var e=(new Date).valueOf();e-this.lastSyncTime>2e4&&(this.lastSyncTime=e,y.a.syncStudyProgress(t.id,t.second,3))}},syncStudyProgressNow:function(t){this.loginUser&&y.a.syncStudyProgress(t.id,t.second,3)},subscribe:function(){if(this.loginUser)if(l.a.isInApp()&&l.a.canNotifyApp())l.a.notifyApp({type:"sub:paybox:show",data:this.data});else{var t=this.generatePayData();E.a.set("orderInfo",t,{domain:".geekbang.org"}),window.location.href="https://cashier.geekbang.org/payment"}else l.a.login()},generatePayData:function(){var t={list:[{count:1,image:this.data.column_cover,name:this.data.column_title,sku:this.data.column_sku,price:{sale:this.data.column_price}}],invoice:!1,app_id:3,cid:this.data.id,isFromTime:!0,detail_url:l.a.getQueryString(window.location.href,"redirect")||"https://time.geekbang.org/column/detail/"+this.data.id+"-"+this.vid};return this.shareSaleCode&&(t.shareSaleCode=this.shareSaleCode),this.$route.query.utm_term&&(t.utm_term=this.$route.query.utm_term),t},praise:function(){this.likeRequesting||(this.likeRequesting=!0,this.liked?this.unlike(this.currentArticle.id):this.like(this.currentArticle.id))},like:function(t){var e=this;y.a.likeArticle(t,"article","course").then(function(t){e.likeRequesting=!1,e.liked=!0,e.likeCount+=1}).catch(function(t){e.likeRequesting=!1,l.a.parseError(t)})},unlike:function(t){var e=this;y.a.unlikeArticle(t,"article","course").then(function(t){e.likeRequesting=!1,e.liked=!1,e.likeCount-=1}).catch(function(t){e.likeRequesting=!1,l.a.parseError(t)})},comment:function(){l.a.isInApp()&&l.a.canNotifyApp()?l.a.notifyApp({type:"jump",path:"views/comment.js",data:{id:this.currentArticle.id,source:"course"}}):this.jumpComment()},jumpComment:function(){var t="c8"!==this.currentArticle.product_type||"c9"!==this.currentArticle.product_type;console.log(t),null==this.loginUser?l.a.login():l.a.isPC()?(this.$ga.sendPv("/fake/web_comment_button/click"),window.open("https://time.geekbang.org/column/article/comment?id="+this.vid+"&&source=course&&url="+window.location.href+"&isSyncXingQiu="+t)):this.$router.push({name:"Comment",query:{id:this.vid,source:"course",url:window.location.href,isSyncXingQiu:t}})},videoSwitchHandler:function(t){this.currentIndex=t.index},switchIntro:function(){if(l.a.isInApp()&&l.a.canNotifyApp())l.a.jumpCourseIntro(this.id);else{var t="/course/intro/"+this.id;this.shareSaleCode&&(t=l.a.addUrlParam(t,"code",this.shareSaleCode)),this.data.had_sub&&(t=l.a.addUrlParam(t,"had_sub",1)),this.$router.push(t)}},backHandler:function(){l.a.isInApp()&&l.a.canNotifyApp()?l.a.notifyApp({type:"back",data:{url:window.location.href}}):window.history.back()},shareHandler:function(){var t=this.currentArticle.article_sharetitle,e=this.data.column_subtitle,i=this.data.author_header,n="https://time.geekbang.org/course/detail/"+this.id+"-"+this.currentArticle.id;l.a.notifyApp({type:"share-now",data:{title:t,description:e,weiboMessage:t,link:n,img:i}})},addNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((t=t.trim())&&this.loginUser){var i=this.currentArticle;l.a.isInApp()&&l.a.canNotifyApp()&&l.a.notifyApp({type:"addnote",data:{type:this.data.column_type||3,cid:i.cid||this.id,article_id:i.id||this.vid,part:t,index:e}})}},getNoteList:function(t){var e=this;y.a.getNoteByAid(t).then(function(t){e.notesList=t}).catch(function(t){console.log("get notes list error",t)})},shareContent:function(t){(t=t.trim())&&l.a.isInApp()&&l.a.notifyApp({type:"poster:notify",data:{username:this.loginUser.nick,avatar:this.loginUser.avatar,time:Date.now(),part:t}})},computedScrollPos:function(t){var e=this;setTimeout(function(){e.$refs.videoList.scrollLeft=(e.videoItemWidth+15)*(t-1)},300)},resizeHandler:function(){this.computedScrollPos(this.currentIndex)},checkGroupbuyProgress:function(){l.a.isInApp()?l.a.notifyApp({type:"jump",path:"views/join_groupbuy.js",data:{code:this.data.groupbuy.join_code}}):this.$router.push("/groupon/"+this.data.groupbuy.join_code)}},watch:{currentIndex:function(t,e){this.computedScrollPos(t),this.vid=this.videoList[t].id,this.$router.push("/course/detail/"+this.id+"-"+this.vid),this.vid&&this.requestArticleData(this.vid)}}}},1343:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(65),r=i(1950),o=i.n(r),a=i(1951),s=i.n(a);e.default={name:"courseDetail",components:{DetailOld:o.a,DetailMobile:s.a},data:function(){return{isLt240AppVersion:n.a.ltIOSVersion("2.4.0")||n.a.ltAndroidVersion("2.4.0")}}}},1344:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(43),r=i.n(n),o=i(225),a=i.n(o),s=i(220),l=i.n(s),c=i(99),u=i.n(c),d=i(65),h=i(219),f=i(702),p=i.n(f),m=i(654),g=i.n(m),v=i(1078),y=i.n(v),b=i(621),_=i(634),x=i.n(_),w=i(711),k=i.n(w);e.default={components:{TopNav:g.a,CommentItem:p.a,GkPlayer:y.a,RichContent:k.a},data:function(){return{isPC:d.a.isPC(),columnId:0,vid:0,cacheData:{},column:{},currentVideo:{},videoList:[],currentIndex:-1,comments:[],shareSaleCode:d.a.getQueryString(window.location.href,"code"),lastSyncTime:(new Date).valueOf(),quality:{},trialTime:"",videoPlaySeconds:0,qualityType:window.localStorage.getItem("GkPlayerQuality")?window.localStorage.getItem("GkPlayerQuality").toLowerCase():"sd",commentCount:0,freeVideo:!1,columnCouldSub:!0,columnHadSub:!1,hadJoinGroupBuy:!1,couldGroupBuy:!1,groupCode:null,groupCount:0,groupPrice:0,couponRecomend:null,hasMoreComments:!1,hasExpandSummaryBtn:!1,hasExpandAuthorIntroBtn:!1,isShowAllSummay:!1,isShowAllAuthorIntro:!1,isShowColumnIntro:!1,isShowCurrentPlayLeft:!1,isShowCurrentPlayRight:!1,isShowHint:!1,hadShowHint:!1,isShowBuyTip:!1,isShowReplayTip:!1,isVideoError:!1,isWifi:!0,requesting:!1,isIgnoreWifiTips:JSON.parse(window.localStorage.getItem("ignoreWifiTips")),videoItemWidth:160,ratio:parseInt(Math.min(2,window.devicePixelRatio||1)),videoConfig:null,videoStyle:null,timer:null}},created:function(){var t=this;this.columnId=this.$route.params.id||d.a.getQueryString(window.location.href,"id"),this.vid=this.$route.params.vid?Number(this.$route.params.vid):1,d.a.isInWeixin()&&window.wx&&window.wx.ready(function(){window.wx.getNetworkType({success:function(e){t.isWifi="wifi"===e.networkType}})}),this.requestColumn().then(function(){t.useData()}),this.requestArticleList().then(function(){t.useData()})},mounted:function(){var t=this.$refs.playerWrap.offsetWidth*(9/16);this.videoStyle={height:t+"px"},document.addEventListener("resize",this.resize),document.addEventListener("scroll",this.scrollHandler,!1)},beforeDestory:function(){document.removeEventListener("resize",this.resize),document.removeEventListener("scroll",this.scrollHandler,!1)},computed:u()({},i.i(h.a)({loginUser:"loginUser"})),watch:{currentIndex:function(t,e){this.scrollToCurrent(t),this.vid=this.videoList[t].id,this.vid&&(this.resetComponentData(),this.$router.replace("/course/detail/"+this.columnId+"-"+this.vid),this.requestArticleRelated())}},methods:{useData:function(){var t=this,e=void 0;if(this.cacheData.requestColumn){e=this.cacheData.requestColumn,this.column=e,this.columnCouldSub=e.is_onborad,this.columnHadSub=e.had_sub;var i=e.groupbuy||{};this.couldGroupBuy=i.could_groupbuy,this.hadJoinGroupBuy=i.had_join,this.groupCount=i.success_ucount,this.groupPrice=i.price,this.groupCode=i.join_code,document.title="极客时间 | "+e.column_title,this.loginUser&&this.columnCouldSub&&!this.columnHadSub&&!this.couldGroupBuy&&this.requestCoupon()}if(this.cacheData.requestArticleList){e=this.cacheData.requestArticleList,this.videoList=e.list.filter(function(t){return 0!==Number(t.chapter_id)});var n=this.videoList.findIndex(function(e){return Number(e.id)===Number(t.vid)});this.currentIndex=n>-1?n:0}this.cacheData.requestArticle&&(e=this.cacheData.requestArticle,this.currentVideo=e,this.freeVideo=e.article_could_preview,this.currentVideo.aid=this.vid,this.currentVideo.sourceType=1,this.videoPlaySeconds=e.video_play_seconds||0,this.mediaHandler(e),this.shareConfig(),this.$nextTick(function(){t.hasExpandSummaryBtn=d.a.isRealHeightMoreThanVisibleHeight(t.$refs.summary,t.currentVideo.article_content)}),this.initPlayer()),this.cacheData.requestComments&&(e=this.cacheData.requestComments,this.comments=[].concat(l()(this.comments),l()(e.list)),this.commentCount=e.page.count,this.hasMoreComments=e.page.more),this.cacheData={}},resize:function(){var t=this.$refs.playerWrap.offsetWidth*(9/16);this.videoStyle={height:t+"px"}},mediaHandler:function(t){t.column_had_sub||this.freeVideo?this.isPC?(this.currentVideo.isEncrypt=!0,this.currentVideo.encryptId=t.video_id,this.currentVideo.media={hd:{},sd:{},ld:{}}):(this.currentVideo.isEncrypt=!1,this.currentVideo.media=t.video_media_map):t.video_preview&&Array.isArray(t.video_preview)?this.currentVideo.media="VIDEOERROR":(this.currentVideo.media=t.video_preview||{},this.qualityType=a()(this.currentVideo.media)[0])},scrollHandler:function(){var t=this;clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(function(){t.loadMore()},100)},loadMore:function(t){Math.max(document.body.scrollTop,document.documentElement.scrollTop)>=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)-window.innerHeight-50&&this.requestMoreComments()},initPlayer:function(){var t=this,e=this.currentVideo;if(this.isShowBuyTip=!1,this.isVideoError=!1,"FORBIDDEN"===e.media)this.isShowBuyTip=!0;else if("VIDEOERROR"===e.media)this.isVideoError=!0;else{var i=window.localStorage.getItem("GkPlayerRate")||"1.0",n=this.generateQualityList(),r=e.media&&e.media[this.qualityType]&&e.media[this.qualityType].url;this.quality=n.find(function(e){return e.type===t.qualityType}),this.videoConfig={title:this.currentVideo.article_title,quality:this.quality,isEncrypt:this.currentVideo.isEncrypt,encryptId:this.currentVideo.encryptId,aid:this.currentVideo.aid,sourceType:this.currentVideo.sourceType,playedSeconds:this.videoPlaySeconds,poster:e.video_cover,rate:i,source:r,qualityList:n}}},switchVideo:function(t,e){e!==this.currentIndex&&(this.isShowHint=!1,this.hadShowHint=!1,this.isShowCurrentPlayLeft=!1,this.isShowCurrentPlayRight=!1,this.currentIndex=e,this.videoConfig=null)},switchQuality:function(t){window.localStorage.setItem("GkPlayerQuality",t)},switchRate:function(t){window.localStorage.setItem("GkPlayerRate",t)},videoTimeUpdate:function(t){this.hadShowHint||this.setAutoHide(t),this.updateStudyProgress({id:this.currentVideo.aid,second:t.playedSeconds})},videoEnded:function(t){this.videoConfig=null,this.videoPlaySeconds=0,this.columnHadSub||this.freeVideo?this.currentIndex===this.videoList.length-1?this.isShowReplayTip=!0:this.currentIndex++:this.isShowBuyTip=!0,this.syncStudyProgressNow({id:this.currentVideo.aid,second:0})},videoReplay:function(){var t=this;this.isShowReplayTip=!1,this.videoPlaySeconds=0,this.$nextTick(function(){t.initPlayer()})},continuePlay:function(){this.isIgnoreWifiTips=!0,this.$refs.player.play()},ignoreWifiTips:function(){window.localStorage.setItem("ignoreWifiTips",!0),this.isIgnoreWifiTips=!0,this.$refs.player.play()},setAutoHide:function(t){var e=this;if(!this.currentVideo.column_had_sub&&!this.freeVideo){clearTimeout(this.timer);var i=t.duration,n=Math.floor(i%60),r=n>0?n+"秒":"";this.isShowHint=!0,this.hadShowHint=!0,this.trialTime=i<60?Math.floor(i)+"秒":Math.floor(i/60)+"分钟"+r,this.timer=setTimeout(function(){e.isShowHint=!1},5e3)}},resetComponentData:function(){this.currentVideo={},this.commentCount=0,this.comments=[]},updateStudyProgress:function(t){if(this.loginUser){var e=(new Date).valueOf();e-this.lastSyncTime>2e4&&(this.lastSyncTime=e,b.a.syncStudyProgress(t.id,t.second,3))}},syncStudyProgressNow:function(t){this.loginUser&&b.a.syncStudyProgress(t.id,t.second,3)},subscribe:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.loginUser)return void d.a.login();var e=this.generatePayData(t);x.a.set("orderInfo",e,{domain:".geekbang.org"}),window.location.href="https://cashier.geekbang.org/payment"},generatePayData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={list:[{count:1,image:this.column.column_cover,name:this.column.column_title,sku:this.column.column_sku,price:{sale:this.column.column_price}}],invoice:!1,app_id:3,cid:this.column.id,isFromTime:!0,detail_url:d.a.getQueryString(window.location.href,"redirect")||"https://time.geekbang.org/course/detail/"+this.column.id+"-"+this.vid};return 2===t&&(e.list[0].price.sale=this.groupPrice,e.groupBuy={is_host:!0}),this.shareSaleCode&&(e.shareSaleCode=this.shareSaleCode),this.$route.query.utm_term&&(e.utm_term=this.$route.query.utm_term),e},writeComment:function(){var t="c8"!==this.currentVideo.product_type||"c9"!==this.currentVideo.product_type;if(!this.loginUser)return void d.a.login();this.$router.push({name:"Comment",query:{id:this.vid,source:"course",url:window.location.href,isSyncXingQiu:t}})},toggleSummary:function(){this.isShowAllSummay=!this.isShowAllSummay},toggleAuthorIntro:function(){this.isShowAllAuthorIntro=!this.isShowAllAuthorIntro},videoListScrollHandler:function(t){var e=this.$refs.wrap,i=this.$refs.videoItem[this.currentIndex],n=i.getBoundingClientRect(),r=e.clientWidth,o=n.left-e.offsetLeft;o<-160?this.isShowCurrentPlayLeft=!0:o>r?this.isShowCurrentPlayRight=!0:(this.isShowCurrentPlayLeft=!1,this.isShowCurrentPlayRight=!1)},scrollToCurrent:function(t){var e=this;setTimeout(function(){e.$refs.videoList.scrollLeft=(e.videoItemWidth+15)*(t-1)},300)},backToCurrentVideoLeft:function(){var t=this.$refs.videoItem[this.currentIndex],e=t.offsetLeft;this.$refs.videoList.scrollLeft=e},backToCurrentVideoRight:function(){var t=this.$refs.wrap,e=this.$refs.videoItem[this.currentIndex],i=e.offsetLeft-t.clientWidth+e.offsetWidth;this.$refs.videoList.scrollLeft=i},login:function(){d.a.login()},goGroupon:function(){this.$router.push("/groupon/"+this.groupCode)},goGroupRule:function(){this.$router.push("/rules/groupon")},goCoupon:function(){window.location.href="https://account.geekbang.org/dashboard/coupon"},joinStudy:function(){this.subscribe()},openColumnIntro:function(){var t=this;this.isShowColumnIntro=!0,this.$nextTick(function(){t.hasExpandAuthorIntroBtn=d.a.isRealHeightMoreThanVisibleHeight(t.$refs.authorTitle,t.column.author_intro)}),this.$refs.videoList.style.overflow="hidden"},closeColumnIntro:function(){this.isShowColumnIntro=!1,this.$refs.videoList.style.overflow="auto"},calColumnIntroHeight:function(){var t=this;return new r.a(function(e,i){for(var n=t.$refs.columnIntro,r=n.querySelectorAll("img"),o=r.length,a=0,s=0;s<r.length;s++){r[s].addEventListener("load",function(){if(++a===o){var t=n.offsetHeight;return e(t)}})}})},generateQualityList:function(){var t=this.currentVideo.media,e=[],i={};for(var n in t){var r=t[n],o={type:n,url:r.url,size:r.size};switch(n){case"ld":i=u()({},o,{name:"普清",order:0});break;case"sd":i=u()({},o,{name:"标清",order:1});break;case"hd":i=u()({},o,{name:"高清",order:2})}e.push(i)}return e.sort(function(t,e){return e.order-t.order})},shareConfig:function(){var t=this.currentVideo.article_sharetitle,e=this.column.column_subtitle,i=this.column.author_header,n="https://time.geekbang.org/course/detail/"+this.columnId+"-"+this.currentVideo.id;d.a.isInWeixin()&&d.a.shareInWeixin({timelineTitle:t,messageTitle:t,desc:e,img:i,url:n})},requestArticleRelated:function(t){var e=this;this.requestArticle(t).then(function(){e.useData()}),this.requestComments(t).then(function(){e.useData()})},requestColumn:function(){var t=this;return new r.a(function(e,i){b.a.getColumnInfo(t.columnId,!0).then(function(i){t.cacheData.requestColumn=i,e()}).catch(function(t){console.log(t)})})},requestArticleList:function(){var t=this;return new r.a(function(e){b.a.getArticles(t.columnId,0,"earliest",200,!1).then(function(i){t.cacheData.requestArticleList=i,e()}).catch(function(t){console.log(t)})})},requestArticle:function(){var t=this;return new r.a(function(e,i){b.a.getArticle({id:t.vid}).then(function(i){t.cacheData.requestArticle=i,e(i)}).catch(function(e){d.a.parseError(e),t.currentVideo.media="FORBIDDEN"})})},requestMoreComments:function(t){var e=this;if(this.hasMoreComments&&!this.requesting){this.requesting=!0;var i=this.comments.length>0?this.comments[this.comments.length-1].score:0;this.requestComments(i).then(function(){e.useData(),e.requesting=!1})}},requestComments:function(t){var e=this;return t=t||0,new r.a(function(i){b.a.getArticleComments(e.vid,t).then(function(t){e.cacheData.requestComments=t,i()}).catch(function(t){console.log(t)})})},requestCoupon:function(){var t=this;return new r.a(function(e,i){b.a.getCoupons({sku:t.column.column_sku,price:t.column.column_price}).then(function(e){e.recommend&&e.recommend.code&&(t.couponRecomend=e.recommend)}).catch(function(t){console.log(t)})})}}}},1389:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._25cqyH-D_0{max-width:750px;margin:0 auto}._56KiEMXd_0{position:relative;width:100%;background:#000;overflow:hidden}._56KiEMXd_0 ._3veKltQy_0{position:absolute;z-index:10;left:0;bottom:50px;padding:2px 20px;font-size:12px;font-weight:400;color:#fff;background:rgba(0,0,0,.6);border-radius:0 12px 12px 0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);-webkit-transition:-webkit-transform .3s ease;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}._56KiEMXd_0 ._3veKltQy_0.q1dg-qEU_0{-webkit-transform:translateZ(0);transform:translateZ(0)}._56KiEMXd_0 ._3p864erw_0{position:absolute;z-index:10;top:0;left:0;width:100%;height:100%;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#000}._56KiEMXd_0 ._3p864erw_0 ._3nxLoHx6_0{color:#fa8919;cursor:pointer}._56KiEMXd_0 ._3p864erw_0 ._3n-RzMEh_0{margin-top:20px;font-size:14px;font-weight:400;color:#fff;background:#fa8919;padding:.3rem 1.5rem;border-radius:5px;cursor:pointer}._56KiEMXd_0 ._3p864erw_0 ._1xS8aIl4_0{font-size:40px;cursor:pointer}._56KiEMXd_0 ._1aZk_lcQ_0 ._1ZL0mUU-_0{width:160px;line-height:20px;text-align:center}._56KiEMXd_0 ._1aZk_lcQ_0 ._3t37Oshr_0{margin-top:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:200px}._56KiEMXd_0 ._1aZk_lcQ_0 ._3t37Oshr_0 ._1LvSwIJB_0,._56KiEMXd_0 ._1aZk_lcQ_0 ._3t37Oshr_0 ._29tTsYd7_0{font-size:14px;font-weight:400;padding:2px 10px;background:#fa8919;cursor:pointer}._38zlilu2_0{background:#fff}._38zlilu2_0 ._2i2klQV__0{position:relative;padding:16px 0 6px 20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}._38zlilu2_0 ._2i2klQV__0 ._1PSgy0gU_0{max-width:300px;font-size:20px;color:#404040}._38zlilu2_0 ._2i2klQV__0 ._1ifqWM06_0{position:absolute;top:20px;right:20px;font-size:12px;color:#b2b2b2;-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;cursor:pointer}._38zlilu2_0 ._2i2klQV__0 ._1ifqWM06_0._3ZGa1-7U_0{-webkit-transform:rotate(270deg);transform:rotate(270deg)}._38zlilu2_0 ._2NLeRnRT_0{padding-left:20px;line-height:25px;font-size:15px;font-weight:400;color:#4c4c4c}._38zlilu2_0 ._1fAY5-KW_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:20px;color:#888;font-size:12px;font-weight:400}._38zlilu2_0 ._1fAY5-KW_0 .I-xpAFyI_0{margin-left:20px}._38zlilu2_0 ._1fAY5-KW_0 ._1nSwuFAm_0{font-size:10px}._38zlilu2_0 ._1fAY5-KW_0 ._27yP89wS_0{margin-left:3px}._2rRcbVfc_0{position:relative;height:auto}._1uHEoL3H_0{position:relative;width:100%;margin-top:10px;margin-bottom:20px}._1uHEoL3H_0 ._1gtPcnO0_0,._1uHEoL3H_0 ._6OVXawio_0{position:absolute;z-index:2;top:-8px;cursor:pointer}._1uHEoL3H_0 ._1gtPcnO0_0 img,._1uHEoL3H_0 ._6OVXawio_0 img{width:98px;height:50px}._1uHEoL3H_0 ._6OVXawio_0{left:0}._1uHEoL3H_0 ._1gtPcnO0_0{right:0}._3JVQc9Vz_0{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-top:20px;padding-bottom:10px;overflow:auto;-webkit-overflow-scrolling:touch}._3JVQc9Vz_0,._3JVQc9Vz_0 .nmGf6AAh_0{display:-webkit-box;display:-ms-flexbox;display:flex}._3JVQc9Vz_0 .nmGf6AAh_0{position:relative;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px;width:160px;padding:0 15px;height:70px;text-align:center;font-size:12px;color:#4c4c4c;background:#f6f7fb;border-radius:3px;overflow:hidden;-ms-flex-negative:0;flex-shrink:0;line-height:16px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:border .5s ease;transition:border .5s ease;cursor:pointer}._3JVQc9Vz_0 .nmGf6AAh_0.nqNVTStp_0{color:#fa8919}._3JVQc9Vz_0 .nmGf6AAh_0 ._1vfH0ukZ_0{position:absolute;top:3px;right:3px;padding:0 4px;font-size:10px;font-weight:400;-webkit-transform:scale(.9);transform:scale(.9);color:#fff;background:#fa8919;border-radius:2px}._3JVQc9Vz_0 .nmGf6AAh_0 ._23TI7HyN_0{font-size:13px;font-weight:500}._3QHt8QF-_0{position:relative;padding:20px 20px 40px;border-top:.5px solid #e8e8e8}._3QHt8QF-_0 ._23TI7HyN_0{font-size:18px;font-weight:600;color:#494949}._3QHt8QF-_0 ._2fnXHfPT_0{height:87px;color:#4c4c4c;font-size:16px;font-weight:400;white-space:normal;word-break:normal;line-height:1.6;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}._3QHt8QF-_0 ._2fnXHfPT_0._38dXpfpA_0{height:100%;overflow:auto;-webkit-line-clamp:unset}._3kN_d1Ee_0{padding:32px 22px 100px;border-top:10px solid #f6f7fb;-webkit-transition:border-top .3s ease;transition:border-top .3s ease;position:relative}._3kN_d1Ee_0 h2{color:#353535;position:relative;z-index:1;margin-bottom:1rem;font-weight:700;font-size:19px}._3kN_d1Ee_0 ._2fW1rM7W_0{font-size:16px;margin-left:5px}._3kN_d1Ee_0 ._3A6Fx3uv_0{position:absolute;z-index:2;background:#fa8919;font-size:13px;color:#fff;text-align:center;height:28px;width:80px;line-height:28px;-webkit-box-shadow:4px 5px 20px 1px rgba(250,137,25,.24);box-shadow:4px 5px 20px 1px rgba(250,137,25,.24);border-radius:28px;right:22px;top:32px;cursor:pointer}._3kN_d1Ee_0 ._1WDvq981_0{font-size:15px;color:#888;line-height:24px;border-left:3px solid #e8e8e8;padding-left:15px}._1EKDPMty_0{position:fixed;bottom:0;left:0;right:0;height:50px;z-index:20;cursor:pointer}._1EKDPMty_0._3RWrS3Nc_0{left:50%;max-width:750px;-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}._1EKDPMty_0 ._2QPCJtXs_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;height:50px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fa8919;color:#fff;font-weight:500;font-size:15px}._1EKDPMty_0 ._2QPCJtXs_0,._1EKDPMty_0 ._2QPCJtXs_0 ._2fW1rM7W_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}._1EKDPMty_0 ._2QPCJtXs_0 ._2fW1rM7W_0{font-size:18px;margin-left:5px}._1EKDPMty_0 ._2QPCJtXs_0 ._2fW1rM7W_0 ._1ZL0mUU-_0{margin-right:6px}._1EKDPMty_0 ._2QPCJtXs_0 ._2fW1rM7W_0 ._2Nt_Nmcb_0{font-size:18px}._1EKDPMty_0 ._2QPCJtXs_0 ._2E0_nrNa_0{text-decoration:line-through;font-size:14px;font-weight:300;margin-left:6px;margin-top:2px}._1EKDPMty_0 ._3Dp3Mt34_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;color:#888;font-size:15px;font-weight:500}._1EKDPMty_0 ._3Dp3Mt34_0 ._2fW1rM7W_0{font-size:18px;color:#fa8919;margin-left:5px}._1EKDPMty_0 ._7cRsMoH-_0{height:50px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#b2b2b2;color:#fff;font-size:15px;font-weight:400}._1EKDPMty_0 ._1JkB29jV_0,._1EKDPMty_0 ._3t37Oshr_0,._1EKDPMty_0 ._7cRsMoH-_0{display:-webkit-box;display:-ms-flexbox;display:flex}._1EKDPMty_0 ._1JkB29jV_0{background:#f2f2f2;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:23px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:-23px;left:0;right:0;font-size:12px;color:#888}._1EKDPMty_0 ._1JkB29jV_0 .gP89RkJ8_0{color:#fa8919}._1EKDPMty_0 ._1JkB29jV_0 ._1ifqWM06_0{margin-top:-2px;font-size:12px;-webkit-transform:scale(.7);transform:scale(.7)}.GH-F2cOy_0{position:absolute;z-index:2;top:0;left:0;width:100%;padding-bottom:50px;border-top:.5px solid #e8e8e8;background:#fff}._2alYNRBc_0{position:relative;margin-bottom:10px;padding:26px 20px 30px}._2alYNRBc_0 ._1zMf3tsG_0{font-size:19px;font-weight:600;color:#353535}._2alYNRBc_0 ._1LvaZxHk_0{display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:12px;margin-bottom:6px}._2alYNRBc_0 ._1LvaZxHk_0 img{width:50px;height:50px;border-radius:50%;padding:3px;-ms-flex-negative:0;flex-shrink:0}._2alYNRBc_0 .uCevc4xc_0{margin-left:6px;padding-top:10px}._2alYNRBc_0 .uCevc4xc_0 ._2uiOedh7_0{font-size:17px;font-weight:600;color:#353535}._2alYNRBc_0 .uCevc4xc_0 ._1cO-NNPS_0{margin-top:6px;font-size:13px;font-weight:400;color:#4c4c4c;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}._2alYNRBc_0 .uCevc4xc_0 ._1cO-NNPS_0._38dXpfpA_0{overflow:auto;-webkit-overflow-scrolling:touch;-webkit-line-clamp:unset}._383HzEPP_0{padding:40px 20px 20px;background:#fff;border-top:10px solid #f6f7fb}._1Vf3CCAj_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;bottom:4px;right:20px;font-size:13px;font-weight:500;color:#b2b2b2;cursor:pointer}._1Vf3CCAj_0 .nqNVTStp_0{-webkit-transform:rotate(180deg);transform:rotate(180deg)}._1P2S00sx_0,._35PIQpHZ_0{-webkit-transition:all .3s;transition:all .3s}.f3zq0Ska_0,.hf9RJUU8_0{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}",""]),e.locals={wrap:"_25cqyH-D_0",playerWrap:"_56KiEMXd_0",hint:"_3veKltQy_0",show:"q1dg-qEU_0",tipWrap:"_3p864erw_0",loginBtn:"_3nxLoHx6_0",joinBtn:"_3n-RzMEh_0",bigPlayIcon:"_1xS8aIl4_0",noWifiTip:"_1aZk_lcQ_0",text:"_1ZL0mUU-_0",btnWrap:"_3t37Oshr_0",btnPlay:"_29tTsYd7_0",btnIgnore:"_1LvSwIJB_0",courseInfo:"_38zlilu2_0",courseInfoTop:"_2i2klQV__0",courseTitle:"_1PSgy0gU_0",arrowIcon:"_1ifqWM06_0",open:"_3ZGa1-7U_0",courseSubTitle:"_2NLeRnRT_0",courseInfoBottom:"_1fAY5-KW_0",subCount:"I-xpAFyI_0",peopleIcon:"_1nSwuFAm_0",count:"_27yP89wS_0",contentWrap:"_2rRcbVfc_0",videoListWrap:"_1uHEoL3H_0",currentPlayLeft:"_6OVXawio_0",currentPlayRight:"_1gtPcnO0_0",videoList:"_3JVQc9Vz_0",videoItem:"nmGf6AAh_0",on:"nqNVTStp_0",flag:"_1vfH0ukZ_0",title:"_23TI7HyN_0",summaryWrap:"_3QHt8QF-_0",summary:"_2fnXHfPT_0",showAll:"_38dXpfpA_0",articleComments:"_3kN_d1Ee_0",num:"_2fW1rM7W_0",writeComment:"_3A6Fx3uv_0",emptyCommentTip:"_1WDvq981_0",bottom:"_1EKDPMty_0",pc:"_3RWrS3Nc_0",oBtn:"_2QPCJtXs_0",price:"_2Nt_Nmcb_0",delete:"_2E0_nrNa_0",wBtn:"_3Dp3Mt34_0",gBtn:"_7cRsMoH-_0",tip:"_1JkB29jV_0",strong:"gP89RkJ8_0",columnIntro:"GH-F2cOy_0",columnCard:"_2alYNRBc_0",columnTitle:"_1zMf3tsG_0",columnTeacher:"_1LvaZxHk_0",columnTeacherInfo:"uCevc4xc_0",author:"_2uiOedh7_0",authorTitle:"_1cO-NNPS_0",richContent:"_383HzEPP_0",expandBtn:"_1Vf3CCAj_0",fadeEnterActive:"_35PIQpHZ_0",fadeLeaveActive:"_1P2S00sx_0",fadeEnter:"hf9RJUU8_0",fadeLeaveTo:"f3zq0Ska_0"}},1487:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._9SUWDeN1_1{padding-left:22px;padding-right:22px}._22RMzl0N_1{padding-top:32px;padding-bottom:20px;border-top:10px solid #f6f7fb;-webkit-transition:border-top .3s ease;transition:border-top .3s ease;position:relative}._22RMzl0N_1 h2{color:#353535;position:relative;z-index:1;margin-bottom:1rem;font-weight:700;font-size:19px}._22RMzl0N_1 .BGwg9CCN_1{font-size:16px;margin-left:5px}._3fU8gYHX_1{position:absolute;z-index:2;background:#fa8919;font-size:13px;color:#fff;text-align:center;height:28px;width:80px;line-height:28px;-webkit-box-shadow:4px 5px 20px 1px rgba(250,137,25,.24);box-shadow:4px 5px 20px 1px rgba(250,137,25,.24);border-radius:28px;right:22px;top:32px}._1KBHGBxN_1{font-size:15px;color:#888;line-height:24px;border-left:3px solid #e8e8e8;padding-left:15px}",""]),e.locals={pd:"_9SUWDeN1_1",articleComments:"_22RMzl0N_1",num:"BGwg9CCN_1",writeComment:"_3fU8gYHX_1",emptyCommentTip:"_1KBHGBxN_1"}},1513:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".comment-box[data-v-53fea32c]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;padding-bottom:.6875rem;background:#fff}.comment-box .comment-box-input[data-v-53fea32c]{width:100%;height:9.375rem;font-size:15.25px;placeholder-color:#888;line-height:1.5rem;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .5rem;padding-top:.5rem;border:1px solid #e8e8e8}.comment-box .comment-box-counter[data-v-53fea32c]{text-align:right;color:#888;font-size:11px}.comment-box .warning[data-v-53fea32c]{color:#fa8919}.comment-box .button-cancel[data-v-53fea32c],.comment-box .button-primary[data-v-53fea32c]{width:100%}.comment-box .button-cancel[data-v-53fea32c]{margin-top:1rem}",""])},1537:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,'.course-detail[data-v-d51bbe10]{max-width:46.25rem;margin:0 auto;background:#f5f5f5}.course-detail .course-main[data-v-d51bbe10]{background-color:#fff;width:100%;z-index:10;top:0;left:0}.course-detail .course-info[data-v-d51bbe10]{background:#fff;cursor:pointer}.course-detail .course-info .course-info-top[data-v-d51bbe10]{padding:1rem 0 .4rem .78125rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.course-detail .course-info .course-info-top h1[data-v-d51bbe10]{font-size:1.03125rem;font-weight:400;text-align:justify-content}.course-detail .course-info .course-info-top i[data-v-d51bbe10]{font-weight:400;width:40px;padding-right:.78125rem;-ms-flex-negative:0;flex-shrink:0;text-align:right;color:#dadada}.course-detail .course-info .course-info-bottom[data-v-d51bbe10]{padding:0 54px .5rem .78125rem;border-bottom:1px solid #e8e8e8;color:#888;font-size:.78125rem}.course-detail .course-info .course-info-bottom .icon-course-play[data-v-d51bbe10]{color:#d9d9d9;font-size:.75rem}.course-detail .video-list[data-v-d51bbe10]{background:#fff;width:100%;overflow:hidden;overflow:auto;-webkit-overflow-scrolling:touch}.course-detail .video-list ul[data-v-d51bbe10]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:.875rem 0}.course-detail .video-list ul li[data-v-d51bbe10]{margin-left:.71875rem;position:relative;border:1px solid #e8e8e8;border-radius:3px;display:-webkit-box;display:-ms-flexbox;display:flex;height:4.0625rem;overflow:hidden;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;font-size:.78125rem;-ms-flex-negative:0;flex-shrink:0;line-height:1rem;-webkit-transition:border .5s ease;transition:border .5s ease}.course-detail .video-list ul li img[data-v-d51bbe10]{width:1.78125rem;height:.84375rem;position:absolute;top:0;left:0}.course-detail .video-list ul li a[data-v-d51bbe10]{-webkit-transition:color .5s ease;transition:color .5s ease;padding:0 .5rem}.course-detail .video-list ul li a[data-v-d51bbe10]:link,.course-detail .video-list ul li a[data-v-d51bbe10]:visited{color:#353535}.course-detail .video-list ul li.on[data-v-d51bbe10]{border-color:#fa8919}.course-detail .video-list ul li.on a[data-v-d51bbe10]:link,.course-detail .video-list ul li.on a[data-v-d51bbe10]:visited{color:#fa8919}.article-title[data-v-d51bbe10]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-d51bbe10]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-d51bbe10]{margin-top:1.0625rem}.audio-player[data-v-d51bbe10]{width:100%;margin:20px 0}.content-box[data-v-d51bbe10]{padding:1px 1.3125rem;background-color:#fff;margin-top:.46875rem}.to-comment[data-v-d51bbe10]{overflow:hidden;padding-top:20px;margin:0 1.3125rem -10px}.to-comment a.button-primary[data-v-d51bbe10]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.extra[data-v-d51bbe10]{margin-top:.46875rem;margin-bottom:120px;background:#fff;position:relative}.extra .video-comment-box[data-v-d51bbe10]{position:absolute;width:100%;top:0;left:0;z-index:3;-webkit-box-sizing:border-box;box-sizing:border-box;background:#fff;padding-left:1rem;padding-right:1rem;padding-top:.5rem}.extra .video-comment-box h3[data-v-d51bbe10]{color:#353535;font-size:.875rem;line-height:2rem;font-weight:400}.extra .comments[data-v-d51bbe10]{margin:0 1.3125rem;padding-bottom:50px}.extra .comments h2[data-v-d51bbe10]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:14px}.extra .comments h2[data-v-d51bbe10]:before{border-top:1px dotted #e8e8e8;content:"";position:absolute;top:50%;left:0;width:100%;z-index:-1}.extra .comments h2 span[data-v-d51bbe10]{font-size:15.25px;font-weight:400;padding:16px 1rem;background:#fff;display:inline-block}.extra .comments .no-comment[data-v-d51bbe10]{text-align:center}.extra .comments .no-comment i.icon-cat[data-v-d51bbe10]{color:#f5f5f5;font-size:100px;line-height:1.2;margin-right:12px}.extra .comments .no-comment .no-comment-text[data-v-d51bbe10]{color:#e8e8e8;font-size:12.5px;line-height:1.6}.bottom[data-v-d51bbe10]{position:fixed;bottom:0;left:0;width:100%;height:67px;background:#fff;background-color:#f5f5f5;z-index:10}.bottom .buy-join[data-v-d51bbe10],.bottom[data-v-d51bbe10]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.bottom .buy-join[data-v-d51bbe10]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:48px;line-height:48px}.bottom .buy-join span[data-v-d51bbe10]{line-height:48px;margin-left:5px;color:hsla(0,0%,100%,.5);font-size:11px;text-decoration:line-through}.bottom .button-cancel[data-v-d51bbe10]{height:51px;line-height:51px}.bottom-control[data-v-d51bbe10],.bottom-sub[data-v-d51bbe10]{width:100%;-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 1.3125rem}.bottom-control .item[data-v-d51bbe10],.bottom-control[data-v-d51bbe10],.bottom-sub .item[data-v-d51bbe10],.bottom-sub[data-v-d51bbe10]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-direction:normal}.bottom-control .item[data-v-d51bbe10],.bottom-sub .item[data-v-d51bbe10]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.bottom-control .item i[data-v-d51bbe10],.bottom-sub .item i[data-v-d51bbe10]{color:#353535;font-size:1.125rem;line-height:1.5rem}.bottom-control .item span[data-v-d51bbe10],.bottom-sub .item span[data-v-d51bbe10]{color:#888;font-size:11px}.bottom-control .buy-join[data-v-d51bbe10],.bottom-sub .buy-join[data-v-d51bbe10]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:48px;line-height:48px}.bottom-control .buy-join span[data-v-d51bbe10],.bottom-sub .buy-join span[data-v-d51bbe10]{line-height:48px;margin-left:5px;color:hsla(0,0%,100%,.5);font-size:11px;text-decoration:line-through}.button-subscribe[data-v-d51bbe10]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:69px;color:#fff;font-size:15.25px;text-align:center;background-color:#fa8919;line-height:69px;border-radius:5px}.article-sub-bottom[data-v-d51bbe10]{z-index:2}.isIphoneXSeries .bottom[data-v-d51bbe10],.isIphoneXSeries .comments[data-v-d51bbe10]{padding-bottom:34px}@media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3){.bottom[data-v-d51bbe10],.comments[data-v-d51bbe10]{padding-bottom:34px}}@media (max-width:769px){.course-detail .breadcrumb[data-v-d51bbe10]{padding:10px}}@media screen and (min-width:768px){.extra .comments[data-v-d51bbe10],.to-comment[data-v-d51bbe10]{margin:0 0 -10px}}',""])},1544:function(t,e,i){var n=i(1389);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("2cce748a",n,!0,{})},1642:function(t,e,i){var n=i(1487);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("7c6adae2",n,!0,{})},1668:function(t,e,i){var n=i(1513);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("299b7c7e",n,!0,{})},1692:function(t,e,i){var n=i(1537);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("4168037d",n,!0,{})},1849:function(t,e){t.exports="data:image/png;base64,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"},1894:function(t,e,i){function n(t){i(1668)}var r=i(22)(i(1228),i(2052),n,"data-v-53fea32c",null);t.exports=r.exports},1950:function(t,e,i){function n(t){i(1692),this.$style=i(1642)}var r=i(22)(i(1342),i(2125),n,"data-v-d51bbe10",null);t.exports=r.exports},1951:function(t,e,i){function n(t){this.$style=i(1544)}var r=i(22)(i(1344),i(1983),n,null,null);t.exports=r.exports},1983:function(t,e,i){t.exports={render:function(){var t,e,n,r,o,a,s=this,l=s.$createElement,c=s._self._c||l;return c("div",{ref:"wrap",class:[s.$style.wrap]},[c("TopNav"),s._v(" "),c("div",{ref:"playerWrap",class:s.$style.playerWrap,style:s.videoStyle},[s.videoConfig?c("GkPlayer",{ref:"player",attrs:{config:s.videoConfig},on:{switchQuality:s.switchQuality,switchRate:s.switchRate,timeupdate:s.videoTimeUpdate,ended:s.videoEnded}}):s._e(),s._v(" "),c("div",{class:[s.$style.hint,(t={},t[s.$style.show]=s.isShowHint,t)]},[s._v("付费课程，可试看"+s._s(s.trialTime))]),s._v(" "),s.isWifi||s.isIgnoreWifiTips?s.isShowBuyTip?[c("div",{class:s.$style.tipWrap},[c("p",[s._v("试看结束，可继续试看其他视频或加入学习")]),s._v(" "),s.loginUser?s._e():c("p",[s._v("若已购买，请 "),c("span",{class:s.$style.loginBtn,on:{click:s.login}},[s._v("登录")])]),s._v(" "),s.hadJoinGroupBuy?[c("div",{class:s.$style.joinBtn,on:{click:s.goGroupon}},[s._v("查看拼团进度")])]:[c("div",{class:s.$style.joinBtn,on:{click:s.joinStudy}},[s._v("加入学习")])]],2)]:s.isShowReplayTip?[c("div",{class:[s.$style.tipWrap]},[c("div",{class:["iconfont",s.$style.bigPlayIcon],on:{click:s.videoReplay}},[s._v("")]),s._v(" "),c("p",[s._v("重新播放")])])]:s.isVideoError?[c("div",{class:s.$style.tipWrap},[c("p",[s._v("视频资源获取失败")])])]:s._e():[c("div",{class:[s.$style.tipWrap,s.$style.noWifiTip]},[c("div",{class:s.$style.text},[s._v("当前为非 Wi-Fi 环境，继续播放会被运营商收取流量费用")]),s._v(" "),c("div",{class:s.$style.btnWrap},[c("div",{class:s.$style.btnPlay,on:{click:s.continuePlay}},[s._v("继续播放")]),s._v(" "),c("div",{class:s.$style.btnIgnore,on:{click:s.ignoreWifiTips}},[s._v("不再提示")])])])]],2),s._v(" "),c("div",{ref:"contentWrap",class:s.$style.contentWrap},[s.column.id?c("div",{class:s.$style.courseInfo},[c("div",{class:s.$style.courseInfoTop},[c("h2",{class:s.$style.courseTitle},[s._v(s._s(s.column.column_title))]),s._v(" "),c("div",{class:["iconfont",s.$style.arrowIcon],on:{click:s.openColumnIntro}},[s._v("")])]),s._v(" "),c("div",{class:s.$style.courseInfoBottom},[c("div",[s._v("共"+s._s(s.column.column_unit)+" · "+s._s(s.column.update_frequency))]),s._v(" "),c("div",{class:s.$style.subCount},[c("span",{class:["iconfont",s.$style.peopleIcon]},[s._v("")]),s._v(" "),c("span",{class:s.$style.count},[s._v(s._s(s.column.sub_count))])])])]):s._e(),s._v(" "),c("div",{class:s.$style.videoListWrap},[s.isShowCurrentPlayLeft?[c("div",{class:s.$style.currentPlayLeft,on:{click:s.backToCurrentVideoLeft}},[c("img",{attrs:{src:i(1049),alt:""}})])]:s.isShowCurrentPlayRight?[c("div",{class:s.$style.currentPlayRight,on:{click:s.backToCurrentVideoRight}},[c("img",{attrs:{src:i(1050),alt:""}})])]:s._e(),s._v(" "),c("div",{ref:"videoList",class:s.$style.videoList,on:{scroll:function(t){return t.preventDefault(),s.videoListScrollHandler(t)}}},s._l(s.videoList,function(t,e){var i;return c("div",{key:e,ref:"videoItem",refInFor:!0,class:[s.$style.videoItem,(i={},i[s.$style.on]=s.currentIndex===e,i)],on:{click:function(i){return s.switchVideo(t,e)}}},[!t.column_had_sub&&t.article_could_preview?c("div",{class:s.$style.flag},[s._v("免费")]):s._e(),s._v(" "),c("div",{class:s.$style.title,attrs:{title:t.article_title}},[s._v(s._s(s._f("cutStr")(t.article_title,32)))])])}),0)],2),s._v(" "),c("div",{class:s.$style.summaryWrap},[c("div",{class:s.$style.title},[s._v("本节摘要")]),s._v(" "),c("div",{ref:"summary",class:[s.$style.summary,(e={},e[s.$style.showAll]=s.isShowAllSummay,e)]},[c("RichContent",{attrs:{content:s.currentVideo.article_content},on:{"update:content":function(t){return s.$set(s.currentVideo,"article_content",t)}}})],1),s._v(" "),s.hasExpandSummaryBtn?c("div",{class:s.$style.expandBtn,on:{click:function(t){return t.stopPropagation(),s.toggleSummary(t)}}},[c("span",[s._v(s._s(s.isShowAllSummay?"收起":"展开"))]),s._v(" "),c("div",{class:["iconfont",(n={},n[s.$style.on]=s.isShowAllSummay,n)]},[s._v("")])]):s._e()]),s._v(" "),c("div",{ref:"commentWrap",class:[s.$style.articleComments]},[s.currentVideo.column_had_sub||!s.currentVideo.sku||s.currentVideo.article_could_preview?c("div",{class:["iconfont",s.$style.writeComment],on:{touchstart:function(t){t.stopPropagation()},click:s.writeComment}},[s._v(" 写留言")]):s._e(),s._v(" "),s.comments.length>0?[c("h2",[c("span",[s._v("精选留言")]),c("span",{class:s.$style.num},[s._v("("+s._s(s.commentCount)+")")])]),s._v(" "),c("ul",s._l(s.comments,function(t,e){return c("CommentItem",{key:e,attrs:{data:t}})}),1)]:[s._m(0),s._v(" "),c("div",{class:s.$style.emptyCommentTip},[s._v("由作者筛选后的优质留言将会公开显示，欢迎踊跃留言。")])]],2),s._v(" "),s.column.had_sub?s._e():c("div",{class:[s.$style.bottom,(r={},r[s.$style.pc]=s.isPC,r)]},[s.columnCouldSub?s.column.column_price_market>s.column.column_price?[s.couponRecomend?c("div",{class:s.$style.tip,on:{click:s.goCoupon}},[s._v("你有可用礼券，"),c("span",{class:s.$style.strong},[s._v("订阅立减 ¥"+s._s(s._f("columnPrice")(s.couponRecomend.amount)))]),s._v("，"),c("span",[s._v("查看礼券")])]):s._e(),s._v(" "),c("div",{class:s.$style.oBtn,on:{click:function(t){return s.subscribe(1)}}},[c("span",{class:s.$style.num},[c("span",{class:s.$style.text},[s._v("限时")]),s._v(" "),c("span",{class:s.$style.price},[s._v("¥"+s._s(s._f("columnPrice")(s.column.column_price)))])]),s._v(" "),c("span",{class:s.$style.delete},[s._v("¥"+s._s(s._f("columnPrice")(s.column.column_price_market)))])])]:s.hadJoinGroupBuy?[c("div",{class:s.$style.oBtn,on:{click:s.goGroupon}},[s._v("已参与拼团，查看拼团进度")])]:s.couldGroupBuy?s.hadJoinGroupBuy?s._e():[c("div",{class:s.$style.tip,on:{click:s.goGroupRule}},[s._v("限时拼团"),c("span",{class:s.$style.strong},[s._v("立省 ¥"+s._s(s._f("columnPrice")(s.column.column_price_market-s.groupPrice)))]),s._v("，"),c("span",[s._v("查看拼团规则")]),c("span",{class:[s.$style.arrowIcon,"iconfont"]},[s._v("")])]),s._v(" "),c("div",{class:s.$style.btnWrap},[c("div",{class:s.$style.wBtn,on:{click:function(t){return s.subscribe(1)}}},[s._v("单独订阅"),c("span",{class:s.$style.num},[s._v("¥"+s._s(s._f("columnPrice")(s.column.column_price_market)))])]),s._v(" "),c("div",{class:s.$style.oBtn,on:{click:function(t){return s.subscribe(2)}}},[s._v(s._s(s.groupCount)+"人成团"),c("span",{class:s.$style.num},[s._v("¥"+s._s(s._f("columnPrice")(s.groupPrice)))])])])]:[s.couponRecomend?c("div",{class:s.$style.tip,on:{click:s.goCoupon}},[s._v("你有可用礼券，"),c("span",{class:s.$style.strong},[s._v("订阅立减 ¥"+s._s(s._f("columnPrice")(s.couponRecomend.amount)))]),s._v("，"),c("span",[s._v("查看礼券")])]):s._e(),s._v(" "),c("div",{class:s.$style.oBtn,on:{click:function(t){return s.subscribe(1)}}},[c("span",{class:s.$style.num},[c("span",{class:s.$style.text},[s._v(s._s(s.column.is_preorder?"预售":"订阅"))]),c("span",{class:s.$style.price},[s._v("¥"+s._s(s._f("columnPrice")(s.column.column_price)))])])])]:[c("div",{class:s.$style.gBtn},[s._v("已下架")])]],2),s._v(" "),c("transition",{attrs:{name:"fade","enter-class":s.$style.fadeEnter,"enter-active-class":s.$style.fadeEnterActive,"leave-active-class":s.$style.fadeLeaveActive,"leave-to-class":s.$style.fadeLeaveTo}},[s.isShowColumnIntro?c("div",{ref:"columnIntro",class:s.$style.columnIntro},[c("div",{class:s.$style.courseInfo},[c("div",{class:s.$style.courseInfoTop},[c("h2",{class:s.$style.courseTitle},[s._v(s._s(s.column.column_title))]),s._v(" "),c("div",{class:["iconfont",s.$style.arrowIcon,s.$style.open],on:{click:s.closeColumnIntro}},[s._v("")])]),s._v(" "),c("div",{class:s.$style.courseSubTitle},[s._v(s._s(s.column.article_subtitle))]),s._v(" "),c("div",{class:s.$style.courseInfoBottom},[c("div",[s._v("共"+s._s(s.column.column_unit)+" · "+s._s(s.column.update_frequency))]),s._v(" "),c("div",{class:s.$style.subCount},[c("span",{class:["iconfont",s.$style.peopleIcon]},[s._v("")]),s._v(" "),c("span",{class:s.$style.count},[s._v(s._s(s.column.sub_count))])])])]),s._v(" "),c("div",{class:s.$style.columnCard},[c("h3",{class:s.$style.columnTitle},[s._v("课程讲师")]),s._v(" "),c("div",{class:s.$style.columnTeacher},[c("img",{attrs:{src:s._f("resizeImg")(s.column.author_header,50*s.ratio,50*s.ratio),alt:"avatar"}}),s._v(" "),c("div",{class:s.$style.columnTeacherInfo},[c("h3",{class:s.$style.author},[s._v(s._s(s.column.author_name))]),s._v(" "),c("p",{ref:"authorTitle",class:[s.$style.authorTitle,(o={},o[s.$style.showAll]=s.isShowAllAuthorIntro,o)]},[s._v(s._s(s.column.author_intro))])])]),s._v(" "),s.hasExpandAuthorIntroBtn?c("div",{class:s.$style.expandBtn,on:{click:function(t){return t.stopPropagation(),s.toggleAuthorIntro(t)}}},[c("span",[s._v(s._s(s.isShowAllAuthorIntro?"收起":"展开"))]),s._v(" "),c("div",{class:["iconfont",(a={},a[s.$style.on]=s.isShowAllAuthorIntro,a)]},[s._v("")])]):s._e()]),s._v(" "),c("div",{class:s.$style.richContent},[c("RichContent",{attrs:{content:s.column.column_intro},on:{"update:content":function(t){return s.$set(s.column,"column_intro",t)}}})],1)]):s._e()])],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h2",[i("span",[t._v("精选留言")])])}]}},2047:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.isLt240AppVersion?"DetailOld":"DetailMobile")},staticRenderFns:[]}},2052:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment-box"},[i("div",{staticClass:"comment-box-box"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],ref:"textarea",staticClass:"comment-box-input",attrs:{autofocus:"",placeholder:"留言将由作者筛选后显示，对所有人可见"},domProps:{value:t.comment},on:{blur:t.checkComment,input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),t.count>=0?i("span",{staticClass:"comment-box-counter"},[t._v("剩余 "+t._s(t.count))]):i("span",{staticClass:"comment-box-counter warning"},[t._v("已超出 "+t._s(Math.abs(t.count)))])]),t._v(" "),i("a",{staticClass:"button-primary",attrs:{href:"javascript:;"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),i("a",{staticClass:"button-cancel",attrs:{href:"javascript:;"},on:{click:t.cancel}},[t._v("取消")])])},staticRenderFns:[]}},2125:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"detail",class:["course-detail",t.iOSAppSwitch?"ios-app-switch":"",{isIphoneXSeries:t.isIphoneXSeries}]},[t.isInAndroidApp&&t.isShowPlayer?i("nav-bar",{on:{back:t.backHandler,share:t.shareHandler}}):t._e(),t._v(" "),i("TopNav"),t._v(" "),t.data&&t.data.id?i("bread-crumb",{staticClass:"breadcrumb",attrs:{list:[{title:"讲堂",link:"/"},{title:""+t.data.column_title}]}}):t._e(),t._v(" "),i("div",{ref:"video",class:["course-main",t.isBottomShow?"main":""],style:t.videoStyle},[t.isShowPlayer&&t.currentIndex>=0?i("video-player",{attrs:{"video-list":t.videoList,index:t.currentIndex,"login-user":t.loginUser,hadJoinGroupon:t.hadJoinGroupon,quality:t.quality},on:{"update:videoList":function(e){t.videoList=e},"update:video-list":function(e){t.videoList=e},jumpToGroupon:t.checkGroupbuyProgress,timeUpdate:t.updateStudyProgress,videoSwitch:t.videoSwitchHandler,ended:t.syncStudyProgressNow,joinStudy:t.subscribe,switchQuality:t.switchQuality}}):t._e()],1),t._v(" "),i("div",{staticClass:"course-info",style:t.infoStyle},[i("div",{staticClass:"course-info-top"},[i("h1",{staticClass:"course-title"},[t._v(t._s(t.title))]),t._v(" "),i("i",{staticClass:"iconfont",on:{click:t.switchIntro}},[t._v("")])]),t._v(" "),i("div",{staticClass:"course-info-bottom"},[i("i",{staticClass:"iconfont icon-course-play"},[t._v("")]),t._v(" "),i("span",[t._v("视频课程")]),t._v(" "),i("span",{staticStyle:{marginLeft:"10px"}},[t._v(t._s(t.data.update_frequency))])])]),t._v(" "),i("div",{ref:"videoList",staticClass:"video-list"},[i("ul",t._l(t.videoList,function(e,n){return i("li",{key:n,class:t.currentIndex==n?"on":"",style:t.videoItemStyle,on:{click:function(e){return t.switchVideo(n)}}},[!t.data.had_sub&&e.trial?i("img",{attrs:{src:t.iconTrial}}):t._e(),t._v(" "),i("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t._f("cutStr")(e.title,32)))])])}),0)]),t._v(" "),i("div",{ref:"contentBox"},[t.showContent?i("div",{staticClass:"content-box"},[i("rich-content",{staticClass:"typo common-content",attrs:{content:t.currentArticle.article_content,canNote:t.canNote,notes:t.notesList},on:{"update:content":function(e){return t.$set(t.currentArticle,"article_content",e)},note:t.addNote,share:t.shareContent}})],1):t._e()]),t._v(" "),i("div",{staticClass:"extra"},[i("div",{ref:"commentWrap",class:[t.$style.articleComments,t.$style.pd]},[t.isInApp&&t.currentArticle.article_could_preview&&!t.currentArticle.column_had_sub&&t.currentArticle.column_could_sub||!t.isInApp&&(t.currentArticle.column_had_sub||!t.currentArticle.sku||t.currentArticle.article_could_preview)?i("div",{class:["iconfont",t.$style.writeComment],on:{touchstart:function(t){t.stopPropagation()},click:t.comment}},[t._v(" 写留言")]):t._e(),t._v(" "),t.comments.length>0?[i("h2",[i("span",[t._v("精选留言")]),i("span",{class:t.$style.num},[t._v("("+t._s(t.commentCount)+")")])]),t._v(" "),i("ul",t._l(t.comments,function(t,e){return i("comment-item",{key:e,attrs:{data:t}})}),1)]:[t._m(0),t._v(" "),i("div",{class:t.$style.emptyCommentTip},[t._v("由作者筛选后的优质留言将会公开显示，欢迎踊跃留言。")])]],2)]),t._v(" "),i("div",{},[t.isInApp?[i("div",{staticClass:"bottom"},[t.data.had_sub?t.data.had_sub?i("div",{staticClass:"bottom-control"},[i("div",{staticClass:"item",on:{click:t.praise}},[i("i",{staticClass:"bottom-control-item-icon",style:{fontFamily:"iconfont",color:t.liked?"#ff5a05":"#353535"}},[t._v(t._s(t.liked?"":""))]),t._v(" "),i("span",{staticClass:"bottom-control-item-text"},[t._v(t._s(t.likeCount||0))])]),t._v(" "),i("div",{staticClass:"item",on:{click:t.comment}},[i("i",{staticClass:"bottom-control-item-icon",style:{fontFamily:"iconfont"}},[t._v("")]),t._v(" "),i("span",{staticClass:"bottom-control-item-text"},[t._v("写留言")])])]):t._e():i("div",{staticClass:"bottom-sub"},[t.data.groupbuy&&t.data.groupbuy.had_join?[i("a",{staticClass:"button-primary buy-join",attrs:{href:"javascript:void(0);"},on:{click:t.checkGroupbuyProgress}},[t._v("查看拼团进度")])]:[t.data.is_onborad?i("a",{staticClass:"iconfont button-primary buy-join",on:{click:t.subscribe}},[t._v("\n          "+t._s(t.iOSAppSwitch?"":t.data.is_preorder?"预售":t.data.column_price_market>t.data.column_price?"限时":"加入学习")+" "+t._s(t.isInApp?"":"¥")+t._s(t._f("columnPrice")(t.data.column_price))+"\n          "),t.data.column_price_market>t.data.column_price?i("span",[t._v(" "+t._s(t.isInApp?"":"¥")+t._s(t._f("columnPrice")(t.data.column_price_market))+" ")]):t._e()]):i("a",{staticClass:"button-cancel"},[t._v("已下架")])]],2)])]:t.isInApp?t._e():[t.data.had_sub?t._e():i("div",{staticClass:"bottom-sub"},[t.data.groupbuy&&t.data.groupbuy.had_join?[i("a",{staticClass:"button-primary buy-join",attrs:{href:"javascript:void(0);"},on:{click:t.checkGroupbuyProgress}},[t._v("查看拼团进度")])]:[t.data.is_onborad?i("a",{staticClass:"iconfont button-primary buy-join",on:{click:t.subscribe}},[t._v("\n            "+t._s(t.iOSAppSwitch?"":t.data.is_preorder?"预售":t.data.column_price_market>t.data.column_price?"限时":"加入学习")+" "+t._s(t.isInApp?"":"¥")+t._s(t._f("columnPrice")(t.data.column_price))+"\n            "),t.data.column_price_market>t.data.column_price?i("span",[t._v(" "+t._s(t.isInApp?"":"¥")+t._s(t._f("columnPrice")(t.data.column_price_market))+" ")]):t._e()]):i("a",{staticClass:"button-cancel"},[t._v("已下架")])]],2)]],2)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h2",[i("span",[t._v("精选留言")])])}]}},609:function(t,e,i){var n=i(22)(i(1343),i(2047),null,null,null);t.exports=n.exports},620:function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},621:function(t,e,i){"use strict";var n=i(224),r=i.n(n),o=i(99),a=i.n(o),s=i(43),l=i.n(s),c=i(146),u=i(102),d=i.n(u),h=i(65),f=i(218),p=i(623);e.a={request:function(t,e){return new l.a(function(i,n){c.a.post(t,e).then(function(t){200===t.status&&0===t.data.code?i(t.data.data):n(t)},function(t){n(t)})})},subscribe:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/column/subscribe",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},checkQrPay:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/trade/verify",{order_no:t}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},getColumnInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new l.a(function(i,n){c.a.post(f.a.timeServer+"/serv/v1/column/intro",{cid:t,with_groupbuy:e}).then(function(t){200===t.status&&0===t.data.code?i(t.data.data):n(t)}).catch(function(t){n(t)})})},getGroupBuyList:function(){return new l.a(function(t,e){c.a.post(f.a.timeServer+"/serv/v1/groupbuy/list",{}).then(function(i){200===i.status&&0===i.data.code?t(i.data.data):"-2000"===String(i.data.error.code)?h.a.login():e(i)}).catch(function(t){e(t)})})},getGroupBuyInfo:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/groupbuy/info",{code:t}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):"-2000"===String(t.data.error.code)?h.a.login():i(t)}).catch(function(t){i(t)})})},getCoupons:function(t){return new l.a(function(e,i){c.a.post("https://cashier.geekbang.org/serv/v1/coupons",{goods:[{sku:t.sku,num:1,amount:t.price}],rsp_list:!1,orderby:"discount_amount"}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):"-2000"===String(t.data.error.code)?h.a.login():i(t)}).catch(function(t){i(t)})})},checkPosterMd5:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/column/postersexist",{md5:t}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data.res_url):"-2000"===String(t.data.error.code)?h.a.login():i(t)}).catch(function(t){i(t)})})},uploadPoster:function(t,e){var n=this;return new l.a(function(e,r){var o=i.i(p.a)(t);n.checkPosterMd5(o).then(function(t){e(t)}).catch(function(i){c.a.post(f.a.timeServer+"/serv/v1/column/createposter",{file:t}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data.res_url):"-2000"===String(t.data.error.code)?h.a.login():r(t)}).catch(function(t){r(t)})})})},getChapters:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/chapters",{cid:t}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},getArticles:function(t,e,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments[5],s={};return o&&o.length>0&&(s.chapter_ids=o),new l.a(function(o,l){c.a.post(f.a.timeServer+"/serv/v1/column/articles",a()({cid:t,size:n||20,prev:e,order:i,sample:r},s)).then(function(t){200===t.status&&0===t.data.code?o(t.data.data):l(t)}).catch(function(t){l(t)})})},getNewUpdate:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/column/articles/latest",{cid:t}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},getArticle:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/article",h.a.camelCaseToUnderscore(t)).then(function(t){if(200===t.status&&0===t.data.code)e(t.data.data);else if(t.data&&t.data.error&&"-3371"===String(t.data.error.code)&&t.data.data.cid){var n=t.data.data;n.article_content=n.article_content_short,n.unavailable=!0,e(n)}else i(t)}).catch(function(t){i(t)})})},getArticleComments:function(t,e){return new l.a(function(i,n){c.a.post(f.a.timeServer+"/serv/v1/comments",{aid:t,prev:e||0}).then(function(t){200===t.status&&0===t.data.code?i(t.data.data):n(t)}).catch(function(t){n(t)})})},getRootDiscussions:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/discussion/v1/root_list",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},getChildDiscussions:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/discussion/v1/child_list",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},addDiscussion:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/discussion/v1/add",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},deleteDiscussion:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/discussion/v1/delete",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},complainDiscussion:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/discussion/v1/complain",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},postArticleComment:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/comment/store",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},likeArticle:function(t,e,i){return new l.a(function(n,r){c.a.post(f.a.timeServer+"/serv/v1/like/store",{like_obj_id:t,like_obj:e,source:i}).then(function(t){200===t.status&&0===t.data.code?n(t.data.data):r(t)}).catch(function(t){r(t)})})},unlikeArticle:function(t,e,i){return new l.a(function(n,r){c.a.post(f.a.timeServer+"/serv/v1/like/destroy",{like_obj_id:t,like_obj:e,source:i}).then(function(t){200===t.status&&0===t.data.code?n(t.data.data):r(t)}).catch(function(t){r(t)})})},syncStudyProgress:function(t,e,i){return new l.a(function(n,r){var o={};3===i&&(o.video_play_seconds=e),2===i&&(o.audio_listen_seconds=e),1===i&&(o.text_read_percent=e.position,o.text_read_version=e.version),c.a.post(f.a.timeServer+"/serv/v1/article/progress/store",a()({article_type:i,article_id:t},o)).then(function(t){200===t.status&&0===t.data.code?n(t.data.data):r(t)}).catch(function(t){r(t)})})},getSpecial:function(){return new l.a(function(t,e){d.a.get("//static001.geekbang.org/static/special/special.json?v="+ +new Date).then(function(i){200===i.status?t(i.data):e(i)}).catch(function(t){e(t)})})},getEncryptVideoPlayAuth:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v3/source_auth/video_play_auth",{source_type:t.sourceType,aid:t.aid,video_id:t.encryptVideoId}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},getGoods:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/columns",{column_type:t}).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},getAllGoods:function(){return new l.a(function(t,e){c.a.post(f.a.timeServer+"/serv/v1/column/all").then(function(i){200===i.status&&0===i.data.code?t(i.data.data):e(i)}).catch(function(t){e(t)})})},requestColumnSaleShare:function(t,e){return new l.a(function(i,n){var r={cid:t};e&&(r.ignore_poster_data=e),c.a.post(f.a.timeServer+"/serv/v1/column/sharesale",r).then(function(t){200===t.status&&0===t.data.code?i(t.data.data):n(t)}).catch(function(t){n(t)})})},addNote:function(t,e,i,n,r,o,a){return this.request(f.a.timeServer+"/serv/v1/lineshare/store",{type:t,type_id:e,article_id:i,note:n,part:r,part_index:o,ext:a})},updateNote:function(t,e){return this.request(f.a.timeServer+"/serv/v1/lineshare/update",{id:t,note:e})},reportProgress:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"read";return this.request(f.a.timeServer+"/serv/v1/column/progress/store",{column_id:t,article_id:e,action:i})},delNote:function(t){return this.request(f.a.timeServer+"/serv/v1/lineshare/delete",{id:t})},getAllNote:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.request(f.a.timeServer+"/serv/v1/lineshare/getListAll",{type:t})},getNoteMore:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return this.request(f.a.timeServer+"/serv/v1/lineshare/getListByType",{nav_id:t,prev:e,size:i})},getNoteList:function(t){return this.request(f.a.timeServer+"/serv/v1/lineshare/getListByTypeId",{type_id:t})},getNoteByAid:function(t){return this.request(f.a.timeServer+"/serv/v1/lineshare/getListByArticleId",{article_id:t})},getProducts:function(){return this.request(f.a.timeServer+"/serv/v1/my/products/all")},getProductsMore:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return this.request(f.a.timeServer+"/serv/v1/my/products/list",{nav_id:t,prev:e,size:i})},deleteComment:function(t){return new l.a(function(e,i){c.a.post(f.a.timeServer+"/serv/v1/comment/destroy",t).then(function(t){200===t.status&&0===t.data.code?e(t.data.data):i(t)}).catch(function(t){i(t)})})},getAllComments:function(){return this.request(f.a.timeServer+"/serv/v1/my/comment/products/all")},getNavCommentsMore:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return this.request(f.a.timeServer+"/serv/v1/my/comment/products",{nav_id:t,prev:e,size:i})},getColumnCommentsMore:function(t){var e,i=t.id,n=t.idName,o=t.prev,a=t.size,s=void 0===a?10:a,l=t.orderby;return this.request(f.a.timeServer+"/serv/v1/my/comments",(e={},r()(e,n,i),r()(e,"prev",o),r()(e,"size",s),r()(e,"orderby",l),e))},getCommentDetail:function(t){var e=t.id;return this.request(f.a.timeServer+"/serv/v1/comment",{id:e})},getColumnRelate:function(t){var e=t.sku,i=t.number,n=void 0===i?4:i;return this.request(f.a.timeServer+"/serv/v3/column/relate",{product_id:e,number:n})},getColumnInfoAd:function(){var t={key:"column_info_ad"};return this.request(f.a.timeServer+"/serv/v2/config/info",t)}}},623:function(t,e,i){"use strict";function n(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function r(t,e){return t<<e|t>>>32-e}function o(t,e,i,o,a,s){return n(r(n(n(e,t),n(o,s)),a),i)}function a(t,e,i,n,r,a,s){return o(e&i|~e&n,t,e,r,a,s)}function s(t,e,i,n,r,a,s){return o(e&n|i&~n,t,e,r,a,s)}function l(t,e,i,n,r,a,s){return o(e^i^n,t,e,r,a,s)}function c(t,e,i,n,r,a,s){return o(i^(e|~n),t,e,r,a,s)}function u(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var i,r,o,u,d,h=1732584193,f=-271733879,p=-1732584194,m=271733878;for(i=0;i<t.length;i+=16)r=h,o=f,u=p,d=m,h=a(h,f,p,m,t[i],7,-680876936),m=a(m,h,f,p,t[i+1],12,-389564586),p=a(p,m,h,f,t[i+2],17,606105819),f=a(f,p,m,h,t[i+3],22,-1044525330),h=a(h,f,p,m,t[i+4],7,-176418897),m=a(m,h,f,p,t[i+5],12,1200080426),p=a(p,m,h,f,t[i+6],17,-1473231341),f=a(f,p,m,h,t[i+7],22,-45705983),h=a(h,f,p,m,t[i+8],7,1770035416),m=a(m,h,f,p,t[i+9],12,-1958414417),p=a(p,m,h,f,t[i+10],17,-42063),f=a(f,p,m,h,t[i+11],22,-1990404162),h=a(h,f,p,m,t[i+12],7,1804603682),m=a(m,h,f,p,t[i+13],12,-40341101),p=a(p,m,h,f,t[i+14],17,-1502002290),f=a(f,p,m,h,t[i+15],22,1236535329),h=s(h,f,p,m,t[i+1],5,-165796510),m=s(m,h,f,p,t[i+6],9,-1069501632),p=s(p,m,h,f,t[i+11],14,643717713),f=s(f,p,m,h,t[i],20,-373897302),h=s(h,f,p,m,t[i+5],5,-701558691),m=s(m,h,f,p,t[i+10],9,38016083),p=s(p,m,h,f,t[i+15],14,-660478335),f=s(f,p,m,h,t[i+4],20,-405537848),h=s(h,f,p,m,t[i+9],5,568446438),m=s(m,h,f,p,t[i+14],9,-1019803690),p=s(p,m,h,f,t[i+3],14,-187363961),f=s(f,p,m,h,t[i+8],20,1163531501),h=s(h,f,p,m,t[i+13],5,-1444681467),m=s(m,h,f,p,t[i+2],9,-51403784),p=s(p,m,h,f,t[i+7],14,1735328473),f=s(f,p,m,h,t[i+12],20,-1926607734),h=l(h,f,p,m,t[i+5],4,-378558),m=l(m,h,f,p,t[i+8],11,-2022574463),p=l(p,m,h,f,t[i+11],16,1839030562),f=l(f,p,m,h,t[i+14],23,-35309556),h=l(h,f,p,m,t[i+1],4,-1530992060),m=l(m,h,f,p,t[i+4],11,1272893353),p=l(p,m,h,f,t[i+7],16,-155497632),f=l(f,p,m,h,t[i+10],23,-1094730640),h=l(h,f,p,m,t[i+13],4,681279174),m=l(m,h,f,p,t[i],11,-358537222),p=l(p,m,h,f,t[i+3],16,-722521979),f=l(f,p,m,h,t[i+6],23,76029189),h=l(h,f,p,m,t[i+9],4,-640364487),m=l(m,h,f,p,t[i+12],11,-421815835),p=l(p,m,h,f,t[i+15],16,530742520),f=l(f,p,m,h,t[i+2],23,-995338651),h=c(h,f,p,m,t[i],6,-198630844),m=c(m,h,f,p,t[i+7],10,1126891415),p=c(p,m,h,f,t[i+14],15,-1416354905),f=c(f,p,m,h,t[i+5],21,-57434055),h=c(h,f,p,m,t[i+12],6,1700485571),m=c(m,h,f,p,t[i+3],10,-1894986606),p=c(p,m,h,f,t[i+10],15,-1051523),f=c(f,p,m,h,t[i+1],21,-2054922799),h=c(h,f,p,m,t[i+8],6,1873313359),m=c(m,h,f,p,t[i+15],10,-30611744),p=c(p,m,h,f,t[i+6],15,-1560198380),f=c(f,p,m,h,t[i+13],21,1309151649),h=c(h,f,p,m,t[i+4],6,-145523070),m=c(m,h,f,p,t[i+11],10,-1120210379),p=c(p,m,h,f,t[i+2],15,718787259),f=c(f,p,m,h,t[i+9],21,-343485551),h=n(h,r),f=n(f,o),p=n(p,u),m=n(m,d);return[h,f,p,m]}function d(t){var e,i="",n=32*t.length;for(e=0;e<n;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i}function h(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;e<i.length;e+=1)i[e]=0;var n=8*t.length;for(e=0;e<n;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function f(t){return d(u(h(t),8*t.length))}function p(t,e){var i,n,r=h(t),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=u(r,8*t.length)),i=0;i<16;i+=1)o[i]=909522486^r[i],a[i]=1549556828^r[i];return n=u(o.concat(h(e)),512+8*e.length),d(u(a.concat(n),640))}function m(t){var e,i,n="0123456789abcdef",r="";for(i=0;i<t.length;i+=1)e=t.charCodeAt(i),r+=n.charAt(e>>>4&15)+n.charAt(15&e);return r}function g(t){return unescape(encodeURIComponent(t))}function v(t){return f(g(t))}function y(t){return m(v(t))}function b(t,e){return p(g(t),g(e))}function _(t,e){return m(b(t,e))}function x(t,e,i){return e?i?b(e,t):_(e,t):i?v(t):y(t)}e.a=x},624:function(t,e,i){"use strict";function n(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];if(!t||!t&&t.childNodes)return null;for(var o=Number(window.getComputedStyle(t).lineHeight.replace("px","")),a=0;a<t.childNodes.length;a++){var s=t.childNodes[a];if("#text"===s.nodeName)for(var l=u(s.textContent,r),c=0,d=document.createRange(),h=0;h<l.length;h++){var f=l[h].length;d.setStart(s,c),d.setEnd(s,c+f);for(var p=d.getClientRects(),m=0;m<p.length;m++){var g=p[m];o=o||g.height;var v=(o-g.height)/2;if(g.left<e&&g.right>e&&g.top-v<i&&g.bottom+v>i){for(var b=[],_=0;_<p.length;_++){var x=p[_];b.push(y()({},x,{top:x.top-v,height:o,bottom:x.bottom+v,left:x.left,right:x.right,width:x.width}))}return{node:s,rects:b,textRects:p,index:c,wordsLength:f}}}c+=f}else{if("#comment"===s.nodeName)continue;var w=n(s,e,i,r);if(w)return w}}return null}function r(t,e,i,n){if(!t||!t&&t.childNodes)return null;for(var o=Number(window.getComputedStyle(t).lineHeight.replace("px","")),a=0;a<t.childNodes.length;a++){var s=t.childNodes[a],l=null;if("#text"===s.nodeName)for(var c=[].concat(g()(s.textContent)),u=document.createRange(),d=0;d<c.length;d++){u.setStart(s,d),u.setEnd(s,d+1);var h=void 0,f=void 0,p=u.getClientRects(),m=void 0;if(p.length>1)m=p[1];else{if(1!==p.length)continue;m=p[0]}o=o||m.height;var v=(o-m.height)/2;if(m.top-v<=i&&m.bottom+v>=i){l={x:m.left,y:m.top-v,height:o,index:d,node:s};try{u.setStart(s,d+1),u.setEnd(s,d+2);var y=u.getClientRects();f=y.length>1?y[1]:1===y.length?y[0]:null}catch(t){f=null}var b=void 0===h||h&&h.bottom<=m.top,_=null===f||f&&f.top>=m.bottom;if(e<m.right){var x=e<(m.left+m.right)/2;return(!b||n)&&(x||_&&n)||(l.x+=m.width,l.index+=1),l}if(_&&void 0===t.childNodes[a+1]&&(!t.nextSibling||t.nextSibling&&"#text"!==t.nextSibling.nodeName))return n||(l.x+=m.width,l.index+=1),l}h=m}else{if("#comment"===s.nodeName)continue;var w=r(s,e,i,n);if(w)return w}}return null}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return{x:(t.clientX||t.changedTouches[0].clientX)+e.x,y:(t.clientY||t.changedTouches[0].clientY)+e.y}}function a(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s(t){if("number"==typeof t)return t;if("string"==typeof t){if(t.indexOf("px")>-1)return Number(t.replace("px",""));if(t.indexOf("rem")>-1){var e=Number((document.documentElement.style.fontSize||"24px").replace("px",""));return Number(t.replace("rem",""))*e}return Number(t)}return 0}function l(t,e,i){var n=document.createRange(),r=void 0===e?0:e,o=void 0===i?t.textContent.length:i;try{return n.setStart(t,r),n.setEnd(t,o),f(n.getClientRects())}catch(t){return console.error("EasyMarkerError:",t),[]}}function c(t,e){return t.isSet?(t.y-=e.y,t.x-=e.x,t):t}function u(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],i=e.reduce(function(t,e){return""===e?t:""===t?"\\"+e:t+"|\\"+e},""),n=new RegExp("("+i+")"),r=t.split(n),o=[],a=0;a<r.length;a+=2){var s=r[a]+(r[a+1]||"");s.length>0&&o.push(s)}return o}function d(t,e,i,n){return i.top-n<=e&&i.bottom+n>=e&&i.left<=t&&i.right>=t}function h(t){return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function f(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}function p(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="",n=e.replace(/\s+/g,""),r=0,o=0;r<t.length;r++){if(o>=n.length)return i;t[r]===n[o]?(i+=t[r],o++):t[r].match(/\n|\r|\s/)?""!==i&&(i+=t[r]):(o=0,i="")}return i}e.c=n,e.b=r,e.e=o,e.j=a,e.h=s,e.g=l,e.d=c,e.i=d,e.f=h,e.a=p;var m=i(220),g=i.n(m),v=i(44),y=i.n(v)},625:function(t,e,i){"use strict";var n=i(43),r=i.n(n),o=i(146),a=i(218);e.a={getCategory:function(){return new r.a(function(t,e){o.a.post(a.a.timeServer+"/serv/v3/search/category").then(function(i){200===i.status&&0===i.data.code?t(i.data.data):e(i)}).catch(function(t){e(t)})})},getHotWords:function(){return new r.a(function(t,e){o.a.post(a.a.timeServer+"/serv/v3/search/hot_words").then(function(i){200===i.status&&0===i.data.code?t(i.data.data):e(i)}).catch(function(t){e(t)})})},getSearchResult:function(t){var e={keyword:t.keyword,category:t.category,size:t.size,prev:t.prev};return t.filters&&(e.filters=t.filters),new r.a(function(t,i){o.a.post(a.a.timeServer+"/serv/v3/search",e).then(function(e){200===e.status&&0===e.data.code?t(e.data.data):i(e)}).catch(function(t){i(t)})})}}},627:function(t,e,i){"use strict";function n(t,e){e.close=function(){t.dispatch("removeGlobalLayer","bottom-menu-generate")};var i={name:"bottom-menu-generate",render:function(t){return t(d.a,{props:{data:e}})}};t.dispatch("addGlobalLayer",i)}function r(t,e){var i={component:{close:function(){t.dispatch("removeGlobalLayer","preview-img-generate")}},data:e},n={name:"preview-img-generate",render:function(t){return t(f.a,{props:i})}};t.dispatch("addGlobalLayer",n)}function o(t,e,i,n){var r=c()({close:function(){i.dispatch("removeGlobalLayer",e)}},n.on||{}),o={name:e,render:function(e){return e(t,{props:{data:n},on:r})}};i.dispatch("addGlobalLayer",o)}function a(t,e){o(v.a,"pc-modal",t,e)}function s(t,e){o(m.a,"mobile-modal",t,e)}e.b=n,e.c=r,e.d=a,e.a=s;var l=i(99),c=i.n(l),u=i(651),d=i.n(u),h=i(653),f=i.n(h),p=i(652),m=i.n(p),g=i(650),v=i.n(g)},628:function(t,e,i){"use strict";function n(t){var e=t.target;switch(t.type){case"touchstart":case"mousedown":k=[],v=!0,(!d.start||d.start.length<2)&&(d.start=L.getPosOfEvent(t)),L.getFingers(t)>=2&&(E=parseInt(L.getAngle180(d.start[0],d.start[1]),10)),h=Date.now(),g={};var i=e.getBoundingClientRect(),n=document.documentElement;g={top:i.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||0)},D.hold(t);break;case"touchmove":case"mousemove":if(!v||!d.start)return;d.move=L.getPosOfEvent(t),L.getFingers(t)>=2?D.pinch(t):w?D.rotateSingleFinger(t):D.swipe(t);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!v)return;p?D.pinch(t):w?D.rotateSingleFinger(t):f?D.swipe(t):D.tap(t),L.reset(),E=0,A=0,t.touches&&1===t.touches.length&&(v=!0,w=!0)}}function r(){var t,e,i,n,r=arguments;if(r.length<2||r>4)return console.error("unexpected arguments!");var o="string"===L.getType(r[0])?document.querySelectorAll(r[0]):r[0];if(o=o.length?Array.prototype.slice.call(o):[o],3===r.length&&"string"===L.getType(r[1]))return t=r[1].split(" "),e=r[2],void t.forEach(function(t){L.hasTouch||(t=L.getPCevts(t)),o.forEach(function(i){I.bind(i,t,e)})});if(3!==r.length||"object"!==L.getType(r[1]))if(2!==r.length||"object"!==L.getType(r[1])){if(4===r.length&&"object"===L.getType(r[2]))return t=r[1].split(" "),e=r[3],void t.forEach(function(t){L.hasTouch||(t=L.getPCevts(t)),o.forEach(function(i){I.bind(i,t,e)})});if(4===r.length){var a=o[0];return t=r[1].split(" "),n=r[2],e=r[3],void t.forEach(function(t){L.hasTouch||(t=L.getPCevts(t)),I.delegate(a,t,n,e)})}}else{i=r[1];for(var s in i)!function(t){L.hasTouch||(t=L.getPCevts(t)),o.forEach(function(e){I.bind(e,t,i[t])})}(s)}else{i=r[1],n=r[2];for(var l in i)!function(t){L.hasTouch||(t=L.getPCevts(t)),o.forEach(function(e){I.delegate(e,t,n,i[t])})}(l)}}function o(){var t,e,i=arguments;if(i.length<1||i.length>4)return console.error("unexpected arguments!");var n="string"===L.getType(i[0])?document.querySelectorAll(i[0]):i[0];if(n=n.length?Array.prototype.slice.call(n):[n],1===i.length||2===i.length)return void n.forEach(function(e){t=i[1]?i[1].split(" "):l()(e.listeners),t.length&&t.forEach(function(t){L.hasTouch||(t=L.getPCevts(t)),I.unbind(e,t),I.undelegate(e,t)})});if(3===i.length&&"function"===L.getType(i[2]))return e=i[2],void n.forEach(function(n){t=i[1].split(" "),t.forEach(function(t){L.hasTouch||(t=L.getPCevts(t)),I.unbind(n,t,e)})});if(3===i.length&&"string"===L.getType(i[2])){var r=i[2];return void n.forEach(function(e){t=i[1].split(" "),t.forEach(function(t){L.hasTouch||(t=L.getPCevts(t)),I.undelegate(e,t,r)})})}return 4===i.length?(e=i[3],void n.forEach(function(n){t=i[1].split(" "),t.forEach(function(t){L.hasTouch||(t=L.getPCevts(t)),I.undelegate(n,t,r,e)})})):void 0}function a(t,e,i){var n=arguments;L.hasTouch||(e=L.getPCevts(e));var r="string"===L.getType(n[0])?document.querySelectorAll(n[0]):n[0];r=r.length?Array.prototype.call(r):[r],r.forEach(function(t){I.trigger(t,e,i)})}var s=i(225),l=i.n(s),c=i(630),u=i.n(c),d={start:null,move:null,end:null},h=0,f=!1,p=!1,m=!1,g={},v=!1,y=null,b=!1,_=null,x=1,w=!1,k=[],E=0,A=0,T=0,S=null,R={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,tapTime:200,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},C={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},L={};L.PCevts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},L.hasTouch="ontouchstart"in window,L.getType=function(t){return Object.prototype.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},L.getSelector=function(t){if(t.id)return"#"+t.id;if(t.className){return"."+t.className.split(/\s+/).join(".")}return t===document?"body":t.tagName.toLowerCase()},L.matchSelector=function(t,e){return t.webkitMatchesSelector(e)},L.getEventListeners=function(t){return t.listeners},L.getPCevts=function(t){return this.PCevts[t]||t},L.forceReflow=function(){var t=document.getElementById("reflowDivBlock");t||(t=document.createElement("div"),t.id="reflowDivBlock",document.body.appendChild(t));var e=t.parentNode,i=t.nextSibling;e.removeChild(t),e.insertBefore(t,i)},L.simpleClone=function(t){return u()(t)},L.getPosOfEvent=function(t){if(this.hasTouch){for(var e=[],i=null,n=0,r=t.touches.length;n<r;n++)i=t.touches[n],e.push({x:i.pageX,y:i.pageY});return e}return[{x:t.pageX,y:t.pageY}]},L.getDistance=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)},L.getFingers=function(t){return t.touches?t.touches.length:1},L.calScale=function(t,e){if(t.length>=2&&e.length>=2){var i=this.getDistance(t[1],t[0]);return this.getDistance(e[1],e[0])/i}return 1},L.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},L.getAngle180=function(t,e){var i=Math.atan(-1*(e.y-t.y)/(e.x-t.x))*(180/Math.PI);return i<0?i+180:i},L.getDirectionFromAngle=function(t){var e={up:t<-45&&t>-135,down:t>=45&&t<135,left:t>=135||t<=-135,right:t>=-45&&t<=45};for(var i in e)if(e[i])return i;return null},L.getXYByElement=function(t){for(var e=0,i=0;t.offsetParent;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{left:e,top:i}},L.reset=function(){b=v=f=p=!1,m=!1,d={},w=!1},L.isTouchMove=function(t){return"touchmove"===t.type||"mousemove"===t.type},L.isTouchEnd=function(t){return"touchend"===t.type||"mouseup"===t.type||"touchcancel"===t.type},L.env=function(){var t={},e=navigator.userAgent,i=e.match(/(Android)[\s\/]+([\d\.]+)/),n=e.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),r=e.match(/(Windows\s+Phone)\s([\d\.]+)/),o=/WebKit\/[\d.]+/i.test(e),a=!!n&&(navigator.standalone?o:/Safari/i.test(e)&&!/CriOS/i.test(e)&&!/MQQBrowser/i.test(e));return i&&(t.android=!0,t.version=i[2]),n&&(t.ios=!0,t.version=n[2].replace(/_/g,"."),t.ios7=/^7/.test(t.version),"iPad"===n[1]?t.ipad=!0:"iPhone"===n[1]?(t.iphone=!0,t.iphone5=568===screen.height):"iPod"===n[1]&&(t.ipod=!0)),r&&(t.wp=!0,t.version=r[2],t.wp8=/^8/.test(t.version)),o&&(t.webkit=!0),a&&(t.safari=!0),t}();var I={proxyid:0,proxies:[],trigger:function(t,e,i){i=i||{};var n,r={bubbles:!0,cancelable:!0,detail:i};try{"undefined"!=typeof CustomEvent?(n=new CustomEvent(e,r),t&&t.dispatchEvent(n)):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,i),t&&t.dispatchEvent(n))}catch(t){console.warn("Touch.js is not supported by environment.")}},bind:function(t,e,i){t.listeners=t.listeners||{},t.listeners[e]?t.listeners[e].push(i):t.listeners[e]=[i];var n=function(t){L.env.ios7&&L.forceReflow(),t.originEvent=t;for(var e in t.detail)"type"!==e&&(t[e]=t.detail[e]);t.startRotate=function(){w=!0};var n=i.call(t.target,t);void 0===n||n||(t.stopPropagation(),t.preventDefault())};i.proxy=i.proxy||{},i.proxy[e]?i.proxy[e].push(this.proxyid++):i.proxy[e]=[this.proxyid++],this.proxies.push(n),t.addEventListener&&t.addEventListener(e.split(".")[0],n,!1)},unbind:function(t,e,i){if(i){var n=i.proxy[e];n&&n.length&&n.forEach(function(i){t.removeEventListener&&t.removeEventListener(e.split(".")[0],this.proxies[this.proxyid],!1)})}else{var r=t.listeners[e];r&&r.length&&r.forEach(function(i){t.removeEventListener(e.split(".")[0],i,!1)})}},delegate:function(t,e,i,n){var r=function(e){var r,o;e.originEvent=e;for(var a in e.detail)"type"!==a&&(e[a]=e.detail[a]);e.startRotate=function(){w=!0};var s=L.getSelector(t)+" "+i,l=L.matchSelector(e.target,s),c=L.matchSelector(e.target,s+" "+e.target.nodeName);if(!l&&c){for(L.env.ios7&&L.forceReflow(),r=e.target;!L.matchSelector(r,s);)r=r.parentNode;o=n.call(e.target,e),void 0===o||o||(e.stopPropagation(),e.preventDefault())}else L.env.ios7&&L.forceReflow(),(l||c)&&(void 0===(o=n.call(e.target,e))||o||(e.stopPropagation(),e.preventDefault()))};n.proxy=n.proxy||{},n.proxy[e]?n.proxy[e].push(this.proxyid++):n.proxy[e]=[this.proxyid++],this.proxies.push(r),t.listeners=t.listeners||{},t.listeners[e]?t.listeners[e].push(r):t.listeners[e]=[r],t.addEventListener&&t.addEventListener(e,r,!1)},undelegate:function(t,e,i,n){if(n){var r=n.proxy[e];r.length&&r.forEach(function(i){t.removeEventListener&&t.removeEventListener(e,this.proxies[this.proxyid],!1)})}else{t.listeners[e].forEach(function(i){t.removeEventListener(e,i,!1)})}}},D={getAngleDiff:function(t){for(var e=parseInt(E-L.getAngle180(t[0],t[1]),10),i=0;Math.abs(e-A)>90&&i++<50;)A<0?e-=180:e+=180;return A=parseInt(e,10)},pinch:function(t){var e=t.target;if(R.pinch){if(!v)return;if(L.getFingers(t)<2&&!L.isTouchEnd(t))return;var i=L.calScale(d.start,d.move),n=this.getAngleDiff(d.move),r={type:"",originEvent:t,scale:i,rotation:n,direction:n>0?"right":"left",fingersCount:L.getFingers(t)};if(p?L.isTouchMove(t)?(r.fingerStatus="move",I.trigger(e,C.PINCH,r)):L.isTouchEnd(t)&&(r.fingerStatus="end",I.trigger(e,C.PINCH_END,r),L.reset()):(p=!0,r.fingerStatus="start",I.trigger(e,C.PINCH_START,r)),Math.abs(1-i)>R.minScaleRate){var o=L.simpleClone(r);i>x?(x=i-1e-11,I.trigger(e,C.PINCH_OUT,o,!1)):i<x&&(x=i+1e-11,I.trigger(e,C.PINCH_IN,o,!1)),L.isTouchEnd(t)&&(x=1)}if(Math.abs(n)>R.minRotationAngle){var a,s=L.simpleClone(r);a=n>0?C.ROTATION_RIGHT:C.ROTATION_LEFT,I.trigger(e,a,s,!1),I.trigger(e,C.ROTATION,r)}}},rotateSingleFinger:function(t){var e=t.target;if(w&&L.getFingers(t)<2){if(!d.move)return;if(k.length<2){var i=L.getXYByElement(e);k=[{x:i.left+e.offsetWidth/2,y:i.top+e.offsetHeight/2},d.move[0]],E=parseInt(L.getAngle180(k[0],k[1]),10)}var n=[k[0],d.move[0]],r=this.getAngleDiff(n),o={type:"",originEvent:t,rotation:r,direction:r>0?"right":"left",fingersCount:L.getFingers(t)};L.isTouchMove(t)?o.fingerStatus="move":(L.isTouchEnd(t)||"mouseout"===t.type)&&(o.fingerStatus="end",I.trigger(e,C.PINCH_END,o),L.reset());var a=r>0?C.ROTATION_RIGHT:C.ROTATION_LEFT;I.trigger(e,a,o),I.trigger(e,C.ROTATION,o)}},swipe:function(t){var e=t.target;if(v&&d.move&&!(L.getFingers(t)>1)){var i=Date.now(),n=i-h,r=L.getDistance(d.start[0],d.move[0]),o={x:d.move[0].x-g.left,y:d.move[0].y-g.top},a=L.getAngle(d.start[0],d.move[0]),s=L.getDirectionFromAngle(a),l=n/1e3,c=10*(10-R.swipeFactor)*l*l,u={type:C.SWIPE,originEvent:t,position:o,direction:s,distance:r,distanceX:d.move[0].x-d.start[0].x,distanceY:d.move[0].y-d.start[0].y,x:d.move[0].x-d.start[0].x,y:d.move[0].y-d.start[0].y,angle:a,duration:n,fingersCount:L.getFingers(t),factor:c};if(R.swipe){var p=function(){var t=C;switch(s){case"up":I.trigger(e,t.SWIPE_UP,u);break;case"down":I.trigger(e,t.SWIPE_DOWN,u);break;case"left":I.trigger(e,t.SWIPE_LEFT,u);break;case"right":I.trigger(e,t.SWIPE_RIGHT,u)}};f?L.isTouchMove(t)?(u.fingerStatus=u.swipe="move",I.trigger(e,C.SWIPING,u),n>R.swipeTime&&n<R.swipeTime+50&&r>R.swipeMinDistance&&(p(),I.trigger(e,C.SWIPE,u,!1))):(L.isTouchEnd(t)||"mouseout"===t.type)&&(u.fingerStatus=u.swipe="end",I.trigger(e,C.SWIPE_END,u),R.swipeTime>n&&r>R.swipeMinDistance&&(p(),I.trigger(e,C.SWIPE,u,!1))):(u.fingerStatus=u.swipe="start",f=!0,I.trigger(e,C.SWIPE_START,u))}R.drag&&(m?L.isTouchMove(t)?(u.fingerStatus=u.swipe="move",I.trigger(e,C.DRAG,u)):L.isTouchEnd(t)&&(u.fingerStatus=u.swipe="end",I.trigger(e,C.DRAGEND,u)):(u.fingerStatus=u.swipe="start",m=!0,I.trigger(e,C.DRAGSTART,u)))}},tap:function(t){var e=t.target;if(R.tap){var i=Date.now(),n=i-h,r=L.getDistance(d.start[0],d.move?d.move[0]:d.start[0]);clearTimeout(y);if(function(){if(S&&R.doubleTap&&h-T<R.maxDoubleTapInterval){if(L.getDistance(S,d.start[0])<16)return!0}return!1}())return clearTimeout(_),void I.trigger(e,C.DOUBLE_TAP,{type:C.DOUBLE_TAP,originEvent:t,position:d.start[0]});if(R.tapMaxDistance<r)return;R.holdTime>n&&L.getFingers(t)<=1&&(b=!0,T=i,S=d.start[0],_=setTimeout(function(){I.trigger(e,C.TAP,{type:C.TAP,originEvent:t,fingersCount:L.getFingers(t),position:S})},R.tapTime))}},hold:function(t){var e=t.target;R.hold&&(clearTimeout(y),y=setTimeout(function(){if(d.start){var i=L.getDistance(d.start[0],d.move?d.move[0]:d.start[0]);R.tapMaxDistance<i||b||I.trigger(e,"hold",{type:"hold",originEvent:t,fingersCount:L.getFingers(t),position:d.start[0]})}},R.holdTime))}};!function(){(L.hasTouch?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout").split(" ").forEach(function(t){document.addEventListener(t,n,!1)})}();var P={};P.on=r,P.off=o,P.config=R,P.trigger=a,e.a=P},629:function(t,e,i){"use strict";var n=i(100),r=i.n(n),o=i(101),a=i.n(o),s=function(){function t(){r()(this,t),this.element=null,this.container=document.body}return a()(t,[{key:"createElement",value:function(){}},{key:"mount",value:function(){this.container.appendChild(this.element)}},{key:"show",value:function(){this.style.display="block"}},{key:"hide",value:function(){this.style.display="none"}},{key:"destroy",value:function(){this.element&&this.element.parentElement.removeChild(this.element)}},{key:"style",get:function(){return this.element.style}},{key:"isShow",get:function(){return"none"===this.style.display}}]),t}();e.a=s},630:function(t,e,i){t.exports={default:i(640),__esModule:!0}},631:function(t,e,i){t.exports={default:i(733),__esModule:!0}},632:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(728),o=n(r),a=i(630),s=n(a),l=i(147),c=n(l);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,c.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},633:function(t,e,i){"use strict";e.__esModule=!0;var n=i(147),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},634:function(t,e,i){var n,r;!function(o){var a=!1;if(n=o,void 0!==(r="function"==typeof n?n.call(e,i,e,t):n)&&(t.exports=r),a=!0,t.exports=o(),a=!0,!a){var s=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=s,l}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,r,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(t){}r=i.write?i.write(r,e):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var l="";for(var c in o)o[c]&&(l+="; "+c,!0!==o[c]&&(l+="="+o[c]));return document.cookie=e+"="+r+l}e||(a={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<u.length;h++){var f=u[h].split("="),p=f.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var m=f[0].replace(d,decodeURIComponent);if(p=i.read?i.read(p,m):i(p,m)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(t){}if(e===m){a=p;break}e||(a[m]=p)}catch(t){}}return a}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e(function(){})})},635:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"modal",props:{layer:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}}},methods:{close:function(){this.$emit("close",this)},confirm:function(){this.$emit("confirm",this)}}}},636:function(t,e,i){"use strict";function n(t){t.preventDefault()}function r(){window.addEventListener("wheel",n,!!a&&{passive:!1}),window.addEventListener("touchmove",n,!!a&&{passive:!1})}function o(){window.removeEventListener("wheel",n),window.removeEventListener("touchmove",n)}Object.defineProperty(e,"__esModule",{value:!0});var a=!1;try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,s)}catch(t){}e.default={props:{data:{type:Object,default:function(){return{}}}},mounted:function(){r()},destroyed:function(){o()},methods:{remove:function(){this.data.remove&&this.data.remove(this)},close:function(){this.data.close&&this.data.close(this)},complain:function(){this.data.complain&&this.data.complain(this)}}}},637:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"modal",props:{layer:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}}},methods:{close:function(){this.$emit("close",this)},confirm:function(){this.$emit("confirm",this)}}}},638:function(t,e,i){"use strict";function n(t){t.preventDefault()}function r(){window.addEventListener("wheel",n,!!l&&{passive:!1}),window.addEventListener("touchmove",n,!!l&&{passive:!1})}function o(){window.removeEventListener("wheel",n),window.removeEventListener("touchmove",n)}function a(t,e,i){return i>t?t:i<e?e:i}Object.defineProperty(e,"__esModule",{value:!0});var s=i(628),l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,c)}catch(t){}e.default={props:{component:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}}},data:function(){return{x:0,y:0,_x:0,_y:0,show:!1,scale:1,imgUrl:"",style:{}}},mounted:function(){var t=this;r();var e=window.innerHeight,i=window.innerWidth,n=new Image,o={};n.onload=function(){var r=n.height,a=n.width,s=r/e,l=a/i;o.height=r,o.width=a,s>l?s>1&&(o.height=e,o.width=Math.floor(a*e/r)):l>1&&(o.height=Math.floor(r*i/a),o.width=i),o.height=o.height+"px",o.width=o.width+"px",t.style=o,t.show=!0,t.imgUrl=t.data.imgUrl},n.src=this.data.imgUrl,this.bindEvent(this.$refs.img)},destroyed:function(){o()},watch:{$route:function(t,e){this.close()}},methods:{close:function(){this.component.close&&this.component.close(this)},resetZoom:function(){this.transform(0,0,1)},transform:function(t,e,i){var n="translateX("+t+"px) translateY("+e+"px) scale("+i+")";this.style={height:this.style.height,width:this.style.width,transform:n}},bindEvent:function(t){var e=this;s.a.on(t,"pinch",function(t){var i=t.scale-1;console.log(i,e.scale),e.transform(0,0,a(5,1,i+e.scale))}),s.a.on(t,"pinchend",function(t){var i=t.scale-1;e.scale=a(5,1,i+e.scale)}),s.a.on(t,"drag",function(t){e._x=t.x+e.x,e._y=t.y+e.y,console.log(t.x,t.y),e.transform(e._x,e._y,e.scale)}),s.a.on(t,"dragend",function(t){e.x=e._x,e.y=e._y,e._x=0,e._y=0})}}}},639:function(t,e,i){t.exports={default:i(731),__esModule:!0}},640:function(t,e,i){i(641);var n=i(10).Object;t.exports=function(t,e){return n.create(t,e)}},641:function(t,e,i){var n=i(28);n(n.S,"Object",{create:i(148)})},642:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._1uSorpRi_0{position:fixed;top:0;bottom:0;left:0;right:0;z-index:100;background:rgba(0,0,0,.4)}._3GAxhwIG_0{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;background-color:hsla(0,0%,100%,.1)}._2_wQLMVs_0{background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease;position:absolute;left:50%;top:50%;width:270px;z-index:100;border-radius:16px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transform:translate(-50%,-80%);transform:translate(-50%,-80%);-webkit-box-shadow:0 5px 30px 0 rgba(140,163,191,.2);box-shadow:0 5px 30px 0 rgba(140,163,191,.2)}._2TotrwHd_0{padding:20px}.JL35Jvuj_0{font-size:18px;color:#000;font-weight:500;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}._11xf0swh_0,.JL35Jvuj_0{text-align:center;line-height:1.5}._11xf0swh_0{margin-top:6px;color:#888;font-size:14px;font-weight:400}.Lif9oOYw_0{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;border-top:.5px solid #e8e8e8}._244GZ-37_0,.Lif9oOYw_0{display:-webkit-box;display:-ms-flexbox;display:flex}._244GZ-37_0{width:84px;border-radius:3px;font-size:15px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-top:8px;padding-bottom:8px}._37EJMsXN_0{color:#fa8819;border-left:.5px solid #e8e8e8}._35dXRyPt_0,._37EJMsXN_0{-webkit-box-flex:1;-ms-flex:1;flex:1}._11m5vlcZ_0,._35dXRyPt_0{color:#b2b2b2}._11m5vlcZ_0{font-size:10px;position:absolute;text-align:center}",""]),e.locals={wrap:"_1uSorpRi_0",mask:"_3GAxhwIG_0",main:"_2_wQLMVs_0",content:"_2TotrwHd_0",con:"JL35Jvuj_0",desc:"_11xf0swh_0",btns:"Lif9oOYw_0",btn:"_244GZ-37_0",confirm:"_37EJMsXN_0",cancel:"_35dXRyPt_0",close:"_11m5vlcZ_0"}},643:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".DZrVeOXK_0{position:fixed;z-index:100}._3wRZmGVk_0,.DZrVeOXK_0{top:0;left:0;width:100%;height:100%}._3wRZmGVk_0{position:absolute;z-index:1;background-color:rgba(0,0,0,.5)}._3l-Yr_-o_0{background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease;position:absolute;left:0;bottom:0;width:100%;z-index:100;border-top-left-radius:10px;border-top-right-radius:10px;-webkit-box-sizing:border-box;box-sizing:border-box;transform:translateZ(0);-webkit-transform:translateZ(0);-webkit-box-shadow:0 -3px 15px 0 hsla(0,0%,53%,.23);box-shadow:0 -3px 15px 0 hsla(0,0%,53%,.23)}._1hIfba30_0{color:#888;font-size:15px;text-align:center;height:50px;line-height:50px}._2gineyxN_0{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:15px;border-bottom:.5px solid #e8e8e8}._1o4oDofo_0{font-size:16px;margin-top:-2px;margin-left:8px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:16px;color:#888}._2qMN2vDD_0{margin-left:24px;font-size:15px;color:#353535}",""]),e.locals={"mask-layer-wrap":"DZrVeOXK_0",maskLayerWrap:"DZrVeOXK_0","mask-layer":"_3wRZmGVk_0",maskLayer:"_3wRZmGVk_0",main:"_3l-Yr_-o_0",bottom:"_1hIfba30_0",menu:"_2gineyxN_0",icon:"_1o4oDofo_0",txt:"_2qMN2vDD_0"}},644:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._3I_Jq5nz_0{position:fixed}._3I_Jq5nz_0,._3xvOGrxA_0{top:0;left:0;width:100%;height:100%;z-index:100}._3xvOGrxA_0{position:absolute;background-color:#000}._20ld22E9_0{position:relative;z-index:101;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}._20ld22E9_0 img{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;visibility:hidden}._20ld22E9_0 .hVX44oVP_0{visibility:visible}.DLfklZIn_0{color:#888;font-size:15px;text-align:center;height:50px;line-height:50px}._283MhL7F_0{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:15px;border-bottom:1px solid #e8e8e8}._1nrI-43n_0{font-size:24px;height:26px;width:26px;color:#fff;text-align:center;line-height:26px;right:20px;top:20px;position:absolute;z-index:102;text-shadow:0 0 4px rgba(0,0,0,.3)}",""]),e.locals={maskLayerWrap:"_3I_Jq5nz_0",maskLayer:"_3xvOGrxA_0",main:"_20ld22E9_0",on:"hVX44oVP_0",bottom:"DLfklZIn_0",menu:"_283MhL7F_0",close:"_1nrI-43n_0"}},645:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._2jApm7Dx_0{position:fixed;z-index:100}._2jApm7Dx_0,._2RmGmLke_0{top:0;left:0;width:100%;height:100%}._2RmGmLke_0{position:absolute;z-index:1;background-color:hsla(0,0%,100%,.1)}._3H526-eT_0{background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease;position:absolute;left:50%;top:50%;width:415px;z-index:100;padding-top:45px;border-radius:10px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transform:translate(-50%,-80%);transform:translate(-50%,-80%);-webkit-box-shadow:0 5px 30px 0 rgba(140,163,191,.2);box-shadow:0 5px 30px 0 rgba(140,163,191,.2)}._1Dxn1G_n_0{text-align:center;font-size:1rem;color:#353535;line-height:1.2rem;padding:1.5rem 0;font-weight:500}._2hi2MdOC_0{text-align:center;font-size:19px;color:#888;font-weight:500;line-height:1.5;height:100px;padding-left:20px;padding-right:20px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-font-smoothing:antialiased}._2hi2MdOC_0,.jAf-GG2g_0{display:-webkit-box;display:-ms-flexbox;display:flex}.jAf-GG2g_0{padding:18px 30px;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}._1PI0jCHO_0{width:84px;height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;border-radius:3px;font-size:15px;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}._16uwXDin_0{margin-left:20px;color:#fff;background:#fa8819;-webkit-box-shadow:0 4px 10px 0 rgba(255,227,200,.55);box-shadow:0 4px 10px 0 rgba(255,227,200,.55)}._1vfSbYJI_0{width:64px;color:#b2b2b2;background:#fff}._1lo5B6eA_0{font-size:10px;position:absolute;color:#b2b2b2;top:5px;right:5px;width:30px;height:30px;line-height:30px;text-align:center;cursor:pointer}",""]),e.locals={wrap:"_2jApm7Dx_0",mask:"_2RmGmLke_0",main:"_3H526-eT_0",tit:"_1Dxn1G_n_0",con:"_2hi2MdOC_0",btns:"jAf-GG2g_0",btn:"_1PI0jCHO_0",confirm:"_16uwXDin_0",cancel:"_1vfSbYJI_0",close:"_1lo5B6eA_0"}},646:function(t,e,i){var n=i(642);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("24fefdb5",n,!0,{})},647:function(t,e,i){var n=i(643);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("ef03b228",n,!0,{})},648:function(t,e,i){var n=i(644);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("df73f1e2",n,!0,{})},649:function(t,e,i){var n=i(645);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("5b1e029a",n,!0,{})},650:function(t,e,i){function n(t){this.$style=i(649)}var r=i(22)(i(635),i(658),n,null,null);t.exports=r.exports},651:function(t,e,i){function n(t){this.$style=i(647)}var r=i(22)(i(636),i(656),n,null,null);t.exports=r.exports},652:function(t,e,i){function n(t){this.$style=i(646)}var r=i(22)(i(637),i(655),n,null,null);t.exports=r.exports},653:function(t,e,i){function n(t){this.$style=i(648)}var r=i(22)(i(638),i(657),n,null,null);t.exports=r.exports},654:function(t,e,i){function n(t){this.$style=i(667)}var r=i(22)(i(664),i(675),n,null,null);t.exports=r.exports},655:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.wrap},[i("div",{class:t.$style.mask,on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}}),t._v(" "),i("div",{class:t.$style.main},[i("div",{class:t.$style.content},[i("div",{class:t.$style.con},[t._v("\n        "+t._s(t.data.content)+"\n      ")]),t._v(" "),t.data.desc?i("div",{class:t.$style.desc},[t._v("\n        "+t._s(t.data.desc)+"\n      ")]):t._e()]),t._v(" "),i("div",{class:t.$style.btns},[i("div",{class:[t.$style.confirm,t.$style.btn],on:{click:t.confirm}},[t._v(t._s(t.data.confirmText||"确认"))]),t._v(" "),i("div",{class:[t.$style.cancel,t.$style.btn],on:{click:t.close}},[t._v(t._s(t.data.cancelText||"取消"))])])])])},staticRenderFns:[]}},656:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.maskLayerWrap},[i("div",{class:t.$style.main},[t.data.remove?i("div",{class:t.$style.menu,on:{click:t.remove}},[i("span",{class:["iconfont",t.$style.icon]},[t._v("")]),t._v(" "),i("span",{class:t.$style.txt},[t._v("删除")])]):t._e(),t._v(" "),t.data.complain?i("div",{class:t.$style.menu,on:{click:t.complain}},[i("span",{class:["iconfont",t.$style.icon]},[t._v("")]),t._v(" "),i("span",{class:t.$style.txt},[t._v("投诉")])]):t._e(),t._v(" "),i("div",{class:t.$style.bottom,on:{click:t.close}},[t._v("取消")])]),t._v(" "),i("div",{class:t.$style.maskLayer,on:{click:t.close}})])},staticRenderFns:[]}},657:function(t,e){t.exports={render:function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{class:e.$style.maskLayerWrap},[n("div",{ref:"img",class:e.$style.main},[n("img",{class:[(t={},t[e.$style.on]=e.show,t)],style:e.style,attrs:{src:e.imgUrl}})]),e._v(" "),n("div",{class:[e.$style.close,"iconfont"],on:{click:e.close}},[e._v("")]),e._v(" "),n("div",{class:e.$style.maskLayer})])},staticRenderFns:[]}},658:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.wrap},[i("div",{class:t.$style.mask,on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}}),t._v(" "),i("div",{class:t.$style.main},[i("div",{class:t.$style.con},[t._v("\n      "+t._s(t.data.content)+"\n    ")]),t._v(" "),i("div",{class:[t.$style.close,"iconfont"],on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[t._v("")]),t._v(" "),i("div",{class:t.$style.btns},[i("div",{class:[t.$style.confirm,t.$style.btn],on:{click:t.confirm}},[t._v(t._s(t.data.confirmText||"确认"))]),t._v(" "),i("div",{class:[t.$style.cancel,t.$style.btn],on:{click:t.close}},[t._v(t._s(t.data.cancelText||"取消"))])])])])},staticRenderFns:[]}},660:function(t,e){t.exports="data:image/png;base64,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"},662:function(t,e,i){t.exports=i.p+"static/time/img/logo_pc@2x.90583da.png"},664:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(43),r=i.n(n),o=i(221),a=i.n(o),s=i(99),l=i.n(s),c=i(65),u=i(218),d=i(219),h=i(625);e.default={props:{customStyle:{type:Object,default:function(){return{}}},allshow:{type:Boolean,default:!1},routeParams:{type:Object,default:function(){return{}}}},data:function(){return{isShowDropPage:!1,params:null,defaultPlaceholder:"搜索课程、课程内容、每日一课等",placeholder:"",hotWords:""}},watch:{isShowDropPage:function(t){t?c.a.fixedBody.open():c.a.fixedBody.close()}},computed:l()({},i.i(d.a)({loginUser:"loginUser"}),{isShow:function(){return!c.a.isInApp()&&!this.$route.query.code},isPC:function(){return c.a.isPC()},routeRelatedData:function(){var t=this.params;return this.$route.query.utm_term&&(t.utm_term=this.$route.query.utm_term),{jump:this.$route.meta.appLink,data:t}},urlScheme:function(){var t=this,e="";if(this.$route.meta.urlscheme){var i=this.$route.meta.urlscheme.match(/{{\s*[\w]+\s*}}/gi);e=this.$route.meta.urlscheme,i&&i.forEach(function(i){e=e.replace(i,t.$route.params[i.match(/[\w]+/)[0]])}),this.$route.query.utm_term&&(e=c.a.addUrlParam(e,"utm_term",this.$route.query.utm_term)),this.routeParams.aid&&(e=c.a.addUrlParam(e,"aid",this.routeParams.aid),e=c.a.addUrlParam(e,"title",this.routeParams.title))}return e},appLink:function(){if(c.a.isPC())return"https://time.geekbang.org/download";if(c.a.isIOS()){var t=l()({},this.routeRelatedData);return this.urlScheme&&(t.urlscheme=this.urlScheme),"https://static001.geekbang.org/misc/download/zeus.html?params="+encodeURIComponent(a()(t))}var e=this.$route.meta.urlscheme?"views?urlscheme="+encodeURIComponent(this.urlScheme):"tab=1",i="geektime://time.geekbang.org:80/main?"+encodeURIComponent(e);return c.a.isInWeixin()?u.a.appstoreUrl+"&android_schema="+i:i}}),created:function(){this.params=this.$route.params||this.$route.query,this.requestHotWords()},methods:{goApp:function(){window.location.href=this.appLink},goArithmeticTraining:function(){window.location.href="https://time.geekbang.org/college/algorithm/100034301?utm_source=time_web&utm_medium=menu&utm_term=timewebmenu_h5"},goFrontEndTraining:function(){window.location.href="https://time.geekbang.org/training/100028201?utm_source=time_web&utm_medium=menu"},goLogin:function(){window.location.href="//account.geekbang.org/signin?redirect="+encodeURIComponent(window.location.href)},goAccount:function(){window.location.href="//account.geekbang.org/dashboard?redirect="+encodeURIComponent(window.location.href)},goGift:function(){window.location.href="//time.geekbang.org/service/exchange"},goIndex:function(){window.location.href="//time.geekbang.org"},goDownload:function(){window.location.href="//time.geekbang.org/download"},goService:function(){window.open("https://service.geekbang.org/")},goMall:function(){window.open("https://h5.youzan.com/v2/feature/TJe4bYhxyP?dc_ps=2293231415741009926.200001")},goInfoQ:function(){window.open("https://www.infoq.cn/?utm_source=geektime&utm_medium=menu")},goChannel:function(){window.open("https://jinshuju.net/f/7y04KD")},goRecomandAuthor:function(){window.open("https://jinshuju.net/f/MANYIf")},goHome:function(){window.location.href="//time.geekbang.org"},focus:function(){this.$router.push("/search?hotwords="+this.hotWords)},requestHotWords:function(){var t=this;return new r.a(function(e,i){h.a.getHotWords().then(function(e){t.hotWords=e.search_bar,t.placeholder=t.hotWords||t.defaultPlaceholder})})}}}},665:function(t,e,i){var n=i(620);e=t.exports=i(571)(!1),e.push([t.i,"._352wsGxH_0{height:63px}.Wz6esVdU_0{width:100%;height:63px;background:#fff;position:fixed;top:0;left:0;z-index:20;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 13px;-webkit-box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38);box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38)}._28dOln0j_0{height:40px;width:110px;background:url("+n(i(662))+") no-repeat 0;background-size:110px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:pointer}._1k9ecCKw_0{width:50px;height:30px;padding-top:2px;padding-left:5px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:14px;color:#888;margin-left:-10px;cursor:pointer;background:transparent}._1U_jCCZU_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}._3oCJiu8W_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 13px;background:#fbf5ee;border-radius:15px;height:30px}._7Xrmrbox_0,.gBs4U5qC_0,.JjI7sqpW_0{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;color:#fa8919;font-size:13px;font-weight:500;cursor:pointer}.JjI7sqpW_0{font-size:14px}._3lsV2-l9_0{height:13px;width:1px;background:#fa8919;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:10px;margin-right:10px}._1UaW_Eq1_0{position:fixed;top:0;left:0;right:0;bottom:0;z-index:21;background:#fff;overflow:hidden;-webkit-transform:translateY(-20px);transform:translateY(-20px);opacity:0;visibility:hidden;-webkit-transition:all .3s ease;transition:all .3s ease}._1UaW_Eq1_0._2mIjHHvm_0{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;visibility:visible}._33xATrPo_0{width:100%;height:calc(100% - 63px);overflow-x:hidden;--webkit-overflow-scrolling:touch}._1qHJ5OLn_0{height:63px;-ms-flex-align:center;padding-left:15px;padding-right:15px;-webkit-box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38);box-shadow:0 2px 3px 0 hsla(0,0%,89%,.38)}._1qHJ5OLn_0,._2FYmyQEJ_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;align-items:center}._2FYmyQEJ_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;height:35px;-ms-flex-align:center;background:#f6f7fb;border-radius:20px;padding-left:16px;padding-right:20px}._1CLulytQ_0{font-size:14px;color:#b2b2b2}._1reF0JJk_0{height:20px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-left:10px}._1reF0JJk_0 input{background:transparent;border:0;color:#353535;height:20px;line-height:20px;font-size:14px;font-weight:400;width:100%;vertical-align:top;outline:none;outline-offset:0}._33xQ4nNG_0{font-size:16px;font-weight:400;color:#b2b2b2;height:30px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:20px;margin-right:10px}._1y_WRr3L_0{font-size:18px}._1y_WRr3L_0 ._2HnUZhdg_0{color:#888;font-weight:400;padding-left:28px;height:63px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:.5px solid #e8e8e8}._1y_WRr3L_0 ._2HnUZhdg_0._1r7t-t9P_0{color:#fa8919;font-weight:500}._3IeMxVb7_0{margin-top:60px;padding-bottom:40px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-sizing:border-box;box-sizing:border-box}._3IeMxVb7_0 ._2HnUZhdg_0{position:relative;padding-top:46px;font-size:13px;color:#888}._3IeMxVb7_0 ._339_Pvt6_0{position:absolute;color:#c3c3c3;height:46px;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:36px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;top:0;left:0}",""]),e.locals={shim:"_352wsGxH_0",main:"Wz6esVdU_0",logo:"_28dOln0j_0",dropMenu:"_1k9ecCKw_0",space:"_1U_jCCZU_0",btns:"_3oCJiu8W_0",openApp:"_7Xrmrbox_0",login:"gBs4U5qC_0",user:"JjI7sqpW_0",split:"_3lsV2-l9_0",dropPage:"_1UaW_Eq1_0",on:"_2mIjHHvm_0",dropPageWrapper:"_33xATrPo_0",top:"_1qHJ5OLn_0",search:"_2FYmyQEJ_0",searchIcon:"_1CLulytQ_0",inputWrap:"_1reF0JJk_0",close:"_33xQ4nNG_0",menus:"_1y_WRr3L_0",item:"_2HnUZhdg_0",activedMenu:"_1r7t-t9P_0",bottomMenus:"_3IeMxVb7_0",icon:"_339_Pvt6_0"}},667:function(t,e,i){var n=i(665);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("1f3b662a",n,!0,{})},669:function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=8)}([function(t,e,i){"use strict";function n(){}function r(t,e){return e="["+t+"] > "+e}function o(t){var e=self.console[t];return e?function(){for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];n[0]&&(n[0]=r(t,n[0])),e.apply(self.console,n)}:n}function a(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];i.forEach(function(e){c[e]=t[e]?t[e].bind(t):o(e)})}i.d(e,"a",function(){return u}),i.d(e,"b",function(){return d});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={trace:n,debug:n,log:n,warn:n,info:n,error:n},c=l,u=function(t){if(!0===t||"object"===(void 0===t?"undefined":s(t))){a(t,"debug","log","info","warn","error");try{c.log()}catch(t){c=l}}else c=l},d=c},function(t,e,i){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"b",function(){return o});var r=function(){function t(){n(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,i){for(var n=i,r=0;t.isHeader(e,i);){r+=10;r+=t._readSize(e,i+6),t.isFooter(e,i+10)&&(r+=10),i+=r}if(r>0)return e.subarray(n,n+r)},t._readSize=function(t,e){var i=0;return i=(127&t[e])<<21,i|=(127&t[e+1])<<14,i|=(127&t[e+2])<<7,i|=127&t[e+3]},t.getTimeStamp=function(e){for(var i=t.getID3Frames(e),n=0;n<i.length;n++){var r=i[n];if(t.isTimeStampFrame(r))return t._readTimeStamp(r)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var i=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4);return{type:i,size:n,data:e.subarray(10,10+n)}},t.getID3Frames=function(e){for(var i=0,n=[];t.isHeader(e,i);){var r=t._readSize(e,i+6);i+=10;for(var o=i+r;i+8<o;){var a=t._getFrameData(e.subarray(i)),s=t._decodeFrame(a);s&&n.push(s),i+=a.size+10}t.isFooter(e,i)&&(i+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),i=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,i&&(n+=47721858.84),Math.round(n)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var i=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(i.length+1));return{key:e.type,info:i,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var i=1,n=t._utf8ArrayToStr(e.data.subarray(i));i+=n.length+1;var r=t._utf8ArrayToStr(e.data.subarray(i));return{key:e.type,info:n,data:r}}var o=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:o}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var i=1,n=t._utf8ArrayToStr(e.data.subarray(i));i+=n.length+1;var r=t._utf8ArrayToStr(e.data.subarray(i));return{key:e.type,info:n,data:r}}var o=t._utf8ArrayToStr(e.data);return{key:e.type,data:o}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.length,n=void 0,r=void 0,o=void 0,a="",s=0;s<i;){if(0===(n=t[s++])&&e)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:r=t[s++],a+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=t[s++],o=t[s++],a+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&o)<<0)}}return a},t}(),o=r._utf8ArrayToStr;e.a=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i){n(this,t),this.subtle=e,this.aesIV=i}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),l=s,c=function(){function t(e,i){r(this,t),this.subtle=e,this.key=i}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),u=c,d=function(){function t(){o(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),i=new Uint32Array(4),n=0;n<4;n++)i[n]=e.getUint32(4*n);return i},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,i=this.subMix,n=i[0],r=i[1],o=i[2],a=i[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[f]=g,e[g]=f;var v=h[f],y=h[v],b=h[y],_=257*h[g]^16843008*g;n[f]=_<<24|_>>>8,r[f]=_<<16|_>>>16,o[f]=_<<8|_>>>24,a[f]=_,_=16843009*b^65537*y^257*v^16843008*f,l[g]=_<<24|_>>>8,c[g]=_<<16|_>>>16,u[g]=_<<8|_>>>24,d[g]=_,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),i=!0,n=0;n<e.length&&i;)i=e[n]===this.key[n],n++;if(!i){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),u=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],m=h[2],g=h[3],v=void 0,y=void 0;for(a=0;a<o;a++)a<r?v=l[a]=e[a]:(y=v,a%r==0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=d[a/r|0]<<24):r>6&&a%r==4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[a]=v=(l[a-r]^y)>>>0);for(s=0;s<o;s++)a=o-s,y=3&s?l[a]:l[a-4],c[s]=s<4||a<=4?y:f[u[y>>>24]]^p[u[y>>>16&255]]^m[u[y>>>8&255]]^g[u[255&y]],c[s]=c[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,i){for(var n,r,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,c=l[0],u=l[1],d=l[2],h=l[3],f=this.uint8ArrayToUint32Array_(i),p=f[0],m=f[1],g=f[2],v=f[3],y=new Int32Array(t),b=new Int32Array(y.length),_=void 0,x=void 0,w=void 0,k=void 0,E=void 0,A=void 0,T=void 0,S=void 0,R=void 0,C=void 0,L=void 0,I=void 0,D=this.networkToHostOrderSwap;e<y.length;){for(R=D(y[e]),C=D(y[e+1]),L=D(y[e+2]),I=D(y[e+3]),E=R^a[0],A=I^a[1],T=L^a[2],S=C^a[3],n=4,r=1;r<o;r++)_=c[E>>>24]^u[A>>16&255]^d[T>>8&255]^h[255&S]^a[n],x=c[A>>>24]^u[T>>16&255]^d[S>>8&255]^h[255&E]^a[n+1],w=c[T>>>24]^u[S>>16&255]^d[E>>8&255]^h[255&A]^a[n+2],k=c[S>>>24]^u[E>>16&255]^d[A>>8&255]^h[255&T]^a[n+3],E=_,A=x,T=w,S=k,n+=4;_=s[E>>>24]<<24^s[A>>16&255]<<16^s[T>>8&255]<<8^s[255&S]^a[n],x=s[A>>>24]<<24^s[T>>16&255]<<16^s[S>>8&255]<<8^s[255&E]^a[n+1],w=s[T>>>24]<<24^s[S>>16&255]<<16^s[E>>8&255]<<8^s[255&A]^a[n+2],k=s[S>>>24]<<24^s[E>>16&255]<<16^s[A>>8&255]<<8^s[255&T]^a[n+3],n+=3,b[e]=D(_^p),b[e+1]=D(k^m),b[e+2]=D(w^g),b[e+3]=D(x^v),p=R,m=C,g=L,v=I,e+=4}return b.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),h=d,f=i(2),p=i(0),m=function(){function t(e,i){a(this,t),this.observer=e,this.config=i,this.logEnabled=!0;try{var n=crypto||self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,i,n){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(p.b.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new h),o.expandKey(e),n(o.decrypt(t,0,i))}else{this.logEnabled&&(p.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var a=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new u(a,e)),this.fastAesKey.expandKey().then(function(o){new l(a,i).decrypt(t,o).catch(function(o){r.onWebCryptoError(o,t,e,i,n)}).then(function(t){n(t)})}).catch(function(o){r.onWebCryptoError(o,t,e,i,n)})}},t.prototype.onWebCryptoError=function(t,e,i,n,r){this.config.enableSoftwareAES?(p.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,i,n,r)):(p.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=m},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,r,s,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(i=this._events[t],a(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(o(i))for(s=Array.prototype.slice.call(arguments,1),c=i.slice(),r=c.length,l=0;l<r;l++)c[l].apply(this,s);return!0},i.prototype.addListener=function(t,e){var r;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,r,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],a=i.length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(s=a;s-- >0;)if(i[s]===e||i[s].listener&&i[s].listener===e){r=s;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){!function(e){var i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var r=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):e;var s=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+o.path;c.path=a.normalizePath(d)}else c.path=s.path,o.params||(c.params=s.params,o.query||(c.query=s.query));return null===c.path&&(c.path=i.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(c)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=a}()},function(t,e,i){"use strict";function n(t,e,i,n){var r,o,a,s,l,c=navigator.userAgent.toLowerCase(),u=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=1+((192&e[i+2])>>>6),(o=(60&e[i+2])>>>2)>d.length-1?void t.trigger(Event.ERROR,{type:A.b.MEDIA_ERROR,details:A.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(s=(1&e[i+2])<<2,s|=(192&e[i+3])>>>6,S.b.log("manifest codec:"+n+",ADTS data:type:"+r+",sampleingIndex:"+o+"["+d[o]+"Hz],channelConfig:"+s),/firefox/i.test(c)?o>=6?(r=5,l=new Array(4),a=o-3):(r=2,l=new Array(2),a=o):-1!==c.indexOf("android")?(r=2,l=new Array(2),a=o):(r=5,l=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&o>=6?a=o-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(o>=6&&1===s||/vivaldi/i.test(c))||!n&&1===s)&&(r=2,l=new Array(2)),a=o)),l[0]=r<<3,l[0]|=(14&o)>>1,l[1]|=(1&o)<<7,l[1]|=s<<3,5===r&&(l[1]|=(14&a)>>1,l[2]=(1&a)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:d[o],channelCount:s,codec:"mp4a.40."+r,manifestCodec:u})}function r(t,e){return 255===t[e]&&240==(246&t[e+1])}function o(t,e){return 1&t[e+1]?7:9}function a(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function s(t,e){return!!(e+1<t.length&&r(t,e))}function l(t,e){if(e+1<t.length&&r(t,e)){var i=o(t,e),n=i;e+5<t.length&&(n=a(t,e));var s=e+n;if(s===t.length||s+1<t.length&&r(t,s))return!0}return!1}function c(t,e,i,r,o){if(!t.samplerate){var a=n(e,i,r,o);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,S.b.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function u(t){return 9216e4/t}function d(t,e,i,n,r){var s,l,c,u=t.length;if(s=o(t,e),l=a(t,e),(l-=s)>0&&e+s+l<=u)return c=i+n*r,{headerLength:s,frameLength:l,stamp:c}}function h(t,e,i,n,r){var o=u(t.samplerate),a=d(e,i,n,r,o);if(a){var s=a.stamp,l=a.headerLength,c=a.frameLength,h={unit:e.subarray(i+l,i+l+c),pts:s,dts:s};return t.samples.push(h),t.len+=c,{sample:h,length:c+l}}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=i(1),A=i(2),T=i(4),S=i(0),R=i(3),C=function(){function t(e,i,n){f(this,t),this.observer=e,this.config=n,this.remuxer=i}return t.prototype.resetInitSegment=function(t,e,i,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=R.a.getID3Data(t,0)||[],i=e.length,n=t.length;i<n;i++)if(l(t,i))return S.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,i,n){for(var r=this._audioTrack,o=R.a.getID3Data(t,0)||[],a=R.a.getTimeStamp(o),l=a?90*a:9e4*e,u=0,d=l,f=t.length,p=o.length,m=[{pts:d,dts:d,data:o}];p<f-1;)if(s(t,p)&&p+5<f){c(r,this.observer,t,p,r.manifestCodec);var g=h(r,t,p,l,u);if(!g){S.b.log("Unable to parse AAC frame");break}p+=g.length,d=g.sample.pts,u++}else R.a.isHeader(t,p)?(o=R.a.getID3Data(t,p),m.push({pts:d,dts:d,data:o}),p+=o.length):p++;this.remuxer.remux(r,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},e,i,n)},t.prototype.destroy=function(){},t}(),L=C,I=Math.pow(2,32)-1,D=function(){function t(e,i){p(this,t),this.observer=e,this.remuxer=i}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,i,n,r){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==i&&(i="mp4a.40.5"),null==n&&(n="avc1.42e01e");var a={};o.audio&&o.video?a.audiovideo={container:"video/mp4",codec:i+","+n,initSegment:r?e:null}:(o.audio&&(a.audio={container:"audio/mp4",codec:i,initSegment:r?e:null}),o.video&&(a.video={container:"video/mp4",codec:n,initSegment:r?e:null})),this.observer.trigger(E.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else i&&(this.audioCodec=i),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var i=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return i<0?4294967296+i:i},t.writeUint32=function(t,e,i){t.data&&(e+=t.start,t=t.data),t[e]=i>>24,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},t.findBox=function(e,i){var n,r,o,a,s,l,c,u=[];if(e.data?(l=e.start,a=e.end,e=e.data):(l=0,a=e.byteLength),!i.length)return null;for(n=l;n<a;)r=t.readUint32(e,n),o=t.bin2str(e.subarray(n+4,n+8)),c=r>1?n+r:a,o===i[0]&&(1===i.length?u.push({data:e,start:n+8,end:c}):(s=t.findBox({data:e,start:n+8,end:c},i.slice(1)),s.length&&(u=u.concat(s)))),n=c;return u},t.parseInitSegment=function(e){var i=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var n=t.findBox(e,["tkhd"])[0];if(n){var r=n.data[n.start],o=0===r?12:20,a=t.readUint32(n,o),s=t.findBox(e,["mdia","mdhd"])[0];if(s){r=s.data[s.start],o=0===r?12:20;var l=t.readUint32(s,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var u=t.bin2str(c.data.subarray(c.start+8,c.start+12)),d={soun:"audio",vide:"video"}[u];if(d){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=t.bin2str(h.data.subarray(h.start+12,h.start+16));S.b.log("MP4Demuxer:"+d+":"+f+" found")}i[a]={timescale:l,type:d},i[d]={timescale:l,id:a}}}}}}),i},t.getStartDTS=function(e,i){var n,r,o;return n=t.findBox(i,["moof","traf"]),r=[].concat.apply([],n.map(function(i){return t.findBox(i,["tfhd"]).map(function(n){var r,o;return r=t.readUint32(n,4),o=e[r].timescale||9e4,t.findBox(i,["tfdt"]).map(function(e){var i,n;return i=e.data[e.start],n=t.readUint32(e,4),1===i&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0]/o})})),o=Math.min.apply(null,r),isFinite(o)?o:0},t.offsetStartDTS=function(e,i,n){t.findBox(i,["moof","traf"]).map(function(i){return t.findBox(i,["tfhd"]).map(function(r){var o=t.readUint32(r,4),a=e[o].timescale||9e4;t.findBox(i,["tfdt"]).map(function(e){var i=e.data[e.start],r=t.readUint32(e,4);if(0===i)t.writeUint32(e,4,r-n*a);else{r*=Math.pow(2,32),r+=t.readUint32(e,8),r-=n*a,r=Math.max(r,0);var o=Math.floor(r/(I+1)),s=Math.floor(r%(I+1));t.writeUint32(e,4,o),t.writeUint32(e,8,s)}})})})},t.prototype.append=function(e,i,n,r){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),o=this.initData);var a=void 0,s=this.initPTS;if(void 0===s){var l=t.getStartDTS(o,e);this.initPTS=s=l-i,this.observer.trigger(E.a.INIT_PTS_FOUND,{initPTS:s})}t.offsetStartDTS(o,e,s),a=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,a,n,r,e)},t.prototype.destroy=function(){},t}(),P=D,O={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,i,n,r){if(!(i+24>e.length)){var o=this.parseHeader(e,i);if(o&&i+o.frameLength<=e.length){var a=9e4*o.samplesPerFrame/o.sampleRate,s=n+r*a,l={unit:e.subarray(i,i+o.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(l),t.len+=o.frameLength,{sample:l,length:o.frameLength}}}},parseHeader:function(t,e){var i=t[e+1]>>3&3,n=t[e+1]>>1&3,r=t[e+2]>>4&15,o=t[e+2]>>2&3,a=t[e+2]>>1&1;if(1!==i&&0!==r&&15!==r&&3!==o){var s=3===i?3-n:3===n?3:4,l=1e3*O.BitratesMap[14*s+r-1],c=3===i?0:2===i?1:2,u=O.SamplingRateMap[3*c+o],d=t[e+3]>>6==3?1:2,h=O.SamplesCoefficients[i][n],f=O.BytesInSlot[n],p=8*h*f;return{sampleRate:u,channelCount:d,frameLength:parseInt(h*l/u+a,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var i=this.parseHeader(t,e),n=4;i&&i.frameLength&&(n=i.frameLength);var r=e+n;if(r===t.length||r+1<t.length&&this.isHeaderPattern(t,r))return!0}return!1}},N=O,M=function(){function t(e){m(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,i=t.byteLength-e,n=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");n.set(t.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),i=this.word>>>32-e;return t>32&&S.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?i<<e|this.readBits(e):i},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,i,n=8,r=8;for(e=0;e<t;e++)0!==r&&(i=this.readEG(),r=(n+i+256)%256),n=0===r?n:r},t.prototype.readSPS=function(){var t,e,i,n,r,o,a,s=0,l=0,c=0,u=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),m=this.skipBits.bind(this),g=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),t=d(),h(5),m(3),d(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=f();if(3===b&&m(1),v(),v(),m(1),p())for(o=3!==b?8:12,a=0;a<o;a++)p()&&y(a<6?16:64)}v();var _=f();if(0===_)f();else if(1===_)for(m(1),g(),g(),e=f(),a=0;a<e;a++)g();v(),m(1),i=f(),n=f(),r=h(1),0===r&&m(1),m(1),p()&&(s=f(),l=f(),c=f(),u=f());var x=[1,1];if(p()&&p()){switch(d()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[d()<<8|d(),d()<<8|d()]}}return{width:Math.ceil(16*(i+1)-2*s-2*l),height:(2-r)*(n+1)*16-(r?2:4)*(c+u),pixelRatio:x}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),F=M,B=function(){function t(e,i,n,r){g(this,t),this.decryptdata=n,this.discardEPB=r,this.decrypter=new T.a(e,i)}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,i,n){var r=t[e].unit,o=r.subarray(16,r.length-r.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),r.set(o,16),n||s.decryptAacSamples(t,e+1,i)})},t.prototype.decryptAacSamples=function(t,e,i){for(;;e++){if(e>=t.length)return void i();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,i,n),!n)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,i=new Int8Array(e),n=0,r=32;r<=t.length-16;r+=160,n+=16)i.set(t.subarray(r,r+16),n);return i},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var i=0,n=32;n<=t.length-16;n+=160,i+=16)t.set(e.subarray(i,i+16),n);return t},t.prototype.decryptAvcSample=function(t,e,i,n,r,o){var a=this.discardEPB(r.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){r.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(t,e,i+1,n)})},t.prototype.decryptAvcSamples=function(t,e,i,n){for(;;e++,i=0){if(e>=t.length)return void n();for(var r=t[e].units;!(i>=r.length);i++){var o=r[i];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,i,n,o,a),!a)return}}}},t}(),G=B,U={video:0,audio:1,id3:2,text:3},H=function(){function t(e,i,n,r){v(this,t),this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=i,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new G(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var i=t._syncOffset(e);return!(i<0)&&(i&&S.b.warn("MPEG2-TS detected but first sync word found @ offset "+i+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),i=0;i<e;){if(71===t[i]&&71===t[i+188]&&71===t[i+376])return i;i++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:U[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,i,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",r),this._audioTrack=t.createTrack("audio",r),this._id3Track=t.createTrack("id3",r),this._txtTrack=t.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=i,this.videoCodec=n,this._duration=r},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,i,n,r){var o,a,s,l,c,u=e.length,d=!1;this.contiguous=n;var h=this.pmtParsed,f=this._avcTrack,p=this._audioTrack,m=this._id3Track,g=f.pid,v=p.pid,y=m.pid,b=this._pmtId,_=f.pesData,x=p.pesData,w=m.pesData,k=this._parsePAT,T=this._parsePMT,R=this._parsePES,C=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),P=t._syncOffset(e);for(u-=(u+P)%188,o=P;o<u;o+=188)if(71===e[o]){if(a=!!(64&e[o+1]),s=((31&e[o+1])<<8)+e[o+2],(48&e[o+3])>>4>1){if((l=o+5+e[o+4])===o+188)continue}else l=o+4;switch(s){case g:a&&(_&&(c=R(_))&&C(c,!1),_={data:[],size:0}),_&&(_.data.push(e.subarray(l,o+188)),_.size+=o+188-l);break;case v:a&&(x&&(c=R(x))&&(p.isAAC?L(c):I(c)),x={data:[],size:0}),x&&(x.data.push(e.subarray(l,o+188)),x.size+=o+188-l);break;case y:a&&(w&&(c=R(w))&&D(c),w={data:[],size:0}),w&&(w.data.push(e.subarray(l,o+188)),w.size+=o+188-l);break;case 0:a&&(l+=e[l]+1),b=this._pmtId=k(e,l);break;case b:a&&(l+=e[l]+1);var O=T(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);g=O.avc,g>0&&(f.pid=g),v=O.audio,v>0&&(p.pid=v,p.isAAC=O.isAAC),y=O.id3,y>0&&(m.pid=y),d&&!h&&(S.b.log("reparse from beginning"),d=!1,o=P-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(E.a.ERROR,{type:A.b.MEDIA_ERROR,details:A.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(c=R(_))?(C(c,!0),f.pesData=null):f.pesData=_,x&&(c=R(x))?(p.isAAC?L(c):I(c),p.pesData=null):(x&&x.size&&S.b.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=x),w&&(c=R(w))?(D(c),m.pesData=null):m.pesData=w,null==this.sampleAes?this.remuxer.remux(p,f,m,this._txtTrack,i,n,r):this.decryptAndRemux(p,f,m,this._txtTrack,i,n,r)},t.prototype.decryptAndRemux=function(t,e,i,n,r,o,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,i,n,r,o,a)})}else this.decryptAndRemuxAvc(t,e,i,n,r,o,a)},t.prototype.decryptAndRemuxAvc=function(t,e,i,n,r,o,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,i,n,r,o,a)})}else this.remuxer.remux(t,e,i,n,r,o,a)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,i,n){var r,o,a,s,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=(15&t[e+1])<<8|t[e+2],o=e+3+r-4,a=(15&t[e+10])<<8|t[e+11],e+=12+a;e<o;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){S.b.log("unkown stream type:"+t[e]);break}case 15:-1===l.audio&&(l.audio=s);break;case 21:-1===l.id3&&(l.id3=s);break;case 219:if(!n){S.b.log("unkown stream type:"+t[e]);break}case 27:-1===l.avc&&(l.avc=s);break;case 3:case 4:i?-1===l.audio&&(l.audio=s,l.isAAC=!1):S.b.log("MPEG audio found, not supported in this browser for now");break;case 36:S.b.warn("HEVC stream type found, not supported for now");break;default:S.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return l},t.prototype._parsePES=function(t){var e,i,n,r,o,a,s,l,c=0,u=t.data;if(!t||0===t.size)return null;for(;u[0].length<19&&u.length>1;){var d=new Uint8Array(u[0].length+u[1].length);d.set(u[0]),d.set(u[1],u[0].length),u[0]=d,u.splice(1,1)}if(e=u[0],1===(e[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;i=e[7],192&i&&(a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,a>4294967295&&(a-=8589934592),64&i?(s=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,s>4294967295&&(s-=8589934592),a-s>54e5&&(S.b.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),r=e[8],l=r+9,t.size-=l,o=new Uint8Array(t.size);for(var h=0,f=u.length;h<f;h++){e=u[h];var p=e.byteLength;if(l){if(l>p){l-=p;continue}e=e.subarray(l),p-=l,l=0}o.set(e,c),c+=p}return n&&(n-=r+3),{data:o,pts:a,dts:s,len:n}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var i=e.samples,n=i.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,i.push(t)):e.dropped++}t.debug.length&&S.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var i,n,r,o=this,a=this._avcTrack,s=this._parseAVCNALu(t.data),l=this.avcSample,c=!1,u=this.pushAccesUnit.bind(this),d=function(t,e,i,n){return{key:t,pts:e,dts:i,units:[],debug:n}};t.data=null,l&&s.length&&!a.audFound&&(u(l,a),l=this.avcSample=d(!1,t.pts,t.dts,"")),s.forEach(function(e){switch(e.type){case 1:n=!0,l||(l=o.avcSample=d(!0,t.pts,t.dts,"")),l.frame=!0;var s=e.data;if(c&&s.length>4){var h=new F(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=o.avcSample=d(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,i=new F(o.discardEPB(e.data)),i.readUByte();for(var f=0,p=0,m=!1,g=0;!m&&i.bytesAvailable>1;){f=0;do{g=i.readUByte(),f+=g}while(255===g);p=0;do{g=i.readUByte(),p+=g}while(255===g);if(4===f&&0!==i.bytesAvailable){m=!0;if(181===i.readUByte()){if(49===i.readUShort()){if(1195456820===i.readUInt()){if(3===i.readUByte()){var v=i.readUByte(),y=i.readUByte(),b=31&v,_=[v,y];for(r=0;r<b;r++)_.push(i.readUByte()),_.push(i.readUByte()),_.push(i.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:t.pts,bytes:_})}}}}}else if(p<i.bytesAvailable)for(r=0;r<p;r++)i.readUByte()}break;case 7:if(n=!0,c=!0,!a.sps){i=new F(e.data);var x=i.readSPS();a.width=x.width,a.height=x.height,a.pixelRatio=x.pixelRatio,a.sps=[e.data],a.duration=o._duration;var w=e.data.subarray(1,4),k="avc1.";for(r=0;r<3;r++){var E=w[r].toString(16);E.length<2&&(E="0"+E),k+=E}a.codec=k}break;case 8:n=!0,a.pps||(a.pps=[e.data]);break;case 9:n=!1,a.audFound=!0,l&&u(l,a),l=o.avcSample=d(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}if(l&&n){l.units.push(e)}}),e&&l&&(u(l,a),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var i=t.length;if(i>0){if(e.pts>=t[i-1].pts)t.push(e);else for(var n=i-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var i=this._avcTrack,n=i.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e,i,n,r,o,a=0,s=t.byteLength,l=this._avcTrack,c=l.naluState||0,u=c,d=[],h=-1;for(-1===c&&(h=0,o=31&t[0],c=0,a=1);a<s;)if(e=t[a++],c)if(1!==c)if(e)if(1===e){if(h>=0)n={data:t.subarray(h,a-c-1),type:o},d.push(n);else{var f=this._getLastNalUnit();if(f&&(u&&a<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(i=a-c-1)>0)){var p=new Uint8Array(f.data.byteLength+i);p.set(f.data,0),p.set(t.subarray(0,i),f.data.byteLength),f.data=p}}a<s?(r=31&t[a],h=a,o=r,c=0):c=-1}else c=0;else c=3;else c=e?0:2;else c=e?0:1;if(h>=0&&c>=0&&(n={data:t.subarray(h,s),type:o,state:c},d.push(n)),0===d.length){var m=this._getLastNalUnit();if(m){var g=new Uint8Array(m.data.byteLength+t.byteLength);g.set(m.data,0),g.set(t,m.data.byteLength),m.data=g}}return l.naluState=c,d},t.prototype.discardEPB=function(t){for(var e,i,n=t.byteLength,r=[],o=1;o<n-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(o=0;o<e;a++,o++)a===r[0]&&(a++,r.shift()),i[o]=t[a];return i},t.prototype._parseAACPES=function(t){var e,i,n,r,o,a=this._audioTrack,l=t.data,d=t.pts,f=this.aacOverFlow,p=this.aacLastPTS;if(f){var m=new Uint8Array(f.byteLength+l.byteLength);m.set(f,0),m.set(l,f.byteLength),l=m}for(n=0,o=l.length;n<o-1&&!s(l,n);n++);if(n){var g,v;if(n<o-1?(g="AAC PES did not start with ADTS header,offset:"+n,v=!1):(g="no ADTS header found in AAC PES",v=!0),S.b.warn("parsing error:"+g),this.observer.trigger(E.a.ERROR,{type:A.b.MEDIA_ERROR,details:A.a.FRAG_PARSING_ERROR,fatal:v,reason:g}),v)return}if(c(a,this.observer,l,n,this.audioCodec),i=0,e=u(a.samplerate),f&&p){var y=p+e;Math.abs(y-d)>1&&(S.b.log("AAC: align PTS for overlapping frames by "+Math.round((y-d)/90)),d=y)}for(;n<o;)if(s(l,n)&&n+5<o){var b=h(a,l,n,d,i);if(!b)break;n+=b.length,r=b.sample.pts,i++}else n++;f=n<o?l.subarray(n,o):null,this.aacOverFlow=f,this.aacLastPTS=r},t.prototype._parseMPEGPES=function(t){for(var e=t.data,i=e.length,n=0,r=0,o=t.pts;r<i;)if(N.isHeader(e,r)){var a=N.appendFrame(this._audioTrack,e,r,o,n);if(!a)break;r+=a.length,n++}else r++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),z=H,j=function(){function t(e,i,n){y(this,t),this.observer=e,this.config=n,this.remuxer=i}return t.prototype.resetInitSegment=function(t,e,i,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,i,n=R.a.getID3Data(t,0);if(n&&void 0!==R.a.getTimeStamp(n))for(e=n.length,i=Math.min(t.length-1,e+100);e<i;e++)if(N.probe(t,e))return S.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,i,n){for(var r=R.a.getID3Data(t,0),o=R.a.getTimeStamp(r),a=o?90*o:9e4*e,s=r.length,l=t.length,c=0,u=0,d=this._audioTrack,h=[{pts:a,dts:a,data:r}];s<l;)if(N.isHeader(t,s)){var f=N.appendFrame(d,t,s,a,c);if(!f)break;s+=f.length,u=f.sample.pts,c++}else R.a.isHeader(t,s)?(r=R.a.getID3Data(t,s),h.push({pts:u,dts:u,data:r}),s+=r.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,i,n)},t.prototype.destroy=function(){},t}(),q=j,V=function(){function t(){b(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),W=V,K=Math.pow(2,32)-1,X=function(){function t(){_(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:i,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,l,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,r))},t.box=function(t){for(var e,i=Array.prototype.slice.call(arguments,1),n=8,r=i.length,o=r;r--;)n+=i[r].byteLength;for(e=new Uint8Array(n),e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),r=0,n=8;r<o;r++)e.set(i[r],n),n+=i[r].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,i){i*=e;var n=Math.floor(i/(K+1)),r=Math.floor(i%(K+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,i,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,i))},t.moov=function(e){for(var i=e.length,n=[];i--;)n[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var i=e.length,n=[];i--;)n[i]=t.trex(e[i]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,i){i*=e;var n=Math.floor(i/(K+1)),r=Math.floor(i%(K+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var i,n,r=e.samples||[],o=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,o[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,o)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var i,n,r,o=[],a=[];for(i=0;i<e.sps.length;i++)n=e.sps[i],r=n.byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(n));for(i=0;i<e.pps.length;i++)n=e.pps[i],r=n.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var i=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var i=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var i=e.id,n=e.duration*e.timescale,r=e.width,o=e.height,a=Math.floor(n/(K+1)),s=Math.floor(n%(K+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,i){var n=t.sdtp(e),r=e.id,o=Math.floor(i/(K+1)),a=Math.floor(i%(K+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(e,n.length+16+20+8+16+8+8),n)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var i=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,i){var n,r,o,a,s,l,c=e.samples||[],u=c.length,d=12+16*u,h=new Uint8Array(d);for(i+=8+d,h.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),n=0;n<u;n++)r=c[n],o=r.duration,a=r.size,s=r.flags,l=r.cts,h.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var i,n=t.moov(e);return i=new Uint8Array(t.FTYP.byteLength+n.byteLength),i.set(t.FTYP),i.set(n,t.FTYP.byteLength),i},t}(),Q=X,Y=function(){function t(e,i,n,r){x(this,t),this.observer=e,this.config=i,this.typeSupported=n;var o=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,i,n,r,o,a){if(this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated){var s=t.samples.length,l=e.samples.length,c=r,u=r;if(s&&l){var d=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;c+=Math.max(0,d),u+=Math.max(0,-d)}if(s){t.timescale||(S.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r));var h=this.remuxAudio(t,c,o,a);if(l){var f=void 0;h&&(f=h.endPTS-h.startPTS),e.timescale||(S.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,u,o,f,a)}}else{var p=void 0;l&&(p=this.remuxVideo(e,u,o,a)),p&&t.codec&&this.remuxEmptyAudio(t,c,o,p)}}i.samples.length&&this.remuxID3(i,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(E.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,i){var n,r,o=this.observer,a=t.samples,s=e.samples,l=this.typeSupported,c="audio/mp4",u={},d={tracks:u},h=void 0===this._initPTS;if(h&&(n=r=1/0),t.config&&a.length&&(t.timescale=t.samplerate,S.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(c="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),u.audio={container:c,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:Q.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(n=r=a[0].pts-t.inputTimeScale*i)),e.sps&&e.pps&&s.length){var f=e.inputTimeScale;e.timescale=f,u.video={container:"video/mp4",codec:e.codec,initSegment:Q.initSegment([e]),metadata:{width:e.width,height:e.height}},h&&(n=Math.min(n,s[0].pts-f*i),r=Math.min(r,s[0].dts-f*i),this.observer.trigger(E.a.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(u).length?(o.trigger(E.a.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,h&&(this._initPTS=n,this._initDTS=r)):o.trigger(E.a.ERROR,{type:A.b.MEDIA_ERROR,details:A.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,i,n,r){var o,a,s,l,c,u,d,h=8,f=t.timescale,p=t.samples,m=[],g=p.length,v=this._PTSNormalize,y=this._initDTS,b=this.nextAvcDts,_=this.isSafari;_&&(i|=p.length&&b&&(r&&Math.abs(e-b/f)<.1||Math.abs(p[0].pts-b-y)<f/5)),i||(b=e*f),p.forEach(function(t){t.pts=v(t.pts-y,b),t.dts=v(t.dts-y,b)}),p.sort(function(t,e){var i=t.dts-e.dts,n=t.pts-e.pts;return i||(n||t.id-e.id)});var x=p.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(x<0){S.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(x/90)+" ms to overcome this issue");for(var w=0;w<p.length;w++)p[w].dts+=x}var k=p[0];c=Math.max(k.dts,0),l=Math.max(k.pts,0);var T=Math.round((c-b)/90);i&&T&&(T>1?S.b.log("AVC:"+T+" ms hole between fragments detected,filling it"):T<-1&&S.b.log("AVC:"+-T+" ms overlapping between fragments detected"),c=b,p[0].dts=c,l=Math.max(l-T,b),p[0].pts=l,S.b.log("Video/PTS/DTS adjusted: "+Math.round(l/90)+"/"+Math.round(c/90)+",delta:"+T+" ms")),k=p[p.length-1],d=Math.max(k.dts,0),u=Math.max(k.pts,0,d),_&&(o=Math.round((d-c)/(p.length-1)));for(var R=0,C=0,L=0;L<g;L++){for(var I=p[L],D=I.units,P=D.length,O=0,N=0;N<P;N++)O+=D[N].data.length;C+=O,R+=P,I.length=O,I.dts=_?c+L*o:Math.max(I.dts,c),I.pts=Math.max(I.pts,I.dts)}var M=C+4*R+8;try{a=new Uint8Array(M)}catch(t){return void this.observer.trigger(E.a.ERROR,{type:A.b.MUX_ERROR,details:A.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var F=new DataView(a.buffer);F.setUint32(0,M),a.set(Q.types.mdat,4);for(var B=0;B<g;B++){for(var G=p[B],U=G.units,H=0,z=void 0,j=0,q=U.length;j<q;j++){var V=U[j],W=V.data,K=V.data.byteLength;F.setUint32(h,K),h+=4,a.set(W,h),h+=K,H+=4+K}if(_)z=Math.max(0,o*Math.round((G.pts-G.dts)/o));else{if(B<g-1)o=p[B+1].dts-G.dts;else{var X=this.config,Y=G.dts-p[B>0?B-1:B].dts;if(X.stretchShortVideoTrack){var $=X.maxBufferHole,J=X.maxSeekHole,Z=Math.floor(Math.min($,J)*f),tt=(n?l+n*f:this.nextAudioPts)-G.pts;tt>Z?(o=tt-Y,o<0&&(o=Y),S.b.log("It is approximately "+tt/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=Y}else o=Y}z=Math.round(G.pts-G.dts)}m.push({size:H,duration:o,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=d+o;var et=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var it=m[0].flags;it.dependsOn=2,it.isNonSync=0}t.samples=m,s=Q.moof(t.sequenceNumber++,c,t),t.samples=[];var nt={data1:s,data2:a,startPTS:l/f,endPTS:(u+o)/f,startDTS:c/f,endDTS:this.nextAvcDts/f,type:"video",nb:m.length,dropped:et};return this.observer.trigger(E.a.FRAG_PARSING_DATA,nt),nt},t.prototype.remuxAudio=function(t,e,i,n){var r,o,a,s,l,c,u,d=t.inputTimeScale,h=t.timescale,f=d/h,p=t.isAAC?1024:1152,m=p*f,g=this._PTSNormalize,v=this._initDTS,y=!t.isAAC&&this.typeSupported.mpeg,b=t.samples,_=[],x=this.nextAudioPts;if(i|=b.length&&x&&(n&&Math.abs(e-x/d)<.1||Math.abs(b[0].pts-x-v)<20*m),b.forEach(function(t){t.pts=t.dts=g(t.pts-v,e*d)}),b=b.filter(function(t){return t.pts>=0}),0!==b.length){if(i||(x=n?e*d:b[0].pts),t.isAAC)for(var w=this.config.maxAudioFramesDrift,k=0,T=x;k<b.length;){var R,C=b[k],L=C.pts;R=L-T;var I=Math.abs(1e3*R/d);if(R<=-w*m)S.b.warn("Dropping 1 audio frame @ "+(T/d).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),b.splice(k,1),t.len-=C.unit.length;else if(R>=w*m&&I<1e4&&T){var D=Math.round(R/m);S.b.warn("Injecting "+D+" audio frame @ "+(T/d).toFixed(3)+"s due to "+Math.round(1e3*R/d)+" ms gap.");for(var P=0;P<D;P++){var O=Math.max(T,0);a=W.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(S.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=C.unit.subarray()),b.splice(k,0,{unit:a,pts:O,dts:O}),t.len+=a.length,T+=m,k++}C.pts=C.dts=T,T+=m,k++}else Math.abs(R),C.pts=C.dts=T,T+=m,k++}for(var N=0,M=b.length;N<M;N++){var F=b[N],B=F.unit,G=F.pts;if(void 0!==u)o.duration=Math.round((G-u)/f);else{var U=Math.round(1e3*(G-x)/d),H=0;if(i&&t.isAAC&&U){if(U>0&&U<1e4)H=Math.round((G-x)/m),S.b.log(U+" ms hole between AAC samples detected,filling it"),H>0&&(a=W.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(a=B.subarray()),t.len+=H*a.length);else if(U<-12){S.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(x/d).toFixed(3)+"s/"+(G/d).toFixed(3)+"s/"+-U+"ms"),t.len-=B.byteLength;continue}G=x}if(c=G,!(t.len>0))return;var z=y?t.len:t.len+8;r=y?0:8;try{s=new Uint8Array(z)}catch(t){return void this.observer.trigger(E.a.ERROR,{type:A.b.MUX_ERROR,details:A.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating audio mdat "+z})}if(!y){new DataView(s.buffer).setUint32(0,z),s.set(Q.types.mdat,4)}for(var j=0;j<H;j++)a=W.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(S.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=B.subarray()),s.set(a,r),r+=a.byteLength,o={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o)}s.set(B,r);var q=B.byteLength;r+=q,o={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o),u=G}var V=0,K=_.length;if(K>=2&&(V=_[K-2].duration,o.duration=V),K){this.nextAudioPts=x=u+f*V,t.len=0,t.samples=_,l=y?new Uint8Array:Q.moof(t.sequenceNumber++,c/f,t),t.samples=[];var X=c/d,Y=x/d,$={data1:l,data2:s,startPTS:X,endPTS:Y,startDTS:X,endDTS:Y,type:"audio",nb:K};return this.observer.trigger(E.a.FRAG_PARSING_DATA,$),$}return null}},t.prototype.remuxEmptyAudio=function(t,e,i,n){var r=t.inputTimeScale,o=t.samplerate?t.samplerate:r,a=r/o,s=this.nextAudioPts,l=(void 0!==s?s:n.startDTS*r)+this._initDTS,c=n.endDTS*r+this._initDTS,u=1024*a,d=Math.ceil((c-l)/u),h=W.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(S.b.warn("remux empty Audio"),!h)return void S.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var f=[],p=0;p<d;p++){var m=l+p*u;f.push({unit:h,pts:m,dts:m}),t.len+=h.length}t.samples=f,this.remuxAudio(t,e,i)},t.prototype.remuxID3=function(t,e){var i,n=t.samples.length,r=t.inputTimeScale,o=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)i=t.samples[s],i.pts=(i.pts-o)/r,i.dts=(i.dts-a)/r;this.observer.trigger(E.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var i,n=t.samples.length,r=t.inputTimeScale,o=this._initPTS;if(n){for(var a=0;a<n;a++)i=t.samples[a],i.pts=(i.pts-o)/r;this.observer.trigger(E.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var i;if(void 0===e)return t;for(i=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=i;return t},t}(),$=Y,J=function(){function t(e){w(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,i,n,r,o,a,s){var l=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),l.trigger(E.a.FRAG_PARSING_DATA,{data1:s,startPTS:r,startDTS:r,type:c,nb:1,dropped:0}),l.trigger(E.a.FRAG_PARSED)},t}(),Z=J,tt=function(){function t(e,i,n,r){k(this,t),this.observer=e,this.typeSupported=i,this.config=n,this.vendor=r}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,i,n,r,o,a,s,l,c,u,d){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var h=this.decrypter;null==h&&(h=this.decrypter=new T.a(this.observer,this.config));var f,p=this;try{f=performance.now()}catch(t){f=Date.now()}h.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var h;try{h=performance.now()}catch(t){h=Date.now()}p.observer.trigger(E.a.FRAG_DECRYPTED,{stats:{tstart:f,tdecrypt:h}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),n,r,o,a,s,l,c,u,d)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),n,r,o,a,s,l,c,u,d)},t.prototype.pushDecrypted=function(t,e,i,n,r,o,a,s,l,c,u,d){var h=this.demuxer;if(!h||a&&!this.probe(t)){for(var f=this.observer,p=this.typeSupported,m=this.config,g=[{demux:z,remux:$},{demux:P,remux:Z},{demux:L,remux:$},{demux:q,remux:$}],v=0,y=g.length;v<y;v++){var b=g[v],_=b.demux.probe;if(_(t)){var x=this.remuxer=new b.remux(f,m,p,this.vendor);h=new b.demux(f,x,m,p),this.probe=_;break}}if(!h)return void f.trigger(E.a.ERROR,{type:A.b.MEDIA_ERROR,details:A.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=h}var w=this.remuxer;(a||s)&&(h.resetInitSegment(i,n,r,c),w.resetInitSegment()),a&&(h.resetTimeStamp(d),w.resetTimeStamp(d)),"function"==typeof h.setDecryptData&&h.setDecryptData(e),h.append(t,o,l,u)},t}();e.a=tt},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var i=Ht[e];return!!i&&!0===i[t.slice(0,4)]}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)return null;for(var i=null,n=0;n<t.length;n++){var r=t[n];r.id===e&&(i=r)}return i}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function v(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e,i){var n=t[e],r=t[i],o=r.startPTS;isNaN(o)?r.start=i>e?n.start+n.duration:Math.max(n.start-r.duration,0):i>e?(n.duration=o-n.start,n.duration<0&&Pt.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(r.duration=n.start-o,r.duration<0&&Pt.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function _(t,e,i,n,r,o){var a=i;if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-i);isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),a=Math.max(i,e.startPTS),i=Math.min(i,e.startPTS),n=Math.max(n,e.endPTS),r=Math.min(r,e.startDTS),o=Math.max(o,e.endDTS)}var l=i-e.start;e.start=e.startPTS=i,e.maxStartPTS=a,e.endPTS=n,e.startDTS=r,e.endDTS=o,e.duration=n-i;var c=e.sn;if(!t||c<t.startSN||c>t.endSN)return 0;var u,d,h;for(u=c-t.startSN,d=t.fragments,d[u]=e,h=u;h>0;h--)b(d,h,h-1);for(h=u;h<d.length-1;h++)b(d,h,h+1);return t.PTSKnown=!0,l}function x(t,e){var i,n=Math.max(t.startSN,e.startSN)-e.startSN,r=Math.min(t.endSN,e.endSN)-e.startSN,o=e.startSN-t.startSN,a=t.fragments,s=e.fragments,l=0;if(r<n)return void(e.PTSKnown=!1);for(var c=n;c<=r;c++){var u=a[o+c],d=s[c];d&&u&&(l=u.cc-d.cc,isNaN(u.startPTS)||(d.start=d.startPTS=u.startPTS,d.endPTS=u.endPTS,d.duration=u.duration,d.backtracked=u.backtracked,d.dropped=u.dropped,i=d))}if(l)for(Pt.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<s.length;c++)s[c].cc+=l;if(i)_(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(o>=0&&o<a.length){var h=a[o].start;for(c=0;c<s.length;c++)s[c].start+=h}e.PTSKnown=t.PTSKnown}function w(t,e){for(var i=null,n=0;n<t.length;n+=1){var r=t[n];if(r&&r.cc===e){i=r;break}}return i}function k(t,e){return ie.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function E(t,e,i){var n=!1;return e&&e.details&&i&&(i.endCC>i.startCC||t&&t.cc<i.startCC)&&(n=!0),n}function A(t,e){var i=t.fragments,n=e.fragments;if(!n.length||!i.length)return void Pt.b.log("No fragments to align");var r=w(i,n[0].cc);return!r||r&&!r.startPTS?void Pt.b.log("No frag in previous level to align on"):r}function T(t,e){e.fragments.forEach(function(e){if(e){var i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}),e.PTSKnown=!0}function S(t,e,i){if(E(t,e,i)){var n=A(e.details,i);n&&(Pt.b.log("Adjusting PTS using last level due to CC increase within current level"),T(n.start,i))}if(!1===i.PTSKnown&&e&&e.details){var r=e.details.programDateTime,o=i.programDateTime,a=(o-r)/1e3+e.details.fragments[0].start;isNaN(a)||(Pt.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),T(a,i))}}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function L(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function F(){var t=v(),e=window.SourceBuffer||window.WebKitSourceBuffer,i=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!i&&!!n}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function V(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function X(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function $(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function rt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ot(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Ye,this.regionList=[]}function at(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function st(){this.values=Object.create(null)}function lt(t,e,i,n){var r=n?t.split(n):[t];for(var o in r)if("string"==typeof r[o]){var a=r[o].split(i);if(2===a.length){var s=a[0],l=a[1];e(s,l)}}}function ct(t,e,i){function n(){var e=at(t);if(null===e)throw new Error("Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}var o=t;if(r(),e.startTime=n(),r(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);t=t.substr(3),r(),e.endTime=n(),r(),function(t,e){var n=new st;lt(t,function(t,e){switch(t){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===e){n.set(t,i[r].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var o=e.split(","),a=o[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",Je,"end"]);break;case"position":o=e.split(","),n.percent(t,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",Je,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",Je,"end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var r=n.get("line","auto");"auto"===r&&-1===$e.line&&(r=-1),e.line=r,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",Je);var o=n.get("position","auto");"auto"===o&&50===$e.position&&(o="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=o}(t,e)}function ut(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function dt(t,e,i,n){for(var r,o,a,s,l,c=window.VTTCue||window.TextTrackCue,u=0;u<n.rows.length;u++)if(r=n.rows[u],a=!0,s=0,l="",!r.isEmpty()){for(var d=0;d<r.chars.length;d++)r.chars[d].uchar.match(/\s/)&&a?s++:(l+=r.chars[d].uchar,a=!1);r.cueStartTime=e,e===i&&(i+=1e-4),o=new c(e,i,ut(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=u+1:o.line=u>7?u-2:u+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function gt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function vt(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function yt(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function bt(t,e,i,n){return Math.min(e,n)-Math.max(t,i)}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function wt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function kt(t){for(var e=[],i=0;i<t.length;i++)"subtitles"===t[i].kind&&e.push(t[i]);return e}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Tt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function St(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var Rt={};i.d(Rt,"newCue",function(){return dt});var Ct=i(6),Lt=i.n(Ct),It=i(1),Dt=i(2),Pt=i(0),Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt=function(){function t(e){n(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.unregisterListeners()},t.prototype.isEventHandler=function(){return"object"===Ot(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){var i=function(t,e){var i="on"+t.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,e)};try{i.call(this,t,e).call()}catch(e){Pt.b.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(It.a.ERROR,{type:Dt.b.OTHER_ERROR,details:Dt.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),Mt=Nt,Ft=/^(\d+)x(\d+)$/,Bt=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,Gt=function(){function t(e){r(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var i=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)i[n]=parseInt(e.slice(2*n,2*n+2),16);return i}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=Ft.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,i={};for(Bt.lastIndex=0;null!==(e=Bt.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[e[1]]=n}return i},t}(),Ut=Gt,Ht={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},zt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),jt=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,qt=/#EXT-X-MEDIA:(.*)/g,Vt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Wt=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,Kt=function(){function t(){c(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return zt(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Lt.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),Xt=function(){function t(){c(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var i=t;return t&&t.method&&t.uri&&!t.iv&&(i=new Kt,i.method=t.method,i.baseuri=t.baseuri,i.reluri=t.reluri,i.iv=this.createInitializationVector(e)),i},t.prototype.cloneObj=function(t){return JSON.parse(JSON.stringify(t))},zt(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Lt.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var i=this.lastByteRangeEndOffset;t[0]=i||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),t}(),Qt=function(t){function e(i){c(this,e);var n=s(this,t.call(this,i,It.a.MANIFEST_LOADING,It.a.LEVEL_LOADING,It.a.AUDIO_TRACK_LOADING,It.a.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return l(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},Mt.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:"manifest"})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:"audioTrack",id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},e.prototype.load=function(t,e){var i=this.loaders[e.type];if(void 0!==i){var n=i.context;if(n&&n.url===t)return void Pt.b.trace("playlist request ongoing");Pt.b.warn("abort previous loader for type:"+e.type),i.abort()}var r=this.hls.config,o=void 0,a=void 0,s=void 0,l=void 0;"manifest"===e.type?(o=r.manifestLoadingMaxRetry,a=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout):"level"===e.type?(o=0,a=r.levelLoadingTimeOut):(o=r.levelLoadingMaxRetry,a=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout,Pt.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),i=this.loaders[e.type]=e.loader=void 0!==r.pLoader?new r.pLoader(r):new r.loader(r),e.url=t,e.responseType="";var c=void 0,u=void 0;c={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(e,c,u)},e.prototype.resolve=function(t,e){return Lt.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.prototype.parseMasterPlaylist=function(t,e){var i=[],n=void 0;for(jt.lastIndex=0;null!=(n=jt.exec(t));){var r={},a=r.attrs=new Ut(n[1]);r.url=this.resolve(n[2],e);var s=a.decimalResolution("RESOLUTION");s&&(r.width=s.width,r.height=s.height),r.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),r.name=a.NAME,function(t,e){["video","audio"].forEach(function(i){var n=t.filter(function(t){return o(t,i)});if(n.length){var r=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[i+"Codec"]=r.length>0?r[0]:n[0],t=t.filter(function(t){return-1===n.indexOf(t)})}}),e.unknownCodecs=t}([].concat((a.CODECS||"").split(/[ ,]+/)),r),r.videoCodec&&-1!==r.videoCodec.indexOf("avc1")&&(r.videoCodec=this.avc1toavcoti(r.videoCodec)),i.push(r)}return i},e.prototype.parseMasterPlaylistMedia=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=void 0,o=[],a=0;for(qt.lastIndex=0;null!==(r=qt.exec(t));){var s={},l=new Ut(r[1]);if(l.TYPE===i){if(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=i,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,e)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),n.length){var c=u(n,s.groupId);s.audioCodec=c?c.codec:n[0].codec}s.id=a++,o.push(s)}}return o},e.prototype.avc1toavcoti=function(t){var e,i=t.split(".");return i.length>2?(e=i.shift()+".",e+=parseInt(i.shift()).toString(16),e+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):e=t,e},e.prototype.parseLevelPlaylist=function(t,e,i,n){var r,o,a=0,s=0,l={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},c=new Kt,u=0,d=null,h=new Xt;for(Vt.lastIndex=0;null!==(r=Vt.exec(t));){var f=r[1];if(f){h.duration=parseFloat(f);var p=(" "+r[2]).slice(1);h.title=p||null,h.tagList.push(p?["INF",f,p]:["INF",f])}else if(r[3]){if(!isNaN(h.duration)){var m=a++;h.type=n,h.start=s,h.levelkey=c,h.sn=m,h.level=i,h.cc=u,h.baseurl=e,h.relurl=(" "+r[3]).slice(1),l.fragments.push(h),d=h,s+=h.duration,h=new Xt}}else if(r[4]){if(h.rawByteRange=(" "+r[4]).slice(1),d){var g=d.byteRangeEndOffset;g&&(h.lastByteRangeEndOffset=g)}}else if(r[5])h.rawProgramDateTime=(" "+r[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(r[5]))-1e3*s));else{for(r=r[0].match(Wt),o=1;o<r.length&&void 0===r[o];o++);var v=(" "+r[o+1]).slice(1),y=(" "+r[o+2]).slice(1);switch(r[o]){case"#":h.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":l.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(v);break;case"TARGETDURATION":l.targetduration=parseFloat(v);break;case"VERSION":l.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(v);break;case"KEY":var b=v,_=new Ut(b),x=_.enumeratedString("METHOD"),w=_.URI,k=_.hexadecimalInteger("IV");x&&(c=new Kt,w&&["AES-128","SAMPLE-AES"].indexOf(x)>=0&&(c.method=x,c.baseuri=e,c.reluri=w,c.key=null,c.iv=k));break;case"START":var E=v,A=new Ut(E),T=A.decimalFloatingPoint("TIME-OFFSET");isNaN(T)||(l.startTimeOffset=T);break;case"MAP":var S=new Ut(v);h.relurl=S.URI,h.rawByteRange=S.BYTERANGE,h.baseurl=e,h.level=i,h.type=n,h.sn="initSegment",l.initSegment=h,h=new Xt;break;default:Pt.b.warn("line parsed but not handled: "+r)}}}return h=d,h&&!h.relurl&&(l.fragments.pop(),s-=h.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=u,l},e.prototype.loadsuccess=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.data,o=t.url,a=i.type,s=i.id,l=i.level,c=this.hls;if(this.loaders[a]=void 0,void 0!==o&&0!==o.indexOf("data:")||(o=i.url),e.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var u="audioTrack"!==a&&"subtitleTrack"!==a,d=isNaN(l)?isNaN(s)?0:s:l,h=this.parseLevelPlaylist(r,o,d,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");h.tload=e.tload,"manifest"===a&&c.trigger(It.a.MANIFEST_LOADED,{levels:[{url:o,details:h}],audioTracks:[],url:o,stats:e,networkDetails:n}),e.tparsed=performance.now(),h.targetduration?u?c.trigger(It.a.LEVEL_LOADED,{details:h,level:l||0,id:s||0,stats:e,networkDetails:n}):"audioTrack"===a?c.trigger(It.a.AUDIO_TRACK_LOADED,{details:h,id:s,stats:e,networkDetails:n}):"subtitleTrack"===a&&c.trigger(It.a.SUBTITLE_TRACK_LOADED,{details:h,id:s,stats:e,networkDetails:n}):c.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"invalid targetduration",networkDetails:n})}else{var f=this.parseMasterPlaylist(r,o);if(f.length){var p=f.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),m=this.parseMasterPlaylistMedia(r,o,"AUDIO",p),g=this.parseMasterPlaylistMedia(r,o,"SUBTITLES");if(m.length){var v=!1;m.forEach(function(t){t.url||(v=!0)}),!1===v&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(Pt.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main"}))}c.trigger(It.a.MANIFEST_LOADED,{levels:f,audioTracks:m,subtitles:g,url:o,stats:e,networkDetails:n})}else c.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no level found in manifest",networkDetails:n})}else c.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no EXTM3U delimiter",networkDetails:n})},e.prototype.loaderror=function(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":i=Dt.a.MANIFEST_LOAD_ERROR,n=!0;break;case"level":i=Dt.a.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":i=Dt.a.AUDIO_TRACK_LOAD_ERROR,n=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:i,fatal:n,url:o.url,loader:o,response:t,context:e,networkDetails:r})},e.prototype.loadtimeout=function(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":i=Dt.a.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":i=Dt.a.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":i=Dt.a.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:i,fatal:n,url:o.url,loader:o,context:e,networkDetails:r})},e}(Mt),Yt=Qt,$t=function(t){function e(i){d(this,e);var n=h(this,t.call(this,i,It.a.FRAG_LOADING));return n.loaders={},n}return f(e,t),e.prototype.destroy=function(){var t=this.loaders;for(var e in t){var i=t[e];i&&i.destroy()}this.loaders={},Mt.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,i=e.type,n=this.loaders[i],r=this.hls.config;e.loaded=0,n&&(Pt.b.warn("abort previous fragment loader for type:"+i),n.abort()),n=this.loaders[i]=e.loader=void 0!==r.fLoader?new r.fLoader(r):new r.loader(r);var o=void 0,a=void 0,s=void 0;o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var l=e.byteRangeStartOffset,c=e.byteRangeEndOffset;isNaN(l)||isNaN(c)||(o.rangeStart=l,o.rangeEnd=c),a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(o,a,s)},e.prototype.loadsuccess=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.data,o=i.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(It.a.FRAG_LOADED,{payload:r,frag:o,stats:e,networkDetails:n})},e.prototype.loaderror=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:i})},e.prototype.loadtimeout=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:i})},e.prototype.loadprogress=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.frag;r.loaded=t.loaded,this.hls.trigger(It.a.FRAG_LOAD_PROGRESS,{frag:r,stats:t,networkDetails:n})},e}(Mt),Jt=$t,Zt=function(t){function e(i){p(this,e);var n=m(this,t.call(this,i,It.a.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return g(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},Mt.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,i=e.type,n=this.loaders[i],r=e.decryptdata,o=r.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;n&&(Pt.b.warn("abort previous key loader for type:"+i),n.abort()),e.loader=this.loaders[i]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,l=void 0,c=void 0;s={url:o,frag:e,responseType:"arraybuffer"},l={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,l,c)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(It.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,i){var n=i.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(It.a.KEY_LOADED,{frag:n})},e.prototype.loaderror=function(t,e){var i=e.frag,n=i.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:t})},e.prototype.loadtimeout=function(t,e){var i=e.frag,n=i.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(It.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},e}(Mt),te=Zt,ee={search:function(t,e){for(var i=0,n=t.length-1,r=null,o=null;i<=n;){r=(i+n)/2|0,o=t[r];var a=e(o);if(a>0)i=r+1;else{if(!(a<0))return o;n=r-1}}return null}},ie=ee,ne={isBuffered:function(t,e){try{if(t)for(var i=t.buffered,n=0;n<i.length;n++)if(e>=i.start(n)&&e<=i.end(n))return!0}catch(t){}return!1},bufferInfo:function(t,e,i){try{if(t){var n,r=t.buffered,o=[];for(n=0;n<r.length;n++)o.push({start:r.start(n),end:r.end(n)});return this.bufferedInfo(o,e,i)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,i){var n,r,o,a,s,l=[];for(t.sort(function(t,e){var i=t.start-e.start;return i||e.end-t.end}),s=0;s<t.length;s++){var c=l.length;if(c){var u=l[c-1].end;t[s].start-u<i?t[s].end>u&&(l[c-1].end=t[s].end):l.push(t[s])}else l.push(t[s])}for(s=0,n=0,r=o=e;s<l.length;s++){var d=l[s].start,h=l[s].end;if(e+i>=d&&e<h)r=d,o=h,n=o-e;else if(e+i<d){a=d;break}}return{len:n,start:r,end:o,nextStart:a}}},re=ne,oe=i(7),ae=i(5),se=i.n(ae),le=i(9),ce=i.n(le),ue=v(),de=function(){function t(e,i){y(this,t),this.hls=e,this.id=i;var n=this.observer=new se.a,r=e.config;n.trigger=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];n.emit.apply(n,[t,t].concat(i))},n.off=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];n.removeListener.apply(n,[t].concat(i))};var o=function(t,i){i=i||{},i.frag=this.frag,i.id=this.id,e.trigger(t,i)}.bind(this);n.on(It.a.FRAG_DECRYPTED,o),n.on(It.a.FRAG_PARSING_INIT_SEGMENT,o),n.on(It.a.FRAG_PARSING_DATA,o),n.on(It.a.FRAG_PARSED,o),n.on(It.a.ERROR,o),n.on(It.a.FRAG_PARSING_METADATA,o),n.on(It.a.FRAG_PARSING_USERDATA,o),n.on(It.a.INIT_PTS_FOUND,o);var a={mp4:ue.isTypeSupported("video/mp4"),mpeg:ue.isTypeSupported("audio/mpeg"),mp3:ue.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){Pt.b.log("demuxing in webworker");var l=void 0;try{l=this.w=ce()(10),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(t){e.trigger(It.a.ERROR,{type:Dt.b.OTHER_ERROR,details:Dt.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:a,vendor:s,id:i,config:JSON.stringify(r)})}catch(t){Pt.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&URL.revokeObjectURL(l.objectURL),this.demuxer=new oe.a(n,a,r,s),this.w=void 0}}else this.demuxer=new oe.a(n,a,r,s)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var i=this.observer;i&&(i.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,i,n,r,o,a,s){var l=this.w,c=isNaN(r.startDTS)?r.start:r.startDTS,u=r.decryptdata,d=this.frag,h=!(d&&r.cc===d.cc),f=!(d&&r.level===d.level),p=d&&r.sn===d.sn+1,m=!f&&p;if(h&&Pt.b.log(this.id+":discontinuity detected"),f&&Pt.b.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:t,decryptdata:u,initSegment:e,audioCodec:i,videoCodec:n,timeOffset:c,discontinuity:h,trackSwitch:f,contiguous:m,duration:o,accurateTimeOffset:a,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var g=this.demuxer;g&&g.push(t,u,e,i,n,c,h,f,m,o,a,s)}},t.prototype.onWorkerMessage=function(t){var e=t.data,i=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case It.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,i.trigger(e.event,e.data)}},t}(),he=de,fe={toString:function(t){for(var e="",i=t.length,n=0;n<i;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}},pe=fe,me=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ge={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},ve=function(t){function e(i){R(this,e);var n=C(this,t.call(this,i,It.a.MEDIA_ATTACHED,It.a.MEDIA_DETACHING,It.a.MANIFEST_LOADING,It.a.MANIFEST_PARSED,It.a.LEVEL_LOADED,It.a.KEY_LOADED,It.a.FRAG_LOADED,It.a.FRAG_LOAD_EMERGENCY_ABORTED,It.a.FRAG_PARSING_INIT_SEGMENT,It.a.FRAG_PARSING_DATA,It.a.FRAG_PARSED,It.a.ERROR,It.a.AUDIO_TRACK_SWITCHING,It.a.AUDIO_TRACK_SWITCHED,It.a.BUFFER_CREATED,It.a.BUFFER_APPENDED,It.a.BUFFER_FLUSHED));return n.config=i.config,n.audioCodecSwap=!1,n.ticks=0,n._state=ge.STOPPED,n.ontick=n.tick.bind(n),n}return L(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Mt.prototype.destroy.call(this),this.state=ge.STOPPED},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&-1===t&&(Pt.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=ge.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=ge.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ge.STOPPED,this.forceStartLoad=!1},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){switch(this.state){case ge.ERROR:break;case ge.BUFFER_FLUSHING:this.fragLoadError=0;break;case ge.IDLE:this._doTickIdle();break;case ge.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=ge.IDLE);break;case ge.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),i=this.retryDate;(!i||e>=i||this.media&&this.media.seeking)&&(Pt.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ge.IDLE);break;case ge.ERROR:case ge.STOPPED:case ge.FRAG_LOADING:case ge.PARSING:case ge.PARSED:case ge.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&e.startFragPrefetch)){var n=void 0;n=this.loadedmetadata?i.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,o=this.levels[r];if(o){var a=o.bitrate,s=void 0;s=a?Math.max(8*e.maxBufferSize/a,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var l=re.bufferInfo(this.mediaBuffer?this.mediaBuffer:i,n,e.maxBufferHole),c=l.len;if(!(c>=s)){Pt.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var u=o.details;if(void 0===u||!0===u.live&&this.levelLastLoaded!==r)return void(this.state=ge.WAITING_LEVEL);var d=this.fragPrevious;if(!u.live&&d&&!d.backtracked&&d.sn===u.endSN&&!l.nextStart){if(Math.min(i.duration,d.start+d.duration)-Math.max(l.end,d.start)<=Math.max(.2,d.duration)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(It.a.BUFFER_EOS,h),void(this.state=ge.ENDED)}}this._fetchPayloadOrEos(n,l,u)}}}},e.prototype._fetchPayloadOrEos=function(t,e,i){var n=this.fragPrevious,r=this.level,o=i.fragments,a=o.length;if(0!==a){var s=o[0].start,l=o[a-1].start+o[a-1].duration,c=e.end,u=void 0;if(i.initSegment&&!i.initSegment.data)u=i.initSegment;else if(i.live){var d=this.config.initialLiveManifestSize;if(a<d)return void Pt.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(u=this._ensureFragmentAtLivePoint(i,c,s,l,n,o,a)))return}else c<s&&(u=o[0]);u||(u=this._findFragment(s,n,a,o,c,l,i)),u&&this._loadFragmentOrKey(u,r,i,t,c)}},e.prototype._ensureFragmentAtLivePoint=function(t,e,i,n,r,o,a){var s=this.hls.config,l=this.media,c=void 0,u=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(i-s.maxFragLookUpTolerance,n-u)){var d=this.liveSyncPosition=this.computeLivePosition(i,t);Pt.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),e=d,l&&l.readyState&&l.duration>d&&(l.currentTime=d),this.nextLoadPosition=d}if(t.PTSKnown&&e>n&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(r){var h=r.sn+1;if(h>=t.startSN&&h<=t.endSN){var f=o[h-t.startSN];r.cc===f.cc&&(c=f,Pt.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=ie.search(o,function(t){return r.cc-t.cc}))&&Pt.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=o[Math.min(a-1,Math.round(a/2))],Pt.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},e.prototype._findFragment=function(t,e,i,n,r,o,a){var s=this.hls.config,l=void 0,c=void 0,u=s.maxFragLookUpTolerance,d=e?n[e.sn-n[0].sn+1]:void 0,h=function(t){var e=Math.min(u,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=r?1:t.start-e>r&&t.start?-1:0};if(r<o?(r>o-u&&(u=0),c=d&&!h(d)?d:ie.search(n,h)):c=n[i-1],c){l=c;var f=l.sn-a.startSN,p=e&&l.level===e.level,m=n[f-1],g=n[f+1];if(e&&l.sn===e.sn)if(p&&!l.backtracked)if(l.sn<a.endSN){var v=e.deltaPTS;v&&v>s.maxBufferHole&&e.dropped&&f?(l=m,Pt.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):(l=g,Pt.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(g&&g.backtracked?(Pt.b.warn("Already backtracked from fragment "+g.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+g.sn),l=g):(Pt.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,m?(m.loadCounter&&m.loadCounter--,l=m,l.backtracked=!0):f&&(l=null)))}return l},e.prototype._loadFragmentOrKey=function(t,e,i,n,r){var o=this.hls,a=o.config;if(!t.decryptdata||null==t.decryptdata.uri||null!=t.decryptdata.key){if(Pt.b.log("Loading "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+e+", currentTime:"+n.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var s=a.fragLoadingLoopThreshold;if(t.loadCounter>s&&Math.abs(this.fragLoadIdx-t.loadIdx)<s)return void o.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,t.autoLevel=o.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),o.trigger(It.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new he(o,"main")),void(this.state=ge.FRAG_LOADING)}Pt.b.log("Loading key for "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+e),this.state=ge.KEY_LOADING,o.trigger(It.a.KEY_LOADING,{frag:t})},e.prototype.getBufferedFrag=function(t){return ie.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t,e,i=this.media;if(i&&i.readyState&&!1===i.seeking&&(e=i.currentTime,e>i.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),re.isBuffered(i,e)?t=this.getBufferedFrag(e):re.isBuffered(i,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(It.a.FRAG_CHANGED,{frag:n});var r=n.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(It.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=n}}},e.prototype.immediateLevelSwitch=function(){if(Pt.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,re.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,i=void 0,n=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),i=this.getBufferedFrag(t.currentTime),i&&i.startPTS>1&&this.flushMainBuffer(0,i.startPTS-1),t.paused)e=0;else{var r=this.hls.nextLoadLevel,o=this.levels[r],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((n=this.getBufferedFrag(t.currentTime+e))&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=ge.BUFFER_FLUSHING;var i={startOffset:t,endOffset:e};this.altAudio&&(i.type="video"),this.hls.trigger(It.a.BUFFER_FLUSHING,i)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(Pt.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0,t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,i=this.config;isNaN(e)||Pt.b.log("media seeking to "+e.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:t,r=re.bufferInfo(n,e,this.config.maxBufferHole);if(this.state===ge.FRAG_LOADING){var o=this.fragCurrent;if(0===r.len&&o){var a=i.maxFragLookUpTolerance,s=o.start-a,l=o.start+o.duration+a;e<s||e>l?(o.loader&&(Pt.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ge.IDLE):Pt.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===ge.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=ge.IDLE);t&&(this.lastCurrentTime=e),this.state!==ge.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*i.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||Pt.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){Pt.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){Pt.b.log("trigger BUFFER_RESET"),this.hls.trigger(It.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e,i=!1,n=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(i=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=i&&n,this.audioCodecSwitch&&Pt.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,i=t.level,n=this.levels[this.levelLastLoaded],r=this.levels[i],o=e.totalduration,a=0;if(Pt.b.log("level "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var s=r.details;s&&e.fragments.length>0?(x(s,e),a=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,s),e.PTSKnown&&!isNaN(a)?Pt.b.log("live playlist sliding:"+a.toFixed(3)):(Pt.b.log("live playlist - outdated PTS, unknown sliding"),S(this.fragPrevious,n,e))):(Pt.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,S(this.fragPrevious,n,e))}else e.PTSKnown=!1;if(r.details=e,this.levelLastLoaded=i,this.hls.trigger(It.a.LEVEL_UPDATED,{details:e,level:i}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;isNaN(l)?e.live?(this.startPosition=this.computeLivePosition(a,e),Pt.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(Pt.b.log("negative start time offset "+l+", count from end of last fragment"),l=a+o+l),Pt.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ge.WAITING_LEVEL&&(this.state=ge.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===ge.KEY_LOADING&&(this.state=ge.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag;if(this.state===ge.FRAG_LOADING&&e&&"main"===i.type&&i.level===e.level&&i.sn===e.sn){var n=t.stats,r=this.levels[e.level],o=r.details;if(Pt.b.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=n,!0===i.bitrateTest&&this.hls.nextLoadLevel)this.state=ge.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(It.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=ge.IDLE,n.tparsed=n.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(It.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else{this.state=ge.PARSING;var a=o.totalduration,s=e.level,l=e.sn,c=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(Pt.b.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,Pt.b.log("Parsing "+l+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+e.cc);var u=this.demuxer;u||(u=this.demuxer=new he(this.hls,"main"));var d=this.media,h=d&&d.seeking,f=!h&&(o.PTSKnown||!o.live),p=o.initSegment?o.initSegment.data:[];u.push(t.payload,p,c,r.videoCodec,e,a,f,void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===ge.PARSING){var n,r,o=t.tracks;if(o.audio&&this.altAudio&&delete o.audio,r=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(Pt.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==r.container&&(a="mp4a.40.2",Pt.b.log("Android: force audio codec to "+a)),r.levelCodec=a,r.id=t.id}r=o.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=t.id),this.hls.trigger(It.a.BUFFER_CODECS,o);for(n in o){r=o[n],Pt.b.log("main track:"+n+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var l=r.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(It.a.BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,i=this.fragCurrent,n=t.frag;if(i&&"main"===t.id&&n.sn===i.sn&&n.level===i.level&&("audio"!==t.type||!this.altAudio)&&this.state===ge.PARSING){var r=this.levels[this.level],o=i;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),Pt.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(o.dropped=t.dropped,o.dropped)if(o.backtracked)Pt.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=r.details;if(!a||o.sn!==a.startSN)return Pt.b.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ge.IDLE,this.fragPrevious=o,void this.tick();Pt.b.warn("missing video frame(s) on first frag, appending with gap")}else o.backtracked=!1;var s=_(r.details,o,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(It.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(i){i&&i.length&&e.state===ge.PARSING&&(e.appended=!0,e.pendingBuffering=!0,l.trigger(It.a.BUFFER_APPENDING,{type:t.type,data:i,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===ge.PARSING&&(this.stats.tparsed=performance.now(),this.state=ge.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,i=t.id;if(!e){if(this.mediaBuffer!==this.media){Pt.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(Pt.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ge.IDLE}var r=this.hls;r.trigger(It.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(It.a.AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,i=!!this.hls.audioTracks[e].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(Pt.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,i=void 0,n=void 0,r=!1;for(var o in e){var a=e[o];"main"===a.id?(n=o,i=a,"video"===o&&(this.videoBuffer=e[o].buffer)):r=!0}r&&i?(Pt.b.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==ge.PARSING&&e!==ge.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==ge.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;Pt.b.log("main buffered : "+pe.toString(e.buffered));var i=this._bufferedFrags.filter(function(t){return re.isBuffered(e,(t.startPTS+t.endPTS)/2)});i.push(t),this._bufferedFrags=i.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(It.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=ge.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var i=!!this.media&&re.isBuffered(this.media,this.media.currentTime)&&re.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:case Dt.a.KEY_LOAD_ERROR:case Dt.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);e.loadCounter=0,Pt.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ge.FRAG_LOADING_WAITING_RETRY}else Pt.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ge.ERROR;break;case Dt.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(i?(this._reduceMaxBufferLength(e.duration),this.state=ge.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=ge.ERROR));break;case Dt.a.LEVEL_LOAD_ERROR:case Dt.a.LEVEL_LOAD_TIMEOUT:this.state!==ge.ERROR&&(t.fatal?(this.state=ge.ERROR,Pt.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==ge.WAITING_LEVEL||(this.state=ge.IDLE));break;case Dt.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ge.PARSING&&this.state!==ge.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ge.IDLE):(Pt.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,Pt.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*e.fragLoadingLoopThreshold))},e.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var i=t.currentTime,n=this.mediaBuffer?this.mediaBuffer:t,r=n.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var o=t.seeking?i:this.startPosition,a=re.isBuffered(n,o),s=r.start(0),l=!a&&Math.abs(o-s)<e.maxSeekHole;(i!==o||l)&&(Pt.b.log("target start position:"+o),l&&(o=s,Pt.b.log("target start position not buffered, seek to buffered.start(0) "+o)),Pt.b.log("adjust currentTime from "+i+" to "+o),t.currentTime=o)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var c=re.bufferInfo(t,i,0),u=!(t.paused||t.ended||0===t.buffered.length),d=i!==this.lastCurrentTime;if(d)this.stallReported&&(Pt.b.warn("playback not stuck anymore @"+i+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(u){var h=performance.now(),f=this.hls;if(this.stalled){var p=h-this.stalled,m=c.len,g=this.nudgeRetry||0;if(m<=.5&&p>1e3*e.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,Pt.b.warn("playback stalling in low buffer @"+i),f.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:m}));var v=c.nextStart,y=v-i;if(v&&y<e.maxSeekHole&&y>0){this.nudgeRetry=++g;var b=g*e.nudgeOffset;Pt.b.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+v+" + nudge "+b),t.currentTime=v+b,this.stalled=void 0,f.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:v+b-i})}}else if(m>.5&&p>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,Pt.b.warn("playback stalling in high buffer @"+i),f.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:m})),this.stalled=void 0,this.nudgeRetry=++g,g<e.nudgeMaxRetry){var _=t.currentTime,x=_+g*e.nudgeOffset;Pt.b.log("adjust currentTime from "+_+" to "+x),t.currentTime=x,f.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else Pt.b.error("still stuck in high buffer @"+i+" after "+e.nudgeMaxRetry+", raise fatal error"),f.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=h,this.stallReported=!1}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=ge.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return re.isBuffered(t,(e.startPTS+e.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=ge.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-i)},me(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,Pt.b.log("main stream:"+e+"->"+t),this.hls.trigger(It.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(Mt),ye=ve,be=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_e=function(t){function e(i){I(this,e);var n=D(this,t.call(this,i,It.a.MANIFEST_LOADED,It.a.LEVEL_LOADED,It.a.FRAG_LOADED,It.a.ERROR));return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,n}return P(e,t),e.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},e.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],i=void 0,n={},r=null,o=!1,s=!1,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===l&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),r=n[t.bitrate],void 0===r?(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)):r.url.push(t.url)}),!0===o&&!0===s&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,i=t.videoCodec;return(!e||a(e))&&(!i||a(i))}),t.audioTracks&&(c=t.audioTracks.filter(function(t){return!t.audioCodec||a(t.audioCodec,"audio")})),e.length>0){i=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var u=0;u<e.length;u++)if(e[u].bitrate===i){this._firstLevel=u,Pt.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(It.a.MANIFEST_PARSED,{levels:e,audioTracks:c,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:c.length>0})}else this.hls.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,i=this.hls;if(t>=0&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){Pt.b.log("switching to level "+t),this.currentLevelIndex=t;var n=e[t];n.level=t,i.trigger(It.a.LEVEL_SWITCH,n),i.trigger(It.a.LEVEL_SWITCHING,n)}var r=e[t],o=r.details;if(!o||!0===o.live){var a=r.urlId;i.trigger(It.a.LEVEL_LOADING,{url:r.url[a],level:t,id:a})}}else i.trigger(It.a.ERROR,{type:Dt.b.OTHER_ERROR,details:Dt.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(!0===t.fatal)return void(t.type===Dt.b.NETWORK_ERROR&&this.cleanTimer());var e=!1,i=!1,n=void 0;switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:case Dt.a.FRAG_LOOP_LOADING_ERROR:case Dt.a.KEY_LOAD_ERROR:case Dt.a.KEY_LOAD_TIMEOUT:n=t.frag.level,i=!0;break;case Dt.a.LEVEL_LOAD_ERROR:case Dt.a.LEVEL_LOAD_TIMEOUT:n=t.context.level,e=!0;break;case Dt.a.REMUX_ALLOC_ERROR:n=t.level,e=!0}void 0!==n&&this.recoverLevel(t,n,e,i)},e.prototype.recoverLevel=function(t,e,i,n){var r=this,o=this.hls.config,a=t.details,s=this._levels[e],l=void 0,c=void 0,u=void 0;if(s.loadError++,s.fragmentError=n,!0===i){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return Pt.b.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return r.loadLevel()},c),t.levelRetry=!0,this.levelRetryCount++,Pt.b.warn("level controller, "+a+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}!0!==i&&!0!==n||(l=s.url.length,l>1&&s.loadError<l?(Pt.b.warn("level controller, "+a+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(u=0===e?this._levels.length-1:e-1,Pt.b.warn("level controller, "+a+": switch to "+u),this.hls.nextAutoLevel=this.currentLevelIndex=u):!0===n&&(Pt.b.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var i=this._levels[e.level];void 0!==i&&(i.fragmentError=!1,i.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,i=t.level;if(i===this.currentLevelIndex){var n=this._levels[i];!1===n.fragmentError&&(n.loadError=0,this.levelRetryCount=0);var r=t.details;if(r.live){var o=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),a=n.details;a&&r.endSN===a.endSN&&(o/=2,Pt.b.log("same live playlist, reload twice faster")),o-=performance.now()-t.stats.trequest,o=Math.max(1e3,Math.round(o)),Pt.b.log("live playlist, reload in "+o+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},o)}else this.cleanTimer()}},e.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&t.url.length>0&&(e=t.urlId,this.hls.trigger(It.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},be(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(Mt),xe=_e,we=i(3),ke=function(t){function e(i){O(this,e);var n=N(this,t.call(this,i,It.a.MEDIA_ATTACHED,It.a.MEDIA_DETACHING,It.a.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return M(e,t),e.prototype.destroy=function(){Mt.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){this.media=void 0},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,i=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<i.length;r++){var o=we.a.getID3Frames(i[r].data);if(o){var a=i[r].pts,s=r<i.length-1?i[r+1].pts:e.endPTS;a===s&&(s+=1e-4);for(var l=0;l<o.length;l++){var c=o[l];if(!we.a.isTimeStampFrame(c)){var u=new n(a,s,"");u.value=c,this.id3Track.addCue(u)}}}}},e}(Mt),Ee=ke,Ae=function(){function t(e){B(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var i=Math.pow(this.alpha_,t);this.estimate_=e*(1-i)+i*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Te=Ae,Se=function(){function t(e,i,n,r){G(this,t),this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Te(i),this.fast_=new Te(n)}return t.prototype.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var i=8e3*e/t,n=t/1e3;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),Re=Se,Ce=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Le=function(t){function e(i){U(this,e);var n=H(this,t.call(this,i,It.a.FRAG_LOADING,It.a.FRAG_LOADED,It.a.FRAG_BUFFERED,It.a.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=i,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return z(e,t),e.prototype.destroy=function(){this.clearTimer(),Mt.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var i=this.hls,n=t.frag.level,r=i.levels[n].details.live,o=i.config,a=void 0,s=void 0;r?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new Re(i,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,i=this.fragCurrent,n=i.loader,r=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return Pt.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=n.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&i.autoLevel&&i.level){var a=performance.now()-o.trequest,s=Math.abs(e.playbackRate);if(a>500*i.duration/s){var l=t.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),u=l[i.level],d=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,h=o.total?o.total:Math.max(o.loaded,Math.round(i.duration*d/8)),f=e.currentTime,p=(h-o.loaded)/c,m=(re.bufferInfo(e,f,t.config.maxBufferHole).end-f)/s;if(m<2*i.duration/s&&p>m){var g=void 0,v=void 0;for(v=i.level-1;v>r;v--){var y=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if((g=i.duration*y/(6.4*c))<m)break}g<p&&(Pt.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+p.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=v,this._bwEstimator.sample(a,o.loaded),n.abort(),this.clearTimer(),t.trigger(It.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:o}))}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var i=this.hls.levels[e.level],n=(i.loaded?i.loaded.bytes:0)+t.stats.loaded,r=(i.loaded?i.loaded.duration:0)+t.frag.duration;i.loaded={bytes:n,duration:r},i.realBitrate=Math.round(8*n/r)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,i=t.frag;if(!(!0===e.aborted||1!==i.loadCounter||"main"!==i.type||isNaN(i.sn)||i.bitrateTest&&e.tload!==e.tbuffered)){var n=e.tparsed-e.trequest;Pt.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(n,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,i,n,r,o,a,s,l){for(var c=r;c>=n;c--){var u=l[c],d=u.details,h=d?d.totalduration/d.fragments.length:e,f=!!d&&d.live,p=void 0;p=c<=t?a*i:s*i;var m=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,g=m*h/p;if(Pt.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+m+"/"+h+"/"+o+"/"+g),p>m&&(!g||f&&!this.bitrateTestDelay||g<o))return c}return-1},Ce(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var i=this._nextABRAutoLevel;return-1!==t&&(i=Math.min(t,i)),i},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,i=t.levels,n=t.config,r=t.minAutoLevel,o=t.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,u=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(re.bufferInfo(o,l,n.maxBufferHole).end-l)/c,h=this._findBestLevel(a,s,u,r,e,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,i);if(h>=0)return h;Pt.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,p=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===d){var g=this.bitrateTestDelay;if(g){f=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-g,Pt.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=m=1}}return h=this._findBestLevel(a,s,u,r,e,d+f,p,m,i),Math.max(h,0)}}]),e}(Mt),Ie=Le,De=v(),Pe=function(t){function e(i){j(this,e);var n=q(this,t.call(this,i,It.a.MEDIA_ATTACHING,It.a.MEDIA_DETACHING,It.a.MANIFEST_PARSED,It.a.BUFFER_RESET,It.a.BUFFER_APPENDING,It.a.BUFFER_CODECS,It.a.BUFFER_EOS,It.a.BUFFER_FLUSHING,It.a.LEVEL_PTS_UPDATED,It.a.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n._live=null,n._objectUrl=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return V(e,t),e.prototype.destroy=function(){Mt.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,i=this.tracks.audio;if("audio"===e&&i&&"audio/mpeg"===i.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-t.start)>.1){var r=n.updating;try{n.abort()}catch(t){r=!0,Pt.b.warn("can not abort audio buffer: "+t)}r?this.audioTimestampOffset=t.start:(Pt.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,i=t.video||t.levels.length&&t.audio,n=0;t.altAudio&&(e||i)&&(n=(e?1:0)+(i?1:0),Pt.b.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var i=this.mediaSource=new De;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),i.addEventListener("sourceopen",this.onmso),i.addEventListener("sourceended",this.onmse),i.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(i),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){Pt.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){Pt.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):Pt.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(It.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){Pt.b.log("media source opened"),this.hls.trigger(It.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){Pt.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){Pt.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;Pt.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,i=this.segments.reduce(function(t,i){return i.parent===e?t+1:t},0);this.hls.trigger(It.a.BUFFER_APPENDED,{parent:e,pending:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){Pt.b.error("sourceBuffer error:",t),this.hls.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var i=t[e];try{this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.onsbue),i.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,i=this.mediaSource;for(var n in t)if(!e[n]){var r=t[n],o=r.levelCodec||r.codec,a=r.container+";codecs="+o;Pt.b.log("creating sourceBuffer("+a+")");try{var s=e[n]=i.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[n]={codec:o,container:r.container},r.buffer=s}catch(t){Pt.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(It.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){Pt.b.error("sourceBuffer error:",t.event),this.hls.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,i=t.type;for(var n in e)i&&n!==i||e[n].ended||(e[n].ended=!0,Pt.b.log(n+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var i in t){var n=t[i];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}Pt.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){Pt.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer)if(!0===this.sourceBuffer[i].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(Pt.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(Pt.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,i=this.sourceBuffer;try{for(var n in i)e+=i[n].buffered.length}catch(t){Pt.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(It.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,i=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void Pt.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){var n=i.shift();try{var r=n.type,o=e[r];o?o.updating?i.unshift(n):(o.ended=!1,this.parent=n.parent,o.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){Pt.b.error("error while trying to append buffer:"+e.message),i.unshift(n);var a={type:Dt.b.MEDIA_ERROR,parent:n.parent};if(22===e.code)return this.segments=[],a.details=Dt.a.BUFFER_FULL_ERROR,a.fatal=!1,void t.trigger(It.a.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=Dt.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry)return Pt.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],a.fatal=!0,void t.trigger(It.a.ERROR,a);a.fatal=!1,t.trigger(It.a.ERROR,a)}}}},e.prototype.flushBuffer=function(t,e,i){var n,r,o,a,s,l,c=this.sourceBuffer;if(Object.keys(c).length){if(Pt.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var u in c)if(!i||u===i){if(n=c[u],n.ended=!1,n.updating)return Pt.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<n.buffered.length;r++)if(o=n.buffered.start(r),a=n.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,l=e):(s=Math.max(o,t),l=Math.min(a,e)),Math.min(l,a)-s>.5)return this.flushBufferCounter++,Pt.b.log("flush "+u+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),n.remove(s,l),!1}catch(t){Pt.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else Pt.b.warn("abort flushing too many retries");Pt.b.log("buffer flushed")}return!0},e}(Mt),Oe=Pe,Ne=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Me=function(t){function e(i){return W(this,e),K(this,t.call(this,i,It.a.FPS_DROP_LEVEL_CAPPING,It.a.MEDIA_ATTACHING,It.a.MANIFEST_PARSED))}return X(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,r){return e.isLevelAllowed(r,i.restrictedLevels)&&r<=t});return e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,i){if(!t||t&&!t.length)return-1;for(var n=t.length-1,r=0;r<t.length;r+=1){var o=t[r];if((o.width>=e||o.height>=i)&&function(t,e){return!e||(t.width!==e.width||t.height!==e.height)}(o,t[r+1])){n=r;break}}return n},Ne(e,[{key:"mediaWidth",get:function(){var t=void 0,i=this.media;return i&&(t=i.width||i.clientWidth||i.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,i=this.media;return i&&(t=i.height||i.clientHeight||i.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(Mt),Fe=Me,Be=function(t){function e(i){return Q(this,e),Y(this,t.call(this,i,It.a.MEDIA_ATTACHING))}return $(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){"function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}},e.prototype.checkFPS=function(t,e,i){var n=performance.now();if(e){if(this.lastTime){var r=n-this.lastTime,o=i-this.lastDroppedFrames,a=e-this.lastDecodedFrames,s=1e3*o/r,l=this.hls;if(l.trigger(It.a.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:i}),s>0&&o>l.config.fpsDroppedMonitoringThreshold*a){var c=l.currentLevel;Pt.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(c-=1,l.trigger(It.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(Mt),Ge=Be,Ue=function(){function t(e){J(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,i){this.context=t,this.config=e,this.callbacks=i,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t=this.loader=new XMLHttpRequest;var i=this.stats;i.tfirst=0,i.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(i){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,i=e.readyState,n=this.stats,r=this.context,o=this.config;if(!n.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===i){var a=e.status;if(a>=200&&a<300){n.tload=Math.max(n.tfirst,performance.now());var s=void 0,l=void 0;"arraybuffer"===r.responseType?(s=e.response,l=s.byteLength):(s=e.responseText,l=s.length),n.loaded=n.total=l;var c={url:e.responseURL,data:s};this.callbacks.onSuccess(c,n,r,e)}else n.retry>=o.maxRetry||a>=400&&a<499?(Pt.b.error(a+" while loading "+r.url),this.callbacks.onError({code:a,text:e.statusText},r,e)):(Pt.b.warn(a+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},t.prototype.loadtimeout=function(){Pt.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,i=this.stats;i.loaded=t.loaded,t.lengthComputable&&(i.total=t.total);var n=this.callbacks.onProgress;n&&n(i,this.context,null,e)},t}(),He=Ue,ze=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),je=function(t){function e(i){Z(this,e);var n=tt(this,t.call(this,i,It.a.MANIFEST_LOADING,It.a.MANIFEST_PARSED,It.a.AUDIO_TRACK_LOADED,It.a.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return et(e,t),e.prototype.destroy=function(){this.cleanTimer(),Mt.prototype.destroy.call(this)},e.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){this.updateTrack(this.trackId)},e.prototype.onError=function(t){t.fatal&&t.type===Dt.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestParsed=function(t){var e=this,i=t.audioTracks||[],n=!1;this.tracks=i,this.hls.trigger(It.a.AUDIO_TRACKS_UPDATED,{audioTracks:i});var r=0;i.forEach(function(t){if(t.default&&!n)return e.audioTrack=r,void(n=!0);r++}),!1===n&&i.length&&(Pt.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},e.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(Pt.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},e.prototype.setAudioTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,Pt.b.log("switching to audioTrack "+t);var e=this.tracks[t],i=this.hls,n=e.type,r=e.url,o={id:t,type:n,url:r};i.trigger(It.a.AUDIO_TRACK_SWITCH,o),i.trigger(It.a.AUDIO_TRACK_SWITCHING,o);var a=e.details;!r||void 0!==a&&!0!==a.live||(Pt.b.log("(re)loading playlist for audioTrack "+t),i.trigger(It.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},e.prototype.updateTrack=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,Pt.b.log("updating audioTrack "+t);var e=this.tracks[t],i=e.url,n=e.details;!i||void 0!==n&&!0!==n.live||(Pt.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(It.a.AUDIO_TRACK_LOADING,{url:i,id:t}))}},ze(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(Mt),qe=je,Ve=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),We={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},Ke=function(t){function e(i){it(this,e);var n=nt(this,t.call(this,i,It.a.MEDIA_ATTACHED,It.a.MEDIA_DETACHING,It.a.AUDIO_TRACKS_UPDATED,It.a.AUDIO_TRACK_SWITCHING,It.a.AUDIO_TRACK_LOADED,It.a.KEY_LOADED,It.a.FRAG_LOADED,It.a.FRAG_PARSING_INIT_SEGMENT,It.a.FRAG_PARSING_DATA,It.a.FRAG_PARSED,It.a.ERROR,It.a.BUFFER_RESET,It.a.BUFFER_CREATED,It.a.BUFFER_APPENDED,It.a.BUFFER_FLUSHED,It.a.INIT_PTS_FOUND));return n.config=i.config,n.audioCodecSwap=!1,n.ticks=0,n._state=We.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return rt(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Mt.prototype.destroy.call(this),this.state=We.STOPPED},e.prototype.onInitPtsFound=function(t){var e=t.id,i=t.frag.cc,n=t.initPTS;"main"===e&&(this.initPTS[i]=n,this.videoTrackCC=i,Pt.b.log("InitPTS for cc:"+i+" found from video track:"+n),this.state===We.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,e>0&&-1===t?(Pt.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=We.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=We.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=We.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=We.STOPPED},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){var t,e,i,n=this.hls,r=n.config;switch(this.state){case We.ERROR:case We.PAUSED:case We.BUFFER_FLUSHING:break;case We.STARTING:this.state=We.WAITING_TRACK,this.loadedmetadata=!1;break;case We.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=re.bufferInfo(a,t,r.maxBufferHole),c=re.bufferInfo(s,t,r.maxBufferHole),u=l.len,d=l.end,h=this.fragPrevious,f=Math.max(r.maxBufferLength,c.len),p=this.audioSwitch,m=this.trackId;if((u<f||p)&&m<o.length){if(void 0===(i=o[m].details)){this.state=We.WAITING_TRACK;break}if(!p&&!i.live&&h&&h.sn===i.endSN&&!l.nextStart&&(!this.media.seeking||this.media.duration-d<h.duration/2)){this.hls.trigger(It.a.BUFFER_EOS,{type:"audio"}),this.state=We.ENDED;break}var g=i.fragments,v=g.length,y=g[0].start,b=g[v-1].start+g[v-1].duration,_=void 0;if(p)if(i.live&&!i.PTSKnown)Pt.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=t,i.PTSKnown&&t<y){if(!(l.end>y||l.nextStart))return;Pt.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=y+.05}if(i.initSegment&&!i.initSegment.data)_=i.initSegment;else if(d<=y){if(_=g[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=k(g,this.videoTrackCC)),i.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var x=l.nextStart?l.nextStart:y;return Pt.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(x+.05)),void(this.media.currentTime=x+.05)}}else{var w=void 0,E=r.maxFragLookUpTolerance,A=h?g[h.sn-g[0].sn+1]:void 0,T=function(t){var e=Math.min(E,t.duration);return t.start+t.duration-e<=d?1:t.start-e>d&&t.start?-1:0};d<b?(d>b-E&&(E=0),w=A&&!T(A)?A:ie.search(g,T)):w=g[v-1],w&&(_=w,y=w.start,h&&_.level===h.level&&_.sn===h.sn&&(_.sn<i.endSN?(_=g[_.sn+1-i.startSN],Pt.b.log("SN just loaded, load next one: "+_.sn)):_=null))}if(_)if(_.decryptdata&&null!=_.decryptdata.uri&&null==_.decryptdata.key)Pt.b.log("Loading key for "+_.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+m),this.state=We.KEY_LOADING,n.trigger(It.a.KEY_LOADING,{frag:_});else{if(Pt.b.log("Loading "+_.sn+", cc: "+_.cc+" of ["+i.startSN+" ,"+i.endSN+"],track "+m+", currentTime:"+t+",bufferEnd:"+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,_.loadCounter){_.loadCounter++;var S=r.fragLoadingLoopThreshold;if(_.loadCounter>S&&Math.abs(this.fragLoadIdx-_.loadIdx)<S)return void n.trigger(It.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:_})}else _.loadCounter=1;_.loadIdx=this.fragLoadIdx,this.fragCurrent=_,this.startFragRequested=!0,isNaN(_.sn)||(this.nextLoadPosition=_.start+_.duration),n.trigger(It.a.FRAG_LOADING,{frag:_}),this.state=We.FRAG_LOADING}}break;case We.WAITING_TRACK:e=this.tracks[this.trackId],e&&e.details&&(this.state=We.IDLE);break;case We.FRAG_LOADING_WAITING_RETRY:var R=performance.now(),C=this.retryDate;a=this.media;var L=a&&a.seeking;(!C||R>=C||L)&&(Pt.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=We.IDLE);break;case We.WAITING_INIT_PTS:var I=this.videoTrackCC;if(void 0===this.initPTS[I])break;var D=this.waitingFragment;if(D){var P=D.frag.cc;I!==P?(e=this.tracks[this.trackId],e.details&&e.details.live&&(Pt.b.warn("Waiting fragment CC ("+P+") does not match video track CC ("+I+")"),this.waitingFragment=null,this.state=We.IDLE)):(this.state=We.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=We.IDLE;break;case We.STOPPED:case We.FRAG_LOADING:case We.PARSING:case We.PARSED:case We.ENDED:}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var i=this.config;this.tracks&&i.autoStartLoad&&this.startLoad(i.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(Pt.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){this.state===We.ENDED&&(this.state=We.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onAudioTracksUpdated=function(t){Pt.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=We.PAUSED,this.waitingFragment=null,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=We.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,i=t.id,n=this.tracks[i],r=e.totalduration,o=0;if(Pt.b.log("track "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var a=n.details;a&&e.fragments.length>0?(x(a,e),o=e.fragments[0].start,e.PTSKnown?Pt.b.log("live audio playlist sliding:"+o.toFixed(3)):Pt.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,Pt.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(n.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;isNaN(s)?this.startPosition=0:(Pt.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===We.WAITING_TRACK&&(this.state=We.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===We.KEY_LOADING&&(this.state=We.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag;if(this.state===We.FRAG_LOADING&&e&&"audio"===i.type&&i.level===e.level&&i.sn===e.sn){var n=this.tracks[this.trackId],r=n.details,o=r.totalduration,a=e.level,s=e.sn,l=e.cc,c=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",u=this.stats=t.stats;if("initSegment"===s)this.state=We.IDLE,u.tparsed=u.tbuffered=performance.now(),r.initSegment.data=t.payload,this.hls.trigger(It.a.FRAG_BUFFERED,{stats:u,frag:e,id:"audio"}),this.tick();else{this.state=We.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new he(this.hls,"audio"));var d=this.initPTS[l],h=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==d){this.pendingBuffering=!0,Pt.b.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a);this.demuxer.push(t.payload,h,c,null,e,o,!1,d)}else Pt.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.waitingFragment=t,this.state=We.WAITING_INIT_PTS}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===We.PARSING){var n=t.tracks,r=void 0;if(n.video&&delete n.video,r=n.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(It.a.BUFFER_CODECS,n),Pt.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(It.a.BUFFER_APPENDING,a))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,i=this.fragCurrent,n=t.frag;if(i&&"audio"===t.id&&"audio"===t.type&&n.sn===i.sn&&n.level===i.level&&this.state===We.PARSING){var r=this.trackId,o=this.tracks[r],a=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),Pt.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),_(o.details,i,t.startPTS,t.endPTS);var s=this.audioSwitch,l=this.media,c=!1;if(s&&l)if(l.readyState){var u=l.currentTime;Pt.b.log("switching audio track : currentTime:"+u),u>=t.startPTS&&(Pt.b.log("switching audio track : flushing all audio"),this.state=We.BUFFER_FLUSHING,a.trigger(It.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),c=!0,this.audioSwitch=!1,a.trigger(It.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,a.trigger(It.a.AUDIO_TRACK_SWITCHED,{id:r});var d=this.pendingData;this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&d.push({type:t.type,data:e,parent:"audio",content:"data"})}),!c&&d.length&&(d.forEach(function(t){e.state===We.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(It.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===We.PARSING&&(this.stats.tparsed=performance.now(),this.state=We.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==We.PARSING&&e!==We.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==We.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,i=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),i.trigger(It.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;Pt.b.log("audio buffered : "+pe.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger(It.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=We.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var n=this.config;if(i<=n.fragLoadingMaxRetry){this.fragLoadError=i,e.loadCounter=0;var r=Math.min(Math.pow(2,i-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);Pt.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=We.FRAG_LOADING_WAITING_RETRY}else Pt.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=We.ERROR}break;case Dt.a.FRAG_LOOP_LOADING_ERROR:case Dt.a.AUDIO_TRACK_LOAD_ERROR:case Dt.a.AUDIO_TRACK_LOAD_TIMEOUT:case Dt.a.KEY_LOAD_ERROR:case Dt.a.KEY_LOAD_TIMEOUT:this.state!==We.ERROR&&(this.state=t.fatal?We.ERROR:We.IDLE,Pt.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case Dt.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===We.PARSING||this.state===We.PARSED)){var o=this.mediaBuffer,a=this.media.currentTime;if(o&&re.isBuffered(o,a)&&re.isBuffered(o,a+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,Pt.b.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*s.fragLoadingLoopThreshold),this.state=We.IDLE}else Pt.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=We.BUFFER_FLUSHING,this.hls.trigger(It.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(Pt.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(It.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=We.PARSED):(this.state=We.IDLE,this.fragPrevious=null,this.tick())},Ve(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,Pt.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(Mt),Xe=Ke,Qe=function(){function t(t){return"string"==typeof t&&(!!o[t.toLowerCase()]&&t.toLowerCase())}function e(t){return"string"==typeof t&&(!!a[t.toLowerCase()]&&t.toLowerCase())}function i(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function n(n,o,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),c={};l?s=document.createElement("custom"):c.enumerable=!0,s.hasBeenReset=!1;var u="",d=!1,h=n,f=o,p=a,m=null,g="",v=!0,y="auto",b="start",_=50,x="middle",w=50,k="middle";if(Object.defineProperty(s,"id",i({},c,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},c,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",i({},c,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},c,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},c,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},c,{get:function(){return m},set:function(t){m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},c,{get:function(){return g},set:function(e){var i=t(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},c,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},c,{get:function(){return y},set:function(t){if("number"!=typeof t&&t!==r)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},c,{get:function(){return b},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");b=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},c,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},c,{get:function(){return x},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");x=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},c,{get:function(){return w},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},c,{get:function(){return k},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");k=i,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",o={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}(),Ye=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};st.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var $e=new Qe(0,0,0),Je="middle"===$e.align?"middle":"center";ot.prototype={parse:function(t){function e(){var t=i.buffer,e=0;for(t=ut(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}var i=this;t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var n;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;n=e();var r=n.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:n=e(),i.state){case"HEADER":/:/.test(n)?function(t){lt(t,function(t,e){switch(t){case"Region":console.log("parse region",e)}},/:/)}(n):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(i.cue=new Qe(0,0,""),i.state="CUE",-1===n.indexOf("--\x3e")){i.cue.id=n;continue}case"CUE":try{ct(n,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("--\x3e");if(!n||a&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=n;continue;case"BADCUE":n||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var Ze=ot,ti={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ei=function(t){var e=t;return ti.hasOwnProperty(t)&&(e=ti[t]),String.fromCharCode(e)},ii=15,ni=100,ri={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},oi={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ai={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},si={25:2,26:4,29:6,30:8,31:10,27:13,28:15},li=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ci={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var i=this.verboseFilter[t];this.verboseLevel>=i&&console.log(this.time+" ["+t+"] "+e)}},ui=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e},di=function(){function t(e,i,n,r,o){ht(this,t),this.foreground=e||"white",this.underline=i||!1,this.italics=n||!1,this.background=r||"black",this.flash=o||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],i=0;i<e.length;i++){var n=e[i];t.hasOwnProperty(n)&&(this[n]=t[n])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),hi=function(){function t(e,i,n,r,o,a){ht(this,t),this.uchar=e||" ",this.penState=new di(i,n,r,o,a)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),fi=function(){function t(){ht(this,t),this.chars=[];for(var e=0;e<ni;e++)this.chars.push(new hi);this.pos=0,this.currPenState=new di}return t.prototype.equals=function(t){for(var e=!0,i=0;i<ni;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<ni;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<ni;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(ci.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>ni&&(ci.log("ERROR","Too large cursor position "+this.pos),this.pos=ni)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=ei(t);if(this.pos>=ni)return void ci.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1)},t.prototype.clearFromPos=function(t){var e;for(e=t;e<ni;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,i=0;i<ni;i++){var n=this.chars[i].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),pi=function(){function t(){ht(this,t),this.rows=[];for(var e=0;e<ii;e++)this.rows.push(new fi);this.currRow=ii-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<ii;t++)this.rows[t].clear();this.currRow=ii-1},t.prototype.equals=function(t){for(var e=!0,i=0;i<ii;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<ii;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<ii;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){ci.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){ci.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var i=0;i<ii;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[n].cueStartTime;if(o&&o<ci.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[e-this.nrRollUpRows+a+1].copy(r.rows[n+a])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,c=Math.max(l-1,0);s.setCursor(t.indent),t.color=s.chars[c].penState.foreground}var u={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(u)},t.prototype.setBkgData=function(t){ci.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void ci.log("DEBUG","roll_up but nrRollUpRows not set yet");ci.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),ci.log("INFO","Rolling up")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],i="",n=-1,r=0;r<ii;r++){var o=this.rows[r].getTextString();o&&(n=r+1,t?e.push("Row "+n+": '"+o+"'"):e.push(o.trim()))}return e.length>0&&(i=t?"["+e.join(" | ")+"]":e.join("\n")),i},t.prototype.getTextAndFormat=function(){return this.rows},t}(),mi=function(){function t(e,i){ht(this,t),this.chNr=e,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new pi,this.nonDisplayedMemory=new pi,this.lastOutputScreen=new pi,this.currRollUpRow=this.displayedMemory.rows[ii-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[ii-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,ci.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";ci.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(ci.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){ci.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){ci.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){ci.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){ci.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){ci.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){ci.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){ci.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){ci.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){ci.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){ci.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){ci.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(ci.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,ci.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){ci.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var i=Math.floor(t/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=n[i]}ci.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=ci.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),gi=function(){function t(e,i,n){ht(this,t),this.field=e||1,this.outputs=[i,n],this.channels=[new mi(1,i),new mi(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var i,n,r,o=!1;this.lastTime=t,ci.setTime(t);for(var a=0;a<e.length;a+=2)if(n=127&e[a],r=127&e[a+1],0!==n||0!==r){if(ci.log("DATA","["+ui([e[a],e[a+1]])+"] -> ("+ui([n,r])+")"),i=this.parseCmd(n,r),i||(i=this.parseMidrow(n,r)),i||(i=this.parsePAC(n,r)),i||(i=this.parseBackgroundAttributes(n,r)),!i&&(o=this.parseChars(n,r)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else ci.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,ci.log("WARNING","Couldn't parse cleaned data "+ui([n,r])+" orig: "+ui([e[a],e[a+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var i=null,n=(20===t||28===t)&&32<=e&&e<=47,r=(23===t||31===t)&&33<=e&&e<=35;if(!n&&!r)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,ci.log("DEBUG","Repeated command ("+ui([t,e])+") is dropped"),!0;i=20===t||23===t?1:2;var o=this.channels[i-1];return 20===t||28===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},t.prototype.parseMidrow=function(t,e){var i=null;if((17===t||25===t)&&32<=e&&e<=47){if((i=17===t?1:2)!==this.currChNr)return ci.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[i-1].ccMIDROW(e),ci.log("DEBUG","MIDROW ("+ui([t,e])+")"),!0}return!1},t.prototype.parsePAC=function(t,e){var i=null,n=null,r=(17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127,o=(16===t||24===t)&&64<=e&&e<=95;if(!r&&!o)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;i=t<=23?1:2,n=64<=e&&e<=95?1===i?ri[t]:ai[t]:1===i?oi[t]:si[t];var a=this.interpretPAC(n,e);return this.channels[i-1].setPAC(a),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},t.prototype.interpretPAC=function(t,e){var i=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return i=e>95?e-96:e-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},t.prototype.parseChars=function(t,e){var i=null,n=null,r=null;if(t>=25?(i=2,r=t-8):(i=1,r=t),17<=r&&r<=19){var o=e;o=17===r?e+80:18===r?e+112:e+144,ci.log("INFO","Special char '"+ei(o)+"' in channel "+i),n=[o]}else 32<=t&&t<=127&&(n=0===e?[t]:[t,e]);if(n){var a=ui(n);ci.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},t.prototype.parseBackgroundAttributes=function(t,e){var i,n,r,o,a=(16===t||24===t)&&32<=e&&e<=47,s=(23===t||31===t)&&45<=e&&e<=47;return!(!a&&!s)&&(i={},16===t||24===t?(n=Math.floor((e-32)/2),i.background=li[n],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0)),r=t<24?1:2,o=this.channels[r-1],o.setBkgData(i),this.lastCmdA=null,this.lastCmdB=null,!0)},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),vi=gi,yi=function(){function t(e,i){ft(this,t),this.timelineController=e,this.track=i,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,i){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=i,this.timelineController.createCaptionsTrack(this.track)},t}(),bi=yi,_i=function(t,e,i){return t.substr(i||0,e.length)===e},xi=function(t){var e=parseInt(t.substr(-3)),i=parseInt(t.substr(-6,2)),n=parseInt(t.substr(-9,2)),r=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(i)||isNaN(n)||isNaN(r)?-1:(e+=1e3*i,e+=6e4*n,e+=36e5*r)},wi=function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return(e>>>0).toString()},ki=function(t,e,i){var n=t[e],r=t[n.prevCC];if(!r||!r.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;r&&r.new;)t.ccOffset+=n.start-r.start,n.new=!1,n=r,r=t[n.prevCC];t.presentationOffset=i},Ei={parse:function(t,e,i,n,r,o){var a=/\r\n|\n\r|\n|\r/g,s=Object(we.b)(new Uint8Array(t)).trim().replace(a,"\n").split("\n"),l="00:00.000",c=0,u=0,d=0,h=[],f=void 0,p=!0,m=new Ze;m.oncue=function(t){var e=i[n],r=i.ccOffset;e&&e.new&&(void 0!==u?r=i.ccOffset=e.start:ki(i,n,d)),d&&(r=d+i.ccOffset-i.presentationOffset),t.startTime+=r-u,t.endTime+=r-u,t.id=wi(t.startTime.toString())+wi(t.endTime.toString())+wi(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&h.push(t)},m.onparsingerror=function(t){f=t},m.onflush=function(){if(f&&o)return void o(f);r(h)},s.forEach(function(t){if(p){if(_i(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach(function(t){_i(t,"LOCAL:")?l=t.substr(6):_i(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))});try{e=e<0?e+8589934592:e,c-=e,u=xi(l)/1e3,d=c/9e4,-1===u&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){f=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}m.parse(t+"\n")}),m.flush()}},Ai=Ei,Ti=function(t){function e(i){pt(this,e);var n=mt(this,t.call(this,i,It.a.MEDIA_ATTACHING,It.a.MEDIA_DETACHING,It.a.FRAG_PARSING_USERDATA,It.a.FRAG_DECRYPTED,It.a.MANIFEST_LOADING,It.a.MANIFEST_LOADED,It.a.FRAG_LOADED,It.a.LEVEL_SWITCHING,It.a.INIT_PTS_FOUND));if(n.hls=i,n.config=i.config,n.enabled=!0,n.Cues=i.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var r=new bi(n,1),o=new bi(n,2);n.cea608Parser=new vi(0,r,o)}return n}return gt(e,t),e.prototype.addCues=function(t,e,i,n){for(var r=this.cueRanges,o=!1,a=r.length;a--;){var s=r[a],l=bt(s[0],s[1],e,i);if(l>=0&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],i),o=!0,l/(i-e)>.5))return}o||r.push([e,i]),this.Cues.newCue(this[t],e,i,n)},e.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var i=0;i<e.textTracks.length;i++){var n=e.textTracks[i],r="textTrack"+t;if(!0===n[r])return n}return null},e.prototype.sendAddTrackEvent=function(t,e){var i=null;try{i=new window.Event("addtrack")}catch(t){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)},e.prototype.createCaptionsTrack=function(t){var e="textTrack"+t;if(!this[e]){var i=this.getExistingTrack(t);if(i)this[e]=i,vt(this[e]),this.sendAddTrackEvent(this[e],this.media);else{var n=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config.captionsTextTrack1LanguageCode);n&&(n[e]=!0,this[e]=n)}}},e.prototype.createTextTrack=function(t,e,i){var n=this.media;if(n)return n.addTextTrack(t,e,i)},e.prototype.destroy=function(){Mt.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){vt(this.textTrack1),vt(this.textTrack2)},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var i=0;i<e.length;i++)vt(e[i])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var i=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,n){var r=void 0;if(n<i.length){var o=i[n];yt(o,t)&&(r=o)}r||(r=e.createTextTrack("subtitles",t.name,t.lang)),r.mode=t.default?"showing":"hidden",e.textTracks.push(r)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,i=t.payload;if("main"===e.type){var n=e.sn;if(n!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=n}else if("subtitle"===e.type)if(i.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var o=e.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(e,i)}else this.hls.trigger(It.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var i=this.vttCCs;i[t.cc]||(i[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.textTracks,r=this.hls;Ai.parse(e,this.initPTS,i,t.cc,function(e){var i=n[t.trackId];e.forEach(function(t){if(!i.cues.getCueById(t.id))try{i.addCue(t)}catch(n){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,i.addCue(e)}}),r.trigger(It.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){Pt.b.log("Failed to parse VTT cue: "+e),r.trigger(It.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},e.prototype.onFragDecrypted=function(t){var e=t.payload,i=t.frag;if("subtitle"===i.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(i,e)}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var i=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,i)}},e.prototype.extractCea608Data=function(t){for(var e,i,n,r,o,a=31&t[0],s=2,l=[],c=0;c<a;c++)e=t[s++],i=127&t[s++],n=127&t[s++],r=0!=(4&e),o=3&e,0===i&&0===n||r&&0===o&&(l.push(i),l.push(n));return l},e}(Mt),Si=Ti,Ri=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Ci=function(t){function e(i){_t(this,e);var n=xt(this,t.call(this,i,It.a.MEDIA_ATTACHED,It.a.MEDIA_DETACHING,It.a.MANIFEST_LOADING,It.a.MANIFEST_LOADED,It.a.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n.subtitleDisplay=!1,n}return wt(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=kt(this.media.textTracks),i=0;i<e.length;i++)"showing"===e[i].mode&&(t=i);this.subtitleTrack=t}},e.prototype.destroy=function(){Mt.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,i=t.subtitles||[];this.tracks=i,this.trackId=-1,this.hls.trigger(It.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:i}),i.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var i=e.details;void 0!==i&&!0!==i.live||(Pt.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(It.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(Pt.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},e.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=kt(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(e[this.trackId].mode="hidden"),this.trackId=t,Pt.b.log("switching to subtitle track "+t),this.hls.trigger(It.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t){var i=this.tracks[t];this.subtitleDisplay&&(e[t].mode="showing");var n=i.details;void 0!==n&&!0!==n.live||(Pt.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(It.a.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))}}},Ri(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),e}(Mt),Li=Ci,Ii=i(4),Di={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},Pi=function(t){function e(i){Et(this,e);var n=At(this,t.call(this,i,It.a.MEDIA_ATTACHED,It.a.ERROR,It.a.KEY_LOADED,It.a.FRAG_LOADED,It.a.SUBTITLE_TRACKS_UPDATED,It.a.SUBTITLE_TRACK_SWITCH,It.a.SUBTITLE_TRACK_LOADED,It.a.SUBTITLE_FRAG_PROCESSED));return n.config=i.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.state=Di.STOPPED,n.currentTrackId=-1,n.ticks=0,n.decrypter=new Ii.a(i.observer,i.config),n}return Tt(e,t),e.prototype.destroy=function(){Mt.prototype.destroy.call(this),this.state=Di.STOPPED},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(It.a.FRAG_LOADING,{frag:t}),this.state=Di.FRAG_LOADING}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=Di.IDLE,this.nextFrag()},e.prototype.onMediaAttached=function(){this.state=Di.IDLE},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.tick=function(){var t=this;1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(function(){t.tick()},1),this.ticks=0)},e.prototype.doTick=function(){var t=this;switch(this.state){case Di.IDLE:var e=this.tracks,i=this.currentTrackId,n=this.vttFragSNsProcessed[i],r=this.vttFragQueues[i],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1,a=function(t){return n.indexOf(t.sn)>-1},s=function(t){return r.some(function(e){return e.sn===t.sn})};if(!e)break;var l;if(i<e.length&&(l=e[i].details),void 0===l)break;l.fragments.forEach(function(e){a(e)||e.sn===o||s(e)||(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key?(Pt.b.log("Loading key for "+e.sn),t.state=Di.KEY_LOADING,t.hls.trigger(It.a.KEY_LOADING,{frag:e})):(e.trackId=i,r.push(e),t.nextFrag()))})}},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;Pt.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.clearVttFragQueues()},e.prototype.onSubtitleTrackLoaded=function(){this.tick()},e.prototype.onKeyLoaded=function(){this.state===Di.KEY_LOADING&&(this.state=Di.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag.decryptdata,n=t.frag,r=this.hls;if(this.state===Di.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var o;try{o=performance.now()}catch(t){o=Date.now()}this.decrypter.decrypt(t.payload,i.key.buffer,i.iv.buffer,function(t){var e;try{e=performance.now()}catch(t){e=Date.now()}r.trigger(It.a.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:o,tdecrypt:e}})})}},e}(Mt),Oi=Pi,Ni={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:He,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:Ie,bufferController:Oe,capLevelController:Fe,fpsController:Ge,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Ni.subtitleStreamController=Oi,Ni.subtitleTrackController=Li,Ni.timelineController=Si,Ni.cueHandler=Rt,Ni.enableCEA708Captions=!0,Ni.enableWebVTT=!0,Ni.captionsTextTrack1Label="English",Ni.captionsTextTrack1LanguageCode="en",Ni.captionsTextTrack2Label="Spanish",Ni.captionsTextTrack2LanguageCode="es",Ni.audioStreamController=Xe,Ni.audioTrackController=qe;var Mi=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Fi=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};St(this,t);var n=t.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in i||(i[r]=n[r]);if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(i.liveMaxLatencyDuration<=i.liveSyncDuration||void 0===i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(Pt.a)(i.debug),this.config=i,this._autoLevelCapping=-1;var o=this.observer=new se.a;o.trigger=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];o.emit.apply(o,[t,t].concat(i))},o.off=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];o.removeListener.apply(o,[t].concat(i))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var a=this.abrController=new i.abrController(this),s=new i.bufferController(this),l=new i.capLevelController(this),c=new i.fpsController(this),u=new Yt(this),d=new Jt(this),h=new te(this),f=new Ee(this),p=this.levelController=new xe(this),m=this.streamController=new ye(this),g=[p,m],v=i.audioStreamController;v&&g.push(new v(this)),this.networkControllers=g;var y=[u,d,h,a,s,l,c,f];if(v=i.audioTrackController){var b=new v(this);this.audioTrackController=b,y.push(b)}if(v=i.subtitleTrackController){var _=new v(this);this.subtitleTrackController=_,y.push(_)}[i.subtitleStreamController,i.timelineController].forEach(function(t){t&&y.push(new t(e))}),this.coreComponents=y}return t.isSupported=function(){return F()},Mi(t,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return It.a}},{key:"ErrorTypes",get:function(){return Dt.b}},{key:"ErrorDetails",get:function(){return Dt.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Ni},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){Pt.b.log("destroy"),this.trigger(It.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){Pt.b.log("attachMedia"),this.media=t,this.trigger(It.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){Pt.b.log("detachMedia"),this.trigger(It.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=Lt.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),Pt.b.log("loadSource:"+t),this.url=t,this.trigger(It.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;Pt.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){Pt.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){Pt.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){Pt.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Mi(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){Pt.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){Pt.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){Pt.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){Pt.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){Pt.b.log("set startLevel:"+t);var e=this;-1!==t&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){Pt.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,i=t.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>i)return r}return 0}},{key:"maxAutoLevel",get:function(){var t=this,e=t.levels,i=t.autoLevelCapping;return-1===i&&e&&e.length?e.length-1:i}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e.default=Fi},function(t,e,i){function n(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var n=e(e.s=ENTRY_MODULE);return n.default||n}function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t){var e=[],i=t.toString(),n=i.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!n)return e;for(var o,a=n[1],s=new RegExp("(\\\\n|\\W)"+r(a)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");o=s.exec(i);)e.push(o[3]);return e}function a(t,e){for(var i=[e],n=[],r={};i.length;){var a=i.pop();if(!r[a]&&t[a]){r[a]=!0,n.push(a);var s=o(t[a]);i=i.concat(s)}}return n}t.exports=function(t,e){e=e||{};var r=i.m,o=e.all?Object.keys(r):a(r,t),s="("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.map(function(t){return JSON.stringify(t)+": "+r[t].toString()}).join(",")+"})(self);",l=new window.Blob([s],{type:"text/javascript"});if(e.bare)return l;var c=window.URL||window.webkitURL||window.mozURL||window.msURL,u=c.createObjectURL(l),d=new window.Worker(u);return d.objectURL=u,d}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),r=i(1),o=i(0),a=i(5),s=i.n(a),l=function(t){var e=new s.a;e.trigger=function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.emit.apply(e,[t,t].concat(n))},e.off=function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.removeListener.apply(e,[t].concat(n))};var i=function(e,i){t.postMessage({event:e,data:i})};t.addEventListener("message",function(r){var a=r.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.demuxer=new n.a(e,a.typeSupported,s,a.vendor);try{Object(o.a)(!0===s.debug)}catch(t){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),e.on(r.a.FRAG_DECRYPTED,i),e.on(r.a.FRAG_PARSING_INIT_SEGMENT,i),e.on(r.a.FRAG_PARSED,i),e.on(r.a.ERROR,i),e.on(r.a.FRAG_PARSING_METADATA,i),e.on(r.a.FRAG_PARSING_USERDATA,i),e.on(r.a.INIT_PTS_FOUND,i),e.on(r.a.FRAG_PARSING_DATA,function(e,i){var n=[],r={event:e,data:i};i.data1&&(r.data1=i.data1.buffer,n.push(i.data1.buffer),delete i.data1),i.data2&&(r.data2=i.data2.buffer,n.push(i.data2.buffer),delete i.data2),t.postMessage(r,n)})};e.default=l}]).default})},675:function(t,e){t.exports={render:function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return e.isShow?n("div",[n("div",{class:e.$style.shim}),e._v(" "),n("div",{class:[e.$style.main],style:e.customStyle},[n("div",{class:e.$style.logo,on:{click:e.goHome}}),e._v(" "),n("div",{class:[e.$style.dropMenu,"iconfont"],on:{click:function(t){e.isShowDropPage=!0}}},[e._v("")]),e._v(" "),n("div",{class:e.$style.space}),e._v(" "),n("div",{class:e.$style.btns},[n("div",{class:e.$style.openApp,on:{click:e.goApp}},[e._v(e._s(e.isPC?"下载":"打开")+"APP")]),e._v(" "),n("div",{class:e.$style.split}),e._v(" "),e.loginUser?n("div",{class:[e.$style.user,"iconfont"],on:{click:e.goAccount}},[e._v("")]):n("div",{class:e.$style.login,on:{click:e.goLogin}},[e._v("登录")])])]),e._v(" "),n("div",{class:[e.$style.dropPage,(t={},t[e.$style.on]=e.isShowDropPage,t)]},[n("div",{class:e.$style.top},[n("div",{class:e.$style.search},[n("div",{class:[e.$style.searchIcon,"iconfont"]},[e._v("")]),e._v(" "),n("div",{class:e.$style.inputWrap},[n("input",{attrs:{type:"text",placeholder:e.placeholder},on:{focus:e.focus}})])]),e._v(" "),n("div",{class:e.$style.close,on:{click:function(t){e.isShowDropPage=!1}}},[e._v("关闭")])]),e._v(" "),n("div",{class:e.$style.dropPageWrapper},[n("div",{class:e.$style.menus},[n("div",{class:[e.$style.item,e.$style.activedMenu],on:{click:e.goIndex}},[e._v("讲堂")]),e._v(" "),n("div",{class:e.$style.item,on:{click:e.goArithmeticTraining}},[e._v("算法训练营")]),e._v(" "),n("div",{class:e.$style.item,on:{click:e.goService}},[e._v("企业服务")]),e._v(" "),n("div",{class:e.$style.item,on:{click:e.goInfoQ}},[e._v("热点资讯")]),e._v(" "),n("div",{class:e.$style.item,on:{click:e.goMall}},[e._v("极客商城")]),e._v(" "),n("div",{class:e.$style.item,on:{click:e.goDownload}},[e._v("客户端下载")]),e._v(" "),n("div",{class:e.$style.item,on:{click:e.goGift}},[e._v("兑换中心")])]),e._v(" "),n("div",{class:e.$style.bottomMenus},[n("div",{class:e.$style.item,on:{click:e.goChannel}},[n("span",{class:[e.$style.icon,"iconfont"]},[e._v("")]),e._v("渠道合作")]),e._v(" "),n("div",{class:e.$style.item,on:{click:e.goRecomandAuthor}},[n("span",{class:[e.$style.icon,"iconfont"]},[e._v("")]),e._v("推荐作者")])])])])]):e._e()},staticRenderFns:[]}},688:function(t,e,i){"use strict";var n=i(100),r=i.n(n),o=i(101),a=i.n(o),s=function(){function t(){r()(this,t),this.y=0,this.x=0,this.width=0,this.height=0}return a()(t,[{key:"setAll",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},{key:"equal",value:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"isSet",get:function(){return 0!==this.y||0!==this.x||0!==this.width||0!==this.height}}]),t}();e.a=s},689:function(t,e,i){"use strict";var n=i(220),r=i.n(n),o=i(639),a=i.n(o),s=i(100),l=i.n(s),c=i(101),u=i.n(c),d=i(624),h=i(688),f=function(){function t(e,i){l()(this,t),this.node=e,this.offset=i}return u()(t,null,[{key:"getSelectText",value:function(t,e){try{return this.getSelectNodeRectAndText(t.node,e.node,t.offset,e.offset).text}catch(t){return console.error("EasyMarkerError:",t),""}}},{key:"getSelectRects",value:function(t,e){var n=new h.a,o=new h.a,s=new h.a;if(!t||!e)return{header:n,body:o,footer:s};if("#text"!==t.node.nodeName||"#text"!==e.node.nodeName)return console.error("The parameters for getting the selection rect should be a TextNode",{startTextNode:t,endTextNode:e}),{header:n,body:o,footer:s};var l=void 0;try{var c=this.getSelectNodeRectAndText(t.node,e.node,t.offset,e.offset);l=c.rects}catch(t){console.error("EasyMarkerError:",t),l=[]}var u=new a.a;l.forEach(function(t){u.has(t.top)?u.get(t.top).width+=t.width:u.set(t.top,i.i(d.f)(t))});var f=[].concat(r()(u.values())),p=0,m=[],g=[];if(f.length>0){var v=f.shift();p=Number(window.getComputedStyle(t.node.parentElement).lineHeight.replace("px",""))||v.height,n.x=v.left,n.width=v.width,n.y=v.top-(p-v.height)/2,n.height=p,m.push(n.x),g.push(v.right)}var y=0;if(f.length>0){var b=f.pop();y=Number(window.getComputedStyle(e.node.parentElement).lineHeight.replace("px",""))||b.height,s.x=b.left,s.width=b.width,s.y=b.top-(y-b.height)/2,s.height=y,m.push(s.x),g.push(b.right)}if(f.length>0){var _=0;f.forEach(function(t){o.x&&o.width?(t.left<o.x&&(o.x=t.left),t.width>o.width&&(o.width=t.width),_<t.right&&(_=t.right)):(o.x=t.left,o.width=t.width,_=t.right)}),m.push(o.x),g.push(_)}var x=Math.min.apply(Math,m);x!==1/0&&(o.x=x);var w=Math.max.apply(Math,g);return w!==-1/0&&(o.width=w-o.x),o.y=n.y+p,s.isSet?o.height=s.y-o.y:(s.x=n.x,s.y=n.y+p),{header:n,body:o,footer:s}}},{key:"getSelectNodeRectAndText",value:function(t,e,n,o){var a={rects:[],text:""};if(t.childNodes.length>0&&"SCRIPT"!==t.nodeName&&"STYLE"!==t.nodeName){var s,l=t.childNodes[0],c=this.getSelectNodeRectAndText(l,e,0,o),u=c.text,h=c.rects;return(s=a.rects).push.apply(s,r()(h)),a.text+=u,a}if("#text"===t.nodeName){var f,p=t===e?o:t.textContent.length;(f=a.rects).push.apply(f,r()(i.i(d.g)(t,n,p))),a.text+=t.textContent.substring(n,p)}if(t===e)return a;var m=t.nextSibling;if(m){var g,v=this.getSelectNodeRectAndText(m,e,0,o),y=v.text,b=v.rects;(g=a.rects).push.apply(g,r()(b)),a.text+=y}else{for(var _=t.parentNode;_&&null===_.nextSibling;)_=_.parentNode;if(!_)throw new Error("Invalid end node");var x,w=this.getSelectNodeRectAndText(_.nextSibling,e,0,o),k=w.text,E=w.rects;(x=a.rects).push.apply(x,r()(E)),a.text+=k}return a}}]),t}();e.a=f},691:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(726),o=n(r),a=i(725),s=n(a);e.default=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,l=(0,s.default)(t);!(n=(a=l.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},692:function(t,e,i){var n=i(37);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},697:function(t,e,i){"use strict";function n(t){"complete"===document.readyState?r(t):window.addEventListener("DOMContentLoaded",function(){r(t)})}function r(t){try{var e=document.querySelectorAll("code.hljs");for(var i in e)e.hasOwnProperty(i)&&o(e[i],t)}catch(t){window.console.error("LineNumbers error: ",t)}}function o(t,e){if("object"===(void 0===t?"undefined":p()(t))){e=e||{singleLine:!1};var i=e.singleLine?0:1;d(function(){s(t),t.innerHTML=a(t.innerHTML,i)})}}function a(t,e){var i=c(t);if(""===i[i.length-1].trim()&&i.pop(),i.length>e){for(var n="",r=0,o=i.length;r<o;r++)n+=h('<tr><td class="{0}"><div class="{1} {2}" {3}="{5}"></div></td><td class="{4}"><div class="{1}">{6}</div></td></tr>',[b,v,_,x,y,r+1,i[r].length>0?i[r]:" "]);return h('<table class="{0}">{1}</table>',[g,n])}return t}function s(t){var e=t.childNodes;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];u(n.textContent)>0&&(n.childNodes.length>0?s(n):l(n.parentNode))}}function l(t){var e=t.className;if(/hljs-/.test(e)){for(var i=c(t.innerHTML),n=0,r="";n<i.length;n++)r+=h('<span class="{0}">{1}</span>\n',[e,i[n]]);t.innerHTML=r.trim()}}function c(t){return 0===t.length?[]:t.split(w)}function u(t){return(t.trim().match(w)||[]).length}function d(t){window.setTimeout(t,0)}function h(t,e){return t.replace(/\{(\d+)\}/g,function(t,i){return e[i]?e[i]:t})}var f=i(147),p=i.n(f),m={},g="hljs-ln",v="hljs-ln-line",y="hljs-ln-code",b="hljs-ln-numbers",_="hljs-ln-n",x="data-line-number",w=/\r\n|\r|\n/g;m?(m.initLineNumbersOnLoad=n,m.lineNumbersBlock=o,function(){var t=document.createElement("style");t.type="text/css",t.innerHTML=h(".{0}{border-collapse:collapse}.{0} td{padding:0}.{1}:before{content:attr({2})}",[g,_,x]),document.getElementsByTagName("head")[0].appendChild(t)}()):window.console.error("highlight.js not detected!"),e.a=m},700:function(t,e,i){"use strict";var n=i(220),r=i.n(n),o=i(44),a=i.n(o),s=i(100),l=i.n(s),c=i(101),u=i.n(c),d=i(720),h=i(723),f=i(722),p=i(721),m=i(689),g=i(724),v=i(624),y={NONE:"none",SELECTING:"selecting",FINISH:"finish"},b={menuItems:[],menuTopOffset:0,cursor:{same:!1}},_=function(t){return t.preventDefault()},x=function(){function t(e){l()(this,t),this.options=a()({},b,e),this.$selectStatus=y.NONE,this.container=null,this.scrollContainer=null,this.excludeElements=[],this.highlight=null,this.movingCursor=null,this.touchEvent=null,this.cursor={start:null,end:null},this.textNode={start:null,end:null},this.mask=null,this.menu=null}return u()(t,[{key:"create",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.container=t,this.adjustTextStyle(),this.container.oncontextmenu=function(t){t.returnValue=!1},this.excludeElements=[].concat(r()(i)),this.scrollContainer=e||document.body,this.container.addEventListener("contextmenu",_),this.scrollContainer.onscroll=this.handleScroll.bind(this),this.container.style.userSelect="none",this.container.style.webkitUserSelect="none",this.container.style.position="relative",this.touchEvent=new g.a(this.container),this.touchEvent.registerEvent(g.b.TOUCH_START,this.handleTouchStart.bind(this)),this.touchEvent.registerEvent(g.b.TOUCH_MOVE,this.handleTouchMove.bind(this)),this.touchEvent.registerEvent(g.b.TOUCH_MOVE_THROTTLE,this.handleTouchMoveThrottle.bind(this)),this.touchEvent.registerEvent(g.b.TOUCH_END,this.handleTouchEnd.bind(this)),this.touchEvent.registerEvent(g.b.TAP,this.handleTap.bind(this)),this.touchEvent.registerEvent(g.b.LONG_TAP,this.handleLongTap.bind(this)),this.options.cursor.same?this.cursor.start=new d.a(this.container,d.b.END):this.cursor.start=new d.a(this.container,d.b.START),this.cursor.end=new d.a(this.container,d.b.END),this.movingCursor=this.cursor.end,this.mask=new f.a(this.container),this.highlight=new p.a(this.container),this.menu=new h.a(this.container,{menuItems:this.options.menuItems,topOffset:this.options.menuTopOffset,style:this.options.menuStyle}),this.menu.easyMarker=this}},{key:"getSelectText",value:function(){var t=m.a.getSelectText(this.textNode.start,this.textNode.end)||"";return i.i(v.a)(this.container.innerText,t)||t}},{key:"highlightLine",value:function(t,e,i){this.highlight.highlightLine(t,e,i,this.screenRelativeOffset)}},{key:"highlightLines",value:function(t){this.highlight.highlightLines(t,this.screenRelativeOffset)}},{key:"cancelHighlightLine",value:function(t){this.highlight.cancelHighlightLine(t)}},{key:"onHighlightLineClick",value:function(t){this.highlight.onClick=t}},{key:"registerEventHook",value:function(t){this.touchEvent.registerHook(t)}},{key:"destroy",value:function(){this.container.oncontextmenu=null,this.container.removeEventListener("contextmenu",_),this.scrollContainer.onscroll=null,this.touchEvent.destroy(),this.cursor.start.destroy(),this.cursor.end.destroy(),this.mask.destroy(),this.highlight.destroy(),this.menu.destroy(),this.$selectStatus=y.NONE,this.container=null,this.scrollContainer=null,this.excludeElements=[],this.highlight=null,this.movingCursor=null,this.touchEvent=null,this.cursor={start:null,end:null},this.textNode={start:null,end:null},this.mask=null,this.menu=null}},{key:"reset",value:function(){this.selectStatus=y.NONE,this.cursor.start.hide(),this.cursor.end.hide(),this.textNode={start:null,end:null},this.mask.reset()}},{key:"adjustTextStyle",value:function(){for(var t=this.container.children,e=0;e<t.length;e++)t[e].style.zIndex="5",t[e].style.position="relative"}},{key:"moveCursor",value:function(t,e,n){var r=i.i(v.b)(t,e,n,this.movingCursor===this.cursor.start);if(null!==r){var o=r.x-this.screenRelativeOffset.x,a=r.y-this.screenRelativeOffset.y,s=this.movingCursor===this.cursor.start?this.cursor.end:this.cursor.start;s.position.x===o&&s.position.y===a||(this.swapCursor(r,{x:o,y:a}),this.movingCursor.height=r.height,this.movingCursor.position={x:o,y:a},this.renderMask())}}},{key:"swapCursor",value:function(t,e){var i=e.x,n=e.y;if(this.movingCursor===this.cursor.start){var r=this.cursor.end.position;n>r.y||n===r.y&&i>=r.x?(this.cursor.start.position=this.cursor.end.position,this.movingCursor=this.cursor.end,this.textNode.start=new m.a(this.textNode.end.node,this.textNode.end.offset),this.textNode.end=new m.a(t.node,t.index)):this.textNode.start=new m.a(t.node,t.index)}else{var o=this.cursor.start.position;n<o.y||n===o.y&&i<=o.x?(this.cursor.end.position=this.cursor.start.position,this.movingCursor=this.cursor.start,this.textNode.end=new m.a(this.textNode.start.node,this.textNode.start.offset),this.textNode.start=new m.a(t.node,t.index)):this.textNode.end=new m.a(t.node,t.index)}}},{key:"selectWords",value:function(t,e,n){var r=["。”","？”","！”","。","？","！"],o=i.i(v.c)(t,e,n,r)||{},a=o.rects,s=o.node,l=o.index,c=o.wordsLength;if(a&&(!a||0!==a.length)){var u=a[0],d=a[a.length-1],h=u.left-this.screenRelativeOffset.x,f=u.top-this.screenRelativeOffset.y;this.textNode.start=new m.a(s,l),this.cursor.start.height=u.height,this.cursor.start.position={x:h,y:f};var p=d.left-this.screenRelativeOffset.x,g=d.top-this.screenRelativeOffset.y;this.textNode.end=new m.a(s,l+c),this.cursor.end.height=d.height,this.cursor.end.position={x:p+d.width,y:g},this.cursor.start.show(),this.cursor.end.show(),this.renderMask(),this.selectStatus=y.FINISH}}},{key:"renderMask",value:function(){var t=m.a.getSelectRects(this.textNode.start,this.textNode.end),e=t.header,n=t.body,r=t.footer,o=i.i(v.d)(e,this.screenRelativeOffset),a=i.i(v.d)(n,this.screenRelativeOffset),s=i.i(v.d)(r,this.screenRelativeOffset);this.mask.render(o,a,s)}},{key:"isContains",value:function(t){return this.container.contains(t)&&-1===this.excludeElements.findIndex(function(e){return e.contains(t)})}},{key:"handleTap",value:function(t){if(this.selectStatus===y.FINISH){this.menu.handleTap(t,{start:this.textNode.start,end:this.textNode.end,content:this.getSelectText()});var e=this.getTouchRelativePosition(t),n=this.cursor.start.inRegion(e),r=this.cursor.end.inRegion(e);if(n.inRegion||r.inRegion)return;this.reset()}else if(this.selectStatus===y.NONE){if("A"===t.target.nodeName)return void t.preventDefault();var o=this.highlight.handleTap(t);if(!o&&!this.options.disableTapHighlight&&this.isContains(t.target)){var a=i.i(v.e)(t),s=a.x,l=a.y;this.selectWords(t.target,s,l)}}}},{key:"handleLongTap",value:function(t){if(this.isContains(t.target)){var e=i.i(v.e)(t),n=e.x,r=e.y;this.selectWords(t.target,n,r)}}},{key:"handleTouchStart",value:function(t){if(this.selectStatus===y.FINISH){var e=this.getTouchRelativePosition(t),i=this.cursor.start.inRegion(e),n=this.cursor.end.inRegion(e);i.inRegion&&n.inRegion?(this.selectStatus=y.SELECTING,this.movingCursor=i.distance<n.distance?this.cursor.start:this.cursor.end):n.inRegion?(this.selectStatus=y.SELECTING,this.movingCursor=this.cursor.end):i.inRegion&&(this.selectStatus=y.SELECTING,this.movingCursor=this.cursor.start)}}},{key:"handleTouchMove",value:function(t){this.selectStatus===y.SELECTING&&t.preventDefault()}},{key:"handleTouchMoveThrottle",value:function(t){if(this.selectStatus===y.SELECTING){var e={x:0,y:-this.movingCursor.height/2},n=i.i(v.e)(t,e),r=n.x,o=n.y,a=document.elementFromPoint(r,o);this.isContains(a)&&this.moveCursor(a,r,o)}}},{key:"handleTouchEnd",value:function(){this.selectStatus===y.SELECTING&&(this.selectStatus=y.FINISH)}},{key:"handleScroll",value:function(){this.selectStatus===y.FINISH&&this.menu.handleScroll()}},{key:"getTouchRelativePosition",value:function(t){var e={x:0,y:-this.movingCursor.height/2},n=i.i(v.e)(t,e);return n.x-=this.screenRelativeOffset.x,n.y-=this.screenRelativeOffset.y,n}},{key:"selectStatus",get:function(){return this.$selectStatus},set:function(t){if(this.$selectStatus=t,t===y.FINISH){var e=this.mask.top-this.movingCursor.height/2;this.menu.setPosition(e,this.mask.top+this.mask.height),this.menu.show()}else this.menu.hide()}},{key:"screenRelativeOffset",get:function(){var t=this.container.getBoundingClientRect(),e=t.top;return{x:t.left,y:e,right:t.right}}}],[{key:"create",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=new this;return n.create(t,e,i),n}}]),t}();e.a=x},701:function(t,e,i){"use strict";function n(t,e,i){var r="";if(e.childNodes.length>0&&"SCRIPT"!==e.nodeName.toUpperCase()&&"STYLE"!==e.nodeName.toUpperCase()){return r=n(t,e.childNodes[e.childNodes.length-1],void 0)+r}"#text"===e.nodeName&&(r=e.textContent.substr(0,i));var o=e.previousSibling;if(o)r=n(t,o,void 0)+r;else{for(var a=e.parentNode;a&&null===a.previousSibling;)if((a=a.parentNode)===t)return r;if(a){r=n(t,a.previousSibling,void 0)+r}}return r}function r(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="",n=e.replace(/\s+/g,""),r=0,o=0;r<t.length;r++){if(o>=n.length)return i;t[r]===n[o]?(i+=t[r],o++):t[r].match(/\n|\r|\s/)?""!==i&&(i+=t[r]):(o=0,i="")}return i}function o(t){return a(t.childNodes[0],t)}function a(t,e){var i=[];if(t.childNodes.length>0&&"SCRIPT"!==t.nodeName.toUpperCase()&&"SCRIPT"!==t.nodeName.toUpperCase()&&"STYLE"!==t.nodeName.toUpperCase()){var n=t.childNodes[0],r=a(n,e);return i=[].concat(c()(i),c()(r))}"#text"===t.nodeName&&i.push(t);var o=t.nextSibling;if(o){var s=a(o,e);i=[].concat(c()(i),c()(s))}else{for(var l=t.parentNode;l&&null===l.nextSibling;)l=l.parentNode;if(l===e)return i;if(l){var u=a(l.nextSibling,e);i=[].concat(c()(i),c()(u))}}return i}function s(t,e,i){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o="",a=[],s=0,l=e.length;s<l;s++){var c=e[s];if(o+=c.textContent,o=r(t,o)||o,o.indexOf(i)>-1){var u=o.indexOf(i),d=o.length-i.length-u;for(a.push({node:c,index:s,offset:d}),o=o.substr(u+i.length);o.length>0&&o.indexOf(i)>-1;)u=o.indexOf(i),d=o.length-i.length-u,a.push({node:c,index:s,offset:d}),o=o.substr(u+i.length)}if(a.length>=n+1)break}if(a.length-1<n)return{start:null,end:null};var h=void 0;n>0?(h=a[n-1],h.offset=e[h.index].textContent.length-h.offset):h={node:e[0],index:0,offset:0};var f=a[n],p=e[f.index].textContent;f.offset=Math.max(0,r(t,p).length-f.offset),f.offset=Math.min(p.length,f.offset),o="";for(var m=f.index;m>=h.index;m--){var g=e[m];if(o=m===h.index?g.textContent.substr(h.offset)+o:g.textContent+o,o=r(t,o)||o,o.indexOf(i)>-1){var v=o.indexOf(i);m===h.index&&(v+=h.offset),v=Math.max(0,v),h={node:g,index:m,offset:v};break}}return h.index>f.index||h.index===f.index&&h.offset>f.offset||h.offset<0||f.offset<0?{start:null,end:null}:{start:h,end:f}}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s});var l=i(220),c=i.n(l)},702:function(t,e,i){function n(t){this.$style=i(707)}var r=i(22)(i(704),i(714),n,null,null);t.exports=r.exports},703:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(99),r=i.n(n),o=i(218),a=i(65),s=i(219),l=i(621),c=i(627);e.default={props:["data","customColor","isCanDelete","disabledShare"],data:function(){return{likeRequesting:!1,isInApp:a.a.isInApp(),showAll:!1,defaultAvatar:o.a.defaultAvatar,isDeletedComment:!1}},created:function(){},mounted:function(){this.showAll=!this.isRealHeightMoreThanVisibleHeight()},computed:r()({},i.i(s.a)({loginUser:"loginUser"}),{isShowImgShare:function(){return(a.a.gteqAndroidVersion("1.0.10")||a.a.gteqIOSVersion("1.1.5"))&&!this.disabledShare},isOwner:function(){return this.data.can_delete||this.isCanDelete},isInAndroidApp:function(){return a.a.isInAndroidApp()}}),methods:{isRealHeightMoreThanVisibleHeight:function(){var t=window.getComputedStyle(this.$refs.con,null),e=t.getPropertyValue("width"),i=t.getPropertyValue("height"),n=t.getPropertyValue("font-size"),r=t.getPropertyValue("line-height"),o=t.getPropertyValue("font-weight"),a=document.createElement("div");a.style.width=e,a.style.fontSize=n,a.style.whiteSpace="normal",a.style.fontWeight=o,a.style.lineHeight=r,a.style.wordBreak="break-all",a.style.position="absolute",a.innerHTML=this.data.comment_content,document.body.appendChild(a);var s=a.offsetHeight;return document.body.removeChild(a),s>parseFloat(i)},share:function(){var t=this;if(this.$ga.sendEvent("留言分享article_btn_comment_share_click","click","article_id="+this.data.id),!this.loginUser)return void a.a.login();l.a.getCommentDetail({id:this.data.id}).then(function(e){a.a.notifyApp({type:"poster:extra",data:{article_title:e.article_title,column_title:e.column_title||"每日一课",column_id:e.cid}}),a.a.notifyApp({type:"poster:notify",data:{username:t.data.user_name,avatar:t.data.user_header||t.defaultAvatar,time:t.data.comment_ctime,content:t.data.comment_content,url:t.getPosterUrl(e)}})})},expand:function(){this.showAll=!0},getPosterUrl:function(t){return"course"===t.source?"https://time.geekbang.org/course/detail/"+t.cid+"-"+t.aid:"columnArticle"===t.source?"https://time.geekbang.org/column/article/"+t.aid:void 0},praise:function(){this.likeRequesting||(this.likeRequesting=!0,this.data.had_liked?(this.unlike(),this.$ga.sendEvent("留言点赞取消article_btn_comment_praise_click","unlike","article_id="+this.data.id)):(this.like(),this.$ga.sendEvent("留言点赞article_btn_comment_praise_click","like","article_id="+this.data.id)))},like:function(){var t=this;l.a.likeArticle(this.data.id,"comment").then(function(e){t.data.like_count+=1,t.data.had_liked=!0,t.likeRequesting=!1}).catch(function(e){t.likeRequesting=!1,a.a.parseError(e)})},unlike:function(t){var e=this;l.a.unlikeArticle(this.data.id,"comment").then(function(t){e.data.like_count-=1,e.data.like_count<0&&(e.data.like_count=0),e.data.had_liked=!1,e.likeRequesting=!1}).catch(function(t){e.likeRequesting=!1,console.log(t)})},moreMenu:function(){var t=this,e=this.data.id;this.$emit("moreMenu"),c.b(this.$store,{remove:function(i){l.a.deleteComment({id:e}).then(function(e){t.isDeletedComment=!0,t.$emit("deleted")}).catch(function(t){console.log(t)}),i.close()}})},pretreat:function(t){return t=t.replace(/\r\n/g,"<br>"),t=t.replace(/\n/g,"<br>"),t=t.replace(/\r/g,"<br>"),t=t.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),t.replace(/<br> +/g,function(t){return t.replace(/ /g,"&nbsp;")})}}}},704:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(221),r=i.n(n),o=i(99),a=i.n(o),s=i(218),l=i(65),c=i(219),u=i(621),d=i(627),h=i(712),f=i.n(h),p=i(227);e.default={props:["data","customColor","isCanDelete","disabledShare"],components:{CommentItemOld:f.a},data:function(){return{likeRequesting:!1,isInApp:l.a.isInApp(),showAll:!1,defaultAvatar:s.a.defaultAvatar,isDeletedComment:!1}},created:function(){},mounted:function(){this.isLt240AppVersion||(this.showAll=!this.isRealHeightMoreThanVisibleHeight())},computed:a()({},i.i(c.a)({loginUser:"loginUser"}),{isShowImgShare:function(){return(l.a.gteqAndroidVersion("1.0.10")||l.a.gteqIOSVersion("1.1.5"))&&!this.disabledShare},isOwner:function(){return this.data.can_delete||this.isCanDelete},isInAndroidApp:function(){return l.a.isInAndroidApp()},isLt240AppVersion:function(){return l.a.ltIOSVersion("2.4.0")||l.a.ltAndroidVersion("2.4.0")},appLink:function(){if(l.a.isPC())return"https://time.geekbang.org/download";if(l.a.isIOS())return"https://static001.geekbang.org/misc/download/zeus.html?params="+encodeURIComponent(this.routeRelatedData);var t="",e=[];if(this.params){t="?";for(var i in this.params)e.push(i+"="+this.params[i]);t+=e.join("&")}var n=this.$route.meta.appLink?this.$route.meta.appLink+t:"tab=1",r="geektime://time.geekbang.org:80/main?"+encodeURIComponent(n);return l.a.isInWeixin()?s.a.appstoreUrl+"&android_schema="+r:r}}),methods:{isRealHeightMoreThanVisibleHeight:function(){var t=window.getComputedStyle(this.$refs.con,null),e=t.getPropertyValue("width"),i=t.getPropertyValue("height"),n=t.getPropertyValue("font-size"),r=t.getPropertyValue("line-height"),o=t.getPropertyValue("font-weight"),a=document.createElement("div");a.style.width=e,a.style.fontSize=n,a.style.whiteSpace="normal",a.style.fontWeight=o,a.style.lineHeight=r,a.style.wordBreak="break-all",a.style.position="absolute",a.innerHTML=this.data.comment_content,document.body.appendChild(a);var s=a.offsetHeight;return document.body.removeChild(a),s>parseFloat(i)},share:function(){var t=this;if(this.$ga.sendEvent("留言分享article_btn_comment_share_click","click","article_id="+this.data.id),!this.loginUser)return void l.a.login();u.a.getCommentDetail({id:this.data.id}).then(function(e){if(p.hasNativeMethod("comment.shareComment")){var i={posterData:{avatar:e.user_header,username:e.user_name,time:e.comment_ctime,content:e.comment_content,url:t.getPosterUrl(e)},extra:{article_title:e.article_title,column_title:e.column_title||"每日一课",column_id:e.cid}};p.call("comment.shareComment",i,function(){})}else l.a.notifyApp({type:"poster:extra",data:{article_title:e.article_title,column_title:e.column_title||"每日一课",column_id:e.cid}}),l.a.notifyApp({type:"poster:notify",data:{username:t.data.user_name,avatar:t.data.user_header||t.defaultAvatar,time:t.data.comment_ctime,content:t.data.comment_content,url:t.getPosterUrl(e)}})})},expand:function(){this.showAll=!0},getPosterUrl:function(t){var e=void 0;switch(t.product_type){case"c1":case"c2":case"c8":e="https://time.geekbang.org/column/article/"+(t.aid||t.id),console.log(e);break;case"c3":e="https://time.geekbang.org/course/detail/"+t.cid+"-"+t.aid;break;default:e="https://time.geekbang.org/"}return e},goDiscussDetail:function(){var t="time://discussionDetail?targetId="+this.data.id+"&url="+encodeURIComponent("https://time.geekbang.org/discuss/detail")+"&title="+encodeURIComponent("留言详情");l.a.isInApp()?p.hasNativeMethod("common.routeJump")?p.call("common.routeJump",t,function(t){}):l.a.gteqAndroidVersion("2.4.0")||l.a.gteqIOSVersion("2.4.0")?l.a.notifyApp({type:"urlscheme",url:t}):this.goApp():l.a.isPC()?window.open("https://time.geekbang.org/discuss/detail/"+this.data.id):this.$router.push("/discuss/detail/"+this.data.id)},goApp:function(){var t=this;d.a(this.$store,{content:"升级至最新版本可查看留言详情和评论，确认升级吗？",on:{confirm:function(e){window.location.href=t.appLink,e.close()}}})},praise:function(){if(!this.loginUser)return void l.a.login();this.likeRequesting||(this.likeRequesting=!0,this.data.had_liked?(this.unlike(),this.$ga.sendEvent("留言点赞取消article_btn_comment_praise_click","unlike","article_id="+this.data.id)):(this.like(),this.$ga.sendEvent("留言点赞article_btn_comment_praise_click","like","article_id="+this.data.id)))},like:function(){var t=this;u.a.likeArticle(this.data.id,"comment").then(function(e){t.data.like_count+=1,t.data.had_liked=!0,t.likeRequesting=!1}).catch(function(e){t.likeRequesting=!1,l.a.parseError(e)})},unlike:function(t){var e=this;u.a.unlikeArticle(this.data.id,"comment").then(function(t){e.data.like_count-=1,e.data.like_count<0&&(e.data.like_count=0),e.data.had_liked=!1,e.likeRequesting=!1}).catch(function(t){e.likeRequesting=!1,console.log(t)})},moreMenuOld:function(){this.$emit("moreMenu")},moreMenu:function(){var t=this,e=this.data.id;if(this.$emit("moreMenu"),p.hasNativeMethod("comment.openBottomMenuModal")){var i={modalData:[{text:"删除",type:"delete"}]};p.call("comment.openBottomMenuModal",r()(i),function(i){"delete"===i&&t.deleteComment(e)})}else d.b(this.$store,{remove:function(i){t.deleteComment(e),i.close()}})},deleteComment:function(t){var e=this;u.a.deleteComment({id:t}).then(function(t){e.isDeletedComment=!0,e.$emit("deleted")}).catch(function(t){console.log(t)})},pretreat:function(t){return t=t.replace(/\r\n/g,"<br>"),t=t.replace(/\n/g,"<br>"),t=t.replace(/\r/g,"<br>"),t=t.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),t.replace(/<br> +/g,function(t){return t.replace(/ /g,"&nbsp;")})}}}},705:function(t,e,i){var n=i(620);e=t.exports=i(571)(!1),e.push([t.i,".reJj6Thl_0{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-top:20px}.reJj6Thl_0 a{border-bottom:none}.reJj6Thl_0 ._2273kGdT_0{width:35px;height:35px;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.reJj6Thl_0:last-child ._2CG0SquK_0{border-bottom:none}.reJj6Thl_0 ._2CG0SquK_0{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-bottom:8px;border-bottom:.5px solid #e8e8e8;-webkit-transition:border-bottom .3s ease;transition:border-bottom .3s ease;overflow:hidden}.reJj6Thl_0 ._2CG0SquK_0 ._304R4gla_0{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:10px}.reJj6Thl_0 ._2CG0SquK_0 ._3M6kV3zb_0{color:#4c4c4c;font-size:16px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6;overflow:hidden;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical}.reJj6Thl_0 ._2CG0SquK_0 ._3D2NkqD6_0{overflow:auto;-webkit-line-clamp:unset}.reJj6Thl_0 ._2CG0SquK_0 ._1H1Z49Dr_0{color:#888;font-size:11px;line-height:1;margin-top:4px}.reJj6Thl_0 ._2CG0SquK_0 ._18Dng5rT_0{color:#353535;font-size:14px;font-weight:700;height:20px;line-height:20px}.reJj6Thl_0 ._2CG0SquK_0 ._1w8H0ktn_0{margin-top:8px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:12px;color:#888;padding-left:20px;padding-right:20px}.reJj6Thl_0 ._2CG0SquK_0 ._1w8H0ktn_0._2A421P4G_0{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding-left:10px;padding-right:10px}.reJj6Thl_0 ._2CG0SquK_0 ._1w8H0ktn_0._2A421P4G_0 ._2P4B1Hdm_0{margin-left:50px}.reJj6Thl_0 ._1bkbsnjg_0{height:15px;line-height:15px;width:30px;overflow:hidden;font-size:10px;color:#fff;background:#cbcbcb;text-align:center;display:inline-block;border-radius:3px;vertical-align:top;margin-top:2px}.reJj6Thl_0 ._1YQBH3WC_0{color:#999;font-size:13px;width:20px;text-align:right}.reJj6Thl_0 ._13n1j2Zp_0{width:20px;height:26px;color:#999;font-size:11px;text-align:right}.reJj6Thl_0 ._2jsFl-X0_0,.reJj6Thl_0 ._2P4B1Hdm_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.reJj6Thl_0 ._2jsFl-X0_0 i,.reJj6Thl_0 ._2P4B1Hdm_0 i{color:#999;display:inline-block;font-size:15px;margin-right:4px;height:27px;width:15px}.reJj6Thl_0 ._2jsFl-X0_0 i._2A421P4G_0,.reJj6Thl_0 ._2P4B1Hdm_0 i._2A421P4G_0{background:url("+n(i(660))+") no-repeat 50%;background-size:15px}.reJj6Thl_0 ._2jsFl-X0_0 span,.reJj6Thl_0 ._2P4B1Hdm_0 span{color:#888;font-size:12px;font-weight:400}.reJj6Thl_0 ._2jsFl-X0_0 span._2A421P4G_0,.reJj6Thl_0 ._2P4B1Hdm_0 span._2A421P4G_0{color:#fa8919}.reJj6Thl_0 ._2P4B1Hdm_0 i{margin-top:-2px}.reJj6Thl_0 ._2r3UB1GX_0{font-size:13px;color:#b2b2b2;height:16px;padding-top:8px}.reJj6Thl_0 ._2r3UB1GX_0 span{font-weight:500}.reJj6Thl_0 ._2r3UB1GX_0 i,.reJj6Thl_0 ._2r3UB1GX_0 span{height:16px;line-height:16px;display:inline-block;vertical-align:top}.reJj6Thl_0 ._2xNIY4NG_0{margin-top:10px}.reJj6Thl_0 ._2xNIY4NG_0 ._33BLbmw4_0{color:#888;font-size:14px;font-weight:400;white-space:normal;word-break:break-all;background:#f6f7fb;-webkit-transition:background .3s ease;transition:background .3s ease;border-radius:10px;padding:18px;overflow-x:scroll}.reJj6Thl_0 ._2xNIY4NG_0 ._1H1Z49Dr_0{color:#888;font-size:9px}._0X_LEcd_0 ._2xNIY4NG_0 ._33BLbmw4_0{background:#efe6cf}.cGm0Q9aA_0 ._2CG0SquK_0{border-bottom:1px solid #4c4c4c}.cGm0Q9aA_0 ._2CG0SquK_0 ._1H1Z49Dr_0,.cGm0Q9aA_0 ._2CG0SquK_0 ._3M6kV3zb_0,.cGm0Q9aA_0 ._2CG0SquK_0 ._18Dng5rT_0{color:silver}.cGm0Q9aA_0 ._2xNIY4NG_0 ._33BLbmw4_0{color:silver;background:#3e3e3e}.cGm0Q9aA_0 ._1YQBH3WC_0,.cGm0Q9aA_0 ._2P4B1Hdm_0 i,.cGm0Q9aA_0 ._2P4B1Hdm_0 span,.cGm0Q9aA_0 ._13n1j2Zp_0{color:#999}._2Gn7zqLg_0 ._1bkbsnjg_0{line-height:18px}",""]),e.locals={white:"reJj6Thl_0",avatar:"_2273kGdT_0",info:"_2CG0SquK_0",hd:"_304R4gla_0",bd:"_3M6kV3zb_0",showAll:"_3D2NkqD6_0",time:"_1H1Z49Dr_0",username:"_18Dng5rT_0",actions:"_1w8H0ktn_0",on:"_2A421P4G_0",btnPraise:"_2P4B1Hdm_0",topTag:"_1bkbsnjg_0",btnShare:"_1YQBH3WC_0",btnMore:"_13n1j2Zp_0",btnComment:"_2jsFl-X0_0",more:"_2r3UB1GX_0",reply:"_2xNIY4NG_0",content:"_33BLbmw4_0",yellow:"_0X_LEcd_0",black:"cGm0Q9aA_0",android:"_2Gn7zqLg_0"}},706:function(t,e,i){var n=i(620);e=t.exports=i(571)(!1),e.push([t.i,"._1KDFHdYZ_0{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}._1KDFHdYZ_0 a{border-bottom:none}._1KDFHdYZ_0 ._1TrNyEsG_0{width:35px;height:35px;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}._1KDFHdYZ_0 ._1zxA_dQy_0{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-bottom:25px;border-bottom:.5px solid #e8e8e8;-webkit-transition:border-bottom .3s ease;transition:border-bottom .3s ease;overflow:hidden}._1KDFHdYZ_0 ._1zxA_dQy_0 ._3sUvWXiG_0{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:10px}._1KDFHdYZ_0 ._1zxA_dQy_0 ._3RUGUSGd_0{color:#4c4c4c;font-size:16px;font-weight:400;white-space:normal;word-break:normal;line-height:1.6;overflow:hidden;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical}._1KDFHdYZ_0 ._1zxA_dQy_0 ._1e2igh1f_0{overflow:auto;-webkit-line-clamp:unset}._1KDFHdYZ_0 ._1zxA_dQy_0 ._1_UgxBPd_0{color:#888;font-size:11px;line-height:1;margin-top:4px}._1KDFHdYZ_0 ._1zxA_dQy_0 ._6a8Jfmch_0{color:#353535;font-size:14px;font-weight:700;height:20px;line-height:20px}._1KDFHdYZ_0 .cbpeZqJ6_0{height:15px;line-height:15px;width:30px;overflow:hidden;font-size:10px;color:#fff;background:#cbcbcb;text-align:center;display:inline-block;border-radius:3px;vertical-align:top;margin-top:2px}._1KDFHdYZ_0 ._1vLMbfBh_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:26px}._1KDFHdYZ_0 .lNb7fTWW_0{color:#999;font-size:13px;margin-left:42px;width:20px;text-align:center}._1KDFHdYZ_0 ._2QGBcr_2_0{color:#999;font-size:11px;width:20px;margin-left:38px;text-align:center}._1KDFHdYZ_0 ._3GwbwRlD_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}._1KDFHdYZ_0 ._3GwbwRlD_0 i{color:#999;display:inline-block;font-size:15px;margin-right:4px;height:27px;width:15px;margin-top:-2px}._1KDFHdYZ_0 ._3GwbwRlD_0 i._55DP52nm_0{background:url("+n(i(660))+") no-repeat 50%;background-size:15px}._1KDFHdYZ_0 ._3GwbwRlD_0 span{color:#888;font-size:13px;font-weight:400}._1KDFHdYZ_0 ._3GwbwRlD_0 span._55DP52nm_0{color:#fa8919}._1KDFHdYZ_0 ._2lqd7KSF_0{font-size:13px;color:#b2b2b2;height:16px;padding-top:8px}._1KDFHdYZ_0 ._2lqd7KSF_0 span{font-weight:500}._1KDFHdYZ_0 ._2lqd7KSF_0 i,._1KDFHdYZ_0 ._2lqd7KSF_0 span{height:16px;line-height:16px;display:inline-block;vertical-align:top}._1KDFHdYZ_0 ._1BHjTnVh_0{margin-top:10px}._1KDFHdYZ_0 ._1BHjTnVh_0 ._2zHSVgwh_0{color:#888;font-size:14px;font-weight:400;white-space:normal;word-break:normal;background:#f6f7fb;-webkit-transition:background .3s ease;transition:background .3s ease;border-radius:10px;padding:18px;overflow-x:scroll}._1KDFHdYZ_0 ._1BHjTnVh_0 ._1_UgxBPd_0{color:#888;font-size:9px}._1fFuwKtR_0 ._1BHjTnVh_0 ._2zHSVgwh_0{background:#efe6cf}.btLBlMEP_0 ._1zxA_dQy_0{border-bottom:1px solid #4c4c4c}.btLBlMEP_0 ._1zxA_dQy_0 ._1_UgxBPd_0,.btLBlMEP_0 ._1zxA_dQy_0 ._3RUGUSGd_0,.btLBlMEP_0 ._1zxA_dQy_0 ._6a8Jfmch_0{color:silver}.btLBlMEP_0 ._1BHjTnVh_0 ._2zHSVgwh_0{color:silver;background:#3e3e3e}.btLBlMEP_0 ._2QGBcr_2_0,.btLBlMEP_0 ._3GwbwRlD_0 i,.btLBlMEP_0 ._3GwbwRlD_0 span,.btLBlMEP_0 .lNb7fTWW_0{color:#999}._18LC5TMd_0 .cbpeZqJ6_0{line-height:18px}",""]),e.locals={white:"_1KDFHdYZ_0",avatar:"_1TrNyEsG_0",info:"_1zxA_dQy_0",hd:"_3sUvWXiG_0",bd:"_3RUGUSGd_0",showAll:"_1e2igh1f_0",time:"_1_UgxBPd_0",username:"_6a8Jfmch_0",topTag:"cbpeZqJ6_0",control:"_1vLMbfBh_0",btnShare:"lNb7fTWW_0",btnMore:"_2QGBcr_2_0",btnPraise:"_3GwbwRlD_0",on:"_55DP52nm_0",more:"_2lqd7KSF_0",reply:"_1BHjTnVh_0",content:"_2zHSVgwh_0",yellow:"_1fFuwKtR_0",black:"btLBlMEP_0",android:"_18LC5TMd_0"}},707:function(t,e,i){var n=i(705);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("4baa3790",n,!0,{})},708:function(t,e,i){var n=i(706);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("c5421f60",n,!0,{})},711:function(t,e,i){function n(t){this.$style=i(757)}var r=i(22)(i(718),i(768),n,null,null);t.exports=r.exports},712:function(t,e,i){function n(t){this.$style=i(708)}var r=i(22)(i(703),i(715),n,null,null);t.exports=r.exports},714:function(t,e){t.exports={render:function(){var t,e,i,n,r,o,a,s=this,l=s.$createElement,c=s._self._c||l;return s.isDeletedComment?s._e():c("li",{class:[s.$style.white,(t={},t[s.$style.android]=s.isInAndroidApp,t),(e={},e[s.$style.yellow]="yellow"===s.customColor,e),(i={},i[s.$style.black]="black"===s.customColor,i)]},[s.isLt240AppVersion?[c("CommentItemOld",{attrs:{data:s.data,customColor:s.customColor},on:{moreMenu:s.moreMenuOld}})]:[c("img",{class:s.$style.avatar,attrs:{src:s.data.user_header||s.defaultAvatar}}),s._v(" "),c("div",{class:s.$style.info},[c("div",{class:s.$style.hd},[c("div",{class:s.$style.user},[c("div",{class:s.$style.username},[c("span",[s._v(s._s(s._f("cutStr")(s.data.user_name,20)))]),s._v(" "),s.data.comment_is_top?c("span",{class:s.$style.topTag},[s._v("置顶")]):s._e()]),s._v(" "),c("div",{class:s.$style.time},[s._v(s._s(s._f("formatDate")(s.data.comment_ctime)))])]),s._v(" "),s.isOwner?c("div",{class:[s.$style.btnMore,"iconfont"],on:{touchstart:function(t){t.stopPropagation()},click:s.moreMenu}},[s._v("")]):s._e()]),s._v(" "),c("div",{on:{touchstart:function(t){t.stopPropagation()},click:function(t){return t.stopPropagation(),s.goDiscussDetail(t)}}},[c("div",{ref:"con",class:[s.$style.bd,(n={},n[s.$style.showAll]=s.showAll,n)],domProps:{innerHTML:s._s(s.pretreat(s.data.comment_content))}}),s._v(" "),s.showAll?s._e():c("div",{class:s.$style.more,on:{click:function(t){return t.stopPropagation(),s.expand(t)}}},[c("span",[s._v("展开")]),c("i",{class:["iconfont"]},[s._v("")])]),s._v(" "),s.data.replies&&s.data.replies[0]?c("div",{class:s.$style.reply},[c("p",{class:s.$style.content,domProps:{innerHTML:s._s(s.data.replies[0].user_name+": "+s.pretreat(s.data.replies[0].content))}})]):s._e(),s._v(" "),c("div",{class:[s.$style.actions,(r={},r[s.$style.on]=!s.isShowImgShare,r)]},[c("div",{class:[s.$style.btnComment]},[c("i",{class:["iconfont",s.$style.commentIcon]},[s._v("")]),s._v(" "),c("span",[s._v(s._s(s.data.discussion_count?s.data.discussion_count>999?"999+":s.data.discussion_count:""))])]),s._v(" "),c("div",{class:s.$style.btnPraise,on:{click:function(t){return t.stopPropagation(),s.praise(t)}}},[c("i",{class:["iconfont",(o={},o[s.$style.on]=s.data.had_liked,o)]},[s._v(s._s(s.data.had_liked?" ":""))]),s._v(" "),c("span",{class:[(a={},a[s.$style.on]=s.data.had_liked,a)]},[s._v(s._s(s.data.like_count>0?s.data.like_count:""))])]),s._v(" "),s.isShowImgShare?c("div",{class:[s.$style.btnShare,"iconfont"],on:{click:function(t){return t.stopPropagation(),s.share(t)}}},[s._v("")]):s._e()])])])]],2)},staticRenderFns:[]}},715:function(t,e){t.exports={render:function(){var t,e,i,n,r,o,a=this,s=a.$createElement,l=a._self._c||s;return a.isDeletedComment?a._e():l("li",{class:[a.$style.white,(t={},t[a.$style.android]=a.isInAndroidApp,t),(e={},e[a.$style.yellow]="yellow"===a.customColor,e),(i={},i[a.$style.black]="black"===a.customColor,i)]},[l("img",{class:a.$style.avatar,attrs:{src:a.data.user_header||a.defaultAvatar}}),a._v(" "),l("div",{class:a.$style.info},[l("div",{class:a.$style.hd},[l("div",{class:a.$style.user},[l("div",{class:a.$style.username},[l("span",[a._v(a._s(a._f("cutStr")(a.data.user_name,10)))]),a._v(" "),a.data.comment_is_top?l("span",{class:a.$style.topTag},[a._v("置顶")]):a._e()]),a._v(" "),l("div",{class:a.$style.time},[a._v(a._s(a._f("formatDate")(a.data.comment_ctime)))])]),a._v(" "),l("div",{class:a.$style.control,on:{touchstart:function(t){t.stopPropagation()}}},[l("div",{class:a.$style.btnPraise,on:{touchstart:function(t){t.stopPropagation()},click:a.praise}},[l("i",{class:["iconfont",(n={},n[a.$style.on]=a.data.had_liked,n)]},[a._v(a._s(a.data.had_liked?" ":""))]),a._v(" "),l("span",{class:[(r={},r[a.$style.on]=a.data.had_liked,r)]},[a._v(a._s(a.data.like_count>0?a.data.like_count:""))])]),a._v(" "),a.isShowImgShare?l("div",{class:[a.$style.btnShare,"iconfont"],on:{touchstart:function(t){t.stopPropagation()},click:a.share}},[a._v("")]):a._e(),a._v(" "),a.isOwner?l("div",{class:[a.$style.btnMore,"iconfont"],on:{touchstart:function(t){t.stopPropagation()},click:a.moreMenu}},[a._v("")]):a._e()])]),a._v(" "),l("div",{ref:"con",class:[a.$style.bd,(o={},o[a.$style.showAll]=a.showAll,o)],domProps:{innerHTML:a._s(a.pretreat(a.data.comment_content))}}),a._v(" "),a.showAll?a._e():l("div",{class:a.$style.more,on:{click:a.expand}},[l("span",[a._v("展开")]),l("i",{class:["iconfont"]},[a._v("")])]),a._v(" "),a.data.replies&&a.data.replies[0]?l("div",{class:a.$style.reply},[l("p",{class:a.$style.content,domProps:{innerHTML:a._s(a.data.replies[0].user_name+": "+a.pretreat(a.data.replies[0].content))}})]):a._e()])])},staticRenderFns:[]}},718:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(65),r=i(697),o=i(700),a=i(701),s=i(669),l=i.n(s),c=i(627),u=i(628),d=i(227);e.default={props:{content:{type:String,default:""},canNote:{type:Boolean,default:!1},noteEnable:{type:Boolean,default:!0},notes:{type:Array,default:function(){return[]}},noteid:{type:String,default:""},customColor:{type:String,default:"white"},customSize:{type:String,default:"middle"}},created:function(){this.richContent=n.a.formatContent(this.content),document.addEventListener("notify",this.notifyHandler),u.a.on(document,"audio:play",this.notifyHandler)},data:function(){return{preViewImg:!1,imgUrl:"",isInAndroidApp:n.a.isInAndroidApp(),posterImg:"",posterContent:"",richContent:"",noteSelections:[],newVideos:[],markerInited:!1,hadScroll:!1}},mounted:function(){var t=this;window.addEventListener("mathjaxfini",function(){clearTimeout(t.eTimer),t.eTimer=setTimeout(function(){console.log("mathjax fini"),t.highLightNotes()},300)}),n.a.isPC()?this.$el.addEventListener("mousedown",this.handleClick):(this.$el.addEventListener("touchstart",this.onTouchStart),this.$el.addEventListener("touchend",this.onTouchEnd)),n.a.isInApp()||u.a.on(document,"globalmedia",this.notifyHandler),this.initVideo(),this.$el.addEventListener("copy",this.copyHandler),this.canNote?this.initMarker():this.noteEnable&&n.a.isInApp()&&this.initMarkerWhenNoLogin(),this.$nextTick(function(){t.$el.querySelectorAll("a").forEach(function(t){t.href.match(/^time:\/\//)&&t.setAttribute("onclick","event.preventDefault()")})})},beforeDestroy:function(){var t=this;this.$el.removeEventListener("copy",this.copyHandler),this.$el.removeEventListener("touchstart",this.onTouchStart),this.$el.removeEventListener("touchend",this.onTouchEnd),this.$el.removeEventListener("mousedown",this.handleClick),document.removeEventListener("notify",this.notifyHandler),this.newVideos.forEach(function(e){e.removeEventListener("play",t.videoPlayHandle)}),u.a.off(document,"audio:play"),this.em&&this.em.destroy()},updated:function(){var t=this;this.$nextTick(function(){t.initVideo()})},methods:{initPrecodecopy:function(){document.querySelectorAll("pre").forEach(function(t){t.style.position="relative";var e=t.querySelector("code");if(e){var i=e.textContent,r=document.createElement("div");r.innerHTML='<span class="iconfont">&#xe613;</span>复制代码',r.classList.add("richcontent-pre-copy"),t.appendChild(r),r.addEventListener("touchstart",function(t){t.stopPropagation()}),r.addEventListener("click",function(t){var e=document.createElement("textarea");e.setAttribute("readonly","readonly"),e.style.position="absolute";var r=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);e.style.top=r+256+"px",e.style.opacity="0",document.body.appendChild(e),e.textContent=i,n.a.isInApp()&&!n.a.isInAndroidApp()||e.focus(),e.setSelectionRange(0,e.textContent.length),document.execCommand("copy")?n.a.isPC()||n.a.success("复制成功"):n.a.error("复制失败"),document.body.removeChild(e)})}})},copyHandler:function(t){var e=window.getSelection(),i="<p>极客时间版权所有: "+document.location.href+"</p>",r=n.a.getSelectionText();if(r){var o=r.substr(0,30),a="<p>"+o+(o===r?"":"...")+"</p>"+i,s=document.createElement("div");s.style.position="absolute",s.style.left="-99999px",document.body.appendChild(s),s.innerHTML=a,e.selectAllChildren(s),window.setTimeout(function(){document.body.removeChild(s)},200)}},initMarkerWhenNoLogin:function(){var t=this;this.markerInited||(this.markerInited=!0,this.$nextTick(function(){t.em=new o.a({menuTopOffset:"2rem",disableTapHighlight:!0,menuItems:[{text:"划线笔记",handler:function(t){n.a.login()}},{text:"分享",handler:function(t){n.a.login()}},{text:"拷贝",noborder:!0,handler:function(t){n.a.login()}}],menuStyle:{menu:{fontSize:"14px",borderRadius:"4px",padding:"8px 0",backgroundColor:"#262626"},item:{padding:"4px 16px",borderRight:"1px solid #636363"},triangle:{borderTop:"10px solid #262626",borderRight:"12px solid transparent",borderLeft:"12px solid transparent"}}}),t.em.create(t.$refs.container,document.body)}))},initMarker:function(){var t=this;this.canNote&&!this.markerInited&&(this.markerInited=!0,this.container=this.$refs.container,this.textContainer=this.$refs.text,this.$nextTick(function(){t.em=new o.a({menuTopOffset:"2rem",disableTapHighlight:!0,menuItems:[{text:"划线笔记",handler:function(e){var r=i.i(a.a)(t.textContainer,e.anchorNode,e.anchorOffset),o=e.toString(),s=r.split(o).length-1;if(t.notes.findIndex(function(t){return t.part===o&&t.part_index===s})>-1)return void n.a.error("该笔记已存在");t.$emit("note",o,s)}},{text:"分享",handler:function(e){var i=e.toString();i.length>4e3&&(i=i.slice(0,3997)+"..."),t.$emit("share",i)}},{text:"拷贝",noborder:!0,handler:function(t){n.a.notifyApp({type:"copy",data:t.toString()})}}],menuStyle:{menu:{fontSize:"14px",borderRadius:"4px",padding:"8px 0",backgroundColor:"#262626"},item:{padding:"4px 16px",borderRight:"1px solid #636363"},triangle:{borderTop:"10px solid #262626",borderRight:"12px solid transparent",borderLeft:"12px solid transparent"}}}),t.em.create(t.container,document.body),t.em.onHighlightLineClick(function(e,i,n){t.$emit("highlightclicked",e),t.jumpNoteDetail(e)}),t.notes.length&&(clearTimeout(t.eTimer),t.eTimer=setTimeout(function(){t.highLightNotes()},300))}))},getSelections:function(){var t=this,e=[];if(this.notes.length>0)for(var n=i.i(a.b)(this.container),r=this.container.innerText,o=0;o<this.notes.length;o++){var s=i.i(a.c)(r,n,this.notes[o].part,this.notes[o].part_index);s.start&&s.end&&s.start.node&&s.end.node&&(this.hadScroll||this.noteid!==String(this.notes[o].id)||function(){var e=document.createRange();e.setStart(s.start.node,s.start.offset),setTimeout(function(){window.scrollTo(0,Math.max(0,window.scrollY+e.getClientRects()[0].top-250))},300),t.hadScroll=!0}(),e.push({selection:{anchorNode:s.start.node,anchorOffset:s.start.offset,focusNode:s.end.node,focusOffset:s.end.offset},id:this.notes[o].id}))}return this.noteSelections=e,e},highLightNotes:function(){if(this.em&&this.canNote&&this.markerInited){var t=this.getSelections();this.em.highlightLines(t)}},jumpNoteDetail:function(t){n.a.isInApp()&&n.a.canNotifyApp()&&n.a.notifyApp({type:"jump",path:"views/dashboard/note/notedetail.js",data:{id:t}})},handleClick:function(t){var e=new RegExp(/^time:\/\//);if("a"!==t.target.nodeName.toLowerCase()&&"a"!==t.target.parentNode.nodeName.toLowerCase()||!n.a.isInApp())if("a"!==t.target.nodeName.toLowerCase()&&"a"!==t.target.parentNode.nodeName.toLowerCase()||!(t.target.href||t.target.parentNode.href).match(e))if("img"!==t.target.nodeName.toLowerCase()||!t.target.src||!n.a.gteqAndroidVersion("1.0.8")&&!n.a.gteqIOSVersion("1.1.6")||n.a.eqAndroidVersion("1.2.0")||n.a.eqAndroidVersion("1.2.1")){if("img"===t.target.nodeName.toLowerCase()&&t.target.src){if("A"===t.target.parentNode.nodeName)return void(window.location.href=t.target.parentNode.href);if("unpreview"===t.target.alt)return;var i=t.target.src;window.location.hash="previewimg",c.c(this.$store,{close:function(t){t.close()},imgUrl:i})}}else{if("unpreview"===t.target.alt)return;n.a.previewImgInApp([t.target.src],0)}else t.preventDefault(),n.a.parseTimeLink(t.target.href||t.target.parentNode.href);else{var r=t.target.href||t.target.parentNode.href,o=r.match(/^https?:\/\/time\.geekbang\.org\/course\/(intro|detail)\/.+/),a=r.match(/^https?:\/\/time\.geekbang\.org\/column\/intro\/.+/),s=r.match(/^https?:\/\/time\.geekbang\.org\/column\/.+/),l=r.match(e);if(o){var u=o[1],h={};if(h.id=r.match(/\/(intro|detail)\/(\w+)/i)[2],r.match(/\/detail\/\w+\-(\w+)/i)&&(h.aid=r.match(/\/detail\/\w+\-(\w+)/i)[1]),"detail"===u||"intro"===u)return t.preventDefault(),void("intro"===u?n.a.jumpCourseIntro(h.id):n.a.jumpCourseDetail(h.id,h.aid))}else if(a){t.preventDefault();var f=r.match(/^https*:\/\/time\.geekbang\.org\/column\/intro\/([\w]+)/i)[1];if(f)return void n.a.jumpColumnIntro(f)}else if(l)return t.preventDefault(),void n.a.parseTimeLink(r);if(r.match(/^https*:\/\/time\.geekbang\.org\/(column\/)*article\/([\d]+)/i)){t.preventDefault();var p=r.match(/^https*:\/\/time\.geekbang\.org\/(column\/)*article\/([\d]+)/i)[2];if(p){if(d.hasNativeMethod("common.routeJump")){var m="time://article?id="+p;d.call("common.routeJump",m,function(){return console.log("调起成功")})}else n.a.notifyApp({type:"jump",path:"views/column/article.js",data:{id:p}});return}}if(s){t.preventDefault();var g=r.match(/^https*:\/\/time\.geekbang\.org\/column\/([\d]+)/i)[1];if(g)return void n.a.jumpColumnDetail(g)}if(t.preventDefault(),d.hasNativeMethod("common.routeJump")){var v="time://webview?url="+encodeURIComponent(r)+"&title="+encodeURIComponent(t.target.title||t.target.parentNode.title)+"&isShowClose=true";d.call("common.routeJump",v,function(){return console.log("调起成功")})}else n.a.notifyApp({type:"jump",path:"views/webview.js",data:{url:r,title:t.target.title||t.target.parentNode.title,isShowClose:!0}})}this.em&&"none"!==this.em.$selectStatus&&t.stopPropagation()},handleMathJax:function(t){t.indexOf("$")>-1&&n.a.handleMathJax(this.$el)},getTouchPosition:function(t){return{x:t.clientX||t.changedTouches[0].clientX,y:t.clientY||t.changedTouches[0].clientY}},getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},onTouchStart:function(t){this.touchStartPosition=this.getTouchPosition(t),this.touchStartTime=Date.now(),"img"!==t.target.nodeName.toLowerCase()&&"video"!==t.target.nodeName.toLowerCase()&&"audio"!==t.target.nodeName.toLowerCase()||t.stopPropagation()},onTouchEnd:function(t){if(Date.now()-this.touchStartTime<500){var e=this.getTouchPosition(t);this.getDistance(e,this.touchStartPosition)<20&&this.handleClick(t)}},preventAllAnodeJump:function(){n.a.isInApp()&&this.$el.querySelectorAll("a").forEach(function(t){t.onclick=function(t){t.preventDefault()}})},initVideo:function(){var t=this.$refs.text.querySelectorAll("video");t.length>0&&Array.prototype.slice.call(t).forEach(function(t){if(!t.attributes["x5-playsinline"]){var e=t.attributes.poster;e=e?e.value:"";var i=t.parentElement,r=i.offsetWidth,o=Math.floor(186/331*r),a=document.createElement("div"),s=t.lastChild.attributes.src.value;a.innerHTML='<video style="vertical-align: top;width:'+r+"px;height:"+o+'px" webkit-playsinline playsinline x5-playsinline x5-video-player-type="h5" x5-video-player-fullscreen="true" src="'+s+'" controls="controls" poster="'+e+'"></video>',i.insertBefore(a,t),i.removeChild(t);var c=i.querySelector("video"),u=new l.a;u.loadSource(s),u.attachMedia(c),n.a.isInAndroidApp()&&c.addEventListener("click",function(){setTimeout(function(){c.paused?c.play():c.pause()},200)})}})},videoPlayHandle:function(){u.a.trigger(document,"globalmedia",{type:"video:play"})},notifyHandler:function(t){try{switch(t.detail.type){case"audio:play":this.newVideos.forEach(function(t){t&&t.pause&&t.pause()})}}catch(t){console.log(t)}}},watch:{content:function(t,e){var i=this;this.richContent=n.a.formatContent(t),this.markerInited&&this.em&&"none"!==this.em.$selectStatus&&this.em.reset(),this.$nextTick(function(){i.$el.querySelectorAll("a").forEach(function(t){t.href.match(/^time:\/\//)&&t.setAttribute("onclick","event.preventDefault()")})})},customSize:function(){var t=this;this.noteSelections.length>0&&this.$nextTick(function(){t.noteSelections.forEach(function(e){t.em.cancelHighlightLine(e.id)}),t.em.highlightLines(t.noteSelections)})},richContent:function(t,e){var i=this;this.$nextTick(function(){i.initPrecodecopy()});var n=this.$el.querySelectorAll("pre code");Array.prototype.forEach.call(n,function(t){r.a.lineNumbersBlock(t,{singleLine:!0})}),this.handleMathJax(this.richContent),this.preventAllAnodeJump()},notes:function(t){var e=this;clearTimeout(this.eTimer),this.eTimer=setTimeout(function(){e.highLightNotes()},300)},canNote:function(t){t&&this.initMarker()}}}},720:function(t,e,i){"use strict";i.d(e,"b",function(){return b});var n=i(727),r=i.n(n),o=i(44),a=i.n(o),s=i(631),l=i.n(s),c=i(100),u=i.n(c),d=i(101),h=i.n(d),f=i(633),p=i.n(f),m=i(632),g=i.n(m),v=i(629),y=i(624),b={START:"start",END:"end"},_={},x=function(t){function e(t,i,n){u()(this,e);var r=p()(this,(e.__proto__||l()(e)).call(this));return r.container=t,r.type=i,r.options=a()({},_,n),r.$position={x:0,y:0},r.$height=0,r.touchCallbackStack=[],r.topPoint=null,r.lineElement=null,r.bottomPoint=null,r.createElement(),r.mount(),r}return g()(e,t),h()(e,[{key:"moveTo",value:function(t,e){this.style.top=e-this.width+"px",this.style.left=t-this.width/2+"px"}},{key:"createElement",value:function(){this.element=document.createElement("div"),this.style.userSelect="none",this.style.webkitUserSelect="none",this.style.zIndex="2",this.style.transition="top 0.1s, left 0.1s",this.style.display="none",this.style.position="absolute",this.topPoint=document.createElement("div"),this.topPoint.style.borderRadius="50%",this.topPoint.style.margin="auto",this.lineElement=document.createElement("div"),this.lineElement.style.margin="auto",this.lineElement.style.backgroundColor="#fa8919",this.bottomPoint=document.createElement("div"),this.bottomPoint.style.borderRadius="50%",this.bottomPoint.style.margin="auto",this.type===b.START?this.topPoint.style.backgroundColor="#fa8919":this.bottomPoint.style.backgroundColor="#fa8919",this.element.appendChild(this.topPoint),this.element.appendChild(this.lineElement),this.element.appendChild(this.bottomPoint)}},{key:"setCursorSize",value:function(t){var e=this.width+"px";this.style.width=e,this.topPoint.style.height=e,this.topPoint.style.width=e,this.bottomPoint.style.height=e,this.bottomPoint.style.width=e,this.lineElement.style.height=t+"px",this.lineElement.style.width=t/15+"px"}},{key:"inRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.height,n=r.a;return t.y>this.position.y&&t.y<this.position.y+this.height&&(n=Math.abs(t.x-this.position.x)),t.y>=this.position.y+this.with&&(n=i.i(y.j)(t,{x:this.position.x,y:this.position.y+this.height})),t.y<=this.position.y&&(n=i.i(y.j)(t,this.position)),{inRegion:n<=e,distance:n}}},{key:"position",set:function(t){var e=t.x,i=t.y;this.$position={x:e,y:i},this.moveTo(e,i)},get:function(){return this.$position}},{key:"height",get:function(){return this.$height},set:function(t){t!==this.$height&&(this.$height=t,this.setCursorSize(t))}},{key:"width",get:function(){return this.height/4}}]),e}(v.a);e.a=x},721:function(t,e,i){"use strict";var n=i(691),r=i.n(n),o=i(639),a=i.n(o),s=i(44),l=i.n(s),c=i(631),u=i.n(c),d=i(100),h=i.n(d),f=i(101),p=i.n(f),m=i(633),g=i.n(m),v=i(632),y=i.n(v),b=i(629),_=i(689),x=i(624),w=function(t){function e(t,n){h()(this,e);var r=g()(this,(e.__proto__||u()(e)).call(this)),o={color:"fa8919",opacity:.1};return r.container=t,r.option=l()(o,n),r.option.margin=i.i(x.h)(r.option.margin),r.lineMap=new a.a,r.onClick=function(){},r.createElement(),r.mount(),r.id=0,r}return y()(e,t),p()(e,[{key:"getID",value:function(){return this.id++}},{key:"highlight",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],a=void 0===e||null===e?this.getID():e,s=new _.a(t.anchorNode,t.anchorOffset),l=new _.a(t.focusNode,t.focusOffset),c=Number(window.getComputedStyle(t.anchorNode.parentElement).lineHeight.replace("px","")),u=void 0;try{var d=_.a.getSelectNodeRectAndText(s.node,l.node,s.offset,l.offset);u=d.rects}catch(t){console.error("EasyMarkerError:",t),u=[]}var h=[],f=u.map(function(t){var e={top:t.top-o.y,bottom:t.bottom-o.y,height:t.height,width:t.width,left:t.left-o.x,right:t.right-o.x};h.push(e),c=c||t.height;var n=i.option.margin||(c-t.height)/4;return i.constructor.rectToPointArray(t,o,n).reduce(function(t,e){var i=r()(e,2);return t+" "+i[0]+","+i[1]},"")});return this.lineMap.set(a,{selection:t,points:f,relativeRects:h,meta:n,lineHeight:c}),a}},{key:"render",value:function(){var t=this;this.removeAllRectangle(),this.lineMap.forEach(function(e){e.points.forEach(function(e){t.element.appendChild(t.createRectangle(e))})})}},{key:"highlightLines",value:function(t,e){var i=this;this.lineMap.clear();var n=t.map(function(t){var n=t.selection,r=t.id,o=t.meta;return i.highlight(n,r,o,e)});return this.render(),n}},{key:"highlightLine",value:function(t,e,i,n){var r=this.highlight(t,e,i,n);return this.render(),r}},{key:"cancelHighlightLine",value:function(t){this.lineMap.delete(t),this.render()}},{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.zIndex="1",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.overflow="visible",this.element=t}},{key:"createRectangle",value:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","polygon");return e.style.fill=this.option.color,e.style.strokeWidth=0,e.style.strokeOpacity=this.option.opacity,e.style.opacity=this.option.opacity,e.setAttribute("points",t),e}},{key:"handleTap",value:function(t){var e=i.i(x.e)(t),n=e.x,r=e.y,o=this.container.getBoundingClientRect(),a=o.top,s=o.left,l=void 0;return this.lineMap.forEach(function(t,e){for(var o=0;o<t.relativeRects.length;o++){var c=t.relativeRects[o],u=(t.lineHeight-c.height)/2;if(i.i(x.i)(n-s,r-a,c,u)){l={id:e,line:t};break}}}),!!l&&(this.onClick(l.id,l.line.meta,l.line.selection),!0)}},{key:"removeAllRectangle",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}}],[{key:"rectToPointArray",value:function(t,e,i){var n=[];return 0===t.width?n:(n.push([t.left-i,t.top-i]),n.push([t.right+i,t.top-i]),n.push([t.right+i,t.bottom+i]),n.push([t.left-i,t.bottom+i]),n.forEach(function(t){t[0]>e.right?t[0]=e.right-e.x:t[0]-=e.x,t[1]-=e.y}),n)}}]),e}(b.a);e.a=w},722:function(t,e,i){"use strict";var n=i(691),r=i.n(n),o=i(44),a=i.n(o),s=i(631),l=i.n(s),c=i(100),u=i.n(c),d=i(101),h=i.n(d),f=i(633),p=i.n(f),m=i(632),g=i.n(m),v=i(629),y=i(688),b=function(t){function e(t,i){u()(this,e);var n=p()(this,(e.__proto__||l()(e)).call(this)),r={color:"fa8919",opacity:.1,animateDuration:100};return n.container=t,n.option=a()(r,i),n.paths=[],n.position={header:new y.a,body:new y.a,footer:new y.a},n.animating=!1,n.animateStartTime=0,n.animateEndTime=0,n.animatePercent=0,n.polygonElement=null,n.createElement(),n.mount(),n}return g()(e,t),h()(e,[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.overflow="visible";var e=document.createElementNS("http://www.w3.org/2000/svg","polygon");e.style.fill=this.option.color,e.style.strokeWidth=0,e.style.strokeOpacity=this.option.opacity,e.style.opacity=this.option.opacity,e.style.transition="opacity 0.2s ease",t.appendChild(e),this.element=t,this.polygonElement=e}},{key:"render",value:function(t,e,i){var n=this.position,r=n.header,o=n.body,a=n.footer;if(!(0!==this.paths.length&&r.equal(t)&&o.equal(e)&&a.equal(i))){this.polygonElement.style.opacity=this.option.opacity;var s=this.position;this.position.header.setAll(t),this.position.body.setAll(e),this.position.footer.setAll(i),this.animateStartTime=Date.now(),this.animateEndTime=this.animateStartTime+this.option.animateDuration,this.animatePercent=0,this.animating||(this.animating=!0,this.animated(s))}}},{key:"animated",value:function(t){var e=this,i=(Date.now()-this.animateStartTime)/(this.animateEndTime-this.animateStartTime),n=0;if(i>=1)n=1,this.animatePercent=1;else{var o=1e3/60/this.option.animateDuration+1.3*(i-this.animatePercent);this.animatePercent+=o,n=o/(1-i),n=o>1?1:o}var a=this.constructor.getAnimateFrame(t.header,this.position.header,n),s=this.constructor.getAnimateFrame(t.body,this.position.body,n),l=this.constructor.getAnimateFrame(t.footer,this.position.footer,n),c={header:a,body:s,footer:l};this.paths=this.constructor.getPaths(c);var u=this.paths.map(function(t){var e=r()(t,2);return e[0]+","+e[1]}).join(" ");if(this.polygonElement.setAttribute("points",u),i>=1)return void(this.animating=!1);window.requestAnimationFrame(function(){return e.animated(c)})}},{key:"reset",value:function(){this.paths=[],this.polygonElement.style.opacity="0",this.polygonElement.setAttribute("points","")}},{key:"top",get:function(){return this.position.header.y}},{key:"height",get:function(){return this.position.header.height+this.position.body.height+this.position.footer.height}}],[{key:"getAnimateFrame",value:function(t,e,i){var n=new y.a;return n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i,n.height=t.height+(e.height-t.height)*i,n.width=t.width+(e.width-t.width)*i,n}},{key:"getPaths",value:function(t){var e=t.header,i=t.body,n=t.footer,r=[];return e.isSet&&(r.push([e.x,e.y]),r.push([e.x+e.width,e.y]),r.push([e.x+e.width,e.y+e.height])),i.isSet&&(r.push([i.x+i.width,i.y]),r.push([i.x+i.width,i.y+i.height])),n.isSet&&(r.push([n.x+n.width,n.y]),r.push([n.x+n.width,n.y+n.height]),r.push([n.x,n.y+n.height]),r.push([n.x,n.y])),i.isSet&&(r.push([i.x,i.y+i.height]),r.push([i.x,i.y])),e.isSet&&r.push([e.x,e.y+e.height]),r}}]),e}(v.a);e.a=b},723:function(t,e,i){"use strict";var n=i(639),r=i.n(n),o=i(44),a=i.n(o),s=i(631),l=i.n(s),c=i(100),u=i.n(c),d=i(101),h=i.n(d),f=i(633),p=i.n(f),m=i(632),g=i.n(m),v=i(629),y=i(624),b=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,e);var o=p()(this,(e.__proto__||l()(e)).call(this));return o.container=t,o.option={items:n.menuItems,topOffset:i.i(y.h)(n.topOffset),style:{menu:{fontSize:"0.4rem",backgroundColor:"#262626",fontColor:"#fff",borderRadius:"0.1rem",color:"#fff",border:"0px",display:"inline-block",padding:"0 0.2rem",margin:"auto"},triangle:{marginLeft:"auto",marginRight:"auto",borderTop:"0.2rem solid #262626",borderRight:"0.2rem solid transparent",borderLeft:"0.2rem solid transparent",width:"0",height:"0",marginTop:"-1px"},item:{lineHeight:"1.24rem",padding:"0 0.3rem",color:"#fff",display:"inline-block"}}},n.style&&(a()(o.option.style.menu,n.style.menu),a()(o.option.style.triangle,n.style.triangle),a()(o.option.style.item,n.style.item)),o.easyMarker=null,o.menuElement=null,o.itemMap=new r.a,o.positionRange={top:0,bottom:0},o.ticking=!1,o.height=0,o.createElement(),o.mount(),o.hide(!1),o}return g()(e,t),h()(e,[{key:"createElement",value:function(){var t=this,e=document.createElement("div");e.style.position="absolute",e.style.width="100%",e.style.textAlign="center",e.style.lineHeight="0",e.style.left="0",e.style.zIndex="10",e.style.transform="translateY(-100%)",e.style.webkitTransform="translateY(-100%)",e.style.transition="transform 0.2s ease, opacity 0.2s ease";var i=document.createElement("div");a()(i.style,this.option.style.menu);var n=document.createElement("div");a()(n.style,this.option.style.triangle),e.appendChild(i),e.appendChild(n),this.option.items.forEach(function(e){var n=t.createMenuItemElement(e.text,e.noborder);t.itemMap.set(n,e),i.appendChild(n)}),this.menuElement=i,this.element=e}},{key:"createMenuItemElement",value:function(t,e){var i=document.createElement("span");a()(i.style,this.option.style.item,e?{border:"none"}:null);var n=document.createTextNode(t);return i.appendChild(n),i}},{key:"setPosition",value:function(t,e){this.positionRange.top=t,this.positionRange.bottom=e}},{key:"hide",value:function(){this.style.visibility="hidden",this.style.opacity="0"}},{key:"show",value:function(){var t=0;this.height||(this.height=Number((window.getComputedStyle(this.menuElement).height||"").replace("px","")));var e=this.container.getBoundingClientRect(),i=e.top;i<0&&this.positionRange.bottom<-i?(t=this.positionRange.bottom,this.style.position="absolute"):this.positionRange.top-this.height-this.option.topOffset>-i?(t=this.positionRange.top,this.style.position="absolute"):(this.style.position="fixed",t=this.option.topOffset+this.height),this.style.visibility="visible",this.style.top=t+"px",this.style.opacity="1"}},{key:"handleTap",value:function(t,e){var i=e.start,n=e.end,r=e.content;if(!this.itemMap.has(t.target))return!1;var o={anchorNode:i.node,anchorOffset:i.offset,focusNode:n.node,focusOffset:n.offset,toString:function(){return r}};return this.itemMap.get(t.target).handler.call(this.easyMarker,o),!0}},{key:"handleScroll",value:function(){var t=this;this.ticking||(window.requestAnimationFrame(function(){t.show(),t.ticking=!1}),this.ticking=!0)}}]),e}(v.a);e.a=b},724:function(t,e,i){"use strict";i.d(e,"b",function(){return u});var n=i(44),r=i.n(n),o=i(100),a=i.n(o),s=i(101),l=i.n(s),c=i(624),u={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_MOVE_THROTTLE:"touchmovethrottle",TOUCH_END:"touchend",TAP:"tap",LONG_TAP:"longtap"},d=function(){function t(e,i){a()(this,t),this.options={longTapTime:600,tapTime:500,slideDistance:20,throttleTime:50},this.element=e,this.options=r()(this.options,i),this.touchStartCallbacks=[],this.touchMoveCallbacks=[],this.touchMoveThrottleCallbacks=[],this.touchEndCallbacks=[],this.tapCallbacks=[],this.longTapCallbacks=[],this.hook=function(){return!0},this.touchStartPosition={x:0,y:0},this.longTapTimerHandler=null,this.touchMoveTimerHandler=null,this.touchStartTime=Date.now(),this.lastMoveTime=Date.now(),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.element.addEventListener("touchstart",this.onTouchStart),this.element.addEventListener("touchmove",this.onTouchMove),this.element.addEventListener("touchend",this.onTouchEnd)}return l()(t,[{key:"registerEvent",value:function(t,e){if("function"==typeof e)switch(t){case u.TOUCH_START:this.touchStartCallbacks.push(e);break;case u.TOUCH_MOVE:this.touchMoveCallbacks.push(e);break;case u.TOUCH_MOVE_THROTTLE:this.touchMoveThrottleCallbacks.push(e);break;case u.TOUCH_END:this.touchEndCallbacks.push(e);break;case u.TAP:this.tapCallbacks.push(e);break;case u.LONG_TAP:this.longTapCallbacks.push(e)}}},{key:"registerHook",value:function(t){this.hook=t}},{key:"onTouchStart",value:function(t){var e=this;this.hook("touchstart",t)&&(this.touchStartCallbacks.forEach(function(e){return e(t)}),this.longTapTimerHandler=setTimeout(function(){e.onLongTap(t)},this.options.longTapTime),this.touchStartPosition=i.i(c.e)(t),this.touchStartTime=Date.now())}},{key:"onTouchMove",value:function(t){var e=this;if(this.hook("touchmove",t)){this.touchMoveCallbacks.forEach(function(e){return e(t)}),clearTimeout(this.touchMoveTimerHandler),this.touchMoveTimerHandler=setTimeout(function(){e.onTouchMoveThrottle(t)},this.options.throttleTime),Date.now()-this.lastMoveTime>this.options.throttleTime&&(this.lastMoveTime=Date.now(),this.onTouchMoveThrottle(t));var n=i.i(c.e)(t);i.i(c.j)(n,this.touchStartPosition)>this.options.slideDistance&&(clearTimeout(this.longTapTimerHandler),this.longTapTimerHandler=null)}}},{key:"onTouchEnd",value:function(t){if(this.hook("touchmove",t)&&(this.touchEndCallbacks.forEach(function(e){return e(t)}),clearTimeout(this.longTapTimerHandler),this.longTapTimerHandler=null,Date.now()-this.touchStartTime<this.options.tapTime)){var e=i.i(c.e)(t);if(i.i(c.j)(e,this.touchStartPosition)<this.options.slideDistance){t.preventDefault();var n=this.constructor.createMouseEvent("click",t);this.onTap(t),t.target.dispatchEvent(n)}}}},{key:"onTouchMoveThrottle",value:function(t){this.touchMoveThrottleCallbacks.forEach(function(e){return e(t)})}},{key:"onTap",value:function(t){this.hook("tap",t)&&this.tapCallbacks.forEach(function(e){return e(t)})}},{key:"onLongTap",value:function(t){this.longTapCallbacks.forEach(function(e){return e(t)})}},{key:"destroy",value:function(){this.element.removeEventListener("touchstart",this.onTouchStart),this.element.removeEventListener("touchmove",this.onTouchMove),this.element.removeEventListener("touchend",this.onTouchEnd)}}],[{key:"createMouseEvent",value:function(t,e){var i=e.changedTouches[0],n=new MouseEvent(t);return n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,n}}]),t}();e.a=d},725:function(t,e,i){t.exports={default:i(729),__esModule:!0}},726:function(t,e,i){t.exports={default:i(730),__esModule:!0}},727:function(t,e,i){t.exports={default:i(732),__esModule:!0}},728:function(t,e,i){t.exports={default:i(734),__esModule:!0}},729:function(t,e,i){i(149),i(103),t.exports=i(745)},730:function(t,e,i){i(149),i(103),t.exports=i(746)},731:function(t,e,i){i(154),i(103),i(149),i(747),i(753),i(752),i(751),t.exports=i(10).Map},732:function(t,e,i){i(748),t.exports=9007199254740991},733:function(t,e,i){i(749),t.exports=i(10).Object.getPrototypeOf},734:function(t,e,i){i(750),t.exports=i(10).Object.setPrototypeOf},735:function(t,e,i){var n=i(222);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},736:function(t,e,i){var n=i(66),r=i(151),o=i(67),a=i(104),s=i(738);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,d=6==t,h=5==t||d,f=e||s;return function(e,s,p){for(var m,g,v=o(e),y=r(v),b=n(s,p,3),_=a(y.length),x=0,w=i?f(e,_):l?f(e,0):void 0;_>x;x++)if((h||x in y)&&(m=y[x],g=b(m,x,v),t))if(i)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(u)return!1;return d?-1:c||u?u:w}}},737:function(t,e,i){var n=i(37),r=i(231),o=i(13)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},738:function(t,e,i){var n=i(737);t.exports=function(t,e){return new(n(t))(e)}},739:function(t,e,i){"use strict";var n=i(34).f,r=i(148),o=i(230),a=i(66),s=i(228),l=i(222),c=i(152),u=i(232),d=i(236),h=i(33),f=i(229).fastKey,p=i(692),m=h?"_s":"size",g=function(t,e){var i,n=f(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var u=t(function(t,n){s(t,u,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&l(n,i,t[c],t)});return o(u.prototype,{clear:function(){for(var t=p(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var i=p(this,e),n=g(i,t);if(n){var r=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),i._f==n&&(i._f=r),i._l==n&&(i._l=o),i[m]--}return!!n},forEach:function(t){p(this,e);for(var i,n=a(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!g(p(this,e),t)}}),h&&n(u.prototype,"size",{get:function(){return p(this,e)[m]}}),u},def:function(t,e,i){var n,r,o=g(t,e);return o?o.v=i:(t._l=o={i:r=f(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[m]++,"F"!==r&&(t._i[r]=o)),t},getEntry:g,setStrong:function(t,e,i){c(t,e,function(t,i){this._t=p(t,e),this._k=i,this._l=void 0},function(){for(var t=this,e=t._k,i=t._l;i&&i.r;)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?"keys"==e?u(0,i.k):"values"==e?u(0,i.v):u(0,[i.k,i.v]):(t._t=void 0,u(1))},i?"entries":"values",!i,!0),d(e)}}},740:function(t,e,i){var n=i(150),r=i(735);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},741:function(t,e,i){"use strict";var n=i(12),r=i(28),o=i(229),a=i(58),s=i(45),l=i(230),c=i(222),u=i(228),d=i(37),h=i(79),f=i(34).f,p=i(736)(0),m=i(33);t.exports=function(t,e,i,g,v,y){var b=n[t],_=b,x=v?"set":"add",w=_&&_.prototype,k={};return m&&"function"==typeof _&&(y||w.forEach&&!a(function(){(new _).entries().next()}))?(_=e(function(e,i){u(e,_,t,"_c"),e._c=new b,void 0!=i&&c(i,v,e[x],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!y||"clear"!=t)&&s(_.prototype,t,function(i,n){if(u(this,_,t),!e&&y&&!d(i))return"get"==t&&void 0;var r=this._c[t](0===i?0:i,n);return e?this:r})}),y||f(_.prototype,"size",{get:function(){return this._c.size}})):(_=g.getConstructor(e,t,v,x),l(_.prototype,i),o.NEED=!0),h(_,t),k[t]=_,r(r.G+r.W+r.F,k),y||g.setStrong(_,t,v),_}},742:function(t,e,i){"use strict";var n=i(28),r=i(78),o=i(66),a=i(222);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,s,l=arguments[1];return r(this),e=void 0!==l,e&&r(l),void 0==t?new this:(i=[],e?(n=0,s=o(l,arguments[2],2),a(t,!1,function(t){i.push(s(t,n++))})):a(t,!1,i.push,i),new this(i))}})}},743:function(t,e,i){"use strict";var n=i(28);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},744:function(t,e,i){var n=i(37),r=i(38),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i(66)(Function.call,i(233).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},745:function(t,e,i){var n=i(38),r=i(153);t.exports=i(10).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},746:function(t,e,i){var n=i(150),r=i(13)("iterator"),o=i(68);t.exports=i(10).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(n(e))}},747:function(t,e,i){"use strict";var n=i(739),r=i(692);t.exports=i(741)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},748:function(t,e,i){var n=i(28);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},749:function(t,e,i){var n=i(67),r=i(234);i(235)("getPrototypeOf",function(){return function(t){return r(n(t))}})},750:function(t,e,i){var n=i(28);n(n.S,"Object",{setPrototypeOf:i(744).set})},751:function(t,e,i){i(742)("Map")},752:function(t,e,i){i(743)("Map")},753:function(t,e,i){var n=i(28);n(n.P+n.R,"Map",{toJSON:i(740)("Map")})},754:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,'._29HP61GA_0{font-weight:400;color:#353535;line-height:1.76;white-space:normal;word-break:normal;font-size:17px;-webkit-transition:background-color .3s ease;transition:background-color .3s ease}._29HP61GA_0 .MathJax_Display{overflow:auto}._29HP61GA_0 .poster{position:fixed;left:-10000px;top:-10000px;overflow:hidden;padding:1rem;background:#ececec}._29HP61GA_0 .richcontent-pre-copy{font-size:13px;color:#888;position:absolute;right:1em;top:.5em;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._29HP61GA_0 .richcontent-pre-copy .iconfont{font-size:12px;margin-right:.2em}._29HP61GA_0 a{color:#fa8919;border-bottom:1px solid #fa8919}._29HP61GA_0 img{display:block;max-width:100%;position:relative;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background-color:#eee;vertical-align:top;border-radius:0}._29HP61GA_0 audio,._29HP61GA_0 video{width:100%;background-color:#eee}._29HP61GA_0 pre{margin-top:16px;padding:34px 0 0;margin-bottom:30px;position:relative;border-radius:6px;background:rgba(246,247,251,.749);border:0}._29HP61GA_0 code{word-break:break-all}._29HP61GA_0 pre code{font-size:12px;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;word-break:normal;-webkit-box-sizing:border-box;box-sizing:border-box;margin-left:16px;margin-right:16px;overflow-x:scroll}._29HP61GA_0 pre code:after{content:"";height:30px;width:100%;display:block}._29HP61GA_0 hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}._29HP61GA_0 h1,._29HP61GA_0 h2,._29HP61GA_0 h3,._29HP61GA_0 h4,._29HP61GA_0 h5{margin-bottom:20px;margin-top:0;font-weight:700;color:#353535}._29HP61GA_0 b,._29HP61GA_0 strong{font-weight:700;color:#353535}._29HP61GA_0 h1{font-size:21px}._29HP61GA_0 h2{font-size:20px}._29HP61GA_0 h3{font-size:19px}._29HP61GA_0 h4{font-size:18px}._29HP61GA_0 h5{font-size:17px}._29HP61GA_0 center,._29HP61GA_0 p{font-weight:400;color:#353535;margin-top:0;margin-bottom:30px;word-break:break-word}._29HP61GA_0 center{text-align:center}._29HP61GA_0 blockquote{margin-top:0;margin-bottom:34px;border-left:3px solid #e8e8e8;padding-left:17px;color:#353535}._29HP61GA_0 blockquote p{margin-top:0;margin-bottom:0}._29HP61GA_0 ol,._29HP61GA_0 ul{margin-bottom:30px}._29HP61GA_0 ol p,._29HP61GA_0 ul p{margin-top:0;margin-bottom:0}._29HP61GA_0 ol{list-style:decimal;margin-left:30px}._29HP61GA_0 ul li{padding-left:17px;position:relative;margin-bottom:10px}._29HP61GA_0 ul li:after{content:"";height:6px;width:6px;border-radius:50%;background:#353535;position:absolute;top:10px;left:0}._29HP61GA_0 .orange{color:#fa8919}._29HP61GA_0 .reference{color:#888}._29HP61GA_0 .m-right{text-align:right}._29HP61GA_0 .m-center{text-align:center;display:block}._29HP61GA_0 .m-gray{color:#888}._29HP61GA_0 .m-small{font-size:15px}._29HP61GA_0 table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}._29HP61GA_0 table.hljs-ln,._29HP61GA_0 table.hljs-ln tbody,._29HP61GA_0 table.hljs-ln td,._29HP61GA_0 table.hljs-ln tr{-webkit-box-sizing:border-box;box-sizing:border-box}._29HP61GA_0 table.hljs-ln td{padding:0;border:0}._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers{min-width:15px;font-size:12px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._29HP61GA_0 table.hljs-ln td.hljs-ln-code,._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:20px;vertical-align:top}._29HP61GA_0 table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;font-size:13px;color:#666;word-wrap:normal;white-space:pre}._2gMcXXSK_0{font-size:15px}._2gMcXXSK_0 h1{font-size:19px}._2gMcXXSK_0 h2{font-size:18px}._2gMcXXSK_0 h3{font-size:17px}._2gMcXXSK_0 h4{font-size:16px}._2gMcXXSK_0 h5{font-size:15px}._2gMcXXSK_0 p{margin-bottom:26px}._2gMcXXSK_0 blockquote{margin-bottom:30px}._2gMcXXSK_0 ol,._2gMcXXSK_0 ul{margin-bottom:26px}._2gMcXXSK_0 .m-small{font-size:13px}._1-IhkAAb_0{font-size:19px}._1-IhkAAb_0 h1{font-size:23px}._1-IhkAAb_0 h2{font-size:22px}._1-IhkAAb_0 h3{font-size:21px}._1-IhkAAb_0 h4{font-size:20px}._1-IhkAAb_0 h5{font-size:19px}._1-IhkAAb_0 .m-small{font-size:17px}._1Xjr5LRK_0 table.hljs-ln td.hljs-ln-code,._1Xjr5LRK_0 table.hljs-ln td.hljs-ln-numbers{font-family:monospace}._1XhbM4Sp_0 pre{background:hsla(43,50%,87%,.749)}._1XhbM4Sp_0 blockquote{border-color:#efe6cf}._2wERfXHe_0 h1,._2wERfXHe_0 h2,._2wERfXHe_0 h3,._2wERfXHe_0 h4,._2wERfXHe_0 h5,._2wERfXHe_0 p{color:silver}._2wERfXHe_0 blockquote{border-color:#3e3e3e}._2wERfXHe_0 li,._2wERfXHe_0 strong{color:silver}._2wERfXHe_0 pre{background:rgba(62,62,62,.749)}._2wERfXHe_0 center{color:silver}._2wERfXHe_0 img{opacity:.9}._2wERfXHe_0 ul li:after{background:silver}._2wERfXHe_0 table.hljs-ln td.hljs-ln-numbers{color:#b2b2b2}._2wERfXHe_0 table.hljs-ln td.hljs-ln-code{color:silver}',""]),e.locals={white:"_29HP61GA_0",small:"_2gMcXXSK_0",big:"_1-IhkAAb_0",android:"_1Xjr5LRK_0",yellow:"_1XhbM4Sp_0",black:"_2wERfXHe_0"}},757:function(t,e,i){var n=i(754);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("4029d6ca",n,!0,{})},768:function(t,e){t.exports={render:function(){var t,e,i,n,r,o=this,a=o.$createElement,s=o._self._c||a;return s("div",{ref:"container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:o.content,expression:"content"}],ref:"text",class:[o.$style.white,(t={},t[o.$style.android]=o.isInAndroidApp,t),(e={},e[o.$style.yellow]="yellow"===o.customColor,e),(i={},i[o.$style.black]="black"===o.customColor,i),(n={},n[o.$style.small]="small"===o.customSize,n),(r={},r[o.$style.big]="big"===o.customSize,r)],domProps:{innerHTML:o._s(o.richContent)}})])},staticRenderFns:[]}},782:function(t,e,i){function n(t){i(786)}var r=i(22)(i(783),i(788),n,null,null);t.exports=r.exports},783:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},785:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".bottom{width:100%;background-color:#f5f5f5;position:fixed;bottom:0;left:0;z-index:10}.bottom,.bottom .bottom-wrapper{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.bottom .bottom-wrapper{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.bottom .bottom-wrapper a{height:50px;line-height:50px;-webkit-box-sizing:border-box;box-sizing:border-box}",""])},786:function(t,e,i){var n=i(785);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("619c609b",n,!0,{})},787:function(t,e,i){function n(t){i(861)}var r=i(22)(i(827),i(923),n,null,null);t.exports=r.exports},788:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom"},[i("div",{staticClass:"bottom-wrapper"},[t._t("default")],2)])},staticRenderFns:[]}},797:function(t,e,i){function n(t){i(811)}var r=i(22)(i(799),i(816),n,null,null);t.exports=r.exports},799:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(i(218),i(65));e.default={props:["list"],data:function(){return{isInApp:n.a.isInApp()}}}},800:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(43),r=i.n(n),o=i(99),a=i.n(o),s=i(803),l=i(802),c=i(219),u=i(621);e.default={props:["config"],data:function(){return{source:null,encryptVideoId:null,paused:!0,progressTimer:null,currentDuration:0,videoHeight:0,playing:!1,volume:50}},created:function(){this.normalProps(this.config)},mounted:function(){this.videoHeight=this.$refs.player.offsetWidth*(9/16),this.bindEvent(),this.initPlayer()},computed:a()({},i.i(c.a)({loginUser:"loginUser"}),{videoStyle:function(){return{height:this.videoHeight+"px"}}}),methods:{normalProps:function(t){this.source=t.source;var e=[];t.urls&&t.urls.HD&&e.push({desc:"高清",definition:"HD",url:t.urls.HD}),t.urls&&t.urls.SD&&e.push({desc:"标清",definition:"SD",url:t.urls.SD}),t.urls&&t.urls.LD&&e.push({desc:"普清",definition:"LD",url:t.urls.LD}),this.urls=e,this.quality=t.quality,this.cover=t.cover||"",this.encryptVideoId=null,t.encryptInfo&&"string"==typeof t.encryptInfo.encryptVideoId&&t.encryptInfo.encryptVideoId.length>0&&(this.encryptVideoId=t.encryptInfo.encryptVideoId),this.encryptInfo=t.encryptInfo,this.speed=t.speed||1,this.currentDuration=t.currentDuration||0},initPlayer:function(){var t=this;(this.source||this.encryptVideoId)&&(this.player||(this.player={},this.encryptVideoId?this.initEncryptVideo(function(e){t.currentDuration>0&&e.seek(t.currentDuration),e.setSpeed(t.speed)}):this.initNormalVideo(function(e){t.currentDuration>0&&e.seek(t.currentDuration),e.setSpeed(t.speed)})))},playerEventRegist:function(){var t=this;this.player.on("timeupdate",function(e){t.currentDuration=Math.floor(t.player.tag.currentTime),t.$emit("timeupdate",t.currentDuration)}),this.player.on("ended",function(){t.$emit("ended")}),this.player.on("pause",function(e){t.$emit("pause")}),this.player.on("playing",function(e){t.$emit("playing")})},initNormalVideo:function(t){var e=this;this.player=new window.Aliplayer({id:"aliyunPlayerCon",source:this.source,width:"100%",height:"100%",useH5Prism:!0,components:[{name:"SpeedComponent",type:s.a},{name:"QualityComponent",type:l.a}],speedComponent:{speed:this.speed},qualityComponent:{quality:this.quality,urls:this.urls},componentChangeHandle:function(t,i){"SpeedComponent"===t&&(console.log(i),e.$emit("changespeed",i)),"QualityComponent"===t&&(console.log(i),e.$emit("changequality",i))}},function(e){t(e)}),this.playerEventRegist()},initEncryptVideo:function(t){var e=this;return new r.a(function(i,n){var r={sourceType:e.encryptInfo.sourceType,aid:e.encryptInfo.aid,encryptVideoId:e.encryptVideoId,sku:e.encryptInfo.sku};u.a.getEncryptVideoPlayAuth(r).then(function(i){e.player=new window.Aliplayer({id:"aliyunPlayerCon",vid:e.encryptVideoId,playauth:i.play_auth,encryptType:1,width:"100%",height:"100%",useH5Prism:!0,components:[{name:"SpeedComponent",type:s.a},{name:"QualityComponent",type:l.a}],speedComponent:{speed:e.speed},qualityComponent:{quality:e.quality,urls:e.urls},componentChangeHandle:function(t,i){"SpeedComponent"===t&&(console.log(i),e.$emit("changespeed",i)),"QualityComponent"===t&&(console.log(i),e.$emit("changequality",i))}},function(e){t(e)}),e.playerEventRegist()})})},switchVideo:function(t){this.encryptVideoId?this.switchEncryptVideo():(this.player._options.urls=[{desc:"高清",definition:"HD",Url:this.urls.hd},{desc:"标清",definition:"SD",Url:this.urls.sd}],this.player.loadByUrl(t.source))},switchEncryptVideo:function(){this.player&&this.player.dispose&&this.player.dispose(),this.player=null,window.document.getElementById("aliyunPlayerCon").innerHTML="",this.initPlayer()},bindEvent:function(){var t=this;window.addEventListener("resize",function(e){t.videoHeight=t.$refs.player.offsetWidth*(9/16)})},toggle:function(){this.player.paused?this.player.play():this.player.pause()},destroy:function(){this.player&&this.player.dispose&&this.player.dispose(),this.player=null,window.document.getElementById("aliyunPlayerCon").innerHTML=""},replay:function(){var t=this;if(this.encryptVideoId){var e={sourceType:this.encryptInfo.sourceType,aid:this.encryptInfo.aid,encryptVideoId:this.encryptVideoId,sku:this.encryptInfo.sku};u.a.getEncryptVideoPlayAuth(e).then(function(e){e.play_auth&&t.player.replayByVidAndPlayAuth(t.encryptVideoId,e.play_auth)})}else this.player.replay()},storagePlayerRate:function(t){window.localStorage.setItem("VdPlayerRate",t)}}}},802:function(t,e,i){"use strict";function n(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]}var r=i(100),o=i.n(r),a=i(101),s=i.n(a),l=function(){function t(){o()(this,t),this.html=n('<div class="quality-components" style="display:none">\n      <div class="current-quality" data-ref="">清晰度</div>\n      <ul class="quality-list">\n      </ul>\n    </div>'),this.modalHtml=n('<div class="quality-modal">\n      正在为您切换到 <span></span> , 请稍后...\n    </div>'),this.hasCreated=!1,this.definition=""}return s()(t,[{key:"createEl",value:function(t,e){if(e._options.qualityComponent.quality){t.querySelector(".prism-controlbar").appendChild(this.html),t.appendChild(this.modalHtml)}}},{key:"setCurrentQuality",value:function(t,e){var i=this.html.querySelector(".current-quality");i.innerText=t,i.dataset.def=e,this.definition=e;var n=this.html.querySelector(".quality-list"),r=n.querySelector(".current");r&&(r.className="");var o=n.querySelector("li[data-def="+e+"]");o&&(o.className="current")}},{key:"created",value:function(t){var e=this;if(this._urls=null,t._options.qualityComponent.quality&&(t._options.vid&&t._urls&&(this._urls=t._urls),this._urls||(this._urls=t._options.qualityComponent.urls),this._urls)){var i=this.html.querySelector(".current-quality"),n=this.html.querySelector(".quality-list"),r=this._urls.map(function(t){return'<li data-def="'+t.definition+'">'+t.desc+"</li>"});this.html.querySelector(".quality-list").innerHTML=r.join("");var o=this._urls.find(function(e){return e.definition===t._options.qualityComponent.quality});if(this.setCurrentQuality(o.desc,o.definition),t._options.vid&&t.loadByUrl(o.Url,t.getCurrentTime(),!0,!0),console.log(this.definition),!1===this.hasCreated&&this.definition){n.querySelector("li[data-def="+this.definition+"]").className="current"}this.hasCreated=!0,this.html.style.display="block";var a=null;i.onclick=function(){n.style.display="block"},i.onmouseleave=function(){a=setTimeout(function(){n.style.display="none"},100)},n.onmouseenter=function(){clearTimeout(a)},n.onmouseleave=function(){n.style.display="none"},n.onclick=function(i){var r=i.target,o=r.dataset.def;if(n.style.display="none",o&&"current"!==r.className){var a=e._urls.find(function(t){return t.definition===o});a.url=a.url||a.Url,t.loadByUrl(a.url,t.getCurrentTime(),!0,!0),e.setCurrentQuality(a.desc,a.definition),t._options.componentChangeHandle("QualityComponent",o),e.modalHtml.style.display="block",e.modalHtml.querySelector("span").innerText=a.desc}}}}},{key:"ready",value:function(t){this.modalHtml.style.display="none",document.querySelector(".prism-setting-item.prism-setting-quality").classList.add("player-hidden")}}]),t}();e.a=l},803:function(t,e,i){"use strict";function n(t,e){var i=e.querySelector(".rate-list"),n=e.querySelector(".current-rate"),r=i.querySelector('[data-rate="'+t+'"]'),o=i.querySelector(".current");o&&(o.className=""),r&&(r.className="current"),i.style.display="none",n.innerText=t+"x"}function r(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]}var o=i(100),a=i.n(o),s=i(101),l=i.n(s),c=function(){function t(){a()(this,t),this.html=r('<div class="rate-components" style="display:none">\n      <div class="current-rate">1.0x</div>\n      <ul class="rate-list">\n        <li data-rate="2.0">2.0x</li>\n        <li data-rate="1.5">1.5x</li>\n        <li data-rate="1.25">1.25x</li>\n        <li data-rate="1.0" class="current">1.0x</li>\n        <li data-rate="0.5">0.5x</li>\n      </ul>\n    </div>')}return l()(t,[{key:"createEl",value:function(t){t.querySelector(".prism-controlbar").appendChild(this.html)}},{key:"ready",value:function(t,e){var i=this,r=this.html.querySelector(".current-rate"),o=this.html.querySelector(".rate-list"),a=null;r.onclick=function(){o.style.display="block"},r.onmouseleave=function(){a=setTimeout(function(){o.style.display="none"},100)},o.onmouseenter=function(){clearTimeout(a)},o.onmouseleave=function(){o.style.display="none"},o.onclick=function(e){var r=e.target,o=r.dataset.rate;o&&(t.setSpeed(o),t._options.componentChangeHandle("SpeedComponent",o),n(o,i.html))},n(t._options.speedComponent.speed||1,this.html),this.html.style.display="block"}}]),t}();e.a=c},804:function(t,e,i){"use strict";var n=/mobile/i.test(window.navigator.userAgent),r={secondToTime:function(t){var e=function(t){return t<10?"0"+t:""+t},i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),r=Math.floor(t-3600*i-60*n);return(i>0?[i,n,r]:[n,r]).map(e).join(":")},getElementViewLeft:function(t){var e=t.offsetLeft,i=t.offsetParent,n=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==i&&i!==t;)e+=i.offsetLeft,i=i.offsetParent;else for(;null!==i;)e+=i.offsetLeft,i=i.offsetParent;return e-n},getBoundingClientRectViewLeft:function(t){var e=document.documentElement.scrollTop;if(t.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewLeft.offset){var i=document.createElement("div");i.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(i),this.getBoundingClientRectViewLeft.offset=-i.getBoundingClientRect().top-e,document.body.removeChild(i),i=null}var n=t.getBoundingClientRect(),r=this.getBoundingClientRectViewLeft.offset;return n.left+r}return this.getElementViewLeft(t)},isMobile:n,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}},cumulativeOffset:function(t){var e=0,i=0;do{e+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent}while(t);return{top:e,left:i}},nameMap:{dragStart:n?"touchstart":"mousedown",dragMove:n?"touchmove":"mousemove",dragEnd:n?"touchend":"mouseup"}};e.a=r},806:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,'._1nR2QoBp_0{width:100%}._2bANKMWm_0,._3SED450Z_0{width:100%;position:relative;overflow:hidden}._2bANKMWm_0{background:#000}._2qNFVz21_0{position:absolute;padding-top:1rem;padding-left:1rem;padding-right:1rem;top:0;left:0;right:0;color:#fff;font-weight:400;font-size:.875rem;word-break:break-all;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:1;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.5)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.5),transparent);height:68px}._3SED450Z_0 .player-hidden,._3SED450Z_0 .prism-cc-btn,._3SED450Z_0 .prism-setting-btn,._3SED450Z_0 .prism-volume{display:none!important}._3SED450Z_0 .prism-progress-played{background-color:#fa8919!important}._3SED450Z_0 .prism-controlbar-bg{background:rgba(0,0,0,.5)!important}._3SED450Z_0 .prism-progress-cursor{background:#fa8919!important;height:9px!important;width:9px!important;margin-top:2px}._3SED450Z_0 .prism-progress-cursor img{display:none}._3SED450Z_0 .prism-loading{width:46px!important;height:46px!important}._3SED450Z_0 .circle{width:40px!important;height:40px!important;border:3px solid!important;border-color:rgba(250,137,25,.2) rgba(250,137,25,.5) rgba(250,137,25,.7) rgba(250,137,25,.1)!important;-webkit-animation:spinoffPulse .8s infinite linear!important;animation:spinoffPulse .8s infinite linear!important}._3SED450Z_0 .cursor-hover{display:block!important}._3SED450Z_0 .prism-progress{height:3px!important}._3SED450Z_0 .prism-big-play-btn{left:50%!important;top:50%!important;margin-top:-25px;margin-left:-25px;border-radius:25px;height:50px!important;width:50px!important;background:rgba(0,0,0,.3)!important}._3SED450Z_0 .prism-big-play-btn:after{font-family:iconfont;content:"\\E67B";font-size:20px;position:absolute;height:30px;width:30px;top:10px;left:12px;line-height:30px;text-align:center;color:#fff}._3SED450Z_0 .prism-animation,._3SED450Z_0 .prism-big-play-btn .outter{display:none!important}._3SED450Z_0 .rate-components{float:right;color:#fff;height:40px;position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;margin-top:4px;margin-right:8px}._3SED450Z_0 .current-rate{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:50px;cursor:pointer}._3SED450Z_0 .rate-list{position:absolute;bottom:46px;display:none;padding:0;margin:0;list-style:none}._3SED450Z_0 .rate-list li{text-align:center;width:70px;line-height:30px;background-color:rgba(0,0,0,.6);cursor:pointer}._3SED450Z_0 .rate-list li.current{color:#00c1de}._3SED450Z_0 .rate-list li+li{border-top:1px solid rgba(78,78,78,.3)}._3SED450Z_0 .rate-list li:hover{background-color:rgba(0,0,0,.5)}._3SED450Z_0 .quality-components{float:right;color:#fff;height:40px;position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;margin-top:4px;margin-right:3px}._3SED450Z_0 .current-quality{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:50px;cursor:pointer}._3SED450Z_0 .quality-list{position:absolute;bottom:46px;display:none;padding:0;margin:0;list-style:none}._3SED450Z_0 .quality-list li{text-align:center;width:70px;line-height:30px;background-color:rgba(0,0,0,.6);cursor:pointer}._3SED450Z_0 .quality-list li.current{color:#00c1de}._3SED450Z_0 .quality-list li+li{border-top:1px solid rgba(78,78,78,.3)}._3SED450Z_0 .quality-list li:hover{background-color:rgba(0,0,0,.5)}._3SED450Z_0 .quality-modal{position:absolute;bottom:20%;left:5%;background-color:rgba(0,0,0,.6);border-radius:5px;color:#fff;padding:10px 15px;font-size:14px;display:none}._3SED450Z_0 .quality-modal span{color:#00c1de}',""]),e.locals={wrap:"_1nR2QoBp_0",main:"_3SED450Z_0",videoPlaceholder:"_2bANKMWm_0",title:"_2qNFVz21_0"}},808:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".breadcrumb{padding:30px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap;background:#fff}.breadcrumb a.title{color:#e57c39;font-size:15px;font-weight:400}.breadcrumb span.title{color:#888;font-size:15px;font-weight:400}.breadcrumb .split{color:#ccc;font-size:10px;margin-right:5px}",""])},809:function(t,e,i){var n=i(806);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("b1c9e480",n,!0,{})},811:function(t,e,i){var n=i(808);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("225d00f2",n,!0,{})},814:function(t,e,i){function n(t){this.$style=i(809)}var r=i(22)(i(800),i(817),n,null,null);t.exports=r.exports},816:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isInApp?t._e():i("div",{staticClass:"breadcrumb"},t._l(t.list,function(e,n){return i("span",[e.link?i("router-link",{staticClass:"title",attrs:{to:e.link}},[t._v(t._s(e.title))]):i("span",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),n<t.list.length-1?i("span",{staticClass:"split iconfont"},[t._v("")]):t._e()],1)}),0)},staticRenderFns:[]}},817:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"player",class:t.$style.wrap},[t.source||t.encryptVideoId?i("div",{class:t.$style.main,style:t.videoStyle,attrs:{id:"aliyunPlayerCon"}}):i("div",{class:t.$style.videoPlaceholder,style:t.videoStyle})])},staticRenderFns:[]}},821:function(t,e,i){function n(t){i(860)}var r=i(22)(i(828),i(920),n,null,null);t.exports=r.exports},827:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(65),r=(i(218),i(697)),o=i(700),a=i(701),s=i(902),l=i.n(s),c=i(851),u=(i.n(c),i(669)),d=i.n(u),h=new d.a;e.default={props:{content:{type:String,default:""},canNote:{type:Boolean,default:!1},notes:{type:Array,default:function(){return[]}},noteid:{type:String,default:""}},created:function(){this.richContent=n.a.formatContent(this.content)},data:function(){return{preViewImg:!1,imgUrl:"",isInAndroidApp:n.a.isInAndroidApp(),posterImg:"",posterContent:"",richContent:"",markerInited:!1,hadScroll:!1}},updated:function(){var t=this;this.$nextTick(function(){t.initVideo()})},mounted:function(){var t=this;window.addEventListener("mathjaxfini",function(){clearTimeout(this.eTimer),this.eTimer=setTimeout(function(){console.log("mathjax fini"),t.highLightNotes()},300)}),n.a.isPC()?this.$el.addEventListener("mousedown",this.handleClick):(this.$el.addEventListener("touchstart",this.onTouchStart),this.$el.addEventListener("touchend",this.onTouchEnd)),this.$el.addEventListener("copy",this.copyHandler),this.initVideo(),this.initMarker()},beforeDestroy:function(){this.$el.removeEventListener("copy",this.copyHandler),this.$el.removeEventListener("touchstart",this.onTouchStart),this.$el.removeEventListener("touchend",this.onTouchEnd),this.$el.removeEventListener("mousedown",this.handleClick)},methods:{initPrecodecopy:function(){document.querySelectorAll("pre").forEach(function(t){t.style.position="relative";var e=t.querySelector("code");if(e){var i=e.textContent,r=document.createElement("div");r.innerHTML='<span class="iconfont">&#xe613;</span>复制代码',r.classList.add("richcontent-pre-copy"),t.appendChild(r),r.addEventListener("click",function(t){var e=document.createElement("textarea");e.setAttribute("readonly","readonly"),e.style.position="absolute";var r=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);e.style.top=r+256+"px",e.style.opacity="0",document.body.appendChild(e),e.textContent=i,e.focus(),e.setSelectionRange(0,e.textContent.length),document.execCommand("copy")?n.a.success("复制成功"):n.a.error("复制失败"),document.body.removeChild(e)})}})},copyHandler:function(t){var e=window.getSelection(),i="<p>极客时间版权所有: "+document.location.href+"</p>",r=n.a.getSelectionText();if(r){var o=r.substr(0,30),a="<p>"+o+(o===r?"":"...")+"</p>"+i,s=document.createElement("div");s.style.position="absolute",s.style.left="-99999px",document.body.appendChild(s),s.innerHTML=a,e.selectAllChildren(s),window.setTimeout(function(){document.body.removeChild(s)},200)}},initMarker:function(){var t=this;this.canNote&&!this.markerInited&&(this.markerInited=!0,this.container=document.getElementById("article-content"),this.textContainer=this.container.querySelector(".text"),this.$nextTick(function(){var e=t;t.em=new o.a({menuTopOffset:"2rem",disableTapHighlight:!0,menuItems:[{text:"划线笔记",handler:function(t){var r=i.i(a.a)(e.textContainer,t.anchorNode,t.anchorOffset),o=t.toString(),s=r.split(o).length-1;if(e.notes.findIndex(function(t){return t.part===o&&t.part_index===s})>-1)return void n.a.error("该笔记已存在");e.$emit("note",o,s)}},{text:"分享",handler:function(t){var i=t.toString();i.length>4e3&&(i=i.slice(0,3997)+"..."),e.$emit("share",i)}},{text:"拷贝",noborder:!0,handler:function(t){n.a.notifyApp({type:"copy",data:t.toString()})}}],menuStyle:{menu:{fontSize:"14px",borderRadius:"4px",padding:"8px 0",backgroundColor:"#262626"},item:{padding:"4px 16px",borderRight:"1px solid #636363"},triangle:{borderTop:"10px solid #262626",borderRight:"12px solid transparent",borderLeft:"12px solid transparent"}}}),t.em.create(t.container,document.body,document.querySelectorAll("#article-content>:not(.text)")),t.em.onHighlightLineClick(function(e,i,n){t.jumpNoteDetail(e)}),t.notes.length&&(clearTimeout(t.eTimer),t.eTimer=setTimeout(function(){t.highLightNotes()},300))}))},highLightNotes:function(){var t=this;if(this.em&&this.canNote&&this.markerInited){var e=[];if(this.notes.length>0)for(var n=i.i(a.b)(this.container),r=this.container.innerText,o=0;o<this.notes.length;o++){var s=i.i(a.c)(r,n,this.notes[o].part,this.notes[o].part_index);s.start&&s.end&&s.start.node&&s.end.node&&(this.hadScroll||this.noteid!==String(this.notes[o].id)||function(){var e=document.createRange();e.setStart(s.start.node,s.start.offset),setTimeout(function(){window.scrollTo(0,Math.max(0,window.scrollY+e.getClientRects()[0].top-250))},300),t.hadScroll=!0}(),e.push({selection:{anchorNode:s.start.node,anchorOffset:s.start.offset,focusNode:s.end.node,focusOffset:s.end.offset},id:this.notes[o].id}))}this.em.highlightLines(e)}},jumpNoteDetail:function(t){n.a.isInApp()&&n.a.canNotifyApp()&&n.a.notifyApp({type:"jump",path:"views/dashboard/note/notedetail.js",data:{id:t}})},handleClick:function(t){var e=new RegExp(/^time:\/\//);if("a"!==t.target.nodeName.toLowerCase()&&"a"!==t.target.parentNode.nodeName.toLowerCase()||!n.a.isInApp())if("a"!==t.target.nodeName.toLowerCase()&&"a"!==t.target.parentNode.nodeName.toLowerCase()||!(t.target.href||t.target.parentNode.href).match(e))if("a"!==t.target.nodeName.toLowerCase()&&"a"!==t.target.parentNode.nodeName.toLowerCase()||!n.a.isPC())if("img"!==t.target.nodeName.toLowerCase()||!t.target.src||!n.a.gteqAndroidVersion("1.0.8")&&!n.a.gteqIOSVersion("1.1.6")||n.a.eqAndroidVersion("1.2.0")||n.a.eqAndroidVersion("1.2.1")){if("img"===t.target.nodeName.toLowerCase()&&t.target.src){if("A"===t.target.parentNode.nodeName)return void(window.location.href=t.target.parentNode.href);if("unpreview"===t.target.alt)return;var i=t.target.src;this.viewer||(this.viewer=new l.a),this.viewer.show(i)}}else{if("unpreview"===t.target.alt)return;n.a.previewImgInApp([t.target.src],0)}else t.preventDefault(),window.open(t.target.href||t.target.parentNode.href);else t.preventDefault(),n.a.parseTimeLink(t.target.href||t.target.parentNode.href);else{var r=t.target.href||t.target.parentNode.href,o=r.match(/^https?:\/\/time\.geekbang\.org\/course\/(intro|detail)\/.+/),a=r.match(/^https?:\/\/time\.geekbang\.org\/column\/intro\/.+/),s=r.match(/^https?:\/\/time\.geekbang\.org\/column\/.+/),c=r.match(e);if(o){var u=o[1],d={};if(d.id=r.match(/\/(intro|detail)\/(\w+)/i)[2],r.match(/\/detail\/\w+\-(\w+)/i)&&(d.aid=r.match(/\/detail\/\w+\-(\w+)/i)[1]),"detail"===u||"intro"===u)return t.preventDefault(),void("intro"===u?n.a.jumpCourseIntro(d.id):n.a.jumpCourseDetail(d.id,d.aid))}else if(a){t.preventDefault();var h=r.match(/^https*:\/\/time\.geekbang\.org\/column\/intro\/([\w]+)/i)[1];if(h)return void n.a.jumpColumnIntro(h)}else if(c)return t.preventDefault(),void n.a.parseTimeLink(r);if(r.match(/^https*:\/\/time\.geekbang\.org\/(column\/)*article\/([\d]+)/i)){t.preventDefault();var f=r.match(/^https*:\/\/time\.geekbang\.org\/(column\/)*article\/([\d]+)/i)[2];if(f)return void n.a.jumpArticle(f)}if(s){t.preventDefault();var p=r.match(/^https*:\/\/time\.geekbang\.org\/column\/([\d]+)/i)[1];if(p)return void n.a.jumpColumnDetail(p)}if(t.preventDefault(),dsBridge.hasNativeMethod("common.routeJump")){var m="time://webview?url="+encodeURIComponent(r)+"&title="+encodeURIComponent(t.target.title||t.target.parentNode.title)+"&isShowClose=true";dsBridge.call("common.routeJump",m,function(){return console.log("调起成功")})}else n.a.notifyApp({type:"jump",path:"views/webview.js",data:{url:r,title:t.target.title||t.target.parentNode.title,isShowClose:!0}})}},handleMathJax:function(t){t.indexOf("$")>-1&&n.a.handleMathJax(this.$el)},getTouchPosition:function(t){return{x:t.clientX||t.changedTouches[0].clientX,y:t.clientY||t.changedTouches[0].clientY}},getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},onTouchStart:function(t){this.touchStartPosition=this.getTouchPosition(t),this.touchStartTime=Date.now()},onTouchEnd:function(t){if(Date.now()-this.touchStartTime<500){var e=this.getTouchPosition(t);this.getDistance(e,this.touchStartPosition)<20&&this.handleClick(t)}},preventAllAnodeJump:function(){n.a.isInApp()&&this.$el.querySelectorAll("a").forEach(function(t){t.onclick=function(t){t.preventDefault()}})},initVideo:function(){var t=this.$refs.richText.querySelectorAll("video");t.length>0&&Array.prototype.slice.call(t).forEach(function(t){if(!t.attributes["x5-playsinline"]){var e=t.attributes.poster;e=e?e.value:"";var i=t.parentElement,r=document.createElement("div"),o=t.lastChild.attributes.src.value;r.innerHTML='<video style="vertical-align: top;" webkit-playsinline playsinline x5-playsinline x5-video-player-type="h5" x5-video-player-fullscreen="true" src="'+o+'" controls="controls" poster="'+e+'"></video>',i.insertBefore(r,t),i.removeChild(t);var a=i.querySelector("video");h.loadSource(o),h.attachMedia(a),n.a.isInAndroidApp()&&a.addEventListener("click",function(){setTimeout(function(){a.paused?a.play():a.pause()},200)})}})}},watch:{content:function(t,e){this.richContent=n.a.formatContent(t),this.markerInited&&"none"!==this.em.$selectStatus&&this.em.reset()},richContent:function(t,e){var i=this;n.a.isInApp()||this.$nextTick(function(){i.initPrecodecopy()});var o=this.$el.querySelectorAll("pre code");Array.prototype.forEach.call(o,function(t){r.a.lineNumbersBlock(t,{singleLine:!0})}),this.handleMathJax(this.richContent),this.preventAllAnodeJump()},notes:function(t){var e=this;clearTimeout(this.eTimer),this.eTimer=setTimeout(function(){e.highLightNotes()},300)},canNote:function(t){t&&this.initMarker()}}}},828:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(99),r=i.n(n),o=i(65),a=i(814),s=i.n(a),l=i(911),c=i.n(l),u=i(219),d=-1,h="";e.default={props:{videoList:{type:Array,default:[]},index:{type:Number,default:0},quality:{type:Number|String,default:1},hadJoinGroupon:{type:Boolean,default:!1}},data:function(){return{paused:!0,isIgnoreWifiTips:window.localStorage.getItem("ignoreWifiTips"),isWifi:!0,isBuyShow:!1,isAutoSwitch:!0,isShowCounter:!0,isVideoError:!1,progressTimer:null,isFinished:!1,currentIndex:0,currentVideo:{},currentDuration:0,speed:1,timer:null,countTimer:null,showTitle:!0,playing:!1,counterPercent:0,volume:50,videoConfig:null,videoHeight:0}},components:{RoundProgress:c.a,AliyunPlayer:s.a},created:function(){var t=this;this.currentIndex=this.index,this.currentVideo=this.videoList.length>0?this.videoList[this.index]:{};var e=window.localStorage.getItem("VdPlayerRate");this.speed=/\d\.\d{1,2}/.test(e)?e:"1.0",o.a.isInWeixin()&&window.wx&&window.wx.ready(function(){window.wx.getNetworkType({success:function(e){t.isWifi="wifi"===e.networkType}})}),this.isShowCounter=!1,this.isAutoSwitch=!1},mounted:function(){this.bindEvent(),this.videoHeight=this.$refs.player.offsetWidth*(9/16),this.videoList.length>0?(this.reInitMedia(),this.preparePlayer(this.currentIndex)):this.initPlayer()},computed:r()({isInAndroidApp:function(){return o.a.isInAndroidApp()}},i.i(u.a)({loginUser:"loginUser"}),{videoStyle:function(){return{height:this.videoHeight+"px"}}}),watch:{index:function(t,e){this.currentIndex=t},videoList:{handler:function(t,e){this.videoList.length>0&&this.preparePlayer(this.currentIndex)},deep:!0},currentIndex:function(t,e){var i=this;this.videoList.length&&(this.videoConfig=null,this.$nextTick(function(){i.preparePlayer(t)})),this.$emit("videoSwitch",{index:t})}},methods:{preparePlayer:function(t){if(t!==d)d=t,h=this.videoList?this.videoList[t].media:"";else{var e=this.videoList?this.videoList[t].media:"";if(h===e)return}if(this.currentVideo=this.videoList&&this.videoList[t]||{},this.currentDuration=this.currentVideo.played||0,this.duration=this.currentVideo.totalSecond||0,this.isBuyShow=!1,this.isVideoError=!1,this.paused=!0,this.videoList[this.currentIndex].media){if("FORBIDDEN"===this.videoList[this.currentIndex].media)return void(this.isBuyShow=!0);if("VIDEOERROR"===this.videoList[this.currentIndex].media)return void(this.isVideoError=!0);this.initPlayer()}},initPlayer:function(){var t=this.videoList[this.currentIndex];if(t){var e="sd";"string"==typeof this.quality&&/^[hsl]d$/i.test(this.quality)&&(e=this.quality.toLowerCase());var i={},n=void 0,r=void 0;t.media.hd&&(i.HD=t.media.hd.url,n="hd"),t.media.sd&&(i.SD=t.media.sd.url,n="sd"),t.media.ld&&(i.LD=t.media.ld.url,n="ld"),t.media[e]&&(r=t.media[e].url),!r&&n&&(r=t.media[n].url,e=n),(r||t.encryptVideoId)&&(this.videoConfig={quality:e.toUpperCase(),source:r,cover:t.cover,encryptInfo:{encryptVideoId:t.encryptVideoId,sku:t.sku,aid:t.aid,sourceType:t.sourceType},speed:this.speed,urls:i,currentDuration:this.currentDuration})}},bindEvent:function(){document.addEventListener("notify",this.notifyHandler)},count:function(t){var e=this;t>0?(this.counterPercent=(3-t)/3*100,this.countTimer=setTimeout(function(){e.count(t-1)},1e3)):(this.counterPercent=0,this.next())},replay:function(){this.currentDuration=0,this.isBuyShow=!1,this.$refs.aliyunPlayer.replay(),clearTimeout(this.timer),clearTimeout(this.countTimer)},notifyHandler:function(t){try{var e=t.detail.data;switch(t.detail.type){case"network":this.isWifi="wifi"===e.type;break;case"media:isPlaying":e.data.isPlaying?this.player.pause():this.player.play()}}catch(t){console.log(t)}},next:function(){this.currentIndex<this.videoList.length-1&&(this.currentIndex+=1)},ignoreWifiTips:function(){window.localStorage.setItem("ignoreWifiTips",!0),this.isIgnoreWifiTips=!0,this.$emit("continueplay")},continuePlay:function(){this.isIgnoreWifiTips=!0,this.$emit("continueplay")},cancel:function(){clearTimeout(this.timer),clearTimeout(this.countTimer),this.isShowCounter=!1},reInitMedia:function(){d=-1,h=""},login:function(){o.a.login()},joinStudy:function(){this.$emit("joinStudy")},jumpToGroupon:function(){this.$emit("jumpToGroupon")},pauseHandle:function(){this.playing=!1},playingHandle:function(){this.playing=!0},endedHandle:function(){var t=this;this.isFinished=!0,this.currentIndex<this.videoList.length-1&&this.isAutoSwitch&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.count(3),t.timer=null},1e3),this.$emit("ended",{id:this.currentVideo.id,second:this.currentDuration}))},timeupdateHandle:function(t){this.isFinished=!1,this.currentDuration=Math.floor(t),this.$emit("timeUpdate",{id:this.currentVideo.id,second:this.currentDuration})},changeSpeedHandle:function(t){this.speed=t,window.localStorage.setItem("VdPlayerRate",t)},changeQualityHandle:function(t){this.$emit("switchQuality",t)}}}},832:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=2*Math.PI/100;e.default={props:["width","height","strokeWidth","percent","foreColor","bgColor"],mounted:function(){this.speed=0,this.$canvas=this.$refs.canvas,this.context=this.$canvas.getContext("2d"),this.drawPercent=this.percent,this.drawFrame()},computed:{centerX:function(){return this.width},centerY:function(){return this.height},radius:function(){return this.width-this.strokeWidth},canvasStyle:function(){return{width:this.width+"px",height:this.height+"px"}}},watch:{percent:function(t,e){this.drawPercent=t}},methods:{drawBackground:function(){this.context.save(),this.context.beginPath(),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.strokeStyle=this.bgColor,this.context.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1),this.context.stroke(),this.context.closePath(),this.context.restore()},drawForeground:function(t){this.context.save(),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.beginPath(),this.context.strokeStyle=this.foreColor,this.context.arc(this.centerX,this.centerY,this.radius,-Math.PI/2,-Math.PI/2+t*n,!1),this.context.stroke(),this.context.closePath(),this.context.restore()},drawFrame:function(){window.requestAnimationFrame(this.drawFrame),this.context.clearRect(0,0,this.width,this.height),this.drawBackground(),this.drawForeground(this.speed),this.speed>=this.drawPercent||(this.speed+=1)}}}},833:function(t,e,i){"use strict";var n=i(100),r=i.n(n),o=i(101),a=i.n(o),s=function(){function t(e){r()(this,t),this.player=e}return a()(t,[{key:"set",value:function(t,e){e=Math.max(e,0),e=Math.min(e,1),this.player[t]=e,this.player[t+"Percentage"]=100*e+"%"}}]),t}();e.a=s},834:function(t,e,i){"use strict";var n=i(100),r=i.n(n),o=i(101),a=i.n(o),s=function(){function t(){r()(this,t),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","loading","eventTriggered","autoPlayError"]}return a()(t,[{key:"on",value:function(t,e){this.type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"trigger",value:function(t,e){if(this.events[t]&&this.events[t].length)for(var i=0;i<this.events[t].length;i++)this.events[t][i](e);if(this.events.eventTriggered&&this.events.eventTriggered.length)for(var n=0;n<this.events.eventTriggered.length;n++)this.events.eventTriggered[n](e)}},{key:"type",value:function(t){return-1!==this.playerEvents.indexOf(t)?"player":-1!==this.videoEvents.indexOf(t)?"video":(console.error("Unknown event name: "+t),null)}}]),t}();e.a=s},842:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,'#iv-container{position:fixed;background:#0d0d0d;width:100%;height:100%;top:0;left:0;display:none;z-index:1000}.iv-container{overflow:hidden}.iv-close{width:26px;height:26px;position:absolute;right:20px;top:20px;cursor:pointer;text-align:center;overflow:hidden;text-shadow:0 0 3px #6d6d6d;-webkit-transition:all .2s ease;-moz-transition:all ease .2s;-o-transition:all ease .2s;transition:all .2s ease}.iv-close:after,.iv-close:before{content:"";height:2px;width:26px;background:#fff;position:absolute;left:0;top:50%;margin-top:-2px;border-radius:2px}.iv-close:before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.iv-close:after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.iv-close:hover{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.iv-image-view{position:absolute;height:100%;width:100%}.iv-image-wrap{display:inline-block}.iv-image-wrap:active{cursor:move}.iv-large-image{cursor:move;max-width:100%;max-height:100%;background-color:#ececec;-moz-transform:translateZ(0);-o-transform:translateZ(0)}.iv-large-image,.iv-loader{position:absolute;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.iv-loader{top:50%;left:50%;border-radius:50%;width:32px;height:32px;z-index:100;margin-top:-16px;margin-left:-16px;font-size:5px;text-indent:-9999em;border-top:1em solid hsla(0,0%,100%,.2);border-right:1em solid hsla(0,0%,100%,.2);border-bottom:1em solid hsla(0,0%,100%,.2);border-left:1em solid #fff;-webkit-animation:load8 1.1s infinite linear;animation:load8 1.1s infinite linear}.iv-loader:after{width:10em;height:10em;border-radius:50%}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',""])},845:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".round-progress{display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative}",""])},848:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,'@font-face{font-family:player-font;src:url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.eot");src:url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.eot?#iefix") format("embedded-opentype"),url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.woff") format("woff"),url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.ttf") format("truetype"),url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.svg#player-font") format("svg")}.player-font{font-family:player-font!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}.vplayer{position:relative;overflow:hidden}.vplayer,.vplayer video{width:100%}.vplayer .title{position:absolute;padding-top:1rem;padding-left:1rem;padding-right:1rem;top:0;left:0;right:0;color:#fff;font-weight:400;font-size:.875rem;word-break:break-all;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:1;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.5)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.5),transparent);height:68px}.vplayer .finish-control,.vplayer .loading{position:absolute;top:0;left:0;background:rgba(0,0,0,.5);color:#fff;width:100%;height:100%;z-index:2;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.vplayer .finish-control h3,.vplayer .loading h3{position:absolute;color:#fff;top:1rem;left:50%;font-size:1rem;font-weight:400;-webkit-transform:translate(-50%);transform:translate(-50%)}.vplayer .finish-control p,.vplayer .loading p{cursor:pointer;max-height:6rem;text-align:center}.vplayer .finish-control .cancel-next,.vplayer .loading .cancel-next{margin-left:4rem}.vplayer .finish-control .cancel-next .icon-cancel-next,.vplayer .loading .cancel-next .icon-cancel-next{height:4rem;line-height:4rem;cursor:pointer;font-size:3.5rem}.vplayer .finish-control .cancel-next .icon-cancel-next i,.vplayer .loading .cancel-next .icon-cancel-next i{position:absolute;top:0;left:0;margin-left:8px}.vplayer .finish-control .icon-replay,.vplayer .loading .icon-replay{height:4rem;cursor:pointer;line-height:4rem;font-size:3rem}.vplayer .finish-control{background:#000}.vplayer .no-wifi{width:70%;position:absolute;left:50%;top:50%;padding:1rem;background:rgba(0,0,0,.8);-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:3}.vplayer .no-wifi p{line-height:1.5rem;margin:0 auto;width:60%;color:#fff;font-size:1rem;text-align:center}.vplayer .no-wifi p span{font-size:.875rem}.vplayer .no-wifi div{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-top:1rem}.vplayer .no-wifi div a{color:#fff;background:#fa8919;padding:.3rem .5rem}.vplayer .no-wifi div a:last-child{margin-left:1rem}.vplayer .buy{position:absolute;z-index:1001;top:0;left:0;width:100%;height:100%;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#000}.vplayer .buy p{text-align:center}.vplayer .buy p span{color:#fa8919}.vplayer .buy .btn{margin-top:1rem;color:#fff;background:#fa8919;padding:.3rem 1.5rem}.android .dplayer .dplayer-controller .dplayer-icons .dplayer-full,.dplayer-setting-item.dplayer-setting-loop,.dplayer .dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{display:none}.video-placeholder{width:100%;position:relative;overflow:hidden;background:#000}',""])},849:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".MathJax_Display{overflow:auto}.poster{position:fixed;left:-10000px;top:-10000px;overflow:hidden;padding:1rem;background:#ececec}.richcontent a:link,.richcontent a:visited{color:#fa8919;border-bottom-color:#fa8919}.richcontent-pre-copy{font-size:13px;color:#888;position:absolute;right:1em;top:.2em;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.richcontent-pre-copy .iconfont{font-size:12px;margin-right:.2em}",""])},851:function(t,e,i){var n=i(842);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("9fee29d8",n,!0,{})},857:function(t,e,i){var n=i(845);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("009d6b61",n,!0,{})},860:function(t,e,i){var n=i(848);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("3683212c",n,!0,{})},861:function(t,e,i){var n=i(849);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("657dc810",n,!0,{})},902:function(t,e,i){!function(e,i){t.exports=i()}(0,function(){"use strict";function t(){var t=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(t){}return t}function e(t,e){this.container=t;var i=function(){};this.onStart=e.onStart||i,this.onMove=e.onMove||i,this.onEnd=e.onEnd||i,this.onMouseWheel=e.onMouseWheel||i,this.onClick=e.onClick||i,this.onPinch=e.onPinch||i}function i(t,e){this.container=t,this.options=Object.assign({},i.defaults,e),this.zoomValue=100,t.classList.add("iv-container"),this.imageWrap=t.querySelector(".iv-image-wrap"),this.closeBtn=t.querySelector(".iv-close")}e.prototype.init=function(){var e=this;return this.startHandle=function(i){function n(t){t.preventDefault();var i=t.clientX||t.touches[0].clientX,n=t.clientY||t.touches[0].clientY;e.onMove(t,{dx:i-s,dy:n-l,mx:i,my:n})}i.preventDefault();var r=i.type,o="touchstart"===r?"touchmove":"mousemove",a="touchstart"===r?"touchend":"mouseup",s=i.clientX||i.touches[0].clientX,l=i.clientY||i.touches[0].clientY;!1!==e.onStart(i,{x:s,y:l})&&("touchstart"===r&&i.touches[1]&&e.onPinch(i),document.addEventListener(o,n,!("touchmove"!==o||!t())&&{capture:!1,passive:!1}),document.addEventListener(a,function t(){document.removeEventListener(o,n),document.removeEventListener(a,t),e.onEnd()}))},this.container.addEventListener("touchstart",this.startHandle,!1),this.container.addEventListener("mousedown",this.startHandle,!1),this.container.addEventListener("mousewheel",this.onMouseWheel,!1),this.container.addEventListener("click",this.onClick,!1),this},e.prototype.destroy=function(){this.container.removeEventListener("touchstart",this.startHandle),this.container.removeEventListener("mousedown",this.startHandle),this.container.removeEventListener("mousewheel",this.onMouseWheel),this.container.removeEventListener("click",this.onClick)};var n=function(t){return t.preventDefault()};return function(){var t=0;if(!window.requestAnimationFrame){for(var e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+n)},n);return t=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}}(),i.prototype={constructor:i,_init:function(){var i,r=this,o=r.options,a=!1,s=r.container,l=r.imageWrap,c=0,u=0;r._imageSlider=new e(l,{onStart:function(){if(!r.loaded)return!1;a||(this.imgWidth=r.imageDim.w*r.zoomValue/100,this.imgHeight=r.imageDim.h*r.zoomValue/100,this.curImgLeft=parseFloat(r.currentImg.style.left),this.curImgTop=parseFloat(r.currentImg.style.top))},onMove:function(t,e){if(!a){this.currentPos=e;var i=this.curImgLeft+e.dx,n=this.curImgTop+e.dy,o=Math.max((r.containerDim.w-this.imgWidth)/2,0),s=Math.max((r.containerDim.h-this.imgHeight)/2,0),l=r.containerDim.w-o,c=r.containerDim.h-s;i=Math.min(i,o),n=Math.min(n,s),i+this.imgWidth<l&&(i=l-this.imgWidth),n+this.imgHeight<c&&(n=c-this.imgHeight),r.currentImg.style.left=i+"px",r.currentImg.style.top=n+"px"}},onEnd:function(){},onMouseWheel:function(t){if(o.zoomOnMouseWheel&&r.loaded){var e=Math.max(-1,Math.min(1,t.wheelDelta)),i=r.zoomValue*(100+15*e)/100;if(100<=i&&i<=o.maxZoom?c=0:c+=Math.abs(e),!(5<c)){t.preventDefault();var n=t.pageX,a=t.pageY;r.zoom(i,{x:n,y:a})}}},onClick:function(t){0==u?(u=Date.now(),i={x:t.pageX,y:t.pageY}):(Date.now()-u<500&&Math.abs(t.pageX-i.x)<50&&Math.abs(t.pageY-i.y)<50&&(r.zoomValue==o.zoomValue?r.zoom(200):r.resetZoom()),u=0)},onPinch:function(e){if(r.loaded){var i=e.touches[0],n=e.touches[1];if(i&&n){a=!0;var o=Math.sqrt(Math.pow(n.pageX-i.pageX,2)+Math.pow(n.pageY-i.pageY,2)),s=r.zoomValue,l={x:(n.pageX+i.pageX)/2,y:(n.pageY+i.pageY)/2},c=function(t){t.preventDefault();var e=t.touches[0],i=t.touches[1],n=Math.sqrt(Math.pow(i.pageX-e.pageX,2)+Math.pow(i.pageY-e.pageY,2)),a=s+(n-o)/2;r.zoom(a,l)};document.addEventListener("touchmove",c,!!t()&&{capture:!1,passive:!1}),document.addEventListener("touchend",function t(){document.removeEventListener("touchmove",c),document.removeEventListener("touchend",t),a=!1})}}}}).init(),o.refreshOnResize&&(this._resizeHandler=this.refresh.bind(this),window.addEventListener("resize",this._resizeHandler)),s.addEventListener("touchmove",n,!!t()&&{capture:!1,passive:!1}),s.addEventListener("mousewheel",n),this._close=this.hide.bind(this),this.closeBtn.addEventListener("click",this._close)},zoom:function(t,e){var i=this,n=this.options.maxZoom,r=this.zoomValue,o=this.currentImg,a=this.containerDim,s=this.imageDim,l=parseFloat(o.style.left),c=parseFloat(o.style.top);t=Math.round(Math.max(100,t)),t=Math.min(n,t),e=e||{x:a.w/2,y:a.h/2},i._clearFrames();var u=0;!function n(){++u<20&&(i._zoomFrame=requestAnimationFrame(n));var d,h,f=(d=u,d/=20,-(t-(h=r))*(--d*d*d*d-1)+h),p=f/r,m=s.w*f/100,g=s.h*f/100,v=-((e.x-l)*p-e.x),y=-((e.y-c)*p-e.y),b=Math.max((a.w-m)/2,0),_=Math.max((a.h-g)/2,0),x=a.w-b,w=a.h-_;(v=Math.min(v,b))+m<x&&(v=x-m),(y=Math.min(y,_))+g<w&&(y=w-g),o.style.width=m+"px",o.style.height=g+"px",o.style.left=v+"px",o.style.top=y+"px",i.zoomValue=f}()},_clearFrames:function(){cancelAnimationFrame(this._zoomFrame)},resetZoom:function(){this.zoom(this.options.zoomValue)},_calculateDimensions:function(){var t,e,i=this.currentImg,n=this.container,r=i.getBoundingClientRect().width,o=i.getBoundingClientRect().height,a=n.getBoundingClientRect().width,s=n.getBoundingClientRect().height;this.containerDim={w:a,h:s};var l=r/o;e=(t=o<r&&a<=s||a<l*s?a:l*s)/l,this.imageDim={w:t,h:e},i.style.width=t+"px",i.style.height=e+"px",i.style.left=(a-t)/2+"px",i.style.top=(s-e)/2+"px",i.style.maxWidth="none",i.style.maxHeight="none"},refresh:function(){this.loaded&&(this._calculateDimensions(),this.resetZoom())},show:function(t){this.container.style.display="block",t&&this.load(t)},hide:function(){this.container.style.display="none"},destroy:function(){window.removeEventListener("resize",this._resizeHandler),this._imageSlider.destroy(),this.closeBtn.removeEventListener("click",this._close),this.container.parentNode.removeChild(this.container),this.closeBtn=null,this.container=null,this.imageWrap=null,this.options=null,this._close=null,this._imageSlider=null,this._resizeHandler=null},load:function(t){function e(){i.loaded=!0,i.zoomValue=100,s.style.display="block",i.refresh(),n.querySelector(".iv-loader").style.display="none"}var i=this,n=this.container,r=this.imageWrap,o=r.querySelector(".iv-large-image");o&&r.removeChild(o);var a,s=document.createElement("img");s.classList.add("iv-large-image"),s.src=t,this.currentImg=s,this.imageWrap.appendChild(s),this.loaded=!1,n.querySelector(".iv-loader").style.display="block",s.style.display="none",!(a=s).compvare||void 0!==a.naturalWidth&&0===a.naturalWidth?s.onload=function(){e()}:e()}},i.defaults={zoomValue:100,maxZoom:500,refreshOnResize:!0,zoomOnMouseWheel:!0},function(t){var e=document.createElement("div");e.id="iv-container",e.innerHTML='<div class="iv-loader"></div><div class="iv-image-view"><div class="iv-image-wrap"></div><div class="iv-close"></div></div>',document.body.appendChild(e);var n=new i(e,t);return n._init(),n}})},911:function(t,e,i){function n(t){i(857)}var r=i(22)(i(832),i(917),n,null,null);t.exports=r.exports},917:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"round-progress"},[i("canvas",{ref:"canvas",staticClass:"progress-canvas",style:t.canvasStyle,attrs:{width:2*t.width,height:2*t.height}}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},920:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"player",staticClass:"vplayer",on:{mouseenter:function(e){t.showTitle=!0},mouseleave:function(e){t.showTitle=!1}}},[t.videoConfig?i("AliyunPlayer",{ref:"aliyunPlayer",attrs:{config:t.videoConfig},on:{pause:t.pauseHandle,playing:t.playingHandle,ended:t.endedHandle,timeupdate:t.timeupdateHandle,changespeed:t.changeSpeedHandle,changequality:t.changeQualityHandle}}):i("div",{staticClass:"video-placeholder",style:t.videoStyle}),t._v(" "),t.isFinished?i("div",{staticClass:"finish-control"},[t.currentIndex==t.videoList.length-1&&t.videoList.length>1?i("h3",[t._v("当前已是最后一课")]):t._e(),t._v(" "),t.currentIndex<t.videoList.length-1&&t.videoList.length>1?i("h2",{staticClass:"title"},[t._v("即将播放："+t._s(t.videoList[this.currentIndex+1].title))]):t._e(),t._v(" "),i("div",{staticClass:"replay",on:{click:t.replay}},[t._m(0),t._v(" "),i("p",[t._v("重新播放")])]),t._v(" "),t.currentIndex<t.videoList.length-1&&t.isShowCounter?i("div",{staticClass:"cancel-next",on:{click:t.cancel}},[i("p",[i("round-progress",{staticClass:"icon-cancel-next",attrs:{width:46,height:46,"stroke-width":4,percent:t.counterPercent,"fore-color":"#ff5a05","bg-color":"#fff"},on:{"update:percent":function(e){t.counterPercent=e}}},[i("i",{staticClass:"player-font"},[t._v("")])])],1),t._v(" "),i("p",[t._v("取消")])]):t._e()]):t._e(),t._v(" "),t.isWifi||t.isIgnoreWifiTips?t._e():i("div",{staticClass:"no-wifi"},[t._m(1),t._v(" "),i("div",[i("a",{attrs:{href:"javascript:;"},on:{click:t.continuePlay}},[t._v("继续播放")]),t._v(" "),i("a",{attrs:{href:"javascript:;"},on:{click:t.ignoreWifiTips}},[t._v("不再提示")])])]),t._v(" "),t.isBuyShow?i("div",{staticClass:"buy"},[i("p",[t._v(" 当前视频不支持试看，请购买后再看")]),t._v(" "),t.loginUser?t._e():i("p",[t._v("若已购买，请 "),i("span",{staticStyle:{cursor:"pointer"},on:{click:t.login}},[t._v("登录")])]),t._v(" "),t.hadJoinGroupon?i("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:t.jumpToGroupon}},[t._v("查看拼团进度")]):i("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:t.joinStudy}},[t._v("加入学习")])]):t._e(),t._v(" "),t.isVideoError?i("div",{staticClass:"buy"},[i("p",[t._v("视频资源获取失败")])]):t._e(),t._v(" "),!t.currentVideo.title||t.playing&&!t.showTitle?t._e():i("h2",{staticClass:"title"},[t._v("\n    当前播放: "+t._s(t.currentVideo.title)+"\n  ")])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("i",{staticClass:"icon-replay player-font"},[t._v("")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("\n      当前为非 Wi-Fi 环境，继续播放会被运营商收取流量费用"),i("br")])}]}},923:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"richcontent",attrs:{id:"article-content"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.content,expression:"content"}],ref:"richText",staticClass:"text",domProps:{innerHTML:t._s(t.richContent)}})])},staticRenderFns:[]}},952:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{shareIcon:{type:String,default:"&#xe63c;"}},methods:{back:function(){this.$emit("back")},share:function(){this.$emit("share")}}}},954:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(621),r=i(834),o=i(804),a=i(833);e.default={props:["options"],data:function(){return{preload:"auto",poster:"",id:"aliyunPlayerCon"+(new Date).getTime(),events:new r.a,ready:!1,bar:null}},mounted:function(){var t=this;this.options&&(this.poster=this.options.poster,this.initEncryptVideo(function(e){t.$emit("inited",e)}))},methods:{initEncryptVideo:function(t){var e=this,i=this.id,r={sourceType:this.options.sourceType,aid:this.options.aid,encryptVideoId:this.options.encryptId};n.a.getEncryptVideoPlayAuth(r).then(function(n){document.getElementById(i)&&new window.Aliplayer({id:i,vid:e.options.encryptId,playauth:n.play_auth,encryptType:1,width:"100%",height:"100%",skinLayout:!1},function(i){window.aliyunPlayerList=window.aliyunPlayerList||[],window.aliyunPlayerList.forEach(function(t){t.dispose&&t.dispose()}),window.aliyunPlayerList.push(i),e.exportPlayer(i),e.eventBind(i),e.player.switchQuality(e.options.quality),t(e.player)})})},eventBind:function(t){var e=this;t.on("timeupdate",function(){var i=t.getCurrentTime(),n=t.getDuration()||0;e.player.current=i,e.player.currentTime=o.a.secondToTime(i),e.player.duration=n,e.player.durationTime=o.a.secondToTime(n),e.bar.set("played",i/n),e.events.trigger("timeupdate",t)}),t.on("progress",function(){var i=e.$refs.video,n=i.buffered.length?i.buffered.end(i.buffered.length-1)/i.duration:0;e.bar.set("loaded",n),e.events.trigger("progress",t)}),t.on("playing",function(){e.events.trigger("playing",t)}),t.on("canplaythrough",function(){e.events.trigger("canplaythrough",t)}),t.on("ready",function(){e.ready=!0,e.events.trigger("canplay",t)}),t.on("ended",function(){e.events.trigger("ended",t)})},exportPlayer:function(t){var e=this;this.player={play:function(){t.play(),e.ready&&setTimeout(function(){t.paused()&&e.events.trigger("autoPlayError",t)},500)},pause:function(){t.pause()},speed:function(e){t.setSpeed(e)},seek:function(e){t.seek(e)},destroy:function(){t.dispose()},on:function(t,i){e.events.on(t,i)},switchQuality:function(e){var i=t._urls.find(function(t){return t.definition.toLowerCase()===e.toLowerCase()});t.loadByUrl(i.Url,t.getCurrentTime(),!0,!0)},video:this.$refs.video,playedTime:"00:00",duration:"00:00",loadedPercentage:"0%",playedPercentage:"0%"},this.bar=new a.a(this.player)}}}},955:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1079),r=i.n(n),o=i(1077),a=i.n(o),s=i(1080),l=i.n(s),c=i(804);e.default={props:["config"],components:{VideoPlayer:r.a,EncryptVideoPlayer:a.a,Loading:l.a},data:function(){return{inited:!1,seeked:!1,isSwitchQuality:!1,isShowQualityList:!1,isShowRateList:!1,isShowTouchTime:!1,isCanPlay:!1,isShowQualityTip:!1,isFullScreen:!1,isUserInActive:!1,isDragging:!1,isShowBigPlayBtn:!0,options:null,rate:"1.0",rateList:["2.0","1.5","1.25","1.0","0.5"],loading:!1,paused:!0,playedSeconds:0,playedTime:"00:00",duration:0,durationTime:"00:00",current:0,loadedPercentage:"0%",thumbTime:"00:00",thumbPercentage:"0%",touchTime:"00:00",title:"",player:{},loadingTimer:null,autoHideTimer:null,time1:null}},created:function(){this.config.isEncrypt?this.options={isEncrypt:!0,encryptId:this.config.encryptId,aid:this.config.aid,quality:this.config.quality.type,sourceType:this.config.sourceType,poster:this.config.poster||""}:this.options={src:this.config.source,poster:this.config.poster||""},this.rate=this.config.rate,this.quality=this.config.quality,this.qualityList=this.config.qualityList,this.title=this.config.title,this.playedSeconds=this.config.playedSeconds},mounted:function(){var t=this.$refs.progressBarWrap;t.addEventListener(c.a.nameMap.dragStart,this.dragStart),t.addEventListener(c.a.nameMap.dragMove,this.dragMove),t.addEventListener(c.a.nameMap.dragEnd,this.dragEnd),document.addEventListener("keydown",this.keydown),this.checkLoading()},beforeDestroy:function(){var t=this.$refs.progressBarWrap;t.removeEventListener(c.a.nameMap.dragStart,this.dragStart),t.removeEventListener(c.a.nameMap.dragMove,this.dragMove),t.removeEventListener(c.a.nameMap.dragEnd,this.dragEnd),document.removeEventListener("keydown",this.keydown),this.player&&this.player.destroy&&this.player.destroy()},watch:{isCanPlay:function(t){t&&this.playedSeconds&&this.player.seek(this.playedSeconds)}},methods:{playerInited:function(t){this.player=t,this.bindEvent(),this.player.speed(Number(this.rate)),c.a.isMobile?this.hide():this.play()},bindEvent:function(){var t=this;this.player.on("canplay",function(){t.isCanPlay=!0,t.inited||c.a.isMobile||(t.inited=!0,t.play()),t.isShowQualityTip&&(t.isShowQualityTip=!1),t.isSwitchQuality&&(t.isSwitchQuality=!1)}),this.player.on("canplaythrough",function(){t.seeked||(t.seeked=!0,t.playedSeconds&&t.player.seek(t.playedSeconds))}),this.player.on("pause",function(){t.isSwitchQuality||(t.paused=!0)}),this.player.on("ended",function(){t.$emit("ended",t.player.current)}),this.player.on("autoPlayError",function(){t.pause()}),this.player.on("timeupdate",function(){t.time1=Date.now(),t.current=t.player.current,t.duration=t.player.duration,t.durationTime=t.player.durationTime,t.loadedPercentage=t.player.loadedPercentage,t.isDragging||(t.thumbTime=t.player.currentTime,t.thumbPercentage=t.player.playedPercentage),!t.paused&&t.duration&&t.$emit("timeupdate",{playedSeconds:t.player.current,duration:t.duration})})},play:function(){this.paused=!1,this.player.play(),this.setAutoHide(),this.$emit("play")},pause:function(){this.paused=!0,this.player.pause(),this.setAutoHide(),this.$emit("pause")},togglePlay:function(){this.paused?this.play():this.pause()},mouseMoveHandler:function(){this.setAutoHide()},videoClick:function(){c.a.isMobile||this.togglePlay(),this.isShowQualityList&&(this.isShowQualityList=!1),this.isShowRateList&&(this.isShowRateList=!1),this.setAutoHide()},setAutoHide:function(){var t=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){t.paused||t.hide()},5e3)},show:function(){this.isUserInActive=!1},hide:function(){this.isUserInActive=!0},hideBigPlayBtn:function(){this.isShowBigPlayBtn=!1},openQualityList:function(){this.isShowQualityList=!this.isShowQualityList,this.isShowRateList&&(this.isShowRateList=!1)},openRateList:function(){this.isShowRateList=!this.isShowRateList,this.isShowQualityList&&(this.isShowQualityList=!1)},switchQuality:function(t){var e=this;if(this.isShowQualityList=!1,this.quality.type!==t.type)if(this.quality=t,this.isShowQualityTip=!0,this.isCanPlay=!1,this.isSwitchQuality=!0,this.paused=!1,this.$emit("switchQuality",t.type),this.config.isEncrypt)this.player.switchQuality(t.type);else{this.playedSeconds=this.player.played*this.player.video.duration;var i=this.qualityList.find(function(e){return e.type===t.type}).url;this.options=null,this.$nextTick(function(){e.options={src:i}})}},switchRate:function(t){this.isShowRateList=!1,this.rate!==t&&(this.rate=t,this.player.speed(Number(t)),this.$emit("switchRate",this.rate))},toggleFullScreen:function(){this.isFullScreen?this.cancelFullScreen():this.enableFullScreen()},thumbMove:function(t){this.isDragging=!0;var e=this.$refs.progressBarWrap,i=((t.clientX||t.changedTouches[0].clientX)-c.a.getBoundingClientRectViewLeft(e))/e.clientWidth;i=Math.max(i,0),i=Math.min(i,1),this.thumbPercentage=100*i+"%",this.thumbTime=c.a.secondToTime(i*this.player.video.duration)},thumbUp:function(t){this.isDragging=!1,document.removeEventListener(c.a.nameMap.dragEnd,this.thumbUp),document.removeEventListener(c.a.nameMap.dragMove,this.thumbMove);var e=this.$refs.progressBarWrap,i=((t.clientX||t.changedTouches[0].clientX)-c.a.getBoundingClientRectViewLeft(e))/e.clientWidth;i=Math.max(i,0),i=Math.min(i,1),this.thumbPercentage=100*i+"%",this.thumbTime=c.a.secondToTime(i*this.player.video.duration),this.player.seek(i*this.player.video.duration),this.isShowTouchTime=!1},dragStart:function(){document.addEventListener(c.a.nameMap.dragMove,this.thumbMove),document.addEventListener(c.a.nameMap.dragEnd,this.thumbUp)},dragMove:function(t){var e=this.$refs.progressBarWrap,i=this.$refs.touchTime;if(this.player.video.duration){var n=c.a.cumulativeOffset(e).left,r=(t.clientX||t.changedTouches[0].clientX)-n;if(r<0||r>e.offsetWidth)return;var o=this.player.video.duration*(r/e.offsetWidth);i.style.left=r-(o>=3600?25:20)+"px",this.player.touchTime=c.a.secondToTime(o),this.isShowTouchTime=!0}},dragEnd:function(){},keydown:function(t){var e=document.activeElement.tagName.toUpperCase(),i=document.activeElement.getAttribute("contenteditable");if("INPUT"!==e&&"TEXTAREA"!==e&&""!==i&&"true"!==i){var n=t||window.event;switch(n.keyCode){case 32:n.preventDefault(),this.togglePlay();break;case 37:n.preventDefault(),this.player.seek(this.player.video.currentTime-10),this.setAutoHide();break;case 39:n.preventDefault(),this.player.seek(this.player.video.currentTime+10),this.setAutoHide()}}},enableFullScreen:function(){this.isFullScreen=!0;var t=this.$refs.playerWrap;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen?this.player.video.webkitEnterFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()},cancelFullScreen:function(){this.isFullScreen=!1,document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},checkLoading:function(){var t=this,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;e(function i(){var n=Date.now();!t.paused&&t.time1&&n-t.time1>1e3?t.loading=!0:t.loading=!1,e(i)})}}}},956:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(964);e.default={props:["options"],data:function(){return{preload:"auto",poster:""}},mounted:function(){this.player=new n.a({video:this.$refs.video,src:this.options.src}),this.poster=this.options.poster,this.$emit("inited",this.player)},methods:{}}},957:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{svgList:[{x:7,y:1},{x:11,y:3},{x:13,y:7},{x:11,y:11},{x:7,y:13},{x:3,y:11},{x:1,y:7},{x:3,y:3}]}},mounted:function(){this.$refs.circle.forEach(function(t,e){t.style.animationDelay="."+e+"s"})}}},963:function(t,e,i){"use strict";e.a=function(t){var e={container:null,autoplay:!1,loop:!1,preload:"metadata",volume:.7,src:null,video:null,mutex:!0};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i]);return t}},964:function(t,e,i){"use strict";var n=i(43),r=i.n(n),o=i(100),a=i.n(o),s=i(101),l=i.n(s),c=i(804),u=i(963),d=i(833),h=i(965),f=i(834),p=i(669),m=i.n(p),g=[],v=function(){function t(e){a()(this,t),this.options=i.i(u.a)(e),this.container=this.options.video,this.events=new f.a,this.paused=!0,this.timer=new h.a(this),this.bar=new d.a(this),this.played=0,this.playedPercentage="0%",this.duration=0,this.durationTime="00:00",this.current=0,this.currentTime="00:00",this.playedTime="00:00",this.touchTime="00:00",this.video=this.options.video,this.initVideo(this.options.src),this.options.autoplay&&this.play(),g.push(this)}return l()(t,[{key:"seek",value:function(t){t=Math.max(t,0),this.video.duration&&(t=Math.min(t,this.video.duration)),this.video.currentTime=t,this.bar.set("played",t/this.video.duration),this.playedTime=c.a.secondToTime(t),this.current=t,this.currentTime=c.a.secondToTime(t)}},{key:"play",value:function(){var t=this;if(this.paused=!1,r.a.resolve(this.video.play()).catch(function(){t.pause()}).then(function(){}),this.timer.enable("loading"),this.options.mutex)for(var e=0;e<g.length;e++)this!==g[e]&&g[e].pause()}},{key:"pause",value:function(){this.paused=!0,this.video.pause(),this.timer.disable("loading")}},{key:"volume",value:function(t){return t=parseFloat(t),isNaN(t)||(t=Math.max(t,0),t=Math.min(t,1),this.bar.set("volume",t),this.video.volume=t,this.video.muted&&(this.video.muted=!1)),this.video.volume}},{key:"toggle",value:function(){this.video.paused?this.play():this.pause()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"initMSE",value:function(t){var e="normal";/m3u8(#|\?|$)/i.exec(t)&&(e="hls"),"hls"===e&&(this.video.canPlayType("application/x-mpegURL")||this.video.canPlayType("application/vnd.apple.mpegURL"))&&(e="normal"),"hls"===e?m.a.isSupported()&&(window.GBHlsObj||(window.GBHlsObj=new m.a),window.GBHlsObj.loadSource(t),window.GBHlsObj.attachMedia(this.video)):this.video.src=t}},{key:"initVideo",value:function(t){var e=this;this.initMSE(t),this.on("durationchange",function(){1!==e.video.duration&&e.video.duration!==1/0&&(e.duration=e.video.duration,e.durationTime=c.a.secondToTime(e.video.duration))}),this.on("progress",function(){var t=e.video.buffered.length?e.video.buffered.end(e.video.buffered.length-1)/e.video.duration:0;e.bar.set("loaded",t)}),this.on("error",function(){e.video.error}),this.on("ended",function(){e.bar.set("played",1),e.options.loop?(e.seek(0),e.play()):e.pause()}),this.on("play",function(){e.paused&&e.play()}),this.on("pause",function(){e.paused||e.pause()}),this.on("timeupdate",function(){e.bar.set("played",e.video.currentTime/e.video.duration),e.playedTime=c.a.secondToTime(e.video.currentTime),e.current=e.video.currentTime,e.currentTime=c.a.secondToTime(e.video.currentTime)});for(var i=0;i<this.events.videoEvents.length;i++)!function(t){e.video.addEventListener(e.events.videoEvents[t],function(i){e.video&&e.events.trigger(e.events.videoEvents[t],i)})}(i)}},{key:"resize",value:function(){this.events.trigger("resize")}},{key:"fullscreen",value:function(){this.events.trigger("fullscreen")}},{key:"speed",value:function(t){this.video.playbackRate=t}},{key:"destroy",value:function(){g.splice(g.indexOf(this),1),this.pause(),this.timer.destroy(),this.video.src="",this.events.trigger("destroy")}}]),t}();e.a=v},965:function(t,e,i){"use strict";var n=i(100),r=i.n(n),o=i(101),a=i.n(o),s=function(){function t(e){r()(this,t),this.player=e,window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),this.types=["loading"],this.init()}return a()(t,[{key:"init",value:function(){var t=this;this.types.map(function(e){return t["init"+e+"Checker"](),e})}},{key:"initloadingChecker",value:function(){var t=this,e=0,i=0,n=!1;this.loadingChecker=setInterval(function(){t.enableloadingChecker&&(i=t.player.video.currentTime,n||i!==e||t.player.video.paused||(t.player.loading=!0,n=!0,t.player.events.trigger("loading")),n&&i>e&&!t.player.video.paused&&(t.player.loading=!1,n=!1,t.player.events.trigger("loading")),e=i)},100)}},{key:"enable",value:function(t){this["enable"+t+"Checker"]=!0}},{key:"disable",value:function(t){this["enable"+t+"Checker"]=!1}},{key:"destroy",value:function(){var t=this;this.types.map(function(e){return t["enable"+e+"Checker"]=!1,t[e+"Checker"]&&clearInterval(t[e+"Checker"]),e})}}]),t}();e.a=s},968:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".YXMHWr-G_0{position:relative;background:#000;font-size:0;width:100%;height:100%}.YXMHWr-G_0 ._3yFxFBvw_0{margin:0 auto;display:block;width:100%;height:100%}.prism-fullscreen{z-index:10}",""]),e.locals={wrap:"YXMHWr-G_0",video:"_3yFxFBvw_0"}},974:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._1ocwiE8G_0{position:absolute;top:50%;left:50%;margin:-18px 0 0 -18px;height:36px;width:36px;pointer-events:none;z-index:2}._1ocwiE8G_0 circle{-webkit-animation:_1j7-4evI_0 .8s ease infinite;animation:_1j7-4evI_0 .8s ease infinite;opacity:0;-webkit-transform-origin:4px 4px;transform-origin:4px 4px;fill:#fff}@-webkit-keyframes _1j7-4evI_0{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}@keyframes _1j7-4evI_0{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}",""]),e.locals={wrap:"_1ocwiE8G_0",fade:"_1j7-4evI_0"}},984:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._3FX_6HFN_0{position:relative;background:#000;font-size:0;width:100%;height:100%}._3FX_6HFN_0 .OlbgGq4x_0{margin:0 auto;display:block;width:100%;height:100%}",""]),e.locals={wrap:"_3FX_6HFN_0",video:"OlbgGq4x_0"}},985:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,"._3mrRWLH0_0{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:100%;cursor:pointer}._3mrRWLH0_0 ._1w_GoaOr_0{width:100%;height:100%}._3mrRWLH0_0 ._21V1fOXx_0{position:absolute;padding-top:1rem;padding-left:1rem;padding-right:1rem;top:0;left:0;right:0;height:68px;line-height:1.4;color:#fff;opacity:1;visibility:visible;font-weight:400;font-size:.875rem;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.5)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.5),transparent)}._3mrRWLH0_0._29mnQiGc_0{cursor:none}._3mrRWLH0_0._29mnQiGc_0 ._3-SEoKQH_0,._3mrRWLH0_0._29mnQiGc_0 ._21V1fOXx_0,._3mrRWLH0_0._29mnQiGc_0 .lyo54DMN_0{opacity:0;visibility:hidden}._3651b8Ab_0{position:absolute;z-index:11;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);width:50px;height:50px;border-radius:50%;background:rgba(0,0,0,.3);cursor:pointer}._3651b8Ab_0 ._3RqO9gej_0{position:absolute;top:8px;left:17px;font-size:20px;color:#fff}._3-SEoKQH_0{background:rgba(0,0,0,.5);height:98px;width:100%;position:absolute;bottom:0;z-index:-1;opacity:1;visibility:visible;-webkit-transition:all .3s ease;transition:all .3s ease}._3-SEoKQH_0:hover{opacity:1}.lyo54DMN_0{position:absolute;bottom:0;left:0;right:0;height:40px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:11;opacity:1;visibility:visible;background:rgba(0,0,0,.5)}.lyo54DMN_0._29mnQiGc_0{visibility:hidden;opacity:0}.lyo54DMN_0 ._2GcYKPe6_0{height:38px;position:absolute;width:160px;left:4px;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.lyo54DMN_0 ._2GcYKPe6_0 ._1XMByMIq_0{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:40px;height:38px;padding:7px;background-color:transparent;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:.8}.lyo54DMN_0 ._2GcYKPe6_0 ._1XMByMIq_0 svg{width:100%;height:100%;fill:#fff;-webkit-box-sizing:content-box;box-sizing:content-box}.lyo54DMN_0 ._2GcYKPe6_0 ._3zimHzo2_0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#eee;line-height:24px;text-shadow:0 0 2px rgba(0,0,0,.5);font-size:13px;cursor:default}.lyo54DMN_0 ._2GcYKPe6_0 ._3zimHzo2_0 ._3NwV9QSM_0{color:#a4aab3}.lyo54DMN_0 .JySdDvvj_0{padding:5px 0;position:absolute;bottom:33px;left:0;right:0;height:3px}.lyo54DMN_0 .JySdDvvj_0 ._1xmZNiow_0{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}.lyo54DMN_0 .JySdDvvj_0 ._3zimHzo2_0{position:absolute;left:0;top:-32px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:0;-webkit-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}.lyo54DMN_0 .JySdDvvj_0 ._2EyQjEUZ_0{position:absolute;left:0;top:0;bottom:0;background:hsla(0,0%,100%,.4);height:3px;-webkit-transition:all .5s ease;transition:all .5s ease;will-change:width}.lyo54DMN_0 .JySdDvvj_0 .Njxj9pM6_0{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width;background:#fa8919}.lyo54DMN_0 .JySdDvvj_0 .cgiBDpNu_0{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);transform:scale(0);background:#fa8919}.lyo54DMN_0 .JySdDvvj_0:hover .cgiBDpNu_0{-webkit-transform:scale(1);transform:scale(1)}.-ix31iaB_0{position:absolute;right:0;bottom:0;width:150px;height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px;color:#fff}.-ix31iaB_0 ._1f7EcNwG_0,.-ix31iaB_0 ._3dtuJ_V9_0{position:relative;height:40px;line-height:40px}.-ix31iaB_0 ._33dmmUz7_0,.-ix31iaB_0 .pdtwuPiY_0{padding:0;margin:0;position:absolute;left:0;right:0;bottom:46px;width:70px;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.-ix31iaB_0 ._33dmmUz7_0._28e3zVeX_0,.-ix31iaB_0 .pdtwuPiY_0._28e3zVeX_0{-webkit-transform:scale(1);transform:scale(1)}.-ix31iaB_0 ._33dmmUz7_0 ._295QmQUA_0,.-ix31iaB_0 .pdtwuPiY_0 ._295QmQUA_0{text-align:center;width:70px;line-height:30px;border-top:1px solid rgba(78,78,78,.3);background-color:rgba(0,0,0,.6);cursor:pointer}.-ix31iaB_0 ._33dmmUz7_0 ._1-BRNVtp_0,.-ix31iaB_0 .pdtwuPiY_0 ._1-BRNVtp_0{border-top:none}.-ix31iaB_0 ._33dmmUz7_0 ._295QmQUA_0._1L7TtGxP_0,.-ix31iaB_0 .pdtwuPiY_0 ._295QmQUA_0._1L7TtGxP_0{color:#00c1de}.-ix31iaB_0 ._2F_LuXO2_0{display:block}.-ix31iaB_0 ._2F_LuXO2_0,.-ix31iaB_0 .DNOEuosC_0{width:50px;text-align:center;cursor:pointer}._3cThv8IL_0{position:absolute;z-index:11;left:18px;bottom:38px;padding:10px 15px;font-size:14px;color:#fff;background:rgba(0,0,0,.6)}._3cThv8IL_0 ._1f7EcNwG_0{color:#00c1de}",""]),e.locals={wrap:"_3mrRWLH0_0",videoWrap:"_1w_GoaOr_0",title:"_21V1fOXx_0",userInActive:"_29mnQiGc_0",controlMask:"_3-SEoKQH_0",controlWrap:"lyo54DMN_0",bigPlayBtn:"_3651b8Ab_0",bigPlayIcon:"_3RqO9gej_0",left:"_2GcYKPe6_0",playIcon:"_1XMByMIq_0",time:"_3zimHzo2_0",duration:"_3NwV9QSM_0",barWrap:"JySdDvvj_0",bar:"_1xmZNiow_0",loaded:"_2EyQjEUZ_0",played:"Njxj9pM6_0",tooltip:"cgiBDpNu_0",right:"-ix31iaB_0",quality:"_1f7EcNwG_0",rate:"_3dtuJ_V9_0",qualityList:"pdtwuPiY_0",rateList:"_33dmmUz7_0",on:"_28e3zVeX_0",item:"_295QmQUA_0","itemfirst-child":"_1-BRNVtp_0",itemfirstChild:"_1-BRNVtp_0",active:"_1L7TtGxP_0",current:"_2F_LuXO2_0",fullScreenIcon:"DNOEuosC_0",qualityTip:"_3cThv8IL_0"}},988:function(t,e,i){e=t.exports=i(571)(!1),e.push([t.i,".nav-bar{position:fixed;width:100%;height:3rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 1rem;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;top:2rem;left:0;z-index:20;pointer-events:none}.icon-round{color:#fff;width:2rem;height:2rem;line-height:2rem;text-align:center;border-radius:50%;font-size:1rem;background:rgba(0,0,0,.5);pointer-events:auto}",""])},995:function(t,e,i){var n=i(968);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(572)("f9010fcc",n,!0,{})}});