(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{1531:function(e,t,v){"use strict";v.r(t);var s=v(44),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"webscoket-概念及应用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webscoket-概念及应用"}},[e._v("#")]),e._v(" webscoket 概念及应用")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("安全认证 token")])]),e._v(" "),v("li",[v("p",[e._v("广播/一对一")])]),e._v(" "),v("li",[v("p",[e._v("观察者")])]),e._v(" "),v("li",[v("p",[e._v("pub/sub")])]),e._v(" "),v("li",[v("p",[e._v("webscoket")])]),e._v(" "),v("li",[v("p",[e._v("keepalive")])]),e._v(" "),v("li",[v("p",[e._v("心跳")])])]),e._v(" "),v("p",[e._v("websocket 是前后端交互的长连接，前后端也都可能因为一些情况导致连接失效并且相互之间没有反馈提醒。因此为了保证连接的可持续性和稳定性，websocket 心跳重连就应运而生。")]),e._v(" "),v("p",[e._v("在使用原生 websocket 的时候，如果设备网络断开，不会立刻触发 websocket 的任何事件，前端也就无法得知当前连接是否已经断开。"),v("strong",[e._v("这个时候如果调用 websocket.send 方法，浏览器才会发现链接断开了")]),e._v("，便会立刻或者一定短时间后（不同浏览器或者浏览器版本可能表现不同）触发 onclose 函数。")]),e._v(" "),v("p",[e._v("后端 websocket 服务也可能出现异常，造成连接断开，这时前端也并没有收到断开通知，因此需要前端定时发送心跳消息 ping，后端收到 ping 类型的消息，立马返回 pong 消息，告知前端连接正常。如果一定时间没收到 pong 消息，就说明连接不正常，前端便会执行重连。")]),e._v(" "),v("p",[e._v("为了解决以上两个问题，以前端作为主动方，定时发送 ping 消息，用于检测网络和前后端连接问题。一旦发现异常，前端持续执行重连逻辑，直到重连成功。")]),e._v(" "),v("p",[e._v("无连接（采用轮询方式不断建立连接），可以使用 keep-alive 保持连接， HTTP 的进化 - 0.9、1.0、1.1、Keep-Alive、Upgrade 和 HTTPS\n、、")]),e._v(" "),v("p",[e._v("websocket 对 web 性能影响大吗？")]),e._v(" "),v("h2",{attrs:{id:"vite"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#vite"}},[e._v("#")]),e._v(" vite")]),e._v(" "),v("p",[e._v("通过 webscoket 实现 HMR")]),e._v(" "),v("h2",{attrs:{id:"参考资料"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),v("ul",[v("li",[e._v("[手摸手教你使用 WebSocket"),v("a",{attrs:{href:"https://juejin.im/post/6844903698498322439#heading-10",target:"_blank",rel:"noopener noreferrer"}},[e._v("其实 WebSocket 也不难"),v("OutboundLink")],1)]),e._v(" "),v("li",[v("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2017/05/websocket.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebSocket 教程"),v("OutboundLink")],1)]),e._v(" "),v("li",[e._v("https://github.com/joewalnes/websocketd\na")])])])}),[],!1,null,null,null);t.default=o.exports}}]);