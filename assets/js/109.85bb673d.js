(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{1177:function(s,t,a){s.exports=a.p+"assets/img/2021-01-27-18-29-18.6e72229d.png"},1602:function(s,t,a){"use strict";a.r(t);var n=a(44),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"构建一个-typescript-vue3-项目基础框架解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建一个-typescript-vue3-项目基础框架解决方案"}},[s._v("#")]),s._v(" 构建一个 TypeScript + Vue3 项目基础框架解决方案")]),s._v(" "),n("h2",{attrs:{id:"_0-前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-前言"}},[s._v("#")]),s._v(" 0. 前言")]),s._v(" "),n("p",[s._v("为了紧跟上技术的发展，以及更好地帮助开发者维护软件，并提升协作的效率。xcli 新增一个 TS + Vue3 的项目基础框架，为后续新项目基于新技术的快速开展提供帮助。")]),s._v(" "),n("p",[s._v("文章大纲：")]),s._v(" "),n("ul",[n("li",[s._v("架构搭建")]),s._v(" "),n("li",[s._v("代码规范")]),s._v(" "),n("li",[s._v("提交规范")]),s._v(" "),n("li",[s._v("单元测试")]),s._v(" "),n("li",[s._v("自动部署")])]),s._v(" "),n("h2",{attrs:{id:"_1-系统整体需求分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-系统整体需求分析"}},[s._v("#")]),s._v(" 1. 系统整体需求分析")]),s._v(" "),n("h2",{attrs:{id:"_2-系统整体架构设计"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-系统整体架构设计"}},[s._v("#")]),s._v(" 2. 系统整体架构设计")]),s._v(" "),n("h2",{attrs:{id:"_3-系统整体前置基础知识准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-系统整体前置基础知识准备"}},[s._v("#")]),s._v(" 3. 系统整体前置基础知识准备")]),s._v(" "),n("h3",{attrs:{id:"vue3-相比-vue2-到底有多少改变"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue3-相比-vue2-到底有多少改变"}},[s._v("#")]),s._v(" vue3 相比 vue2 到底有多少改变")]),s._v(" "),n("ul",[n("li",[s._v("框架\n"),n("ul",[n("li",[s._v("非兼容\n"),n("ul",[n("li",[s._v("重大改变有 5、6 处")]),s._v(" "),n("li",[s._v("小改变有 10 多处")])])]),s._v(" "),n("li",[s._v("VCA")]),s._v(" "),n("li",[s._v("生命周期")]),s._v(" "),n("li",[s._v("Teleport 组件")]),s._v(" "),n("li",[s._v("异步组件")]),s._v(" "),n("li",[s._v("ref、reactive、toRefs、toRef")]),s._v(" "),n("li",[s._v("watchEffects vs watch")]),s._v(" "),n("li",[s._v("fragment（片段）")]),s._v(" "),n("li",[s._v("emit")]),s._v(" "),n("li",[s._v("v-model")]),s._v(" "),n("li",[s._v("key attribute")]),s._v(" "),n("li",[s._v("全局 API")]),s._v(" "),n("li",[s._v("底层优化\n"),n("ul",[n("li",[s._v("Proxy 代理")]),s._v(" "),n("li",[s._v("静态提升（hoistStatic）vdom")])])])])]),s._v(" "),n("li",[s._v("与 ts\n"),n("ul",[n("li",[s._v("defineComponent")]),s._v(" "),n("li",[s._v("props 推导")]),s._v(" "),n("li",[s._v("PropType")])])]),s._v(" "),n("li",[s._v("build ｜ 更好的 tree-sharking（摇树优化）")]),s._v(" "),n("li",[s._v("options api 与 compositon api 取舍")])]),s._v(" "),n("p",[s._v("其中 Vuex、Vue Router 也有不少重大的变化。")]),s._v(" "),n("h3",{attrs:{id:"vue3-对-ts-的兼容有多大"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue3-对-ts-的兼容有多大"}},[s._v("#")]),s._v(" vue3 对 ts 的兼容有多大")]),s._v(" "),n("p",[s._v("以前的 vue2 要使用 class-api 的方案去处理 ts 的问题。")]),s._v(" "),n("ul",[n("li",[s._v("（vue 3 对 TS 是可选的，而不是强制的）")]),s._v(" "),n("li",[n("blockquote",[n("p",[s._v("3.0 的一个主要设计目标是增强对 TypeScript 的支持。原本我们期望通过 Class API 来达成这个目标，但是经过讨论和原型开发，我们认为 Class 并不是解决这个问题的正确路线，基于 Class 的 API 依然存在类型问题。——尤雨溪")])])])]),s._v(" "),n("h3",{attrs:{id:"vue2-的-ui-库、工具是否都适应-vue3-了？如何处理？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue2-的-ui-库、工具是否都适应-vue3-了？如何处理？"}},[s._v("#")]),s._v(" vue2 的 UI 库、工具是否都适应 vue3 了？如何处理？")]),s._v(" "),n("h4",{attrs:{id:"已有的开源组件库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#已有的开源组件库"}},[s._v("#")]),s._v(" 已有的开源组件库")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("Ant-design-vue 2.0 版本")])]),s._v(" "),n("li",[n("p",[s._v("Vant 3.0 移动端组件库")])]),s._v(" "),n("li",[n("p",[s._v("Element-plus vue3 重构版")])]),s._v(" "),n("li",[n("p",[s._v("没有适配的如何处理？如何考虑？")])]),s._v(" "),n("li",[n("p",[s._v("fork quark 进行 vue3 的重构版本开发")])])]),s._v(" "),n("p",[s._v("建议：可以考虑先用 ant-design-vue 作为基础版本，之后再考虑替换为其他 quark（vue3 版本）内部版本。")]),s._v(" "),n("h3",{attrs:{id:"打包库是使用-webpack-还是直接不用打包使用-vite？对于后续升级到使用-vite-是否方便？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打包库是使用-webpack-还是直接不用打包使用-vite？对于后续升级到使用-vite-是否方便？"}},[s._v("#")]),s._v(" 打包库是使用 webpack 还是直接不用打包使用 vite？对于后续升级到使用 vite 是否方便？")]),s._v(" "),n("h4",{attrs:{id:"webpack-模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-模式"}},[s._v("#")]),s._v(" webpack 模式")]),s._v(" "),n("p",[s._v("统一先使用 webpack，至少让当前的项目模版走通，尽量减少新的认知）是否应该更加激进呢？还是用 webpack 进行生产环境的处理，再逐步研究 vite。")]),s._v(" "),n("ul",[n("li",[s._v("使用 webpack 的话，直接用 vue-cli v4.5.0 直接开启 vue3 即可。")])]),s._v(" "),n("h4",{attrs:{id:"vite-（开发模式与生产模式）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vite-（开发模式与生产模式）"}},[s._v("#")]),s._v(" vite （开发模式与生产模式）")]),s._v(" "),n("ul",[n("li",[s._v("关于 vite\n"),n("ul",[n("li",[s._v("一个是 Vite 主要对应的场景是开发模式，原理是拦截浏览器发出的 ES imports 请求并做相应处理。（生产模式是用 rollup 打包）")]),s._v(" "),n("li",[s._v("一个是 Vite 在开发模式下不需要打包，只需要编译浏览器发出的 HTTP 请求对应的文件即可，所以热更新速度很快。")]),s._v(" "),n("li",[s._v("因此，要实现上述目标，需要要求项目里只使用原生 ES imports，如果使用了 require 将失效，所以要用它完全替代掉 Webpack 就目前来说还是不太现实的。上面也说了，生产模式下的打包不是 Vite 自身提供的，因此生产模式下如果你想要用 Webpack 打包也依然是可以的。从这个角度来说，Vite 可能更像是替代了 webpack-dev-server 的一个东西。")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(1177),alt:""}})]),s._v(" "),n("p",[s._v("可以分别对比一个用 vite 的项目以及一个用 vuecli 4.5.0 下的项目的开发、生产体验。")]),s._v(" "),n("p",[s._v("后续要使用 vite 重构成本会比较大的，后续可以提供两个版本的处理，先 vuecli 的 webpack 版本，然后再是 vite 版本，可能后续 vuecli 官方支持呢。")]),s._v(" "),n("p",[s._v("对比配置内容。")]),s._v(" "),n("h3",{attrs:{id:"review-优秀的开源项目（比如-vue-vben-admin）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#review-优秀的开源项目（比如-vue-vben-admin）"}},[s._v("#")]),s._v(" Review 优秀的开源项目（比如 vue-vben-admin）")]),s._v(" "),n("p",[s._v("分别对比一个用 vite 的项目以及一个用 vuecli 4.5.0 下的项目")]),s._v(" "),n("ul",[n("li",[s._v("vue-vben-admin（vue3，vite2、antd-design-vue、ts） https://github.com/anncwb/vue-vben-admin")])]),s._v(" "),n("p",[s._v("两个版本，一个是 vuecli 版本下的基础框架，一个是采用 vite 进行构建的版本。")]),s._v(" "),n("p",[s._v("先进行，再对比。")]),s._v(" "),n("h3",{attrs:{id:"关于-typescript-的编译问题：使用-typescript-还是-babel-编译"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于-typescript-的编译问题：使用-typescript-还是-babel-编译"}},[s._v("#")]),s._v(" 关于 TypeScript 的编译问题：使用 typescript 还是 babel 编译")]),s._v(" "),n("p",[s._v("注意：无论是使用 typescript 编译还是 babel 编译，都需要安装 ts-loader 对 ts 文件的读取处理。")]),s._v(" "),n("h4",{attrs:{id:"使用-ts-loader-编译-typescript-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-ts-loader-编译-typescript-文件"}},[s._v("#")]),s._v(" 使用 TS-Loader 编译 TypeScript 文件")]),s._v(" "),n("p",[s._v("vueCli4 主要使用 "),n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-typescript",target:"_blank",rel:"noopener noreferrer"}},[s._v("@vue/cli-plugin-typescript"),n("OutboundLink")],1)]),s._v(" "),n("blockquote",[n("p",[s._v("typescript plugin for vue-cli")])]),s._v(" "),n("p",[s._v("Uses TypeScript + "),n("code",[s._v("ts-loader")]),s._v(" + "),n("a",{attrs:{href:"https://github.com/Realytics/fork-ts-checker-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("fork-ts-checker-webpack-plugin"),n("OutboundLink")],1),s._v(" for faster off-thread type checking.")]),s._v(" "),n("p",[s._v("输入命令 "),n("code",[s._v("vue add typescript")]),s._v(" 即可加入对应的插件")]),s._v(" "),n("p",[s._v("Injected webpack-chain Rules")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("config.rule('ts')")])]),s._v(" "),n("li",[n("code",[s._v("config.rule('ts').use('ts-loader')")])]),s._v(" "),n("li",[n("code",[s._v("config.rule('ts').use('babel-loader')")]),s._v(" (when used alongside "),n("code",[s._v("@vue/cli-plugin-babel")]),s._v(")")]),s._v(" "),n("li",[n("code",[s._v("config.rule('ts').use('cache-loader')")])]),s._v(" "),n("li",[n("code",[s._v("config.plugin('fork-ts-checker')")])])]),s._v(" "),n("p",[s._v("具体的验证可以通过 "),n("code",[s._v("vue inspect --\x3e output.js")]),s._v(" 查看输出的 webpack 配置文件，这个也可以作为后续自定义使用 babel 编译作参考。")]),s._v(" "),n("h4",{attrs:{id:"使用-babel-编译-typescript-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-babel-编译-typescript-文件"}},[s._v("#")]),s._v(" 使用 babel 编译 TypeScript 文件")]),s._v(" "),n("p",[s._v("类型编译与类型检查分离，大大提升编译速度。"),n("strong",[s._v("目前这块是 ts-loader 的编译，根本不是 babel 编译，后续需要处理。")])]),s._v(" "),n("ul",[n("li",[s._v("使用 @babel/typescript + babel.config.js 进行编译。")])]),s._v(" "),n("ol",[n("li",[s._v("第一步：安装 @babel/typescript")])]),s._v(" "),n("p",[s._v("在 babel.config.js 中填写以下：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n  presets"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/typescript"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/cli-plugin-babel/preset"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// *支持*")]),s._v("\n\n​    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/proposal-class-properties"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n​    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/proposal-object-rest-spread"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("Babel 默认查找 .js 文件，现在还没办法在 Babel 的 config 文件中进行配置。如果使用 Babel CLI，添加 "),n("code",[s._v("--extensions '.ts'")]),s._v("。")]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("第二步：如果使用 Webpack，则在 resolve.extensions 数组中添加 "),n("code",[s._v(".ts")]),s._v("，否则会出现找不到 "),n("code",[s._v("xxx.ts")]),s._v("  模块文件。")])]),s._v(" "),n("p",[s._v("vue.config.js")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  devServer"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9096")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    open"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  configureWebpack"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/main.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    resolve"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      extensions"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('".ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// <--新增")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("这个时候，运行 "),n("code",[s._v("vue serve")]),s._v(" 还是会报错，无法处理 ts 文件的：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("Module parse failed: Unexpected token "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":12"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nFile was processed with these loaders:\n * ./node_modules/eslint-loader/index.js\nYou may need an additional loader to handle the result of these loaders.\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" Home from "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"../views/Home.vue"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" const routes: Array"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("RouteRecordRaw"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     path: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),s._v(",\n\n @ ./src/main.ts "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":0-30 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":9-15\n @ multi "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("webpack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-dev-server/client?http://192.168.0.143:9096"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sockPath")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sockjs-node "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("webpack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/hot/dev-server.js ./src/main.ts\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("第三步：需要添加对应的 loader 进行解析 ts 文件：")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ForkTsCheckerWebpackPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fork-ts-checker-webpack-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  devServer"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9096")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    open"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  configureWebpack"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/main.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ForkTsCheckerWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    resolve"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      extensions"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('".ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('".tsx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Start 新增代码")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("chainWebpack")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("module\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/(\\.ts)|(\\.tsx)$/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel-loader"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("loader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ts-loader"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// End")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("ul",[n("li",[s._v("使用 fork-ts-checker-webpack-plugin + typescript 包和 tsconfig.json 进行开发/生产环境的类型检查。")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ForkTsCheckerWebpackPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fork-ts-checker-webpack-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 新增")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  devServer"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9096")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    open"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  configureWebpack"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/main.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ForkTsCheckerWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 新增")]),s._v("\n    resolve"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      extensions"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('".ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h4",{attrs:{id:"typescript-eslint-处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#typescript-eslint-处理"}},[s._v("#")]),s._v(" TypeScript ESLint 处理")]),s._v(" "),n("h2",{attrs:{id:"_1-需求分析：确定当前的基础模版功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-需求分析：确定当前的基础模版功能"}},[s._v("#")]),s._v(" 1. 需求分析：确定当前的基础模版功能")]),s._v(" "),n("h3",{attrs:{id:"_1-0-0"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-0-0"}},[s._v("#")]),s._v(" 1.0.0")]),s._v(" "),n("ul",[n("li",[s._v("[x] Vue3 + Vue router 4 + Vuex 4 全家桶")]),s._v(" "),n("li",[s._v("[x] 使用 babel 编译，解决 ts-loader 编译过慢的问题")]),s._v(" "),n("li",[s._v("[x] TypeScript")]),s._v(" "),n("li",[s._v("[x] antd-design-vue 2.0（后续使用 quark 可以需要替换）")]),s._v(" "),n("li",[s._v("[x] 符合规范的组织结构")]),s._v(" "),n("li",[s._v("[x] 配置文件自动读取")]),s._v(" "),n("li",[s._v("[ ] 提供常用工具的配置")]),s._v(" "),n("li",[s._v("[x] 自动加载全局组件，并可在 Demo 页面查看 &vuex modules")]),s._v(" "),n("li",[s._v("[ ] eventBus 解决方案")]),s._v(" "),n("li",[s._v("[ ] rem（自动处理响应式系统），这块需要另外研究下，如何更加好的适应。")]),s._v(" "),n("li",[s._v("[x] svg 图标")]),s._v(" "),n("li",[s._v("[x] 生产环境与正式环境配置文件自动切换")]),s._v(" "),n("li",[s._v("[x] hjson")]),s._v(" "),n("li",[s._v("[ ] ie 11")]),s._v(" "),n("li",[s._v("[ ] bable 可选链")]),s._v(" "),n("li",[s._v("[ ] dart-sass")]),s._v(" "),n("li",[s._v("[x] jest")]),s._v(" "),n("li",[s._v("[ ] 性能优化\n"),n("ul",[n("li",[s._v("[x] TS 编译")]),s._v(" "),n("li",[s._v("[ ] gzip")]),s._v(" "),n("li",[s._v("[ ] 更进一步优化自己的 svg")])])])]),s._v(" "),n("h3",{attrs:{id:"_1-0-1"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-0-1"}},[s._v("#")]),s._v(" 1.0.1")]),s._v(" "),n("ul",[n("li",[s._v("[ ] .vscode 调试配置")])]),s._v(" "),n("h2",{attrs:{id:"_2-架构设计与实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-架构设计与实现"}},[s._v("#")]),s._v(" 2. 架构设计与实现")]),s._v(" "),n("h3",{attrs:{id:"目录设计：使用-vuecli-初始化项目雏形"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目录设计：使用-vuecli-初始化项目雏形"}},[s._v("#")]),s._v(" 目录设计：使用 vuecli 初始化项目雏形")]),s._v(" "),n("h3",{attrs:{id:"基于-xcli4-搭建开发环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基于-xcli4-搭建开发环境"}},[s._v("#")]),s._v(" 基于 xcli4 搭建开发环境")]),s._v(" "),n("h4",{attrs:{id:"使用-babel-编译-typescript-，解决-vue-cli-使用-typescript-后打包巨慢的问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-babel-编译-typescript-，解决-vue-cli-使用-typescript-后打包巨慢的问题"}},[s._v("#")]),s._v(" 使用 babel 编译 TypeScript ，解决 vue cli 使用 typescript 后打包巨慢的问题")]),s._v(" "),n("p",[s._v("参考：https://juejin.cn/post/6844903955638517773#comment")]),s._v(" "),n("p",[s._v("@babel/preset-typescript")]),s._v(" "),n("p",[s._v("This preset is recommended if you use "),n("a",{attrs:{href:"https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("TypeScript"),n("OutboundLink")],1),s._v(", a typed superset of JavaScript. It includes the following plugins:"),n("a",{attrs:{href:"https://babeljs.io/docs/en/babel-plugin-transform-typescript",target:"_blank",rel:"noopener noreferrer"}},[s._v("@babel/plugin-transform-typescript"),n("OutboundLink")],1),s._v("You will need to specify "),n("code",[s._v('--extensions ".ts"')]),s._v(" for "),n("code",[s._v("@babel/cli")]),s._v(" & "),n("code",[s._v("@babel/node")]),s._v(" cli's to handle "),n("code",[s._v(".ts")]),s._v(" files. 这里 vuecli 已经配置了相关的 babel-loader 针对 ts、tsx 的识别。")]),s._v(" "),n("p",[s._v("@babel/plugin-transform-typescript")]),s._v(" "),n("p",[s._v("This plugin adds support for the syntax used by the "),n("a",{attrs:{href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("TypeScript programming language"),n("OutboundLink")],1),s._v(". However, this plugin does not add the ability to type-check the JavaScript passed to it. For that, you will need to install and set up TypeScript.")]),s._v(" "),n("ol",[n("li",[s._v("安装上述两个任意一个文件：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yarn add @babel/preset-typescript --dev\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("去掉 ts-loader 的处理")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("chainWebpack")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("config")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ts'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("uses"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ts-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'tsx'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("uses"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ts-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("在 babel.config.js 配置：")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  presets"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/cli-plugin-babel/preset"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-typescript"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("TypeScript 支持 vue 文件")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("ERROR "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" src/main.ts:2:17\nTS2307: Cannot "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" module "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./App.vue'")]),s._v(" or its corresponding "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" declarations.\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createApp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" from "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" App from "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./App.vue'")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                 ^^^^^^^^^^^\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" createApp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".mount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#app'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("新建 shims-vue.d.ts，放到 types 文件夹下：")]),s._v(" "),n("div",{staticClass:"language-ts line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.vue'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" defineComponent "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" component"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ReturnType"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" defineComponent"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[n("p",[s._v("让 vue 文件里的 "),n("code",[s._v('<script lang="ts">')]),s._v(" 通过 vue-loader 中转到 babel 上来")]),s._v(" "),n("p",[s._v("设置 "),n("code",[s._v("allExtensions: true")]),s._v(" （将每个文件都作为 TS 或 TSX （取决于 "),n("code",[s._v("isTSX")]),s._v(" 参数）进行解析）和 "),n("code",[s._v("isTSX: true")]),s._v("。")])])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-typescript"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" allExtensions"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isTSX"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("强制开启 "),n("code",[s._v("jsx")]),s._v(" 解析。否则，尖括号将被视为 typescript 的类型断言。会出现，"),n("code",[s._v(".vue")]),s._v(" 文件中一些 ts 代码的语法报错。（这块具体要看下 webpack 的整体，使用 webpack 搭建一个。再来区分 vue-cli 的处理。）")]),s._v(" "),n("h4",{attrs:{id:"提交规范"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#提交规范"}},[s._v("#")]),s._v(" 提交规范")]),s._v(" "),n("h3",{attrs:{id:"手动搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手动搭建"}},[s._v("#")]),s._v(" 手动搭建")]),s._v(" "),n("h2",{attrs:{id:"_3-需求逐个实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-需求逐个实现"}},[s._v("#")]),s._v(" 3. 需求逐个实现")]),s._v(" "),n("h3",{attrs:{id:"svg-支持"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#svg-支持"}},[s._v("#")]),s._v(" Svg 支持")]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("i")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(":class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("['svg-icon', `svg-icon-${name}`]"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token style-attr language-css"}},[n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("style")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('="')]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("svgStyle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("svg")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("fill")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("currentColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("aria-hidden")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(":width")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("width"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(":height")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("use")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(":xlink:href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("iconName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("svg")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("i")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"使用-vuex-4-x"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-vuex-4-x"}},[s._v("#")]),s._v(" 使用 Vuex 4.x")]),s._v(" "),n("p",[s._v("新版 devtool-beta 目前没支持 vuex")]),s._v(" "),n("h4",{attrs:{id:"使用-vue-router-4-x"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-vue-router-4-x"}},[s._v("#")]),s._v(" 使用 Vue Router 4.x")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("new Router 变成 createRouter")])]),s._v(" "),n("li",[n("p",[s._v("新的 history 配置取代 mode")])]),s._v(" "),n("li",[n("p",[s._v("TypeScript 变化")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("vue-router@3")]),s._v(" "),n("th",[s._v("vue-router@4")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("RouteConfig")]),s._v(" "),n("td",[s._v("RouteRecordRaw")])]),s._v(" "),n("tr",[n("td",[s._v("Location")]),s._v(" "),n("td",[s._v("RouteLocation")])]),s._v(" "),n("tr",[n("td",[s._v("Route")]),s._v(" "),n("td",[s._v("RouteLocationNormalized")])])])])])]),s._v(" "),n("p",[s._v("参考资料：")]),s._v(" "),n("ul",[n("li",[s._v("文档：https://next.router.vuejs.org/zh/guide/migration/index.html")]),s._v(" "),n("li",[s._v("源码：https://github.com/vuejs/vue-router-next")])]),s._v(" "),n("h4",{attrs:{id:"支持-vue3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#支持-vue3"}},[s._v("#")]),s._v(" 支持 vue3")]),s._v(" "),n("p",[s._v("xcli 4.5.0 生成支持 vue3 的基础版本。     "),n("strong",[s._v('"vue": "^3.0.0"')]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"core-js"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.6.5"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 包含各种 polyfill")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.0.0"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"devDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-typescript"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.12.7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/cli-plugin-babel"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~4.5.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/cli-plugin-eslint"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~4.5.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/cli-service"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~4.5.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/compiler-sfc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 单文件组件渲染器")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel-esslint"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^10.1.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^6.7.2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint-plugin-vue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.0.0-0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fork-ts-checker-webpack-plugin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^6.1.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"typescript"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.1.3"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h4",{attrs:{id:"支持-typescript（ts、tsx）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#支持-typescript（ts、tsx）"}},[s._v("#")]),s._v(" 支持 TypeScript（TS、TSX）")]),s._v(" "),n("p",[s._v("类型编译与类型检查分离，大大提升编译速度。")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("使用 @babel/typescript + babel.config.js 负责编译。")])]),s._v(" "),n("li",[n("p",[s._v("使用 fork-ts-checker-webpack-plugin + typescript 包和 tsconfig.json 进行开发/生产环境的类型检查。")])])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ForkTsCheckerWebpackPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fork-ts-checker-webpack-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  devServer"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9096")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    open"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  configureWebpack"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/main.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只检查不编译")]),s._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ForkTsCheckerWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h4",{attrs:{id:"typescript-支持-vue-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#typescript-支持-vue-文件"}},[s._v("#")]),s._v(" TypeScript 支持 vue 文件")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("ERROR "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" src/main.ts:2:17\nTS2307: Cannot "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" module "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./App.vue'")]),s._v(" or its corresponding "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" declarations.\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createApp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" from "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" App from "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./App.vue'")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                 ^^^^^^^^^^^\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" createApp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".mount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#app'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("新建 shims-vue.d.ts，放到 types 文件夹下：")]),s._v(" "),n("div",{staticClass:"language-ts line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.vue'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" defineComponent "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" component"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ReturnType"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" defineComponent"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"ui-组件库引入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ui-组件库引入"}},[s._v("#")]),s._v(" UI 组件库引入")]),s._v(" "),n("p",[s._v("antd-design-vue 2.0")]),s._v(" "),n("h4",{attrs:{id:"配置文件自动读取"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置文件自动读取"}},[s._v("#")]),s._v(" 配置文件自动读取")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"SYSNAME"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{SYSNAME}}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"VERSION"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{VERSION}}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"development"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"API"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.1.136:8088"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"API_FILE_DIR"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dgp-gis-server-web/"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"production"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"API"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.1.136:8088"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"API_FILE_DIR"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dgp-gis-server-web/"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("这里的模版是如何被替换的，涉及到 xcli 生成模版时的处理。")]),s._v(" "),n("p",[s._v("主要逻辑：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" initConfig "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./initAppConfig"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("renderPage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#app"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("renderPage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h2",{attrs:{id:"_4-小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-小结"}},[s._v("#")]),s._v(" 4. 小结")]),s._v(" "),n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6951649464637636622#heading-18",target:"_blank",rel:"noopener noreferrer"}},[s._v("从 0 开始手把手带你搭建一套规范的 Vue3.x 项目工程环境"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("模版参考\n"),n("ul",[n("li",[s._v("xcli-ui")]),s._v(" "),n("li",[s._v("edms")]),s._v(" "),n("li",[s._v("南宁项目")]),s._v(" "),n("li",[s._v("default 模版")]),s._v(" "),n("li",[s._v("vue-vben-admin-main")])])]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6844903517564436493#heading-10",target:"_blank",rel:"noopener noreferrer"}},[s._v("手摸手，带你优雅的使用 icon"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6844903792865984520",target:"_blank",rel:"noopener noreferrer"}},[s._v(" TypeScript 牵手 Babel：一场美丽的婚姻"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("参考 vue3-admin 的开源库是如何组织的，可以放进去。")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6844904146915573773#heading-4",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vite 原理浅析"),n("OutboundLink")],1),s._v(" 整体思路解析。")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6910014283707318279?utm_source=gold_browser_extension#heading-26",target:"_blank",rel:"noopener noreferrer"}},[s._v("备战2021：vite工程化实践，建议收藏"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6910009240053055496#heading-16",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue3 丨从 5 个维度来讲 Vue3 变化"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("Vue 2 + TS 版本：https://gitee.com/annsion/vue-vben-admin#%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E6%8A%80%E6%9C%AF")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6844904031643664397",target:"_blank",rel:"noopener noreferrer"}},[s._v("为什么 Babel 要支持编译 TypeScript"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);