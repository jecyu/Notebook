<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2019 | Naluduo&#39;s Notebook</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/Notebook/images/logo.jpeg">
    <meta name="description" content="📝每天记录一点点">
    <link rel="preload" href="/Notebook/assets/css/0.styles.b1f38863.css" as="style"><link rel="preload" href="/Notebook/assets/js/app.accc6ad4.js" as="script"><link rel="preload" href="/Notebook/assets/js/4.2708dfb6.js" as="script"><link rel="preload" href="/Notebook/assets/js/67.6107a140.js" as="script"><link rel="prefetch" href="/Notebook/assets/js/10.868273fb.js"><link rel="prefetch" href="/Notebook/assets/js/100.1b860150.js"><link rel="prefetch" href="/Notebook/assets/js/101.93399fce.js"><link rel="prefetch" href="/Notebook/assets/js/102.6cbb290c.js"><link rel="prefetch" href="/Notebook/assets/js/103.8ff3d751.js"><link rel="prefetch" href="/Notebook/assets/js/104.0a2f7daa.js"><link rel="prefetch" href="/Notebook/assets/js/105.155f54c6.js"><link rel="prefetch" href="/Notebook/assets/js/106.4d7d0c3a.js"><link rel="prefetch" href="/Notebook/assets/js/107.8373d2e5.js"><link rel="prefetch" href="/Notebook/assets/js/108.8c95a110.js"><link rel="prefetch" href="/Notebook/assets/js/109.85bb673d.js"><link rel="prefetch" href="/Notebook/assets/js/11.fb903a5e.js"><link rel="prefetch" href="/Notebook/assets/js/110.52ad03a9.js"><link rel="prefetch" href="/Notebook/assets/js/111.956208cd.js"><link rel="prefetch" href="/Notebook/assets/js/112.2009b21f.js"><link rel="prefetch" href="/Notebook/assets/js/113.82a49283.js"><link rel="prefetch" href="/Notebook/assets/js/114.3b3a5472.js"><link rel="prefetch" href="/Notebook/assets/js/115.7ee78dd6.js"><link rel="prefetch" href="/Notebook/assets/js/116.7c8bbb6c.js"><link rel="prefetch" href="/Notebook/assets/js/117.d0907fb0.js"><link rel="prefetch" href="/Notebook/assets/js/118.3fb43a39.js"><link rel="prefetch" href="/Notebook/assets/js/119.ec92ea48.js"><link rel="prefetch" href="/Notebook/assets/js/12.29652b2c.js"><link rel="prefetch" href="/Notebook/assets/js/120.35ff1e70.js"><link rel="prefetch" href="/Notebook/assets/js/121.d8b18139.js"><link rel="prefetch" href="/Notebook/assets/js/122.648ffe96.js"><link rel="prefetch" href="/Notebook/assets/js/123.ed3b8b2f.js"><link rel="prefetch" href="/Notebook/assets/js/124.142abf67.js"><link rel="prefetch" href="/Notebook/assets/js/125.329314b8.js"><link rel="prefetch" href="/Notebook/assets/js/126.3a121da0.js"><link rel="prefetch" href="/Notebook/assets/js/127.022c6641.js"><link rel="prefetch" href="/Notebook/assets/js/128.547c2d5c.js"><link rel="prefetch" href="/Notebook/assets/js/129.ecb5273b.js"><link rel="prefetch" href="/Notebook/assets/js/13.fa32345e.js"><link rel="prefetch" href="/Notebook/assets/js/130.2a0d3a19.js"><link rel="prefetch" href="/Notebook/assets/js/131.c7a84d57.js"><link rel="prefetch" href="/Notebook/assets/js/132.07da823d.js"><link rel="prefetch" href="/Notebook/assets/js/133.f851d5af.js"><link rel="prefetch" href="/Notebook/assets/js/134.de309ceb.js"><link rel="prefetch" href="/Notebook/assets/js/135.0b83f289.js"><link rel="prefetch" href="/Notebook/assets/js/136.99ddbb8e.js"><link rel="prefetch" href="/Notebook/assets/js/137.9ce91c54.js"><link rel="prefetch" href="/Notebook/assets/js/138.d1e6c7df.js"><link rel="prefetch" href="/Notebook/assets/js/139.9e57818f.js"><link rel="prefetch" href="/Notebook/assets/js/14.e6b1fa67.js"><link rel="prefetch" href="/Notebook/assets/js/140.b97a7c8d.js"><link rel="prefetch" href="/Notebook/assets/js/141.db0d7e4b.js"><link rel="prefetch" href="/Notebook/assets/js/142.c9528ba0.js"><link rel="prefetch" href="/Notebook/assets/js/143.5cd17cfd.js"><link rel="prefetch" href="/Notebook/assets/js/144.c8a3236c.js"><link rel="prefetch" href="/Notebook/assets/js/145.ce3e815f.js"><link rel="prefetch" href="/Notebook/assets/js/146.5d5fdead.js"><link rel="prefetch" href="/Notebook/assets/js/147.7ca58039.js"><link rel="prefetch" href="/Notebook/assets/js/148.0528dfc6.js"><link rel="prefetch" href="/Notebook/assets/js/149.e219ef4f.js"><link rel="prefetch" href="/Notebook/assets/js/15.ede5e660.js"><link rel="prefetch" href="/Notebook/assets/js/150.367684ad.js"><link rel="prefetch" href="/Notebook/assets/js/151.bb7cc840.js"><link rel="prefetch" href="/Notebook/assets/js/152.50e2b443.js"><link rel="prefetch" href="/Notebook/assets/js/153.5143d68e.js"><link rel="prefetch" href="/Notebook/assets/js/154.5f75c4d5.js"><link rel="prefetch" href="/Notebook/assets/js/155.2c97d8c7.js"><link rel="prefetch" href="/Notebook/assets/js/156.04597855.js"><link rel="prefetch" href="/Notebook/assets/js/157.27a46ea1.js"><link rel="prefetch" href="/Notebook/assets/js/158.b0e54b34.js"><link rel="prefetch" href="/Notebook/assets/js/159.980a2077.js"><link rel="prefetch" href="/Notebook/assets/js/16.7cea63af.js"><link rel="prefetch" href="/Notebook/assets/js/160.dd7c4dd5.js"><link rel="prefetch" href="/Notebook/assets/js/161.076ac5ad.js"><link rel="prefetch" href="/Notebook/assets/js/162.49697d65.js"><link rel="prefetch" href="/Notebook/assets/js/163.022e5acc.js"><link rel="prefetch" href="/Notebook/assets/js/164.8ceaf7a5.js"><link rel="prefetch" href="/Notebook/assets/js/165.d613540e.js"><link rel="prefetch" href="/Notebook/assets/js/166.c0af31ff.js"><link rel="prefetch" href="/Notebook/assets/js/167.e42b9f57.js"><link rel="prefetch" href="/Notebook/assets/js/168.fa026739.js"><link rel="prefetch" href="/Notebook/assets/js/169.1f7e3137.js"><link rel="prefetch" href="/Notebook/assets/js/17.b7ca32be.js"><link rel="prefetch" href="/Notebook/assets/js/170.c4c1402a.js"><link rel="prefetch" href="/Notebook/assets/js/171.d1075313.js"><link rel="prefetch" href="/Notebook/assets/js/172.31ae23b8.js"><link rel="prefetch" href="/Notebook/assets/js/173.283df959.js"><link rel="prefetch" href="/Notebook/assets/js/174.8a34b9ed.js"><link rel="prefetch" href="/Notebook/assets/js/175.3678f179.js"><link rel="prefetch" href="/Notebook/assets/js/176.c26a8292.js"><link rel="prefetch" href="/Notebook/assets/js/177.783e1466.js"><link rel="prefetch" href="/Notebook/assets/js/178.9fa7eae4.js"><link rel="prefetch" href="/Notebook/assets/js/179.44544c8c.js"><link rel="prefetch" href="/Notebook/assets/js/18.dbdceb5d.js"><link rel="prefetch" href="/Notebook/assets/js/180.15b47c99.js"><link rel="prefetch" href="/Notebook/assets/js/181.73b4c3aa.js"><link rel="prefetch" href="/Notebook/assets/js/182.6a5b17a2.js"><link rel="prefetch" href="/Notebook/assets/js/183.28ec67b1.js"><link rel="prefetch" href="/Notebook/assets/js/184.2cccbd70.js"><link rel="prefetch" href="/Notebook/assets/js/185.de7fec26.js"><link rel="prefetch" href="/Notebook/assets/js/186.0932e1a1.js"><link rel="prefetch" href="/Notebook/assets/js/187.8c1730fc.js"><link rel="prefetch" href="/Notebook/assets/js/188.300dd277.js"><link rel="prefetch" href="/Notebook/assets/js/189.a1bee58b.js"><link rel="prefetch" href="/Notebook/assets/js/19.3d59d024.js"><link rel="prefetch" href="/Notebook/assets/js/190.7663ddc6.js"><link rel="prefetch" href="/Notebook/assets/js/191.7c824181.js"><link rel="prefetch" href="/Notebook/assets/js/192.e85118bd.js"><link rel="prefetch" href="/Notebook/assets/js/193.e954b79c.js"><link rel="prefetch" href="/Notebook/assets/js/194.f4adcdbc.js"><link rel="prefetch" href="/Notebook/assets/js/195.62735b27.js"><link rel="prefetch" href="/Notebook/assets/js/196.e0fafeec.js"><link rel="prefetch" href="/Notebook/assets/js/197.07c5e539.js"><link rel="prefetch" href="/Notebook/assets/js/198.cd686b20.js"><link rel="prefetch" href="/Notebook/assets/js/199.d51b40b4.js"><link rel="prefetch" href="/Notebook/assets/js/2.fa311fa4.js"><link rel="prefetch" href="/Notebook/assets/js/20.b4b2d322.js"><link rel="prefetch" href="/Notebook/assets/js/200.e245b2cd.js"><link rel="prefetch" href="/Notebook/assets/js/201.bd88542b.js"><link rel="prefetch" href="/Notebook/assets/js/202.6eefc25c.js"><link rel="prefetch" href="/Notebook/assets/js/203.98180f0d.js"><link rel="prefetch" href="/Notebook/assets/js/204.cb560045.js"><link rel="prefetch" href="/Notebook/assets/js/205.db965c26.js"><link rel="prefetch" href="/Notebook/assets/js/206.f692627d.js"><link rel="prefetch" href="/Notebook/assets/js/207.885fb929.js"><link rel="prefetch" href="/Notebook/assets/js/208.cb1bebca.js"><link rel="prefetch" href="/Notebook/assets/js/209.7dac81a0.js"><link rel="prefetch" href="/Notebook/assets/js/21.4c9bb6e4.js"><link rel="prefetch" href="/Notebook/assets/js/210.21121b1f.js"><link rel="prefetch" href="/Notebook/assets/js/211.cfd188b5.js"><link rel="prefetch" href="/Notebook/assets/js/212.c691e30a.js"><link rel="prefetch" href="/Notebook/assets/js/213.1a9a1f8d.js"><link rel="prefetch" href="/Notebook/assets/js/214.8c871f29.js"><link rel="prefetch" href="/Notebook/assets/js/215.7dd76ed3.js"><link rel="prefetch" href="/Notebook/assets/js/216.b9c6e46d.js"><link rel="prefetch" href="/Notebook/assets/js/217.bbb09b50.js"><link rel="prefetch" href="/Notebook/assets/js/218.3c93e6af.js"><link rel="prefetch" href="/Notebook/assets/js/219.735de793.js"><link rel="prefetch" href="/Notebook/assets/js/22.6908c05f.js"><link rel="prefetch" href="/Notebook/assets/js/220.3531b68a.js"><link rel="prefetch" href="/Notebook/assets/js/221.220d5f13.js"><link rel="prefetch" href="/Notebook/assets/js/222.9d0535e5.js"><link rel="prefetch" href="/Notebook/assets/js/223.f870f2a0.js"><link rel="prefetch" href="/Notebook/assets/js/224.0b56afa6.js"><link rel="prefetch" href="/Notebook/assets/js/225.cc5b31fd.js"><link rel="prefetch" href="/Notebook/assets/js/226.f4ee0adc.js"><link rel="prefetch" href="/Notebook/assets/js/227.eb919eea.js"><link rel="prefetch" href="/Notebook/assets/js/228.6a28f264.js"><link rel="prefetch" href="/Notebook/assets/js/229.2a8bf537.js"><link rel="prefetch" href="/Notebook/assets/js/23.afd0f5c6.js"><link rel="prefetch" href="/Notebook/assets/js/230.a2f5121e.js"><link rel="prefetch" href="/Notebook/assets/js/231.b10cb770.js"><link rel="prefetch" href="/Notebook/assets/js/232.ae7ad32a.js"><link rel="prefetch" href="/Notebook/assets/js/233.cca18966.js"><link rel="prefetch" href="/Notebook/assets/js/234.f9dd9c73.js"><link rel="prefetch" href="/Notebook/assets/js/235.c9a4bfbe.js"><link rel="prefetch" href="/Notebook/assets/js/236.61c4fb4d.js"><link rel="prefetch" href="/Notebook/assets/js/237.fed9e8fe.js"><link rel="prefetch" href="/Notebook/assets/js/238.86670bd9.js"><link rel="prefetch" href="/Notebook/assets/js/239.9ec3d9e2.js"><link rel="prefetch" href="/Notebook/assets/js/24.c1da07f8.js"><link rel="prefetch" href="/Notebook/assets/js/240.355da7ac.js"><link rel="prefetch" href="/Notebook/assets/js/241.f3420570.js"><link rel="prefetch" href="/Notebook/assets/js/242.ba7e4bd1.js"><link rel="prefetch" href="/Notebook/assets/js/243.2a52effa.js"><link rel="prefetch" href="/Notebook/assets/js/244.7f4499d8.js"><link rel="prefetch" href="/Notebook/assets/js/245.8574f4ac.js"><link rel="prefetch" href="/Notebook/assets/js/246.9b36bc23.js"><link rel="prefetch" href="/Notebook/assets/js/247.107c7608.js"><link rel="prefetch" href="/Notebook/assets/js/248.d8d1aa96.js"><link rel="prefetch" href="/Notebook/assets/js/249.00f19ac8.js"><link rel="prefetch" href="/Notebook/assets/js/25.d24012cb.js"><link rel="prefetch" href="/Notebook/assets/js/250.9b97127c.js"><link rel="prefetch" href="/Notebook/assets/js/251.7c05b25d.js"><link rel="prefetch" href="/Notebook/assets/js/252.b3ee0f29.js"><link rel="prefetch" href="/Notebook/assets/js/253.aac3e92c.js"><link rel="prefetch" href="/Notebook/assets/js/254.694f77fc.js"><link rel="prefetch" href="/Notebook/assets/js/255.7fc65b86.js"><link rel="prefetch" href="/Notebook/assets/js/256.f559aa7a.js"><link rel="prefetch" href="/Notebook/assets/js/257.3855a8f5.js"><link rel="prefetch" href="/Notebook/assets/js/258.0236288d.js"><link rel="prefetch" href="/Notebook/assets/js/259.4a65ba3f.js"><link rel="prefetch" href="/Notebook/assets/js/26.7a74bf43.js"><link rel="prefetch" href="/Notebook/assets/js/260.e110d77b.js"><link rel="prefetch" href="/Notebook/assets/js/261.6ca5e50b.js"><link rel="prefetch" href="/Notebook/assets/js/262.974a7503.js"><link rel="prefetch" href="/Notebook/assets/js/263.b93c02d1.js"><link rel="prefetch" href="/Notebook/assets/js/264.7e9188c1.js"><link rel="prefetch" href="/Notebook/assets/js/265.f68b4748.js"><link rel="prefetch" href="/Notebook/assets/js/266.04a71924.js"><link rel="prefetch" href="/Notebook/assets/js/267.256e6833.js"><link rel="prefetch" href="/Notebook/assets/js/268.18b52093.js"><link rel="prefetch" href="/Notebook/assets/js/269.ddca242f.js"><link rel="prefetch" href="/Notebook/assets/js/27.4af13b47.js"><link rel="prefetch" href="/Notebook/assets/js/270.c63a6e91.js"><link rel="prefetch" href="/Notebook/assets/js/271.9d5de52b.js"><link rel="prefetch" href="/Notebook/assets/js/272.b3d8fe27.js"><link rel="prefetch" href="/Notebook/assets/js/273.aac68402.js"><link rel="prefetch" href="/Notebook/assets/js/274.8b89191a.js"><link rel="prefetch" href="/Notebook/assets/js/275.c748ef07.js"><link rel="prefetch" href="/Notebook/assets/js/276.477c27a9.js"><link rel="prefetch" href="/Notebook/assets/js/277.1084dbc6.js"><link rel="prefetch" href="/Notebook/assets/js/278.98e8be2a.js"><link rel="prefetch" href="/Notebook/assets/js/279.61378737.js"><link rel="prefetch" href="/Notebook/assets/js/28.1f5903ad.js"><link rel="prefetch" href="/Notebook/assets/js/280.c2fda5bf.js"><link rel="prefetch" href="/Notebook/assets/js/281.4497cf31.js"><link rel="prefetch" href="/Notebook/assets/js/282.6b02e04d.js"><link rel="prefetch" href="/Notebook/assets/js/283.c579b5f7.js"><link rel="prefetch" href="/Notebook/assets/js/284.25f19977.js"><link rel="prefetch" href="/Notebook/assets/js/285.1567c42d.js"><link rel="prefetch" href="/Notebook/assets/js/286.8729eefe.js"><link rel="prefetch" href="/Notebook/assets/js/287.5109124c.js"><link rel="prefetch" href="/Notebook/assets/js/288.aff2f2a1.js"><link rel="prefetch" href="/Notebook/assets/js/289.11ee7f93.js"><link rel="prefetch" href="/Notebook/assets/js/29.9750e313.js"><link rel="prefetch" href="/Notebook/assets/js/290.a080d505.js"><link rel="prefetch" href="/Notebook/assets/js/291.8a62b81f.js"><link rel="prefetch" href="/Notebook/assets/js/292.8f2b2816.js"><link rel="prefetch" href="/Notebook/assets/js/293.a6073f5d.js"><link rel="prefetch" href="/Notebook/assets/js/294.8036aeb4.js"><link rel="prefetch" href="/Notebook/assets/js/295.4aaf6175.js"><link rel="prefetch" href="/Notebook/assets/js/296.22622ba4.js"><link rel="prefetch" href="/Notebook/assets/js/297.598bfede.js"><link rel="prefetch" href="/Notebook/assets/js/298.68edb938.js"><link rel="prefetch" href="/Notebook/assets/js/299.1f0f84fe.js"><link rel="prefetch" href="/Notebook/assets/js/3.0cb2ce57.js"><link rel="prefetch" href="/Notebook/assets/js/30.5fc87000.js"><link rel="prefetch" href="/Notebook/assets/js/300.9c7600af.js"><link rel="prefetch" href="/Notebook/assets/js/301.0d95fc30.js"><link rel="prefetch" href="/Notebook/assets/js/302.b923baab.js"><link rel="prefetch" href="/Notebook/assets/js/303.d20079b9.js"><link rel="prefetch" href="/Notebook/assets/js/304.12a70192.js"><link rel="prefetch" href="/Notebook/assets/js/305.4ea4d8da.js"><link rel="prefetch" href="/Notebook/assets/js/306.282edebe.js"><link rel="prefetch" href="/Notebook/assets/js/307.3a37e321.js"><link rel="prefetch" href="/Notebook/assets/js/308.9221f97f.js"><link rel="prefetch" href="/Notebook/assets/js/309.c7c3ca1a.js"><link rel="prefetch" href="/Notebook/assets/js/31.18d6f54f.js"><link rel="prefetch" href="/Notebook/assets/js/310.5dde0eb7.js"><link rel="prefetch" href="/Notebook/assets/js/311.819aad83.js"><link rel="prefetch" href="/Notebook/assets/js/312.c2037cae.js"><link rel="prefetch" href="/Notebook/assets/js/313.52ee9f6c.js"><link rel="prefetch" href="/Notebook/assets/js/314.d0105766.js"><link rel="prefetch" href="/Notebook/assets/js/315.02d1beff.js"><link rel="prefetch" href="/Notebook/assets/js/316.69816787.js"><link rel="prefetch" href="/Notebook/assets/js/317.22d3b673.js"><link rel="prefetch" href="/Notebook/assets/js/318.483e3b5e.js"><link rel="prefetch" href="/Notebook/assets/js/319.bc984d80.js"><link rel="prefetch" href="/Notebook/assets/js/32.4ebe70c0.js"><link rel="prefetch" href="/Notebook/assets/js/320.d023db3c.js"><link rel="prefetch" href="/Notebook/assets/js/321.909f7332.js"><link rel="prefetch" href="/Notebook/assets/js/322.3b32a676.js"><link rel="prefetch" href="/Notebook/assets/js/323.9eb049fd.js"><link rel="prefetch" href="/Notebook/assets/js/324.5eae3717.js"><link rel="prefetch" href="/Notebook/assets/js/325.c9aa7e97.js"><link rel="prefetch" href="/Notebook/assets/js/326.2ec27286.js"><link rel="prefetch" href="/Notebook/assets/js/327.1096ac53.js"><link rel="prefetch" href="/Notebook/assets/js/328.17578c44.js"><link rel="prefetch" href="/Notebook/assets/js/329.f6f1b4fc.js"><link rel="prefetch" href="/Notebook/assets/js/33.4c170b35.js"><link rel="prefetch" href="/Notebook/assets/js/330.b84e8b18.js"><link rel="prefetch" href="/Notebook/assets/js/331.2ce71bd6.js"><link rel="prefetch" href="/Notebook/assets/js/332.d49f1076.js"><link rel="prefetch" href="/Notebook/assets/js/333.18846963.js"><link rel="prefetch" href="/Notebook/assets/js/334.07d784aa.js"><link rel="prefetch" href="/Notebook/assets/js/335.b2d18495.js"><link rel="prefetch" href="/Notebook/assets/js/336.27d6fdac.js"><link rel="prefetch" href="/Notebook/assets/js/337.e3b8a4d6.js"><link rel="prefetch" href="/Notebook/assets/js/338.4e17425d.js"><link rel="prefetch" href="/Notebook/assets/js/339.ca72b051.js"><link rel="prefetch" href="/Notebook/assets/js/34.4137a6d9.js"><link rel="prefetch" href="/Notebook/assets/js/340.a9c58e42.js"><link rel="prefetch" href="/Notebook/assets/js/341.015e17e5.js"><link rel="prefetch" href="/Notebook/assets/js/342.883cb2ad.js"><link rel="prefetch" href="/Notebook/assets/js/343.26e0511c.js"><link rel="prefetch" href="/Notebook/assets/js/344.5437611f.js"><link rel="prefetch" href="/Notebook/assets/js/345.26f6e7c4.js"><link rel="prefetch" href="/Notebook/assets/js/346.f7a3f23f.js"><link rel="prefetch" href="/Notebook/assets/js/347.27ccd6a8.js"><link rel="prefetch" href="/Notebook/assets/js/348.eff0a33d.js"><link rel="prefetch" href="/Notebook/assets/js/349.dd942ff5.js"><link rel="prefetch" href="/Notebook/assets/js/35.36b834f7.js"><link rel="prefetch" href="/Notebook/assets/js/350.9128eb0c.js"><link rel="prefetch" href="/Notebook/assets/js/351.e26fffba.js"><link rel="prefetch" href="/Notebook/assets/js/352.59cc3f38.js"><link rel="prefetch" href="/Notebook/assets/js/353.3ad59a15.js"><link rel="prefetch" href="/Notebook/assets/js/354.544a13c0.js"><link rel="prefetch" href="/Notebook/assets/js/355.d5f7255f.js"><link rel="prefetch" href="/Notebook/assets/js/356.7efdf2cd.js"><link rel="prefetch" href="/Notebook/assets/js/357.0b296e32.js"><link rel="prefetch" href="/Notebook/assets/js/358.a532d695.js"><link rel="prefetch" href="/Notebook/assets/js/359.01fd142f.js"><link rel="prefetch" href="/Notebook/assets/js/36.4ef6c0d1.js"><link rel="prefetch" href="/Notebook/assets/js/360.c71cb25e.js"><link rel="prefetch" href="/Notebook/assets/js/361.db70e72e.js"><link rel="prefetch" href="/Notebook/assets/js/362.670b7527.js"><link rel="prefetch" href="/Notebook/assets/js/363.ef0b3005.js"><link rel="prefetch" href="/Notebook/assets/js/364.63c1df56.js"><link rel="prefetch" href="/Notebook/assets/js/37.b0f3cb5d.js"><link rel="prefetch" href="/Notebook/assets/js/38.2ca6e078.js"><link rel="prefetch" href="/Notebook/assets/js/39.77206fea.js"><link rel="prefetch" href="/Notebook/assets/js/40.18d76f1c.js"><link rel="prefetch" href="/Notebook/assets/js/41.ed792d7a.js"><link rel="prefetch" href="/Notebook/assets/js/42.b983e72e.js"><link rel="prefetch" href="/Notebook/assets/js/43.3cdbe61c.js"><link rel="prefetch" href="/Notebook/assets/js/44.a4c1a462.js"><link rel="prefetch" href="/Notebook/assets/js/45.727fa84a.js"><link rel="prefetch" href="/Notebook/assets/js/46.a5665d33.js"><link rel="prefetch" href="/Notebook/assets/js/47.45efede1.js"><link rel="prefetch" href="/Notebook/assets/js/48.24e8e78b.js"><link rel="prefetch" href="/Notebook/assets/js/49.c426b444.js"><link rel="prefetch" href="/Notebook/assets/js/5.89a78b31.js"><link rel="prefetch" href="/Notebook/assets/js/50.41038e45.js"><link rel="prefetch" href="/Notebook/assets/js/51.3c34459c.js"><link rel="prefetch" href="/Notebook/assets/js/52.6df1c335.js"><link rel="prefetch" href="/Notebook/assets/js/53.69e41130.js"><link rel="prefetch" href="/Notebook/assets/js/54.591891ed.js"><link rel="prefetch" href="/Notebook/assets/js/55.d8d5bf6e.js"><link rel="prefetch" href="/Notebook/assets/js/56.c43a3733.js"><link rel="prefetch" href="/Notebook/assets/js/57.2c24f33c.js"><link rel="prefetch" href="/Notebook/assets/js/58.15a5e91b.js"><link rel="prefetch" href="/Notebook/assets/js/59.20cda08a.js"><link rel="prefetch" href="/Notebook/assets/js/6.f66bffc9.js"><link rel="prefetch" href="/Notebook/assets/js/60.beb8a99d.js"><link rel="prefetch" href="/Notebook/assets/js/61.2313bfd8.js"><link rel="prefetch" href="/Notebook/assets/js/62.ae93bded.js"><link rel="prefetch" href="/Notebook/assets/js/63.c0de4f2c.js"><link rel="prefetch" href="/Notebook/assets/js/64.b42cacb6.js"><link rel="prefetch" href="/Notebook/assets/js/65.719a31bb.js"><link rel="prefetch" href="/Notebook/assets/js/66.5c0128e7.js"><link rel="prefetch" href="/Notebook/assets/js/68.ac7fc4fa.js"><link rel="prefetch" href="/Notebook/assets/js/69.122426ed.js"><link rel="prefetch" href="/Notebook/assets/js/7.fbf1f9ec.js"><link rel="prefetch" href="/Notebook/assets/js/70.66e6b252.js"><link rel="prefetch" href="/Notebook/assets/js/71.28956fa1.js"><link rel="prefetch" href="/Notebook/assets/js/72.fcf3fb10.js"><link rel="prefetch" href="/Notebook/assets/js/73.947d80fa.js"><link rel="prefetch" href="/Notebook/assets/js/74.1d9d59de.js"><link rel="prefetch" href="/Notebook/assets/js/75.bbe5b314.js"><link rel="prefetch" href="/Notebook/assets/js/76.d018671b.js"><link rel="prefetch" href="/Notebook/assets/js/77.fca59f83.js"><link rel="prefetch" href="/Notebook/assets/js/78.4a545e59.js"><link rel="prefetch" href="/Notebook/assets/js/79.a039fbdf.js"><link rel="prefetch" href="/Notebook/assets/js/8.c69b9065.js"><link rel="prefetch" href="/Notebook/assets/js/80.d203faaa.js"><link rel="prefetch" href="/Notebook/assets/js/81.d193c9f3.js"><link rel="prefetch" href="/Notebook/assets/js/82.4675ade1.js"><link rel="prefetch" href="/Notebook/assets/js/83.ee538b4f.js"><link rel="prefetch" href="/Notebook/assets/js/84.8962589d.js"><link rel="prefetch" href="/Notebook/assets/js/85.76922906.js"><link rel="prefetch" href="/Notebook/assets/js/86.ec43215f.js"><link rel="prefetch" href="/Notebook/assets/js/87.46322abb.js"><link rel="prefetch" href="/Notebook/assets/js/88.5594f40a.js"><link rel="prefetch" href="/Notebook/assets/js/89.7f421583.js"><link rel="prefetch" href="/Notebook/assets/js/9.e0bdbf17.js"><link rel="prefetch" href="/Notebook/assets/js/90.853bb5b2.js"><link rel="prefetch" href="/Notebook/assets/js/91.fa605797.js"><link rel="prefetch" href="/Notebook/assets/js/92.f770f194.js"><link rel="prefetch" href="/Notebook/assets/js/93.1f9e6fb6.js"><link rel="prefetch" href="/Notebook/assets/js/94.2260cf7f.js"><link rel="prefetch" href="/Notebook/assets/js/95.6b1244de.js"><link rel="prefetch" href="/Notebook/assets/js/96.39617d63.js"><link rel="prefetch" href="/Notebook/assets/js/97.e4b8e984.js"><link rel="prefetch" href="/Notebook/assets/js/98.85e69ce3.js"><link rel="prefetch" href="/Notebook/assets/js/99.e2930b98.js">
    <link rel="stylesheet" href="/Notebook/assets/css/0.styles.b1f38863.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notebook/" class="home-link router-link-active"><!----> <span class="site-name">Naluduo's Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link router-link-active">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/blogs/" class="nav-link">
  📖文章合集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识体系" class="dropdown-title"><span class="title">前端知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/web-framework/" class="nav-link">
  🐂web 框架
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">
  🤔复盘
</a></li><li class="dropdown-item"><h4>
          ️️🧘算法修炼
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/understand-the-computer/" class="nav-link">
  理解计算机
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">
  算法分类
</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">
  数据库
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">
  ☁️运维
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">
  🚬测试
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">
  🌍GIS
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/tools/" class="nav-link">
  ️️🖱️工具
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">
  ️️🐛网络工程
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/game-development/" class="nav-link">
  ️️🎮游戏开发
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-language/" class="nav-link">
  🚶编程语言
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-paradigm/" class="nav-link">
  编程范式
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="/Notebook/math/" class="nav-link">
  𝜋数学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">
  🖌️UI
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://naluduo.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔗Github" class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/naluduo233" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jecyu github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/JS-Event-Loop/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 事件循环机制
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Web-Performance-Optimization/reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微谈 Web 前端性能优化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link router-link-active">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/blogs/" class="nav-link">
  📖文章合集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识体系" class="dropdown-title"><span class="title">前端知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/web-framework/" class="nav-link">
  🐂web 框架
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">
  🤔复盘
</a></li><li class="dropdown-item"><h4>
          ️️🧘算法修炼
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/understand-the-computer/" class="nav-link">
  理解计算机
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">
  算法分类
</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">
  数据库
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">
  ☁️运维
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">
  🚬测试
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">
  🌍GIS
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/tools/" class="nav-link">
  ️️🖱️工具
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">
  ️️🐛网络工程
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/game-development/" class="nav-link">
  ️️🎮游戏开发
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-language/" class="nav-link">
  🚶编程语言
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-paradigm/" class="nav-link">
  编程范式
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="/Notebook/math/" class="nav-link">
  𝜋数学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">
  🖌️UI
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://naluduo.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔗Github" class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/naluduo233" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jecyu github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/JS-Event-Loop/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 事件循环机制
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Web-Performance-Optimization/reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微谈 Web 前端性能优化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>日常记录</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/dailyRecord/" aria-current="page" class="sidebar-link">2021 年</a></li><li><a href="/Notebook/dailyRecord/2019.html" aria-current="page" class="active sidebar-link">2019</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#十二月" class="sidebar-link">十二月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#拖拽目标元素，让容器跟随滚动" class="sidebar-link">拖拽目标元素，让容器跟随滚动</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#文件流下载" class="sidebar-link">文件流下载</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#关于-vue-组件默认样式的写法" class="sidebar-link">关于 vue 组件默认样式的写法</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#十一月" class="sidebar-link">十一月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-当前页面刷新或跳转时提示保存" class="sidebar-link">vue 当前页面刷新或跳转时提示保存</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue项目通过配置文件实现主题切换" class="sidebar-link">Vue项目通过配置文件实现主题切换</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#十月" class="sidebar-link">十月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#前端导出-excel-文件" class="sidebar-link">前端导出 Excel 文件</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#什么时候使用-try-catch" class="sidebar-link">什么时候使用 Try Catch</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#如何处理垂直的高度自适应分配" class="sidebar-link">如何处理垂直的高度自适应分配</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#用户登录认证" class="sidebar-link">用户登录认证</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#使用-javascript-获取-base64-png-的像素颜色" class="sidebar-link">使用 JavaScript 获取 Base64 PNG 的像素颜色</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#计算容器顶部的高度" class="sidebar-link">计算容器顶部的高度</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#webpack-编译时与运行时" class="sidebar-link">webpack 编译时与运行时</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vuecli-添加环境变量" class="sidebar-link">vueCli 添加环境变量</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#部分打包" class="sidebar-link">部分打包</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#axios-取消请求" class="sidebar-link">axios 取消请求</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#九月" class="sidebar-link">九月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#如何重新加载一个页面" class="sidebar-link">如何重新加载一个页面</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vuecli3-新建项目，main-js-引入-iview-样式报错" class="sidebar-link">vuecli3 新建项目，main.js 引入 iview 样式报错</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#实现两个组件的互斥效果" class="sidebar-link">实现两个组件的互斥效果</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#iview-合并指定两个或多个单元格" class="sidebar-link">iview 合并指定两个或多个单元格</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#统计代码行数" class="sidebar-link">统计代码行数</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#iframe-跨域通信" class="sidebar-link">iframe 跨域通信</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#iframe-在更改了-src-之后对应的网页并未刷新" class="sidebar-link">iframe 在更改了 src 之后对应的网页并未刷新</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#表单锁定与解锁" class="sidebar-link">表单锁定与解锁</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#节点的属性" class="sidebar-link">节点的属性</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#css-伪类的应用" class="sidebar-link">CSS 伪类的应用</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#用-css-隐藏页面元素的-5-种方法" class="sidebar-link">用 CSS 隐藏页面元素的 5 种方法</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#正则表达式验证-过滤掉带有分析方式的名称" class="sidebar-link">正则表达式验证——过滤掉带有分析方式的名称</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vuepress-添加支持图片缩放" class="sidebar-link">vuepress 添加支持图片缩放</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#八月" class="sidebar-link">八月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#正则表达式的应用" class="sidebar-link">正则表达式的应用</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-动态增减组表单" class="sidebar-link">vue 动态增减组表单</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#双向绑定" class="sidebar-link">双向绑定</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#js-求出两个数组的交集" class="sidebar-link">JS 求出两个数组的交集</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-cli-请求本地的-json-文件" class="sidebar-link">Vue CLI 请求本地的 JSON 文件</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#在项目开发中，新安装一个包，应该放到-package-json-的-dependencies-还是-dependencies-上呢？" class="sidebar-link">在项目开发中，新安装一个包，应该放到 package.json 的 dependencies 还是 dependencies 上呢？</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#axios-不会对-url-中的功能性字符进行编码" class="sidebar-link">axios 不会对 URL 中的功能性字符进行编码</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vuecli-本地开发设置个区分明显的-favicon" class="sidebar-link">vueCli 本地开发设置个区分明显的 favicon</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#七月" class="sidebar-link">七月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-执行默认选中" class="sidebar-link">Vue 执行默认选中</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#async-await-使用" class="sidebar-link">async/await 使用</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#transform-对-fixed-的影响" class="sidebar-link">transform 对 fixed 的影响</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#flex-布局中使用-iview-的-table-表格的宽度会计算出错-导致很长的宽度" class="sidebar-link">flex 布局中使用 iview 的 table 表格的宽度会计算出错,导致很长的宽度</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#了解-babel" class="sidebar-link">了解 babel</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#三月" class="sidebar-link">三月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#js-修改对象的-key-值" class="sidebar-link">js 修改对象的 key 值</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#echarts-如何调整-legend-和图表的间距" class="sidebar-link">Echarts 如何调整 legend 和图表的间距</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#vue-父子组件数据传递" class="sidebar-link">vue 父子组件数据传递</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#attrs、-listeners、inheritattrs" class="sidebar-link">$attrs、$listeners、inheritAttrs</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#二月" class="sidebar-link">二月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#日期显示" class="sidebar-link">日期显示</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#设置-npm-源" class="sidebar-link">设置 npm 源</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#一月" class="sidebar-link">一月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#利用-coverage-检测可以懒加载的-modules" class="sidebar-link">利用 Coverage 检测可以懒加载的 modules</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#nginx-vue-history-爬坑" class="sidebar-link">nginx vue history 爬坑</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#前端请求错误后，重新请求" class="sidebar-link">前端请求错误后，重新请求</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#四月" class="sidebar-link">四月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#多维数组指定子项扁平化函数" class="sidebar-link">多维数组指定子项扁平化函数</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#服务器状态码错误原因" class="sidebar-link">服务器状态码错误原因</a></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#eslint-错误原因及解决方案" class="sidebar-link">ESlint 错误原因及解决方案</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#五月" class="sidebar-link">五月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#async-await-遇上-foreach" class="sidebar-link">async-await 遇上 forEach</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#六月" class="sidebar-link">六月</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/dailyRecord/2019.html#eslint-lint-staged-禁用老项目中的-es6" class="sidebar-link">eslint+lint-staged 禁用老项目中的 ES6</a></li></ul></li></ul></li><li><a href="/Notebook/dailyRecord/2018.html" class="sidebar-link">2018</a></li><li><a href="/Notebook/dailyRecord/friends.html" class="sidebar-link">友链</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>TechnologyDevelopment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/dailyRecord/TechnologyDevelopment.html" class="sidebar-link">技术决定发展</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2019"><a href="#_2019" class="header-anchor">#</a> 2019</h1> <h2 id="十二月"><a href="#十二月" class="header-anchor">#</a> 十二月</h2> <h3 id="拖拽目标元素，让容器跟随滚动"><a href="#拖拽目标元素，让容器跟随滚动" class="header-anchor">#</a> 拖拽目标元素，让容器跟随滚动</h3> <p>场景：在容器的元素过多时，需要滑动滚动条来查看内容。这种情况下，需要拖拽节点到不可见的位置时，就需要通过代码实现容器的滚动条位置跟随鼠标拖拽的位置进行处理。</p> <p>思路：通过动态获取拖拽原始目标的节点的 top 位置（通过 <code>getBoundingClientRect()</code> 获取），以及鼠标 drapover 事件的 eventY 视口坐标。拿到 eventY - top 的距离，然后赋值给容器的 scrollTo 值即可。</p> <p><img src="/Notebook/assets/img/scrollbyMouse-drap.1c9b4338.png" alt=""></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nrSearchTreeClientRect <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>nrSearchTree<span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>
    <span class="token comment">// this.nrSearchTreeScrollHeight =</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nrSearchTreeClientRect<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
      * 拖拽over
      * @param {Object} draggingNode vue 组件
      */</span>
    <span class="token function">handleNodeDragOver</span><span class="token punctuation">(</span><span class="token parameter">draggingNode<span class="token punctuation">,</span> dropNodeData<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> target <span class="token operator">=</span> draggingNode<span class="token punctuation">.</span>$el<span class="token punctuation">;</span> <span class="token comment">// 取得拖拽元素</span>
      <span class="token keyword">const</span> targetTop <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span> <span class="token comment">// 获得可视窗口的坐标top</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> top <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nrSearchTreeClientRect<span class="token punctuation">;</span>
      <span class="token keyword">const</span> distance <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">-</span> targetTop<span class="token punctuation">;</span> <span class="token comment">// 获取滚动移动的距离</span>
      <span class="token comment">// 确保鼠标位于指定区域内</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        event<span class="token punctuation">.</span>clientX <span class="token operator">&gt;</span> left <span class="token operator">&amp;&amp;</span>
        event<span class="token punctuation">.</span>clientX <span class="token operator">&lt;</span> right <span class="token operator">&amp;&amp;</span>
        event<span class="token punctuation">.</span>clientY <span class="token operator">&gt;</span> top
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> throttleCached <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lodash<span class="token punctuation">.</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 返回函数</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">playAnimate</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>nrSearchTree<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>scrollTop<span class="token punctuation">,</span>
            distance<span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>nrSearchTree<span class="token punctuation">.</span>$el
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">throttleCached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">playAnimate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">from</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> listCon</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      animate<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">,</span>
        to<span class="token punctuation">,</span>
        during<span class="token operator">:</span> <span class="token number">350</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&quot;easeOutQuad&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          listCon<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> v<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="文件流下载"><a href="#文件流下载" class="header-anchor">#</a> 文件流下载</h3> <h4 id="前端设置"><a href="#前端设置" class="header-anchor">#</a> 前端设置</h4> <p>前端在实用 ajax 请求时，设置 response.type = “blob” 即可拿到 javaScript 描述的流。之后采用 fileSaver 提供的 saveAs 处理即可</p> <h4 id="后端设置"><a href="#后端设置" class="header-anchor">#</a> 后端设置</h4> <p>后端通过返回一个字符流的文件，并且把文件信息放置到 Content-Composition 里，并设置允许浏览器端能够访问到这个头信息，必须要设置 Access-Control-Expose-Headers: Content-Disposition。否则前端的 response 里拿不到这个值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">requestForDownload</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
  <span class="token parameter">method<span class="token punctuation">,</span>
  url<span class="token punctuation">,</span>
  serviceName<span class="token punctuation">,</span>
  params<span class="token punctuation">,</span>
  headers</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> config <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">API</span><span class="token punctuation">,</span> <span class="token constant">API_FILE_DIR</span> <span class="token punctuation">}</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">BASEURL</span> <span class="token operator">=</span> <span class="token constant">API</span> <span class="token operator">+</span> <span class="token constant">API_FILE_DIR</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> dataKey <span class="token operator">=</span> method <span class="token operator">===</span> <span class="token string">&quot;get&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;params&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">;</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      baseURL<span class="token operator">:</span> <span class="token constant">BASEURL</span><span class="token punctuation">,</span>
      url<span class="token punctuation">,</span>
      method<span class="token operator">:</span> method<span class="token punctuation">,</span>
      <span class="token punctuation">[</span>dataKey<span class="token punctuation">]</span><span class="token operator">:</span> params<span class="token punctuation">,</span>
      headers<span class="token operator">:</span> headers<span class="token punctuation">,</span>
      responseType<span class="token operator">:</span> <span class="token string">&quot;blob&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> headers<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> type <span class="token operator">=</span> data<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 如果是json类型，则说明下载出错，需要提取错误信息</span>
          <span class="token keyword">const</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            iview<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          fileReader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex">/filename=(\S.*?\.\w+)$/</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> fileInfo <span class="token operator">=</span> headers<span class="token punctuation">[</span><span class="token string">&quot;content-disposition&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> filename <span class="token operator">=</span> fileInfo <span class="token operator">&amp;&amp;</span> fileInfo<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            blob<span class="token operator">:</span> data<span class="token punctuation">,</span>
            name<span class="token operator">:</span> filename <span class="token operator">?</span> <span class="token function">decodeURI</span><span class="token punctuation">(</span>filename<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;DistTemplate&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请求---</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>serviceName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">---接口失败</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="关于-vue-组件默认样式的写法"><a href="#关于-vue-组件默认样式的写法" class="header-anchor">#</a> 关于 vue 组件默认样式的写法</h3> <p>关于组件的默认样式写法，不记得是什么时候，默认新开一个组件时都设置了{ height：100% ， width：100% }，通常这样设定是为了布局上的自适应，为了满足让它填满父容器。例如嵌入一个 iframe 组件，为了让它随着父窗口自适应。但是遇到另外一种情况，如果这个容器里还有另一个并列的元素的时候，就会导致这个它们的高度和大于父亲的高度和，这个在设置自适应高度需要滚动条的时候很致命。这个时候只能把另外的元素拖离文档流，例如设置：position：absolute 等。
因此，一定要根据组件的特性以及要融入的父亲来设定。</p> <h4 id="关于-ui-布局"><a href="#关于-ui-布局" class="header-anchor">#</a> 关于 UI 布局</h4> <p>整体的页面布局的话，采用 iview 的 24 栏布局可以快速处理整个界面的响应式布局。</p> <p><img src="/Notebook/assets/img/iview-24-column.ba87c0e3.png" alt=""></p> <p>局部布局的话采用 flex 布局。其中高度自适应分配的样式，
建议使用flex 布局中的关键属性 <code>flex-grow: 1</code> 来解决，它能够自动分配完父容器的剩余高度。
对于需要容器自适应高度，但是又需要在容器的内容过长时，出现滚动条。因此需要显示设定容器的 px 高度，才能实现超过容器高度出现滚动。当然采用过 JS 计算也可以达到，但是也可以通过下面这种 CSS 的方式设置 <code>positon: absolute</code> 绝对定位。</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">.search-tree </span><span class="token punctuation">{</span> <span class="token comment">// 父容器</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token selector">.input-wrapper </span><span class="token punctuation">{</span> <span class="token comment">// 子元素1</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 15px 15px 0 15px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector"><span class="token parent important">&amp;</span>-content </span><span class="token punctuation">{</span> <span class="token comment">// 子元素2</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment">// 滚动</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="十一月"><a href="#十一月" class="header-anchor">#</a> 十一月</h2> <h3 id="vue-当前页面刷新或跳转时提示保存"><a href="#vue-当前页面刷新或跳转时提示保存" class="header-anchor">#</a> vue 当前页面刷新或跳转时提示保存</h3> <p>最近做的一个需求，用户上传本地数据后，在跳转页面时，本地数据的缓存会被清空，这里能不能在刷新或者切换的时候给个提示，“本地数据将会被清空，确定离开此页面？”这样的需求，跟用户填写一半的表单想离开一样。</p> <p>首先 <a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E7%BB%84%E4%BB%B6%E5%86%85%E7%9A%84%E5%AE%88%E5%8D%AB" target="_blank" rel="noopener noreferrer">Vue-Router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的路由钩子可以分为全局的，单个路由独享的以及组件级别的。当前的本地数据页面是一个组件，我们可以使用 vue 提供的组件内的路由守卫。组件级别路由分为三种：</p> <ul><li>beforeRouterEnter：当你成功获取并能进入路由（在渲染该组件的对应路由被 confirm 前）</li> <li>beforeRouteUpdate：在当前路由改变，但是该组件被复用时调用</li> <li>beforeRouteLeave：导航离开该组件的对应路由时调用。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">beforeRouterEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在渲染该组件的对应路由被 confirm 前调用</span>
    <span class="token comment">// 不！能！获取组件实例 `this`</span>
    <span class="token comment">// 因为当守卫执行前，组件实例还没被创建</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在当前路由改变，但是该组件被复用时调用</span>
    <span class="token comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span>
    <span class="token comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span>
   <span class="token comment">// 可以访问组件实例 `this` </span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 导航离开该组件的对应路由时调用</span>
    <span class="token comment">// 可以访问组件实例 `this`</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>通过 <code>beforeRouteLeave</code> 这个路由钩子，我们可以在用户要离开此页面时候进行提示了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 离开当前组件</span>
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>formType <span class="token operator">!==</span> <span class="token string">&quot;本地数据&quot;</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>localIndicators<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$Modal<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;离开页面&quot;</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token string">&quot;本地数据将会被清空，确定离开此页面？&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onOk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>但是，<code>beforeRouteLeave</code> 无法监听浏览器的刷新、页面关闭事件。因此，这里还有使用到 <code>window.onbeforeunload</code> 进行监听，就可以满足需求了。遗憾是，浏览器不提供入口自定义弹框的样式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;beforeunload&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleBeforeunload<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
  window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;beforeunload&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleBeforeunload<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token comment">// 浏览器刷新</span>
  <span class="token function">handleBeforeunload</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>formType <span class="token operator">!==</span> <span class="token string">&quot;本地数据&quot;</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>localIndicators<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">&quot;本地数据将会被清空，确定刷新此页面？&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;本地数据将会被清空，确定刷新此页面？&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>补充：对于Vue 组件内路由守卫，还可以完成像基础产品卷帘权限控制功能，这样就可以做到具体页面的具体工具的权限控制。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">toolBarControllBeforeEnter</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">toolBarControllBeforeLeave</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 思路：先拿到静态文件数据</span>
  <span class="token comment">// 遍历静态数据，用产品名称去匹配，得到该产品需要过滤掉用具</span>
  <span class="token comment">// 不在静态数据key类工具下的产品，说明不需要key类的工具</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">toolBarControllBeforeEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> controlToolbarInfo <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getControlMapToolbarInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 先拿到静态文件数据</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> productName <span class="token punctuation">}</span> <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">PRODUCTROUTERPARAMS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> noNeedToolbarArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>controlToolbarInfo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> productToolbar <span class="token operator">=</span> controlToolbarInfo<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>productToolbar<span class="token punctuation">[</span>productName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 需要过滤掉的工具类（比如：Swipe）</span>
        noNeedToolbarArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>noNeedToolbarArr<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> components <span class="token punctuation">}</span> <span class="token operator">=</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">;</span>
      <span class="token comment">// 拿到对应的工具栏组件</span>
      <span class="token keyword">const</span> toolBar <span class="token operator">=</span> components<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;ToolBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        toolBar <span class="token operator">&amp;&amp;</span>
        Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>toolBar<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        toolBar<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        toolBarInfoCache <span class="token operator">=</span> toolBar<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        toolBar<span class="token punctuation">.</span>children <span class="token operator">=</span> toolBar<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
          <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>noNeedToolbarArr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 过滤掉不需要的工具</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="vue项目通过配置文件实现主题切换"><a href="#vue项目通过配置文件实现主题切换" class="header-anchor">#</a> Vue项目通过配置文件实现主题切换</h3> <h2 id="十月"><a href="#十月" class="header-anchor">#</a> 十月</h2> <h3 id="前端导出-excel-文件"><a href="#前端导出-excel-文件" class="header-anchor">#</a> 前端导出 Excel 文件</h3> <p>起因：iview 的表格只能导出</p> <h3 id="什么时候使用-try-catch"><a href="#什么时候使用-try-catch" class="header-anchor">#</a> 什么时候使用 Try Catch</h3> <h3 id="如何处理垂直的高度自适应分配"><a href="#如何处理垂直的高度自适应分配" class="header-anchor">#</a> 如何处理垂直的高度自适应分配</h3> <p>项目中经常会遇到这样一种请求，几个 div 需要在垂直高度上分配完整个屏幕高度，整理下几种常用的方法。
Html 结构，首先 header 的高度是一定的。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol><li>通过 flex 布局</li></ol> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.header</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.main</span> <span class="token punctuation">{</span>
  <span class="token property">flex-grow</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>但是 <code>flex</code> 方法有风险，如果 header 的值是动态的话，那么 main 的高度也会跟着变化。</p> <ol><li>通过绝对定位</li></ol> <div class="language-css line-numbers-mode"><pre class="language-css"><code>   <span class="token selector">.container</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.header</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.main</span> <span class="token punctuation">{</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="3"><li>利用 calc 属性</li></ol> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.main</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>场景：垂直的三个模块，如何自适应分布浏览器的高度。
calc 需要知道准确的高度，比较麻烦。
4. JS 计算：还有会遇到一种情况就是，当该容器 container 的里面的内容总高度 contentHeight 超过整个屏幕剩余的高度时，才会让这个容器撑满剩余的屏幕，让它出现滚动条。这个时候就需要通过 JS 动态获取整个屏幕的高度，然后减去它上面的 header 元素的高度，得到当前的剩余高度进行赋值即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>剩余高度小于container 的内容高度<span class="token punctuation">)</span> 则（containerHeight <span class="token operator">=</span> 剩余高度remainHeight），从而出现滚动条来查看。满足要求。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="用户登录认证"><a href="#用户登录认证" class="header-anchor">#</a> 用户登录认证</h3> <p>公钥加密，私钥解密</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loginname<span class="token punctuation">,</span> loginpwd <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getRsaKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// rsa加密</span>
  <span class="token keyword">const</span> encrypt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSEncrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  encrypt<span class="token punctuation">.</span><span class="token function">setPublicKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> rsapwd <span class="token operator">=</span> encrypt<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>loginpwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loginRsa</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    loginName<span class="token operator">:</span> loginname<span class="token punctuation">,</span>
    loginPwd<span class="token operator">:</span> rsapwd
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> userCode<span class="token punctuation">,</span> ownRegion <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">SET_USER_INFO</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">SET_LOGIN_STATUS</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">SET_USER_SESSION</span><span class="token punctuation">,</span> userCode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// todo</span>
  <span class="token function">setSession</span><span class="token punctuation">(</span>userCode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// todo</span>
  <span class="token function">setUserRegionCode</span><span class="token punctuation">(</span>ownRegion<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setUserMapExtent</span><span class="token punctuation">(</span>ownRegion<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="使用-javascript-获取-base64-png-的像素颜色"><a href="#使用-javascript-获取-base64-png-的像素颜色" class="header-anchor">#</a> 使用 JavaScript 获取 Base64 PNG 的像素颜色</h3> <p>https://stackoverflow.com/questions/3528299/get-pixel-color-of-base64-png-using-javascript
原理：通过把图片画到 canvas 上，通过 <code>getImageData</code> 获得。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> image<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> image<span class="token punctuation">.</span>height<span class="token punctuation">;</span>

  <span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> imageData <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Now you can access pixel data from imageData.data.</span>
  <span class="token comment">// It's a one-dimensional array of RGBA values.</span>
  <span class="token comment">// Here's an example of how to get a pixel's color at (x,y)</span>
  <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> imageData<span class="token punctuation">.</span>width <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> red <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> green <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> blue <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> alpha <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="计算容器顶部的高度"><a href="#计算容器顶部的高度" class="header-anchor">#</a> 计算容器顶部的高度</h3> <p><code>Element.getBoundingClientRect()</code></p> <h3 id="webpack-编译时与运行时"><a href="#webpack-编译时与运行时" class="header-anchor">#</a> webpack 编译时与运行时</h3> <h4 id="传递意义上的编译时与运行时"><a href="#传递意义上的编译时与运行时" class="header-anchor">#</a> 传递意义上的编译时与运行时</h4> <p>编译时</p> <p>编译时顾名思义就是正在编译的时候，什么叫编译呢？就是编译器帮你把源代码翻译成机器能识别的代码。（**当然只是一般意义上这么说，实际上可能只是翻译成某个中间状态的语言。**比如 Java 只有 JVM 识别的字节码，React 的 JSX 代码经过 babel + react 编译。 ）编译时就是简单的作一些翻译工作，词法分析、语法分析之类的。</p> <p>运行时</p> <p>代码跑起来，被载入内存中，在内存中做些操作，做些判断。</p> <p>例子一：</p> <p>例如，常见的 C+和 C# 数组越界检查的例子，编译器编译时没有语法错误，但是运行时，数组越界了。</p> <h4 id="webpack-的编译时与运行时"><a href="#webpack-的编译时与运行时" class="header-anchor">#</a> webpack 的编译时与运行时</h4> <h3 id="vuecli-添加环境变量"><a href="#vuecli-添加环境变量" class="header-anchor">#</a> vueCli 添加环境变量</h3> <h4 id="导语"><a href="#导语" class="header-anchor">#</a> 导语</h4> <p>目的：根据不同环境下下部分打包出不同的系统。其中 <code>process.env</code> 是 webpack 自带的，<code>VUE_APP_</code>是 VueCli 下。</p> <h4 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h4> <p>Todo: webpack 配置打包编译，vuecli 到 webpack，yarn permission 等</p> <p>模式是 Vue CLI 项目中一个重要的概念。默认情况下，一个 Vue CLI 项目有三个模式。但是我们也可以自己新添加模式。一个模式可以包含多个环境变量。也就是说，每个模式都会将 <code>NODE_ENV</code> 的值设置为模式的名称。在项目根目录创建一个名为 <code>.env.partBuild</code> 的文件，那么在这个文件里声明过的变量就只会在 <code>partBuild</code> 模式下被载入。</p> <p><code>NODE_ENV</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;part-build&quot;: &quot;vue-cli-service build --mode partBuild&quot;,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="部分打包"><a href="#部分打包" class="header-anchor">#</a> 部分打包</h3> <p>第一步：根目录新建文件 <code>.env.partBuild</code>， 因为 Node_ENV 会被覆盖为 partBuild，因此需要重新设置为 production，这样就可以构建出生产环境应用，并且获得了<code>process.env.VUE_APP_PARTBUILD</code>的变量值。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production
VUE_APP_PARTBUILD <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第二步：<code>package.json</code>里设置<code>--mode</code>为<code>partBuild</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;partBuild&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode partBuild&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>第三步：在 JS 文件里进行使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_PERMISSION</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="开发环境下开启运维"><a href="#开发环境下开启运维" class="header-anchor">#</a> 开发环境下开启运维</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 *  判断是否为开发环境
 *  @returns Boolean
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">isDev</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * @description: 判断是否开启运维
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 开发环境根据 process.env 变量去判断</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_PERMISSION</span> <span class="token operator">===</span> <span class="token string">'true'</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 非开发环境才去根据 window.__USEPERMISSION__ 去判断是否开发</span>
    <span class="token keyword">return</span> window<span class="token punctuation">.</span>__USEPERMISSION__<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><a href="https://cli.vuejs.org/zh/guide/mode-and-env.html#%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">VueCli 环境变量和模式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="axios-取消请求"><a href="#axios-取消请求" class="header-anchor">#</a> axios 取消请求</h3> <p>取消 http 请求，axios 文档里提供了两种用法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 第一种：使用 CancelToken</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CancelToken<span class="token punctuation">,</span> isCanCel <span class="token punctuation">}</span> <span class="token operator">=</span> axios<span class="token punctuation">;</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> CancelToken<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    cancelToken<span class="token operator">:</span> source<span class="token punctuation">.</span>token
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">thrown</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isCancel</span><span class="token punctuation">(</span>thrown<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取 取消请求 的相关信息</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request canceled'</span><span class="token punctuation">,</span> thrown<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 处理其他异常</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>
  <span class="token string">'/user/12345'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'new name'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    cancelToken<span class="token operator">:</span> source<span class="token punctuation">.</span>token
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消请求。参数是可选的，参数传递一个取消请求的相关信息，在 catch 钩子函数里能获取到</span>
source<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">'Operation canceled by the user.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第二种：给构造函数 CancelToken 传递一个 executor 函数作为参数。这种方法的好处是，可以用同一个 cancel token 来取消多个请求</span>
<span class="token keyword">const</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">let</span> cancel<span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cancelToken<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">CancelToken</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">executor</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 参数 c 也是个函数</span>
    cancel <span class="token operator">=</span> c<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消请求，参数用法同上</span>
<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>项目中用法示例
在一个真实的项目中，一般都会对 axios 进行二次封装，针对请求、响应、状态码、code 等做处理。贴一个项目里常用的 request.js:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/auth'</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个 axios 实例，并改变默认配置</span>
<span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_API</span><span class="token punctuation">,</span> <span class="token comment">// api 的 base_url</span>
  timeout<span class="token operator">:</span> <span class="token number">5000</span> <span class="token comment">// request timeout</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 请求拦截</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something before request is sent</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 让每个请求携带token-- ['X-Token']为自定义key 请根据实际情况自行修改</span>
      config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'X-Token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with request error</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// for debug</span>
    Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 响应拦截</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">,</span>
  <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> service<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>对于某一个请求添加取消的功能，要在调用 api 时，加上 cancelToken 选项，使用时的示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// api.js</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'request'</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'api/users'</span><span class="token punctuation">,</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span>
      page
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>options
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// User.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CancelToken<span class="token punctuation">,</span> isCancel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getUsers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'api'</span>

<span class="token operator">...</span>

cancel<span class="token operator">:</span> <span class="token keyword">null</span>

<span class="token operator">...</span>

<span class="token function">toCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">'取消请求'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    cancelToken<span class="token operator">:</span>  <span class="token keyword">new</span> <span class="token class-name">CancelToken</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cancel <span class="token operator">=</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isCancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>以上，我们就可以顺顺利利地使用封装过的 axios，取消某一个请求了。其原理无非就是把 cancelToken 的配置项，在调用 api 时加上，然后就可以在业务代码取消特定请求了</p> <ul><li>参考资料：https://github.com/ohhoney1/notes/issues/3</li></ul> <h2 id="九月"><a href="#九月" class="header-anchor">#</a> 九月</h2> <h3 id="如何重新加载一个页面"><a href="#如何重新加载一个页面" class="header-anchor">#</a> 如何重新加载一个页面</h3> <p>JavaScript 1.0</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// creates a history entry</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span>
  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>JavaScript 1.1</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// does not create a history entry</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>JavaScript 1.2</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 从服务器加载所有的内容</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="vuecli3-新建项目，main-js-引入-iview-样式报错"><a href="#vuecli3-新建项目，main-js-引入-iview-样式报错" class="header-anchor">#</a> vuecli3 新建项目，main.js 引入 iview 样式报错</h3> <p>No PostCSS Config found
原因：应该是 vuecli3 对 postcss 没做处理。
解决：把 postcss.config 删除即可。</p> <h3 id="实现两个组件的互斥效果"><a href="#实现两个组件的互斥效果" class="header-anchor">#</a> 实现两个组件的互斥效果</h3> <h3 id="iview-合并指定两个或多个单元格"><a href="#iview-合并指定两个或多个单元格" class="header-anchor">#</a> iview 合并指定两个或多个单元格</h3> <h3 id="统计代码行数"><a href="#统计代码行数" class="header-anchor">#</a> 统计代码行数</h3> <h4 id="导语-2"><a href="#导语-2" class="header-anchor">#</a> 导语</h4> <p>最近需求问起了代码的统计行数是多少，主要是在申请软件著作权的时候，申请表格要求提交代码量。有两种方式统计，一是通过自定义脚本，二是通过第三方工具。</p> <h4 id="自定义脚本"><a href="#自定义脚本" class="header-anchor">#</a> 自定义脚本</h4> <p><strong>脚本 1:</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token string">&quot;(&quot;</span> -name <span class="token string">&quot;*.m&quot;</span> -or -name <span class="token string">&quot;*.mm&quot;</span> -or -name <span class="token string">&quot;*.cpp&quot;</span> -or -name <span class="token string">&quot;*.h&quot;</span> -or -name <span class="token string">&quot;*.rss&quot;</span> <span class="token string">&quot;)&quot;</span> -print <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">wc</span> -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>缺点：</p> <ul><li>需要自定义脚本：不同的编程语言，有不同的文件后缀名，需要自行配置；</li> <li>不能过滤掉注释；</li> <li>不能过滤掉空行</li></ul> <p><strong>脚本 2</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.m&quot;</span> -or -name <span class="token string">&quot;*.h&quot;</span> -or -name <span class="token string">&quot;*.xib&quot;</span> -or -name <span class="token string">&quot;*.c&quot;</span> <span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">grep</span> -v <span class="token string">&quot;^$&quot;</span><span class="token operator">|</span><span class="token function">wc</span> -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>改进：
去掉空行
<code>xargs grep -v &quot;^$&quot;</code></p> <p>大家都知道用 <code>wc -l</code> 命令进行代码行数统计，但是它会将代码中的注释、空行所占用的文本行都统计在内。如果想查看一个 tar 包或一个项目目录中“实际”的代码行数并且不愿意自己去写一个脚本来做此类工作，那么可以考虑使用 cloc。</p> <h4 id="cloc"><a href="#cloc" class="header-anchor">#</a> CLOC</h4> <p><a href="https://github.com/AlDanial/cloc" target="_blank" rel="noopener noreferrer">cloc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个 perl 脚本，它可以统计很多种编程语言的代码文件中的空行、注释以及实际的代 码行数。</p> <p>CLOC 是 Count Lines of Code 的意思，可以计算空行数、注释行数、各种语言的有效行数，还可以比较两个代码库在各种行数之间的不同。CLOC 是完全由 Perl 实现的，不依赖第三方组件，移植性强。</p> <p>下载安装 cloc.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> brew <span class="token function">install</span> cloc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看命令</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cloc <span class="token operator">--</span>help
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="拓展"><a href="#拓展" class="header-anchor">#</a> 拓展</h4> <ul><li><a href="https://segmentfault.com/a/1190000008542123" target="_blank" rel="noopener noreferrer">git 代码统计<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> —— 可以统计本地 Git 仓库中不同贡献者的代码行数的一些方法</li></ul> <h3 id="iframe-跨域通信"><a href="#iframe-跨域通信" class="header-anchor">#</a> iframe 跨域通信</h3> <ul><li>操作 iframe 的 dom 元素
contetnWindow</li> <li>操作 iframe 的父级元素</li></ul> <h4 id="前置知识"><a href="#前置知识" class="header-anchor">#</a> 前置知识</h4> <p>iframe 标签：</p> <p><code>window.postMessage</code> 的功能是允许浏览器跨域在两个窗口间发送数据信息。它不是浏览器跟服务器之间交互，而是在两个客户端之间通信。</p> <p><code>postMessage</code>是挂载在<code>window对象上</code>的，所以等<code>iframe</code>加载完毕后，用<code>iFrame.contentWindow</code>获取到<code>iframe</code>的<code>window</code>对象，然后调用<code>postMessage</code>方法，相当于给子页面发送了一条消息。我们只需要在子页面监听 message 事件，并且设置好回调函数即可</p> <blockquote><p>MDN 文档 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" target="_blank" rel="noopener noreferrer">window.postMessage
<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>技术难点：</p> <ul><li>iframe 重新设置 src 不会重新加载的问题</li> <li>iframe 所在的页面中通知父页面关闭模态框以及其他操作的问题（父子通信）</li></ul> <p>需要注意传递值时，要确保好<strong>对方准备接收数据</strong>的时候，再发送信息过去。那么如果处理呢？设置通信的关键词，必要的时候还可以加密处理。</p> <h4 id="返回数据"><a href="#返回数据" class="header-anchor">#</a> 返回数据</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @vuese
 * 接收dataeye的消息
 * @arg res event
 */</span>
<span class="token function">onmessage</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataeyeUrl<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 注意本地开发时的 origin</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validateMessage</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="iframe-在更改了-src-之后对应的网页并未刷新"><a href="#iframe-在更改了-src-之后对应的网页并未刷新" class="header-anchor">#</a> iframe 在更改了 src 之后对应的网页并未刷新</h3> <p>子系统是通过 iframe 嵌入到父系统的，父系统会通过子系统发送的消息 URL，会直接访问子系统。出现了 iframe 在更改了 src 之后对应的网页并不是对应的内容。于是看了网上的方案，在更改 <code>iframe src</code> 属性值之前加上这一句。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementId</span><span class="token punctuation">(</span><span class="token string">'iframeId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>window.Location.reload</code> 是重新加载当前需要的所有内容，<code>Location.reload()</code> 方法用来刷新当前页面。该方法只有一个参数，当值为 <code>true</code>时，将强制浏览器从服务器加载页面资源，当值为 <code>false</code> 或者未传参时，浏览器则可能从缓存中读取页面。引用 MDN <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Location/reload" target="_blank" rel="noopener noreferrer">Location.reload()
<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 无缓存刷新页面（但页面引用的资源还是可能使用缓存，</span>
<span class="token comment">// 大多数浏览器可以通过设置在打开开发者工具时禁用缓存实现无缓存需求）</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>与之对应的方法是 <code>window.Re</code></p> <p>通过上面的设置后，仍然不能实现效果。继续往下分析</p> <h4 id="解决"><a href="#解决" class="header-anchor">#</a> 解决</h4> <p>由于系统的技术是 Vue，通过排查问题后，让子系统是立即监听路由的变化，来加载对应的组件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>watch<span class="token operator">:</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      val <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pageId <span class="token operator">=</span> val<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pageId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>pageId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    immediate<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  pageId<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    immediate<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>并且在父系统上，把已有的 iframe 先移除，再重新加载，避免使用 <code>reload</code> 不生效的情况。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>dataeyeShow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 先关闭</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>enterdataeyeUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token constant">DATAEYE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">releasePage/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dataeyeShow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 后开启，重新渲染</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="iframe-有哪些缺点？"><a href="#iframe-有哪些缺点？" class="header-anchor">#</a> iframe 有哪些缺点？</h4> <ul><li>iframe 会阻塞主页面的 <code>onload</code> 事件</li> <li>搜索引擎的检索程序无法解读这种页面，不利于 SEO</li></ul> <p>可以通过 <code>JavaScript</code> 动态给 <code>iframe</code> 添加 <code>src</code> 属性值，这样就可以绕开上面两个问题。</p> <h3 id="表单锁定与解锁"><a href="#表单锁定与解锁" class="header-anchor">#</a> 表单锁定与解锁</h3> <h4 id="头脑风暴"><a href="#头脑风暴" class="header-anchor">#</a> 头脑风暴</h4> <ul><li>动态绑定指令。https://codeday.me/bug/20190406/896886.html</li></ul> <p>应用场景：</p> <p>复盘：todo: 看下具体的 iview 或者是 ant-design 都是怎么处理 disable 属性的。</p> <ul><li><p>使用 fieldSet 的属性，</p></li> <li><p>直接给组件添加<code>disabled</code>属性，但是这样的话，如果需要禁用多个组件的话，就很很麻烦了。因此，我们需要用指令来代替。</p></li> <li><p>改写现有的指令，提供颜色。</p></li> <li><p>自定义指令
动态判断。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">inserted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">.</span>disabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'system-model-disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 所在组件  vnode 更新时调用</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">.</span>disabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'system-model-disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'system-model-disabled'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'system-model-disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h4> <ul><li><a href="https://www.zhangxinxu.com/wordpress/2019/04/disabled-all-form-elements/" target="_blank" rel="noopener noreferrer">如何 disabled 禁用所有表单 input 输入框元素<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="节点的属性"><a href="#节点的属性" class="header-anchor">#</a> 节点的属性</h3> <ul><li>树</li> <li>列表</li> <li>是否可以取消选中</li></ul> <p>应用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token function">handleClickItem</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>selectedItem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onSelectedChange</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this.$emit(&quot;update:condition&quot;, this.topicList);</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;on-selected-change&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectedItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onSelectedChange</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 找到对应的项目</span>
    <span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>topicList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> val<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token string">&quot;selected&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span>node<span class="token punctuation">.</span>selected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 取得补集，均设置为 false</span>
    <span class="token keyword">const</span> elseNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>topicList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> val<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elseNodes <span class="token operator">&amp;&amp;</span> elseNodes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      elseNodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token string">&quot;selected&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 取得选中的项目</span>
    <span class="token keyword">const</span> selectedItem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>topicList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> val<span class="token punctuation">.</span>selected<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>selectedItem<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> selectedItem<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>在 vue 中，动态设置节点属性的话，要用<code>$set</code>才能保持响应式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>hasData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置禁用</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="css-伪类的应用"><a href="#css-伪类的应用" class="header-anchor">#</a> CSS 伪类的应用</h3> <p>激活的状态下，需要禁止 hover 的引用。</p> <h3 id="用-css-隐藏页面元素的-5-种方法"><a href="#用-css-隐藏页面元素的-5-种方法" class="header-anchor">#</a> 用 CSS 隐藏页面元素的 5 种方法</h3> <h4 id="导语-3"><a href="#导语-3" class="header-anchor">#</a> 导语</h4> <p>日常中，我们可能会遇到不少跨域通信的问题，其中一个可以实现跨域通信的方案是通过<code>postMessage iframe 跨域</code>来通信，但是我不希望<code>iframe</code>元素占用我的 CSS 布局，我想要视觉上隐藏它，但是不能影响它的正常功能如通信。用 CSS 隐藏页面元素有许多种方法，</p> <ul><li>opacity 设为 0</li> <li>visibility 设置 hidden。</li> <li>将 display 设置 none</li> <li>将 position 设为 absolute</li></ul> <h4 id="opacity"><a href="#opacity" class="header-anchor">#</a> Opacity</h4> <p><code>opactiy</code> 属性的意思时设置一个元素的透明度。它不是为改变元素的边界框（bounding box）而设计的。这意味着将 opacity 设为 0 只能从视觉上隐藏元素。而元素本身依然占据自己的位置并对网页的布局起作用。它也将响应用户的交互。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">.</span>hide <span class="token punctuation">{</span>
  opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>除了用来隐藏元素外，我们可以用 <code>opacity</code> 实现一些体验比较好的动画。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.o-hide</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all ease 0.8s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.o-hide:hover</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="visibility"><a href="#visibility" class="header-anchor">#</a> Visibility</h4> <p>第二个属性 <code>visibility</code> ，将它的值设为 <code>hidden</code> 将隐藏我们的元素。跟 <code>opacity</code> 属性一样，被隐藏的元素依然会对我们的网页布局起作用。与 <code>opacity</code> 不同的是它不会响应任何用户交互。</p> <p>注意：如果一个元素的 <code>visibility</code> 被设置为 <code>hidden</code>，同时想要显示它的某个子孙元素 A，只要将这个 A 的 <code>visibility</code> 显式设为 <code>visible</code> 即可。</p> <h4 id="display"><a href="#display" class="header-anchor">#</a> Display</h4> <p><code>display</code> 属性真正隐藏元素，将 <code>display</code> 属性设为 <code>none</code> 确保元素不可见并且连盒模型也不生成，使用这个属性被隐藏的元素不占据任何空间，而且任何对该元素直接的用户交互操作都不生效。为这个属性添加过度动画是无效的，它的任何不同状态值的之间的切换总是会立即生效。</p> <p>注意的是，通过 DOM 依然可以访问到这个元素。Vue 中的 <code>v-show</code> 指令即是操作了这个属性。<code>v-if</code> 则完全不渲染这个 dom 元素。</p> <h4 id="position"><a href="#position" class="header-anchor">#</a> Position</h4> <p>假设有一个元素你想要与它交互，但是你又不想让它影响你的网页布局，没有合适的属性可以处理这种情况（opacity 和 visibility 影响布局， display 不影响布局但又无法直接交互。在这种情况下，你只能考虑将元素移出可视区域。这个办法既不会影响布局，有能让元素保持可以操作。下面是采用这种办法的 CSS：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.hide</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -9999px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> -9999px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>用 DOM 模拟复选框和单选按钮，但用这个方法隐藏真正的 checkbox 和 radio 元素来“接收”焦点切换.</p> <h4 id="clip-path"><a href="#clip-path" class="header-anchor">#</a> Clip-path</h4> <p>隐藏元素的另一种方法是通过剪裁它们来实现。在以前，这可以通过 clip 属性来实现，但是这个属性被废弃了，换成一个更好的属性叫做 clip-path。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.hide</span> <span class="token punctuation">{</span>
  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">polygon</span><span class="token punctuation">(</span>0px 0px<span class="token punctuation">,</span> 0px 0px<span class="token punctuation">,</span> 0px 0px<span class="token punctuation">,</span> 0px 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="参考资料-2"><a href="#参考资料-2" class="header-anchor">#</a> 参考资料</h4> <ul><li><a href="https://75team.com/post/five-ways-to-hide-elements-in-css.html" target="_blank" rel="noopener noreferrer">用 CSS 隐藏页面元素的 5 种方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="正则表达式验证-过滤掉带有分析方式的名称"><a href="#正则表达式验证-过滤掉带有分析方式的名称" class="header-anchor">#</a> 正则表达式验证——过滤掉带有分析方式的名称</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>indicatorNames <span class="token operator">=</span> indicatorNames<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token regex">/增长率|增长比|增减量/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="vuepress-添加支持图片缩放"><a href="#vuepress-添加支持图片缩放" class="header-anchor">#</a> vuepress 添加支持图片缩放</h3> <p>使用 vuepress 过程中，难免需要引入图片解释。有时候图片过大，小图会很不清晰，这时候就很有必要支持图片可缩放。vuepress 官方提供了插件
<code>vuepress-plugin-zooming</code>。注意如果： vuepress 版本小于 1.0 过低不支持，应该升级 vuepress 版本，删除旧的版本，重新安装。</p> <h4 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> vuepress-plugin-zooming
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h4> <p>在配置文件中引入<code>vuepress-plugin-zooming</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>esxports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'vuepress-plugin-zooming'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 支持点击缩放的图片元素的选择器</span>
      selector<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>
      <span class="token comment">// 进入一个页面后，经过一定延迟后使页面中的图片支持缩放</span>
      delay<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>

      <span class="token comment">// medium-zoom 的 options</span>
      <span class="token comment">// 默认值: {}</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        bgColor<span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">,</span>
        zIndex<span class="token operator">:</span> <span class="token number">10000</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h4> <ul><li><a href="https://vuepress.github.io/zh/plugins/nprogress/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">VuePress 社区<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="八月"><a href="#八月" class="header-anchor">#</a> 八月</h2> <h3 id="正则表达式的应用"><a href="#正则表达式的应用" class="header-anchor">#</a> 正则表达式的应用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Selector containing <span class="token function">string</span> <span class="token punctuation">(</span><span class="token keyword">case</span><span class="token operator">-</span>sensitive<span class="token punctuation">)</span>

<span class="token comment">// jQuery</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;selector:contains('text')&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Native</span>
<span class="token keyword">function</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> elements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">RegExp</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>检测文件时，跑 lint，从多个文件进行处理。
（场景：检测是否带有 es6 语法导致创建微件错误，低版本浏览器）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yarn lint widgets<span class="token comment">/**/</span>Widget<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="vue-动态增减组表单"><a href="#vue-动态增减组表单" class="header-anchor">#</a> vue 动态增减组表单</h3> <p>输入数据，回收数据。
多个弹框带来的问题。</p> <h4 id="导语-4"><a href="#导语-4" class="header-anchor">#</a> 导语</h4> <p>要实现这样的一个需求，渲染多个组的表单，每组包含相同的表单控件，需要对表单进行双向绑定，之所以要绑定是因为要实现历史的条件的恢复，也就是默认的选中功能。下面通过两个业务场景来阐述。</p> <p>抽象：输入 ➡️ 输出
对应：存入以及取出</p> <h3 id="双向绑定"><a href="#双向绑定" class="header-anchor">#</a> 双向绑定</h3> <p>是否用 iview 等第三方组件</p> <h4 id="实现表格里存取表单的数据"><a href="#实现表格里存取表单的数据" class="header-anchor">#</a> 实现表格里存取表单的数据</h4> <p>问题：一开始没有绑定唯一的 key 时，会出现这样的情况。选择一个下拉框时，其他下拉框的值也被同步设定了，因为它们的 key 值相同。</p> <p>解决方案一：动态生成每个下拉框需要的 key 值，然后通过 v-model 进行双向绑定，存到父组件的一个对象 selectedRule 里，当前一个组件几十个一个 key 不会出现页面卡顿的情况，如果超过几百个的话可能会有操作延迟的情况。</p> <p>解决方案二：不用 v-model 绑定。</p> <h4 id="动态添加组控件表单"><a href="#动态添加组控件表单" class="header-anchor">#</a> 动态添加组控件表单</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token function">handleFormModAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> modules<span class="token punctuation">,</span> module <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> newModule <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过深拷贝 copy 来避免相同 key 名称 的关联</span>
      <span class="token comment">// modules.push(module);  key 相同会导致选择问题</span>
      modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div> <h3 id="js-求出两个数组的交集"><a href="#js-求出两个数组的交集" class="header-anchor">#</a> JS 求出两个数组的交集</h3> <h4 id="导语-5"><a href="#导语-5" class="header-anchor">#</a> 导语</h4> <p>需要针对指标项进行分类，后台把所有的指标项都返回，数据格式为数组形式，数组里包含指标对象，分类文件通过前端 JSON 配置。因此在渲染的时候（这里我最终渲染的 UI 为树），需要求它们的交集，也就是抽象成为求两个数组的交集。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 获取的信息</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">'耕地面积'</span><span class="token punctuation">,</span>
    dims<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">'常住人口'</span><span class="token punctuation">,</span>
    dims<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 配置文件</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'分类一'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'耕地面积'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'分类二'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'常住人口'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 目标输出</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'分类一'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'耕地面积'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'分类二'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'常住人口'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h4 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h4> <p>一开始考虑用原生 JS 这样实现，但是发现不行，因为我的需求是希望通过比对数组里的对象某个属性，下面这种方式既无法比较对象，也无法比较到对象里面的值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> intersection <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>由于业务的关系，先使用了 lodash 提供了这个 api，传入两个数组以及它们共同的属性即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">intersectionBy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>具体业务实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>indexDataCategory<span class="token punctuation">,</span> indicators<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchIndexDataCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchIndicators</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得分类后的指标项</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 取出 value 对象的 title/id 作为 key 对比</span>
indexDataCategory<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>title <span class="token operator">=</span> item<span class="token punctuation">.</span>label<span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lodash<span class="token punctuation">.</span><span class="token function">intersectionBy</span><span class="token punctuation">(</span>indicators<span class="token punctuation">,</span> item<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="lodash-的实现原理"><a href="#lodash-的实现原理" class="header-anchor">#</a> lodash 的实现原理</h4> <p>当然，我们不会满足于仅仅实现效果，接下里我们看看 lodash 的实现原理。
待补充。</p> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h4> <h3 id="vue-cli-请求本地的-json-文件"><a href="#vue-cli-请求本地的-json-文件" class="header-anchor">#</a> Vue CLI 请求本地的 JSON 文件</h3> <p>有些时候，需要在前端配置 JSON 文件，通常是把静态文件放到本地项目的 static 文件夹下。我们可以通过使用 axios 进行请求，具体如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">fetchIndustryApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
      <span class="token string">&quot;static/mockdata/FZBZ_JSON/ai_analysis_indexData_industryApplication.json&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>industryApplications <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="在项目开发中，新安装一个包，应该放到-package-json-的-dependencies-还是-dependencies-上呢？"><a href="#在项目开发中，新安装一个包，应该放到-package-json-的-dependencies-还是-dependencies-上呢？" class="header-anchor">#</a> 在项目开发中，新安装一个包，应该放到 package.json 的 dependencies 还是 dependencies 上呢？</h3> <p>结论：其实放到哪里都没关系，当我们 <code>npm install</code> 的时候两种包都会下载。但是如果将 NODE_ENV 设置为 produciton 就只会安装 dependencies，这样在持续集成的时候，进行自动化部署的时候就会花更少的时间。(但是如果要在线上跑测试的话，就需要 npm install 安装所有依赖。因为测试框架 Jest 安装在开发依赖对象里。）
这里当然我们也可以使用下面的命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>  - -prod<span class="token punctuation">[</span>uction<span class="token punctuation">]</span> 安装 dependencies 或 <span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production <span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> <span class="token function">install</span>  - -dev<span class="token punctuation">[</span>elopment<span class="token punctuation">]</span> 安装 devDependencies
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这里是社区的建议：</p> <ul><li>dependencies
<ul><li>框架：React，AngularJS，Vue.js</li> <li>工具库：lodash</li></ul></li> <li>devDependencies
<ul><li>测试框架：Jest，Mocha，Jasmine</li> <li>格式化工具：ESLint，Prettier</li> <li>构建工具、预处理器：webpack，Babel（因为生产环境的代码已经被转换和压缩过了。）</li></ul></li></ul> <h3 id="axios-不会对-url-中的功能性字符进行编码"><a href="#axios-不会对-url-中的功能性字符进行编码" class="header-anchor">#</a> axios 不会对 URL 中的功能性字符进行编码</h3> <h4 id="导语-6"><a href="#导语-6" class="header-anchor">#</a> 导语</h4> <p>在使用 axios 的 get 请求参数出现了错误。
<code>http://10.10.67.67/dgp-server-web-nr/rest/pas/v1/naturalRes/indicator/dimension/date?ids[]=500565</code></p> <p>在 axios 中的 GET 基本使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>axios
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token constant">ID</span><span class="token operator">:</span> <span class="token number">12345</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// always executed</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这里是对 GET 进行了一个此封装。</p> <p>实际中的调用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// xxxx/module.js 模块封装的函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">GET</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/plugins/axios'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getCityByIndicators</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">GET</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rest/pas/v1/naturalRes/indicator/dimension/city</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token string">'根据指标获取以行政区排序的城市数据'</span><span class="token punctuation">,</span>
    params
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在实际的 Vue 组件中进行请求</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// xxx.vue</span>
<span class="token keyword">async</span> <span class="token function">getCityRegionData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;ids[]&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>itemData<span class="token punctuation">.</span>indicatorIds<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> cityRegionData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCityByIndicators</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cityRegionData <span class="token operator">=</span> cityRegionData<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>经过排查后，发现是 axios 中会对 get 请求的整个 url 进行 encodeURI，导致有些 get 方法不能传 []。</p> <h4 id="url-包含特殊字符"><a href="#url-包含特殊字符" class="header-anchor">#</a> URL 包含特殊字符</h4> <p>在请求中如果 url 包含特殊字符的话，可能导接口接收参数失败，所以前端需要对特殊自负进行 encode，方法有两种：</p> <ul><li>encodeURI()</li></ul> <p>对整个 url 进行编码，会避开 url 中的功能性字符，例如，&amp;?[]</p> <p>编码前：http://10.10.67.67:8080/api/chain/basic/users?params=+[</p> <p>编码后：http://10.10.67.67:8080/api/chain/basic/users?params=+%5B</p> <ul><li>encodeURIComponent()</li></ul> <p>对某个参数进行编码，会编码所有特殊字符</p> <p>编码前：http://10.10.67.67:8080/api/chain/basic/users?params=+[
编码后：http://10.10.67.67:8080/api/chain/basic/users?params=%2B%5B</p> <h4 id="针对对象形式的请求"><a href="#针对对象形式的请求" class="header-anchor">#</a> 针对对象形式的请求</h4> <h4 id="解决-2"><a href="#解决-2" class="header-anchor">#</a> 解决</h4> <p>通过以上分析可知，我们需要在 axios 中对 get 方法进行处理，可以在请求拦截器中对 get 方法进行单独处理，避开 axios 的 encodeURI，注意的是参数 针对 key 和 value 都需要进行 encodeURIComponent 编码。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">interceptors</span><span class="token punctuation">(</span><span class="token parameter">instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 请求拦截</span>
  instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 处理 axios 不会对 url 中的功能进行编码</span>
      <span class="token keyword">let</span> url <span class="token operator">=</span> config<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
      <span class="token comment">// 针对 get 参数编码</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'get'</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        url <span class="token operator">+=</span><span class="token string">'?'</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          url <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>
            config<span class="token punctuation">.</span>params<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
          <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span>
        url <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> url<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 清空</span>
      <span class="token punctuation">}</span>
      config<span class="token punctuation">.</span>url <span class="token operator">=</span> url<span class="token punctuation">;</span>
      <span class="token keyword">return</span> config<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h4> <p>虽然我们在实际项目中，前后端请求遵循 restful 风格，但是遇到老项目时，后端的接口不能动的情况下，就需要改动前端代码的 axios 代码了。</p> <h3 id="vuecli-本地开发设置个区分明显的-favicon"><a href="#vuecli-本地开发设置个区分明显的-favicon" class="header-anchor">#</a> vueCli 本地开发设置个区分明显的 favicon</h3> <ul><li>掘金文章：<a href="https://juejin.im/post/5d61566c5188251e69336f3b" target="_blank" rel="noopener noreferrer">vueCli 本地开发设置个区分明显的 favicon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="七月"><a href="#七月" class="header-anchor">#</a> 七月</h2> <h3 id="vue-执行默认选中"><a href="#vue-执行默认选中" class="header-anchor">#</a> Vue 执行默认选中</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里执行初始化数据获取</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">/*xxx*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>panelData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//  ....</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 默认选中第一项, 默认选中第一项，nextTick 等待 pageData 拿到数据，渲染 dom 后更新完毕</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>panelData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSelectList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>panelData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">checkIsSelected</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>defaultSelectedItems<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span>name <span class="token operator">===</span> data<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token string">'isSelected'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="async-await-使用"><a href="#async-await-使用" class="header-anchor">#</a> async/await 使用</h3> <h4 id="捕获错误"><a href="#捕获错误" class="header-anchor">#</a> 捕获错误</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncAwaitTryCatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Api</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> friends <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">getFriend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">throwError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error was not thrown'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> photo <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">getPhoto</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async/await'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> photo <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="组合"><a href="#组合" class="header-anchor">#</a> 组合</h4> <ul><li>调用 async 函数作为一个 promise 对象来返回数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Api</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> friends<span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">getFriends</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token keyword">const</span> photo <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">getPhoto</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>user<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> photo <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">promiseUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> user<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> photo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promiseUserInfo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> photo <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 或者继续使用 async/await 语法</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">awaitUserInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> photo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'awaitUserInfo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> photo <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>检索前十个用户的所有数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getLotsOfUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>users<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    users<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getLotsOfUserData'</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>并发请求</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getLotsOfUserDataFaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userPromises <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>userPromises<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getLotsOfUserDataFaster'</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="transform-对-fixed-的影响"><a href="#transform-对-fixed-的影响" class="header-anchor">#</a> transform 对 fixed 的影响</h3> <ul><li>需求：需要对 iview 的模态框的样式进行自定义覆盖，因此就是 transfer:false 把 Modal 渲染到父组件内。此时会出现问题。</li> <li>症状：使用了 iview Modal 组件时，如果设置了 transfer: false 属性时，有时候会出现无法打开 Modal 框的现象，原因可能在于父元素设置了
transform 属性。因此</li> <li>原因：应用了 transform 属性的元素会导致该元素形成一个新的包含块，然后其后代元素如果有 fixed 定位的属性，那么其元素将会以该父元素作为包含块。</li> <li>分析：iview 使用了 transfer-dom 指令来解决上面的问题，把 modal 移动到 body 下面。</li> <li>解决：因此如果需要自定义覆盖 modal 的样式，又不能渲染到父组件内，要想避免污染全局样式，此时建议通过类名去限制作用域。</li></ul> <p>测试样例</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 900px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Modal</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ModalTest.isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:transfer</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Modal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Modal</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="flex-布局中使用-iview-的-table-表格的宽度会计算出错-导致很长的宽度"><a href="#flex-布局中使用-iview-的-table-表格的宽度会计算出错-导致很长的宽度" class="header-anchor">#</a> flex 布局中使用 iview 的 table 表格的宽度会计算出错,导致很长的宽度</h3> <p>场景：两边固定，中间自适应</p> <ul><li>原因：设置了 flex-grow 元素的子级宽度问题</li> <li>解决：给该子元素设置 <code>overflow: auto;</code> 或 <code>width: 0;</code></li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.left</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token comment">/* flex: 0 0 300px; */</span>
  <span class="token property">flex-shrink</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> chocolate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.right</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">flex-shrink</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token comment">/* flex: 0 0 200px; */</span>
  <span class="token property">background</span><span class="token punctuation">:</span> cadetblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token property">flex-grow</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> hotpink<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="了解-babel"><a href="#了解-babel" class="header-anchor">#</a> 了解 babel</h3> <ol><li>babel-loader: 负责 es6 语法转化</li> <li>babel-preset-env: 包含 es6、7 等版本的语法转化规则</li> <li>babel-polyfill: es6 内置方法和函数转化垫片</li> <li>babel-plugin-transform-runtime: 避免 polyfill 污染全局变量
需要注意的是, babel-loader 和 babel-polyfill。前者负责语法转化，比如：箭头函数；后者负责内置方法和函数，比如：new Set()。</li></ol> <h4 id="babel"><a href="#babel" class="header-anchor">#</a> babel</h4> <p>Babel 什么都不做，它的行为就像 const Babel = code =&gt; code;通过解析代码，然后再次生成相同的代码。您将需要为 Babel 添加一些插件来执行诸如置换 es6、JSX 之类的操作</p> <h4 id="babel-core"><a href="#babel-core" class="header-anchor">#</a> babel-core</h4> <p>如果你想在你的真实项目中使用 babel，你需要安装 babel 但是
没有 <code>babel</code> 包可用。</p> <p>babel 将它分成两个独立的包：<code>babel-cli</code>和<code>babel-core</code> <strong>babel-cli</strong>：可用于从命令行编译文件。
<strong>babel-core</strong>：如果你想使用 Node API，你可以安装<code>babel-core</code>
，与“babel-cli”相同，除非您在应用程序内以编程方式使用它。</p> <p>在生产之前使用<code>babel-cli</code>或<code>babel-core</code>编译文件。</p> <h4 id="preset-vs-plugin"><a href="#preset-vs-plugin" class="header-anchor">#</a> preset vs plugin</h4> <p>我们可以使用<code>babel插件(es2015)</code>一次添加一个特性(es6,JSX)，或者我们可以使用<code>babel预置</code>来包含特定年份的所有特性(es6)。预置使设置更容易。</p> <h4 id="babel-preset-es2015"><a href="#babel-preset-es2015" class="header-anchor">#</a> babel-preset-es2015</h4> <p><code>babel-preset-env</code>支持 es2015 特性，并取代了 es2015、es2016、es2017 和最新版本。因此，使用<code>babel-preset-env</code>，它的行为与<code>babel-preset-latest</code>完全相同(或者将 babel-preset-es2015、babel-preset-es2016 和 babel-preset-es2017 放在一起)。</p> <h4 id="babel-preset-react"><a href="#babel-preset-react" class="header-anchor">#</a> babel-preset-react</h4> <p>将<code>JSX</code>转换为<code>createElement</code>调用，如将<code>react</code>纯类转换为函数，并删除<code>prop</code>类型。</p> <h4 id="babel-polyfill"><a href="#babel-polyfill" class="header-anchor">#</a> babel-polyfill</h4> <p>没有<code>babel-polyfill</code>, babel 只允许您使用箭头函数、析构、默认参数和 ES6 中引入的其他特定于语法的特性。新的 ES6 内置组件(如 Set、Map 和 Promise)必须是 polyfill，以包含应用程序入口点顶部需要的 polyfill。</p> <h4 id="babel-loader"><a href="#babel-loader" class="header-anchor">#</a> babel-loader</h4> <p>你理解了 babel-core，babel-cli，以及为什么需要预设，插件，现在
你每次都是从<code>babel-cli</code>逐个文件地编译 ES6 到 ES5。
要摆脱这个，你需要捆绑任务<code>/ js</code>文件。 因此你需要用<code>WebPack</code>。</p> <p><code>loader</code> 有点像任务，它们通过将各种文件转换为 webpack 可以处理的有效模块，为各种文件提供了利用 webpack 捆绑功能的能力。</p> <p>Webpack 通过<code>Babel -loader</code>提供了强大的 Babel 支持。</p> <h4 id="devdependencies"><a href="#devdependencies" class="header-anchor">#</a> devDependencies</h4> <p>当您部署应用程序时，需要安装依赖项中的模块，否则应用程序将无法工作。devDependencies 中的模块不需要安装在生产服务器上，因为您不是在这台机器上开发的。</p> <p>这些包只用于开发和测试。</p> <h4 id="难道没有任何单一的依赖来取代它们吗？"><a href="#难道没有任何单一的依赖来取代它们吗？" class="header-anchor">#</a> 难道没有任何单一的依赖来取代它们吗？</h4> <p>当您阅读上述时，您的确需要一些预置和加载器来转换 es2015 或 JSX 文件。</p> <h4 id="babel-babel"><a href="#babel-babel" class="header-anchor">#</a> babel -&gt; @babel</h4> <p>从<code>Babel 7</code>开始，Babel 团队就开始使用<a href="https://babeljs.io/docs/en/next/v7-migration#scoped-packages" target="_blank" rel="noopener noreferrer">scoped 包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，这样做是为了更好地区分哪些包是官方的，哪些包是第三方的。
所以你现在必须使用@ babel / core 而不是 babel-core。</p> <p>您的依赖项需要像这样修改：</p> <p>babel-cli - &gt; @ babel / cli。 例如：babel-与@ babel /。</p> <h2 id="三月"><a href="#三月" class="header-anchor">#</a> 三月</h2> <h3 id="js-修改对象的-key-值"><a href="#js-修改对象的-key-值" class="header-anchor">#</a> js 修改对象的 key 值</h3> <p>ES5</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>var array <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id: <span class="token number">1</span>,
    name: <span class="token string">'小明'</span>
  <span class="token punctuation">}</span>,
  <span class="token punctuation">{</span>
    id: <span class="token number">2</span>,
    name: <span class="token string">'小红'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

// 旧 key 到新 key 的应用
<span class="token keyword">for</span> <span class="token punctuation">(</span>var i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array.length<span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  var obj <span class="token operator">=</span> arrray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>var key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    var newkey <span class="token operator">=</span> keyMap<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newkey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">[</span>newKey<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      delete obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ES6</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>const renameKeys <span class="token operator">=</span> <span class="token punctuation">(</span>keysMap, obj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
  Object.keys<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>.reduce<span class="token punctuation">(</span>
    <span class="token punctuation">(</span>acc, key<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token punctuation">..</span>.acc,
      <span class="token punctuation">..</span>.<span class="token punctuation">{</span> <span class="token punctuation">[</span>keysMap<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> key<span class="token punctuation">]</span>: obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>,
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="echarts-如何调整-legend-和图表的间距"><a href="#echarts-如何调整-legend-和图表的间距" class="header-anchor">#</a> Echarts 如何调整 legend 和图表的间距</h3> <p>在 opotions 中加入属性：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>grid: <span class="token punctuation">{</span>
  top:<span class="token string">'25%'</span>, //距上边距
  left:<span class="token string">'25%'</span>, //距离左边距
  right:<span class="token string">'25%'</span>, //距离右边距
  bottom:<span class="token string">'25%'</span>, //距离下边距
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="vue-父子组件数据传递"><a href="#vue-父子组件数据传递" class="header-anchor">#</a> vue 父子组件数据传递</h3> <ol><li>通过 props 的方式向子组件传递(父子组件)</li> <li>vuex 进行状态管理(父子组件和非父子组件) vuex</li> <li>非父子组件的通信传递 Vue Event Bus，使用 Vue 的实例，实现事件的监听和发布，实现组件之间的传递。</li> <li>inheritAttrs + $attrs + $listeners</li></ol> <h3 id="attrs、-listeners、inheritattrs"><a href="#attrs、-listeners、inheritattrs" class="header-anchor">#</a> $attrs、$listeners、inheritAttrs</h3> <p><strong>$attrs:</strong> 继承所有的父组件属性（除了 prop 传递的属性、class 和 style ）</p> <p><strong>inheritAttrs:</strong> 默认值 true,继承所有的父组件属性（除 props 的特定绑定）作为普通的 HTML 特性应用在子组件的根元素上，如果你不希望组件的根元素继承特性设置 inheritAttrs: false,但是 class 属性和 style 会继承。</p> <p><strong>$listeners:</strong>，它是一个对象，里面包含了作用在这个组件上的所有监听器，你就可以配合 v-on=&quot;$listeners&quot; 将所有的事件监听器指向这个组件的某个特定的子元素。</p> <p><strong>可以使用 $attrs 和 $listeners 对 iview 组件进行二次封装</strong>，如 modal(主要用于解决 iview 默认点击确定会关闭自动模态框的问题，
( <code>closeByOuter</code>属性 + <code>@on-confirm</code>事件 ))， 通过 v-bind=&quot;$attrs&quot; 将父组件的 attrs 一起传给子组件。<code>$listeners</code> 包含了父作用域中的 (不含 .native 修饰器的) v-on 事件监听器。它可以通过 v-on=&quot;$listeners&quot; 传入内部组件--在创建更高层次的组件时非常有用，简言之：$attrs 可以打包父组件的属性，同样的，<code>$listeners</code> 则打包父组件的事件。通过 v-on=&quot;$listeners&quot; 可以在子组件触发父组件的父组件的事件。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Modal v-model<span class="token operator">=</span><span class="token string">&quot;show&quot;</span> v-bind<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$attrs</span>&quot;</span> v-on<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$listeners</span>&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token assign-left variable">slot</span><span class="token operator">=</span><span class="token string">&quot;header&quot;</span> <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">&quot;modal-header&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">$attrs</span>.title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/slot<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token assign-left variable">slot</span><span class="token operator">=</span><span class="token string">&quot;footer&quot;</span> <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">&quot;modal-footer&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">&quot;close-btn&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;handleClose&quot;</span><span class="token operator">&gt;</span>取消<span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>NrButton @click<span class="token operator">=</span><span class="token string">&quot;handleConfirm&quot;</span><span class="token operator">&gt;</span>确定<span class="token operator">&lt;</span>/NrButton<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>/Modal<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/template<span class="token operator">&gt;</span>

<span class="token builtin class-name">export</span> default <span class="token punctuation">{</span>
  inheritAttrs: false,
  name: <span class="token string">&quot;NrModal&quot;</span>,
  props: <span class="token punctuation">{</span>
    value: <span class="token punctuation">{</span>
      type: Boolean,
      default: <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>,
    // 点击确定后，是否在外部控制弹窗消失
    closeByOuter: <span class="token punctuation">{</span>
      type: Boolean,
      default: <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>,
  <span class="token function-name function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">{</span>
      show: this.value
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>,
  watch: <span class="token punctuation">{</span>
    show<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      this.<span class="token variable">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span>, n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>,
    value<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      this.show <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>,
  methods: <span class="token punctuation">{</span>
    <span class="token function-name function">handleClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      this.<span class="token variable">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;on-close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      this.show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>,
    <span class="token function-name function">handleConfirm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      this.<span class="token variable">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;on-confirm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment"># 通过 v-on=&quot;\$listeners&quot; 可以在子组件触发父组件的父组件的事件。</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>this.closeByOuter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        this.show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="二月"><a href="#二月" class="header-anchor">#</a> 二月</h2> <h3 id="日期显示"><a href="#日期显示" class="header-anchor">#</a> 日期显示</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>week<span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin class-name">let</span> weekday <span class="token operator">=</span> new Array<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      weekday<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;周日&quot;</span><span class="token punctuation">;</span>
      weekday<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;周一&quot;</span><span class="token punctuation">;</span>
      weekday<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;周二&quot;</span><span class="token punctuation">;</span>
      weekday<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;周三&quot;</span><span class="token punctuation">;</span>
      weekday<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;周四&quot;</span><span class="token punctuation">;</span>
      weekday<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;周五&quot;</span><span class="token punctuation">;</span>
      weekday<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;周六&quot;</span><span class="token punctuation">;</span>
      <span class="token builtin class-name">return</span> weekday<span class="token punctuation">[</span>day<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>,
<span class="token function-name function">timeFormate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">let</span> year <span class="token operator">=</span> new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getFullYear<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">let</span> month <span class="token operator">=</span>
      new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getMonth<span class="token punctuation">(</span><span class="token punctuation">)</span> + <span class="token number">1</span> <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">10</span>
          ? new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getMonth<span class="token punctuation">(</span><span class="token punctuation">)</span> + <span class="token number">1</span>
          <span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span> + <span class="token punctuation">(</span>new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getMonth<span class="token punctuation">(</span><span class="token punctuation">)</span> + <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">let</span> <span class="token function">date</span> <span class="token operator">=</span>
      new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getDate<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">10</span>
        ? new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getDate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span> + new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getDate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this.yearData <span class="token operator">=</span>
      year +
      <span class="token string">&quot;年&quot;</span> +
      month +
      <span class="token string">&quot;月&quot;</span> +
      <span class="token function">date</span> +
      <span class="token string">&quot;日&quot;</span> +
      <span class="token string">&quot; &quot;</span> +
    this.week<span class="token punctuation">(</span>new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getDay<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    // 时钟
    <span class="token builtin class-name">let</span> hh <span class="token operator">=</span>
    new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getHours<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">10</span>
          ? new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getHours<span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span> + new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getHours<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">let</span> mm <span class="token operator">=</span>
        new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getMinutes<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">10</span>
          ? new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getMinutes<span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span> + new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getMinutes<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">let</span> hhcopy <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hh <span class="token operator">&gt;</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hhcopy <span class="token operator">=</span> hh - <span class="token number">12</span><span class="token punctuation">;</span>
        this.unit <span class="token operator">=</span> <span class="token string">&quot;pm&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        hhcopy <span class="token operator">=</span> hh<span class="token punctuation">;</span>
        this.unit <span class="token operator">=</span> <span class="token string">&quot;am&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    this.timeData <span class="token operator">=</span> hhcopy + <span class="token string">&quot;:&quot;</span> + mm<span class="token punctuation">;</span>
<span class="token punctuation">}</span>,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h3 id="设置-npm-源"><a href="#设置-npm-源" class="header-anchor">#</a> 设置 npm 源</h3> <p>npm, yarn 查看源和换源：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> config get registry // 查看 <span class="token function">npm</span> 当前镜像源

<span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org/ // 设置 <span class="token function">npm</span> 镜像源为淘宝镜像

<span class="token function">yarn</span> config get registry // 查看 <span class="token function">yarn</span> 当前镜像源

<span class="token function">yarn</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org/ // 设置 <span class="token function">yarn</span> 镜像源为淘宝镜像
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>镜像源地址部分如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> --- https://registry.npmjs.org/

cnpm --- https://r.cnpmjs.org/

taobao --- https://registry.npm.taobao.org/

nj --- https://registry.nodejitsu.com/

rednpm --- https://registry.mirror.cqupt.edu.cn/

npmMirror --- https://skimdb.npmjs.com/registry/

deunpm --- http://registry.enpmjs.org/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="一月"><a href="#一月" class="header-anchor">#</a> 一月</h2> <h3 id="利用-coverage-检测可以懒加载的-modules"><a href="#利用-coverage-检测可以懒加载的-modules" class="header-anchor">#</a> 利用 Coverage 检测可以懒加载的 modules</h3> <p>1、打开 devTools,，按<code>Ctrl+shift+p</code>，mac(<code>cmd+shift+p</code>)，输入<code>Coverage</code>，选<code>Drawer: Coverage</code></p> <p>2、reload</p> <p>3、可以看到哪些 modules 可以用<code>import()</code>懒加载了</p> <h3 id="nginx-vue-history-爬坑"><a href="#nginx-vue-history-爬坑" class="header-anchor">#</a> nginx vue history 爬坑</h3> <p>按照官方<code>nginx</code>的参考配置：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
  try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果是项目在根目录倒没啥问题，但如果项目在 xxx 路径下，比如在<code>http://ip/vue/</code>路径下，点击跳转到路由<code>http://ip/vue/about</code>下是 ok 的，但是一刷新页面，你会发现就不好使了。原因很简单，就在上面的配置中:</p> <p><code>try_files $uri $uri/ /index.html</code> =&gt; <code>http://ip/vue/about/index.html</code></p> <p>所以，这种情况正确的操作是：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>location /vue/ <span class="token punctuation">{</span>
  try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /vue/index.html<span class="token punctuation">;</span><span class="token comment"># 全部跳回到vue/index.html页面中</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意， <code>/vue/</code>实际上你上面配的<code>root</code>下的 vue 文件夹，比如你的<code>root</code>是<code>/app</code>，<code>location /vue/</code>即为 <code>location /app/vue/</code></p> <h3 id="前端请求错误后，重新请求"><a href="#前端请求错误后，重新请求" class="header-anchor">#</a> 前端请求错误后，重新请求</h3> <p>需要满足：按照原来的逻辑进行请求，按照原来的步骤进行请求成功后的处理</p> <ul><li>jQuery（$(this)）</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$.ajax<span class="token punctuation">(</span><span class="token punctuation">{</span>
    url <span class="token builtin class-name">:</span> <span class="token string">'someurl'</span>,
    <span class="token builtin class-name">type</span> <span class="token builtin class-name">:</span> <span class="token string">'POST'</span>,
    data <span class="token builtin class-name">:</span>  <span class="token punctuation">..</span><span class="token punctuation">..</span>,
    tryCount <span class="token builtin class-name">:</span> <span class="token number">0</span>,
    retryLimit <span class="token builtin class-name">:</span> <span class="token number">3</span>,
    success <span class="token builtin class-name">:</span> function<span class="token punctuation">(</span>json<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        //do something
    <span class="token punctuation">}</span>,
    error <span class="token builtin class-name">:</span> function<span class="token punctuation">(</span>xhr, textStatus, errorThrown <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>textStatus <span class="token operator">==</span> <span class="token string">'timeout'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            this.tryCount++<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>this.tryCount <span class="token operator">&lt;</span><span class="token operator">=</span> this.retryLimit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                $.ajax<span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token builtin class-name">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token builtin class-name">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr.status <span class="token operator">==</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            //handle error
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            //handle error
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li>dojo 或其他库
可以通过一个包装函数来实现调用自己</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ServerUtil.excuteGetRequest <span class="token operator">=</span> function<span class="token punctuation">(</span>serviceSign, serviceName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>serviceName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      serviceName <span class="token operator">=</span> <span class="token string">&quot;未知服务&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    var deferred <span class="token operator">=</span> new Deferred<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    var requestUrl <span class="token operator">=</span> window.appInfo.serverUrl + serviceSign<span class="token punctuation">;</span>
    script.get<span class="token punctuation">(</span>requestUrl, <span class="token punctuation">{</span> jsonp: <span class="token string">&quot;callback&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>.then<span class="token punctuation">(</span>
      function<span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>response.status <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          deferred.resolve<span class="token punctuation">(</span>response.data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          var msg <span class="token operator">=</span> <span class="token string">&quot;未成功从服务--&quot;</span> + serviceName + <span class="token string">&quot;--获取数据&quot;</span><span class="token punctuation">;</span>
          deferred.reject<span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>,
      function<span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error.response.status <span class="token operator">==</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          // handle errror
          // <span class="token punctuation">..</span>.
          ServerUtil.excuteGetRequest<span class="token punctuation">(</span>requestUrl, serviceName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        var msg <span class="token operator">=</span> <span class="token string">&quot;调用服务--&quot;</span> + serviceName + <span class="token string">&quot;--失败 &quot;</span> + error.response.url<span class="token punctuation">;</span>
        deferred.reject<span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">return</span> deferred.promise<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div> <h2 id="四月"><a href="#四月" class="header-anchor">#</a> 四月</h2> <h3 id="多维数组指定子项扁平化函数"><a href="#多维数组指定子项扁平化函数" class="header-anchor">#</a> 多维数组指定子项扁平化函数</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/**
  * 多维数组指定子项扁平化函数
  * @param array              要执行的扁平化数组
  * @param childrenKeys       要参与扁平的子键名数组 默认 <span class="token punctuation">[</span><span class="token string">'children'</span><span class="token punctuation">]</span>
  * @param flattenParent      默认的父数组
  * @param flattenParentKey   被压平后子项父数组存放键名
  * @returns <span class="token punctuation">{</span>Array<span class="token punctuation">}</span>
  */ arrayChildrenFlatten<span class="token punctuation">(</span>
      array,
      <span class="token punctuation">{</span> childrenKeys, flattenParent, flattenParentKey <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      childrenKeys <span class="token operator">=</span> childrenKeys <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">&quot;children&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      flattenParent <span class="token operator">=</span> flattenParent <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      flattenParentKey <span class="token operator">=</span> flattenParentKey <span class="token operator">||</span> <span class="token string">&quot;flattenParent&quot;</span><span class="token punctuation">;</span>
      const result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      array.forEach<span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        const flattenItem <span class="token operator">=</span> JSON.parse<span class="token punctuation">(</span>JSON.stringify<span class="token punctuation">(</span>item<span class="token punctuation">))</span><span class="token punctuation">;</span>
        flattenItem<span class="token punctuation">[</span>flattenParentKey<span class="token punctuation">]</span> <span class="token operator">=</span> flattenParent<span class="token punctuation">;</span>
        result.push<span class="token punctuation">(</span>flattenItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        childrenKeys.forEach<span class="token punctuation">(</span>key <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> Array.isArray<span class="token punctuation">(</span>item<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">))</span> <span class="token punctuation">{</span>
            const children <span class="token operator">=</span> this.arrayChildrenFlatten<span class="token punctuation">(</span>item<span class="token punctuation">[</span>key<span class="token punctuation">]</span>, <span class="token punctuation">{</span>
              childrenKeys,
              flattenParent: <span class="token punctuation">[</span><span class="token punctuation">..</span>.flattenParent, item<span class="token punctuation">]</span>,
              flattenParentKey
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result.push<span class="token punctuation">(</span><span class="token punctuation">..</span>.children<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token builtin class-name">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="服务器状态码错误原因"><a href="#服务器状态码错误原因" class="header-anchor">#</a> 服务器状态码错误原因</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>HTTP <span class="token number">400</span> - 请求无效
HTTP <span class="token number">401.1</span> - 未授权：登录失败
HTTP <span class="token number">401.2</span> - 未授权：服务器配置问题导致登录失败
HTTP <span class="token number">401.3</span> - ACL 禁止访问资源
HTTP <span class="token number">401.4</span> - 未授权：授权被筛选器拒绝
HTTP <span class="token number">401.5</span> - 未授权：ISAPI 或 CGI 授权失败

HTTP <span class="token number">403</span> - 禁止访问
HTTP <span class="token number">403</span> - 对 Internet 服务管理器 的访问仅限于 Localhost
HTTP <span class="token number">403.1</span> 禁止访问：禁止可执行访问
HTTP <span class="token number">403.2</span> - 禁止访问：禁止读访问
HTTP <span class="token number">403.3</span> - 禁止访问：禁止写访问
HTTP <span class="token number">403.4</span> - 禁止访问：要求 SSL
HTTP <span class="token number">403.5</span> - 禁止访问：要求 SSL <span class="token number">128</span>
HTTP <span class="token number">403.6</span> - 禁止访问：IP 地址被拒绝
HTTP <span class="token number">403.7</span> - 禁止访问：要求客户证书
HTTP <span class="token number">403.8</span> - 禁止访问：禁止站点访问
HTTP <span class="token number">403.9</span> - 禁止访问：连接的用户过多
HTTP <span class="token number">403.10</span> - 禁止访问：配置无效
HTTP <span class="token number">403.11</span> - 禁止访问：密码更改
HTTP <span class="token number">403.12</span> - 禁止访问：映射器拒绝访问
HTTP <span class="token number">403.13</span> - 禁止访问：客户证书已被吊销
HTTP <span class="token number">403.15</span> - 禁止访问：客户访问许可过多
HTTP <span class="token number">403.16</span> - 禁止访问：客户证书不可信或者无效
HTTP <span class="token number">403.17</span> - 禁止访问：客户证书已经到期或者尚未生效 HTTP <span class="token number">404.1</span> -

无法找到 Web 站点
HTTP <span class="token number">404</span>- 无法找到文件
HTTP <span class="token number">405</span> - 资源被禁止
HTTP <span class="token number">406</span> - 无法接受
HTTP <span class="token number">407</span> - 要求代理身份验证
HTTP <span class="token number">410</span> - 永远不可用
HTTP <span class="token number">412</span> - 先决条件失败
HTTP <span class="token number">414</span> - 请求 - URI 太长

HTTP <span class="token number">500</span> - 内部服务器错误
HTTP <span class="token number">500.100</span> - 内部服务器错误 - ASP 错误
HTTP <span class="token number">500</span>-11 服务器关闭
HTTP <span class="token number">500</span>-12 应用程序重新启动
HTTP <span class="token number">500</span>-13 - 服务器太忙
HTTP <span class="token number">500</span>-14 - 应用程序无效
HTTP <span class="token number">500</span>-15 - 不允许请求 global.asa
Error <span class="token number">501</span> - 未实现
HTTP <span class="token number">502</span> - 网关错误
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="eslint-错误原因及解决方案"><a href="#eslint-错误原因及解决方案" class="header-anchor">#</a> ESlint 错误原因及解决方案</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  root: true,
  env: <span class="token punctuation">{</span>
    node: <span class="token boolean">true</span>
  <span class="token punctuation">}</span>,
  extends: <span class="token punctuation">[</span><span class="token string">&quot;plugin:vue/essential&quot;</span>, <span class="token string">&quot;@vue/prettier&quot;</span><span class="token punctuation">]</span>,
  rules: <span class="token punctuation">{</span>
    <span class="token string">&quot;no-console&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;no-debugger&quot;</span><span class="token builtin class-name">:</span> process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">&quot;production&quot;</span> ? <span class="token string">&quot;error&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;off&quot;</span>,
    <span class="token string">&quot;vue/no-parsing-error&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token punctuation">{</span> <span class="token string">&quot;x-invalid-end-tag&quot;</span><span class="token builtin class-name">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>,
    // 新增一些重要rules
    // 要求使用 <span class="token builtin class-name">let</span> 或 const 而不是 var
    <span class="token string">&quot;no-var&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,
    // 注释前空格
    <span class="token string">&quot;spaced-comment&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span>, <span class="token string">&quot;always&quot;</span><span class="token punctuation">]</span>,
    // 禁止修改 const 声明的变量
    <span class="token string">&quot;no-const-assign&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,
    // 要求或禁止 var 声明中的初始化<span class="token punctuation">(</span>初值<span class="token punctuation">)</span>
    <span class="token string">&quot;init-declarations&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    // 禁用 eval<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token string">&quot;no-eval&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,
    // 要求 for-in 循环中有一个 <span class="token keyword">if</span> 语句
    <span class="token string">&quot;guard-for-in&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,
    // 禁止重复声明变量
    <span class="token string">&quot;no-redeclare&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>,
  parserOptions: <span class="token punctuation">{</span>
    parser: <span class="token string">&quot;babel-eslint&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>这里使用了 airbnb 规范，要注意</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  root: true,
  env: <span class="token punctuation">{</span>
    node: <span class="token boolean">true</span>
  <span class="token punctuation">}</span>,
  extends: <span class="token punctuation">[</span><span class="token string">'plugin:vue/essential'</span>, <span class="token string">'@vue/airbnb'</span><span class="token punctuation">]</span>,
  rules: <span class="token punctuation">{</span>
    <span class="token string">'no-console'</span><span class="token builtin class-name">:</span> process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'production'</span> ? <span class="token string">'error'</span> <span class="token builtin class-name">:</span> <span class="token string">'off'</span>,
    <span class="token string">'no-debugger'</span><span class="token builtin class-name">:</span> process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'production'</span> ? <span class="token string">'error'</span> <span class="token builtin class-name">:</span> <span class="token string">'off'</span>,
    // 在这里自定义修改
    <span class="token string">'linebreak-style'</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    semi: <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token string">'never'</span><span class="token punctuation">]</span>, // 不加分号
    <span class="token string">'no-unused-expressions'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token punctuation">{</span>
      allowShortCircuit: true,
      allowTernary: <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>, // 允许三元
    <span class="token string">'no-plusplus'</span><span class="token builtin class-name">:</span> <span class="token number">0</span>, // 开启i++
    <span class="token string">'comma-dangle'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token string">'never'</span><span class="token punctuation">]</span>, // 结尾不使用逗号
    <span class="token string">'import/no-unresolved'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token punctuation">{</span>
      ignore: <span class="token punctuation">[</span><span class="token string">'esri'</span>, <span class="token string">'dojo'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>, // 解决import esri/xxx编译不通过
    <span class="token string">'import/extensions'</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    // <span class="token string">'no-console'</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">'arrow-parens'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token string">'as-needed'</span><span class="token punctuation">]</span>, // 箭头函数参数只有一个时无需加括号
    <span class="token string">'no-param-reassign'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token punctuation">{</span>
      props: <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>,
    <span class="token string">'no-mixed-operators'</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    // <span class="token string">'max-len'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token punctuation">{</span>
    //  <span class="token string">&quot;code&quot;</span><span class="token builtin class-name">:</span> <span class="token number">100</span>
    //<span class="token punctuation">}</span><span class="token punctuation">]</span>,
    <span class="token string">&quot;max-len&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>, // 关闭最大长度
    <span class="token string">'vue/no-parsing-error'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">2</span>, <span class="token punctuation">{</span>
      <span class="token string">'x-invalid-end-tag'</span><span class="token builtin class-name">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>,
  parserOptions: <span class="token punctuation">{</span>
    parser: <span class="token string">'babel-eslint'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="五月"><a href="#五月" class="header-anchor">#</a> 五月</h2> <h3 id="async-await-遇上-foreach"><a href="#async-await-遇上-foreach" class="header-anchor">#</a> async-await 遇上 forEach</h3> <p>适用场景：在开发过程中，我们需要在循环中异步处理 item，直接使用 forEach 是不能并行遍历
解决：使用 for of 更加方便，可以使用于嵌套循环下的需求（先执行外层 1，再执行内层 1，2，3，外层 2，内层 1，2，3）</p> <h4 id="解决方案一"><a href="#解决方案一" class="header-anchor">#</a> 解决方案一</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>async <span class="token keyword">function</span> asyncForEach<span class="token punctuation">(</span>array, callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>let index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> array.length<span class="token punctuation">;</span> index++<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    await callback<span class="token punctuation">(</span>array<span class="token punctuation">[</span>index<span class="token punctuation">]</span>, index, array<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

async <span class="token keyword">function</span> <span class="token function-name function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  const nums <span class="token operator">=</span> await getNumbers<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  asyncForEach<span class="token punctuation">(</span>nums, async x <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    const res <span class="token operator">=</span> await multi<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console.log<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="解决方案二"><a href="#解决方案二" class="header-anchor">#</a> 解决方案二</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>async <span class="token keyword">function</span> <span class="token function-name function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  const nums <span class="token operator">=</span> await getNumbers<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>let x of nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    const res <span class="token operator">=</span> await multi<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console.log<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="六月"><a href="#六月" class="header-anchor">#</a> 六月</h2> <h3 id="eslint-lint-staged-禁用老项目中的-es6"><a href="#eslint-lint-staged-禁用老项目中的-es6" class="header-anchor">#</a> eslint+lint-staged 禁用老项目中的 ES6</h3> <p>用惯了 es6，在编写广州一体化中，会在有些地方使用了 es6 语法，导致在低版本的浏览器中出现微件加载错误。于是我就用了 eslint 在提交的代码时进行语法检查。列下步骤，复习下。</p> <ol><li>步骤一：本地仓库安装 yarn add eslint 或者 npm install eslint</li> <li>步骤二：安装后，进行初始化 eslint —init，生成配置文件 .eslintrc.js</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  env: <span class="token punctuation">{</span>
    browser: true,
    // <span class="token string">'commonjs'</span><span class="token builtin class-name">:</span> true,
    es6: <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>步骤三：npm install --D lint-staged husky 或 yarn add lint-staged husky，然后进行配置，最后提交文件即可自动触发。</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gxxxx&quot;</span>,
  <span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0.1.0&quot;</span>,
  <span class="token string">&quot;private&quot;</span><span class="token builtin class-name">:</span> true,
  <span class="token string">&quot;scripts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;eslint&quot;</span>,
    <span class="token string">&quot;commit&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;git-cz&quot;</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;husky&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;hooks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;pre-commit&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;lint-staged&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;lint-staged&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;*.js&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;eslint&quot;</span>,
      <span class="token string">&quot;git add&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;devDependencies&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;eslint&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^6.0.0&quot;</span>,
    <span class="token string">&quot;husky&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^2.4.1&quot;</span>,
    <span class="token string">&quot;lint-staged&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^8.2.1&quot;</span>,
    <span class="token string">&quot;git-cz&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^3.0.1&quot;</span>
  <span class="token punctuation">}</span>,
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/13/2020, 5:20:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Notebook/dailyRecord/" class="prev router-link-active">
        2021 年
      </a></span> <span class="next"><a href="/Notebook/dailyRecord/2018.html">
        2018
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Notebook/assets/js/app.accc6ad4.js" defer></script><script src="/Notebook/assets/js/4.2708dfb6.js" defer></script><script src="/Notebook/assets/js/67.6107a140.js" defer></script>
  </body>
</html>
