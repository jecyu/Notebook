<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lua | Naluduo&#39;s Notebook</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/Notebook/images/logo.jpeg">
    <meta name="description" content="📝每天记录一点点">
    <link rel="preload" href="/Notebook/assets/css/0.styles.b1f38863.css" as="style"><link rel="preload" href="/Notebook/assets/js/app.accc6ad4.js" as="script"><link rel="preload" href="/Notebook/assets/js/4.2708dfb6.js" as="script"><link rel="preload" href="/Notebook/assets/js/234.f9dd9c73.js" as="script"><link rel="prefetch" href="/Notebook/assets/js/10.868273fb.js"><link rel="prefetch" href="/Notebook/assets/js/100.1b860150.js"><link rel="prefetch" href="/Notebook/assets/js/101.93399fce.js"><link rel="prefetch" href="/Notebook/assets/js/102.6cbb290c.js"><link rel="prefetch" href="/Notebook/assets/js/103.8ff3d751.js"><link rel="prefetch" href="/Notebook/assets/js/104.0a2f7daa.js"><link rel="prefetch" href="/Notebook/assets/js/105.155f54c6.js"><link rel="prefetch" href="/Notebook/assets/js/106.4d7d0c3a.js"><link rel="prefetch" href="/Notebook/assets/js/107.8373d2e5.js"><link rel="prefetch" href="/Notebook/assets/js/108.8c95a110.js"><link rel="prefetch" href="/Notebook/assets/js/109.85bb673d.js"><link rel="prefetch" href="/Notebook/assets/js/11.fb903a5e.js"><link rel="prefetch" href="/Notebook/assets/js/110.52ad03a9.js"><link rel="prefetch" href="/Notebook/assets/js/111.956208cd.js"><link rel="prefetch" href="/Notebook/assets/js/112.2009b21f.js"><link rel="prefetch" href="/Notebook/assets/js/113.82a49283.js"><link rel="prefetch" href="/Notebook/assets/js/114.3b3a5472.js"><link rel="prefetch" href="/Notebook/assets/js/115.7ee78dd6.js"><link rel="prefetch" href="/Notebook/assets/js/116.7c8bbb6c.js"><link rel="prefetch" href="/Notebook/assets/js/117.d0907fb0.js"><link rel="prefetch" href="/Notebook/assets/js/118.3fb43a39.js"><link rel="prefetch" href="/Notebook/assets/js/119.ec92ea48.js"><link rel="prefetch" href="/Notebook/assets/js/12.29652b2c.js"><link rel="prefetch" href="/Notebook/assets/js/120.35ff1e70.js"><link rel="prefetch" href="/Notebook/assets/js/121.d8b18139.js"><link rel="prefetch" href="/Notebook/assets/js/122.648ffe96.js"><link rel="prefetch" href="/Notebook/assets/js/123.ed3b8b2f.js"><link rel="prefetch" href="/Notebook/assets/js/124.142abf67.js"><link rel="prefetch" href="/Notebook/assets/js/125.329314b8.js"><link rel="prefetch" href="/Notebook/assets/js/126.3a121da0.js"><link rel="prefetch" href="/Notebook/assets/js/127.022c6641.js"><link rel="prefetch" href="/Notebook/assets/js/128.547c2d5c.js"><link rel="prefetch" href="/Notebook/assets/js/129.ecb5273b.js"><link rel="prefetch" href="/Notebook/assets/js/13.fa32345e.js"><link rel="prefetch" href="/Notebook/assets/js/130.2a0d3a19.js"><link rel="prefetch" href="/Notebook/assets/js/131.c7a84d57.js"><link rel="prefetch" href="/Notebook/assets/js/132.07da823d.js"><link rel="prefetch" href="/Notebook/assets/js/133.f851d5af.js"><link rel="prefetch" href="/Notebook/assets/js/134.de309ceb.js"><link rel="prefetch" href="/Notebook/assets/js/135.0b83f289.js"><link rel="prefetch" href="/Notebook/assets/js/136.99ddbb8e.js"><link rel="prefetch" href="/Notebook/assets/js/137.9ce91c54.js"><link rel="prefetch" href="/Notebook/assets/js/138.d1e6c7df.js"><link rel="prefetch" href="/Notebook/assets/js/139.9e57818f.js"><link rel="prefetch" href="/Notebook/assets/js/14.e6b1fa67.js"><link rel="prefetch" href="/Notebook/assets/js/140.b97a7c8d.js"><link rel="prefetch" href="/Notebook/assets/js/141.db0d7e4b.js"><link rel="prefetch" href="/Notebook/assets/js/142.c9528ba0.js"><link rel="prefetch" href="/Notebook/assets/js/143.5cd17cfd.js"><link rel="prefetch" href="/Notebook/assets/js/144.c8a3236c.js"><link rel="prefetch" href="/Notebook/assets/js/145.ce3e815f.js"><link rel="prefetch" href="/Notebook/assets/js/146.5d5fdead.js"><link rel="prefetch" href="/Notebook/assets/js/147.7ca58039.js"><link rel="prefetch" href="/Notebook/assets/js/148.0528dfc6.js"><link rel="prefetch" href="/Notebook/assets/js/149.e219ef4f.js"><link rel="prefetch" href="/Notebook/assets/js/15.ede5e660.js"><link rel="prefetch" href="/Notebook/assets/js/150.367684ad.js"><link rel="prefetch" href="/Notebook/assets/js/151.bb7cc840.js"><link rel="prefetch" href="/Notebook/assets/js/152.50e2b443.js"><link rel="prefetch" href="/Notebook/assets/js/153.5143d68e.js"><link rel="prefetch" href="/Notebook/assets/js/154.5f75c4d5.js"><link rel="prefetch" href="/Notebook/assets/js/155.2c97d8c7.js"><link rel="prefetch" href="/Notebook/assets/js/156.04597855.js"><link rel="prefetch" href="/Notebook/assets/js/157.27a46ea1.js"><link rel="prefetch" href="/Notebook/assets/js/158.b0e54b34.js"><link rel="prefetch" href="/Notebook/assets/js/159.980a2077.js"><link rel="prefetch" href="/Notebook/assets/js/16.7cea63af.js"><link rel="prefetch" href="/Notebook/assets/js/160.dd7c4dd5.js"><link rel="prefetch" href="/Notebook/assets/js/161.076ac5ad.js"><link rel="prefetch" href="/Notebook/assets/js/162.49697d65.js"><link rel="prefetch" href="/Notebook/assets/js/163.022e5acc.js"><link rel="prefetch" href="/Notebook/assets/js/164.8ceaf7a5.js"><link rel="prefetch" href="/Notebook/assets/js/165.d613540e.js"><link rel="prefetch" href="/Notebook/assets/js/166.c0af31ff.js"><link rel="prefetch" href="/Notebook/assets/js/167.e42b9f57.js"><link rel="prefetch" href="/Notebook/assets/js/168.fa026739.js"><link rel="prefetch" href="/Notebook/assets/js/169.1f7e3137.js"><link rel="prefetch" href="/Notebook/assets/js/17.b7ca32be.js"><link rel="prefetch" href="/Notebook/assets/js/170.c4c1402a.js"><link rel="prefetch" href="/Notebook/assets/js/171.d1075313.js"><link rel="prefetch" href="/Notebook/assets/js/172.31ae23b8.js"><link rel="prefetch" href="/Notebook/assets/js/173.283df959.js"><link rel="prefetch" href="/Notebook/assets/js/174.8a34b9ed.js"><link rel="prefetch" href="/Notebook/assets/js/175.3678f179.js"><link rel="prefetch" href="/Notebook/assets/js/176.c26a8292.js"><link rel="prefetch" href="/Notebook/assets/js/177.783e1466.js"><link rel="prefetch" href="/Notebook/assets/js/178.9fa7eae4.js"><link rel="prefetch" href="/Notebook/assets/js/179.44544c8c.js"><link rel="prefetch" href="/Notebook/assets/js/18.dbdceb5d.js"><link rel="prefetch" href="/Notebook/assets/js/180.15b47c99.js"><link rel="prefetch" href="/Notebook/assets/js/181.73b4c3aa.js"><link rel="prefetch" href="/Notebook/assets/js/182.6a5b17a2.js"><link rel="prefetch" href="/Notebook/assets/js/183.28ec67b1.js"><link rel="prefetch" href="/Notebook/assets/js/184.2cccbd70.js"><link rel="prefetch" href="/Notebook/assets/js/185.de7fec26.js"><link rel="prefetch" href="/Notebook/assets/js/186.0932e1a1.js"><link rel="prefetch" href="/Notebook/assets/js/187.8c1730fc.js"><link rel="prefetch" href="/Notebook/assets/js/188.300dd277.js"><link rel="prefetch" href="/Notebook/assets/js/189.a1bee58b.js"><link rel="prefetch" href="/Notebook/assets/js/19.3d59d024.js"><link rel="prefetch" href="/Notebook/assets/js/190.7663ddc6.js"><link rel="prefetch" href="/Notebook/assets/js/191.7c824181.js"><link rel="prefetch" href="/Notebook/assets/js/192.e85118bd.js"><link rel="prefetch" href="/Notebook/assets/js/193.e954b79c.js"><link rel="prefetch" href="/Notebook/assets/js/194.f4adcdbc.js"><link rel="prefetch" href="/Notebook/assets/js/195.62735b27.js"><link rel="prefetch" href="/Notebook/assets/js/196.e0fafeec.js"><link rel="prefetch" href="/Notebook/assets/js/197.07c5e539.js"><link rel="prefetch" href="/Notebook/assets/js/198.cd686b20.js"><link rel="prefetch" href="/Notebook/assets/js/199.d51b40b4.js"><link rel="prefetch" href="/Notebook/assets/js/2.fa311fa4.js"><link rel="prefetch" href="/Notebook/assets/js/20.b4b2d322.js"><link rel="prefetch" href="/Notebook/assets/js/200.e245b2cd.js"><link rel="prefetch" href="/Notebook/assets/js/201.bd88542b.js"><link rel="prefetch" href="/Notebook/assets/js/202.6eefc25c.js"><link rel="prefetch" href="/Notebook/assets/js/203.98180f0d.js"><link rel="prefetch" href="/Notebook/assets/js/204.cb560045.js"><link rel="prefetch" href="/Notebook/assets/js/205.db965c26.js"><link rel="prefetch" href="/Notebook/assets/js/206.f692627d.js"><link rel="prefetch" href="/Notebook/assets/js/207.885fb929.js"><link rel="prefetch" href="/Notebook/assets/js/208.cb1bebca.js"><link rel="prefetch" href="/Notebook/assets/js/209.7dac81a0.js"><link rel="prefetch" href="/Notebook/assets/js/21.4c9bb6e4.js"><link rel="prefetch" href="/Notebook/assets/js/210.21121b1f.js"><link rel="prefetch" href="/Notebook/assets/js/211.cfd188b5.js"><link rel="prefetch" href="/Notebook/assets/js/212.c691e30a.js"><link rel="prefetch" href="/Notebook/assets/js/213.1a9a1f8d.js"><link rel="prefetch" href="/Notebook/assets/js/214.8c871f29.js"><link rel="prefetch" href="/Notebook/assets/js/215.7dd76ed3.js"><link rel="prefetch" href="/Notebook/assets/js/216.b9c6e46d.js"><link rel="prefetch" href="/Notebook/assets/js/217.bbb09b50.js"><link rel="prefetch" href="/Notebook/assets/js/218.3c93e6af.js"><link rel="prefetch" href="/Notebook/assets/js/219.735de793.js"><link rel="prefetch" href="/Notebook/assets/js/22.6908c05f.js"><link rel="prefetch" href="/Notebook/assets/js/220.3531b68a.js"><link rel="prefetch" href="/Notebook/assets/js/221.220d5f13.js"><link rel="prefetch" href="/Notebook/assets/js/222.9d0535e5.js"><link rel="prefetch" href="/Notebook/assets/js/223.f870f2a0.js"><link rel="prefetch" href="/Notebook/assets/js/224.0b56afa6.js"><link rel="prefetch" href="/Notebook/assets/js/225.cc5b31fd.js"><link rel="prefetch" href="/Notebook/assets/js/226.f4ee0adc.js"><link rel="prefetch" href="/Notebook/assets/js/227.eb919eea.js"><link rel="prefetch" href="/Notebook/assets/js/228.6a28f264.js"><link rel="prefetch" href="/Notebook/assets/js/229.2a8bf537.js"><link rel="prefetch" href="/Notebook/assets/js/23.afd0f5c6.js"><link rel="prefetch" href="/Notebook/assets/js/230.a2f5121e.js"><link rel="prefetch" href="/Notebook/assets/js/231.b10cb770.js"><link rel="prefetch" href="/Notebook/assets/js/232.ae7ad32a.js"><link rel="prefetch" href="/Notebook/assets/js/233.cca18966.js"><link rel="prefetch" href="/Notebook/assets/js/235.c9a4bfbe.js"><link rel="prefetch" href="/Notebook/assets/js/236.61c4fb4d.js"><link rel="prefetch" href="/Notebook/assets/js/237.fed9e8fe.js"><link rel="prefetch" href="/Notebook/assets/js/238.86670bd9.js"><link rel="prefetch" href="/Notebook/assets/js/239.9ec3d9e2.js"><link rel="prefetch" href="/Notebook/assets/js/24.c1da07f8.js"><link rel="prefetch" href="/Notebook/assets/js/240.355da7ac.js"><link rel="prefetch" href="/Notebook/assets/js/241.f3420570.js"><link rel="prefetch" href="/Notebook/assets/js/242.ba7e4bd1.js"><link rel="prefetch" href="/Notebook/assets/js/243.2a52effa.js"><link rel="prefetch" href="/Notebook/assets/js/244.7f4499d8.js"><link rel="prefetch" href="/Notebook/assets/js/245.8574f4ac.js"><link rel="prefetch" href="/Notebook/assets/js/246.9b36bc23.js"><link rel="prefetch" href="/Notebook/assets/js/247.107c7608.js"><link rel="prefetch" href="/Notebook/assets/js/248.d8d1aa96.js"><link rel="prefetch" href="/Notebook/assets/js/249.00f19ac8.js"><link rel="prefetch" href="/Notebook/assets/js/25.d24012cb.js"><link rel="prefetch" href="/Notebook/assets/js/250.9b97127c.js"><link rel="prefetch" href="/Notebook/assets/js/251.7c05b25d.js"><link rel="prefetch" href="/Notebook/assets/js/252.b3ee0f29.js"><link rel="prefetch" href="/Notebook/assets/js/253.aac3e92c.js"><link rel="prefetch" href="/Notebook/assets/js/254.694f77fc.js"><link rel="prefetch" href="/Notebook/assets/js/255.7fc65b86.js"><link rel="prefetch" href="/Notebook/assets/js/256.f559aa7a.js"><link rel="prefetch" href="/Notebook/assets/js/257.3855a8f5.js"><link rel="prefetch" href="/Notebook/assets/js/258.0236288d.js"><link rel="prefetch" href="/Notebook/assets/js/259.4a65ba3f.js"><link rel="prefetch" href="/Notebook/assets/js/26.7a74bf43.js"><link rel="prefetch" href="/Notebook/assets/js/260.e110d77b.js"><link rel="prefetch" href="/Notebook/assets/js/261.6ca5e50b.js"><link rel="prefetch" href="/Notebook/assets/js/262.974a7503.js"><link rel="prefetch" href="/Notebook/assets/js/263.b93c02d1.js"><link rel="prefetch" href="/Notebook/assets/js/264.7e9188c1.js"><link rel="prefetch" href="/Notebook/assets/js/265.f68b4748.js"><link rel="prefetch" href="/Notebook/assets/js/266.04a71924.js"><link rel="prefetch" href="/Notebook/assets/js/267.256e6833.js"><link rel="prefetch" href="/Notebook/assets/js/268.18b52093.js"><link rel="prefetch" href="/Notebook/assets/js/269.ddca242f.js"><link rel="prefetch" href="/Notebook/assets/js/27.4af13b47.js"><link rel="prefetch" href="/Notebook/assets/js/270.c63a6e91.js"><link rel="prefetch" href="/Notebook/assets/js/271.9d5de52b.js"><link rel="prefetch" href="/Notebook/assets/js/272.b3d8fe27.js"><link rel="prefetch" href="/Notebook/assets/js/273.aac68402.js"><link rel="prefetch" href="/Notebook/assets/js/274.8b89191a.js"><link rel="prefetch" href="/Notebook/assets/js/275.c748ef07.js"><link rel="prefetch" href="/Notebook/assets/js/276.477c27a9.js"><link rel="prefetch" href="/Notebook/assets/js/277.1084dbc6.js"><link rel="prefetch" href="/Notebook/assets/js/278.98e8be2a.js"><link rel="prefetch" href="/Notebook/assets/js/279.61378737.js"><link rel="prefetch" href="/Notebook/assets/js/28.1f5903ad.js"><link rel="prefetch" href="/Notebook/assets/js/280.c2fda5bf.js"><link rel="prefetch" href="/Notebook/assets/js/281.4497cf31.js"><link rel="prefetch" href="/Notebook/assets/js/282.6b02e04d.js"><link rel="prefetch" href="/Notebook/assets/js/283.c579b5f7.js"><link rel="prefetch" href="/Notebook/assets/js/284.25f19977.js"><link rel="prefetch" href="/Notebook/assets/js/285.1567c42d.js"><link rel="prefetch" href="/Notebook/assets/js/286.8729eefe.js"><link rel="prefetch" href="/Notebook/assets/js/287.5109124c.js"><link rel="prefetch" href="/Notebook/assets/js/288.aff2f2a1.js"><link rel="prefetch" href="/Notebook/assets/js/289.11ee7f93.js"><link rel="prefetch" href="/Notebook/assets/js/29.9750e313.js"><link rel="prefetch" href="/Notebook/assets/js/290.a080d505.js"><link rel="prefetch" href="/Notebook/assets/js/291.8a62b81f.js"><link rel="prefetch" href="/Notebook/assets/js/292.8f2b2816.js"><link rel="prefetch" href="/Notebook/assets/js/293.a6073f5d.js"><link rel="prefetch" href="/Notebook/assets/js/294.8036aeb4.js"><link rel="prefetch" href="/Notebook/assets/js/295.4aaf6175.js"><link rel="prefetch" href="/Notebook/assets/js/296.22622ba4.js"><link rel="prefetch" href="/Notebook/assets/js/297.598bfede.js"><link rel="prefetch" href="/Notebook/assets/js/298.68edb938.js"><link rel="prefetch" href="/Notebook/assets/js/299.1f0f84fe.js"><link rel="prefetch" href="/Notebook/assets/js/3.0cb2ce57.js"><link rel="prefetch" href="/Notebook/assets/js/30.5fc87000.js"><link rel="prefetch" href="/Notebook/assets/js/300.9c7600af.js"><link rel="prefetch" href="/Notebook/assets/js/301.0d95fc30.js"><link rel="prefetch" href="/Notebook/assets/js/302.b923baab.js"><link rel="prefetch" href="/Notebook/assets/js/303.d20079b9.js"><link rel="prefetch" href="/Notebook/assets/js/304.12a70192.js"><link rel="prefetch" href="/Notebook/assets/js/305.4ea4d8da.js"><link rel="prefetch" href="/Notebook/assets/js/306.282edebe.js"><link rel="prefetch" href="/Notebook/assets/js/307.3a37e321.js"><link rel="prefetch" href="/Notebook/assets/js/308.9221f97f.js"><link rel="prefetch" href="/Notebook/assets/js/309.c7c3ca1a.js"><link rel="prefetch" href="/Notebook/assets/js/31.18d6f54f.js"><link rel="prefetch" href="/Notebook/assets/js/310.5dde0eb7.js"><link rel="prefetch" href="/Notebook/assets/js/311.819aad83.js"><link rel="prefetch" href="/Notebook/assets/js/312.c2037cae.js"><link rel="prefetch" href="/Notebook/assets/js/313.52ee9f6c.js"><link rel="prefetch" href="/Notebook/assets/js/314.d0105766.js"><link rel="prefetch" href="/Notebook/assets/js/315.02d1beff.js"><link rel="prefetch" href="/Notebook/assets/js/316.69816787.js"><link rel="prefetch" href="/Notebook/assets/js/317.22d3b673.js"><link rel="prefetch" href="/Notebook/assets/js/318.483e3b5e.js"><link rel="prefetch" href="/Notebook/assets/js/319.bc984d80.js"><link rel="prefetch" href="/Notebook/assets/js/32.4ebe70c0.js"><link rel="prefetch" href="/Notebook/assets/js/320.d023db3c.js"><link rel="prefetch" href="/Notebook/assets/js/321.909f7332.js"><link rel="prefetch" href="/Notebook/assets/js/322.3b32a676.js"><link rel="prefetch" href="/Notebook/assets/js/323.9eb049fd.js"><link rel="prefetch" href="/Notebook/assets/js/324.5eae3717.js"><link rel="prefetch" href="/Notebook/assets/js/325.c9aa7e97.js"><link rel="prefetch" href="/Notebook/assets/js/326.2ec27286.js"><link rel="prefetch" href="/Notebook/assets/js/327.1096ac53.js"><link rel="prefetch" href="/Notebook/assets/js/328.17578c44.js"><link rel="prefetch" href="/Notebook/assets/js/329.f6f1b4fc.js"><link rel="prefetch" href="/Notebook/assets/js/33.4c170b35.js"><link rel="prefetch" href="/Notebook/assets/js/330.b84e8b18.js"><link rel="prefetch" href="/Notebook/assets/js/331.2ce71bd6.js"><link rel="prefetch" href="/Notebook/assets/js/332.d49f1076.js"><link rel="prefetch" href="/Notebook/assets/js/333.18846963.js"><link rel="prefetch" href="/Notebook/assets/js/334.07d784aa.js"><link rel="prefetch" href="/Notebook/assets/js/335.b2d18495.js"><link rel="prefetch" href="/Notebook/assets/js/336.27d6fdac.js"><link rel="prefetch" href="/Notebook/assets/js/337.e3b8a4d6.js"><link rel="prefetch" href="/Notebook/assets/js/338.4e17425d.js"><link rel="prefetch" href="/Notebook/assets/js/339.ca72b051.js"><link rel="prefetch" href="/Notebook/assets/js/34.4137a6d9.js"><link rel="prefetch" href="/Notebook/assets/js/340.a9c58e42.js"><link rel="prefetch" href="/Notebook/assets/js/341.015e17e5.js"><link rel="prefetch" href="/Notebook/assets/js/342.883cb2ad.js"><link rel="prefetch" href="/Notebook/assets/js/343.26e0511c.js"><link rel="prefetch" href="/Notebook/assets/js/344.5437611f.js"><link rel="prefetch" href="/Notebook/assets/js/345.26f6e7c4.js"><link rel="prefetch" href="/Notebook/assets/js/346.f7a3f23f.js"><link rel="prefetch" href="/Notebook/assets/js/347.27ccd6a8.js"><link rel="prefetch" href="/Notebook/assets/js/348.eff0a33d.js"><link rel="prefetch" href="/Notebook/assets/js/349.dd942ff5.js"><link rel="prefetch" href="/Notebook/assets/js/35.36b834f7.js"><link rel="prefetch" href="/Notebook/assets/js/350.9128eb0c.js"><link rel="prefetch" href="/Notebook/assets/js/351.e26fffba.js"><link rel="prefetch" href="/Notebook/assets/js/352.59cc3f38.js"><link rel="prefetch" href="/Notebook/assets/js/353.3ad59a15.js"><link rel="prefetch" href="/Notebook/assets/js/354.544a13c0.js"><link rel="prefetch" href="/Notebook/assets/js/355.d5f7255f.js"><link rel="prefetch" href="/Notebook/assets/js/356.7efdf2cd.js"><link rel="prefetch" href="/Notebook/assets/js/357.0b296e32.js"><link rel="prefetch" href="/Notebook/assets/js/358.a532d695.js"><link rel="prefetch" href="/Notebook/assets/js/359.01fd142f.js"><link rel="prefetch" href="/Notebook/assets/js/36.4ef6c0d1.js"><link rel="prefetch" href="/Notebook/assets/js/360.c71cb25e.js"><link rel="prefetch" href="/Notebook/assets/js/361.db70e72e.js"><link rel="prefetch" href="/Notebook/assets/js/362.670b7527.js"><link rel="prefetch" href="/Notebook/assets/js/363.ef0b3005.js"><link rel="prefetch" href="/Notebook/assets/js/364.63c1df56.js"><link rel="prefetch" href="/Notebook/assets/js/37.b0f3cb5d.js"><link rel="prefetch" href="/Notebook/assets/js/38.2ca6e078.js"><link rel="prefetch" href="/Notebook/assets/js/39.77206fea.js"><link rel="prefetch" href="/Notebook/assets/js/40.18d76f1c.js"><link rel="prefetch" href="/Notebook/assets/js/41.ed792d7a.js"><link rel="prefetch" href="/Notebook/assets/js/42.b983e72e.js"><link rel="prefetch" href="/Notebook/assets/js/43.3cdbe61c.js"><link rel="prefetch" href="/Notebook/assets/js/44.a4c1a462.js"><link rel="prefetch" href="/Notebook/assets/js/45.727fa84a.js"><link rel="prefetch" href="/Notebook/assets/js/46.a5665d33.js"><link rel="prefetch" href="/Notebook/assets/js/47.45efede1.js"><link rel="prefetch" href="/Notebook/assets/js/48.24e8e78b.js"><link rel="prefetch" href="/Notebook/assets/js/49.c426b444.js"><link rel="prefetch" href="/Notebook/assets/js/5.89a78b31.js"><link rel="prefetch" href="/Notebook/assets/js/50.41038e45.js"><link rel="prefetch" href="/Notebook/assets/js/51.3c34459c.js"><link rel="prefetch" href="/Notebook/assets/js/52.6df1c335.js"><link rel="prefetch" href="/Notebook/assets/js/53.69e41130.js"><link rel="prefetch" href="/Notebook/assets/js/54.591891ed.js"><link rel="prefetch" href="/Notebook/assets/js/55.d8d5bf6e.js"><link rel="prefetch" href="/Notebook/assets/js/56.c43a3733.js"><link rel="prefetch" href="/Notebook/assets/js/57.2c24f33c.js"><link rel="prefetch" href="/Notebook/assets/js/58.15a5e91b.js"><link rel="prefetch" href="/Notebook/assets/js/59.20cda08a.js"><link rel="prefetch" href="/Notebook/assets/js/6.f66bffc9.js"><link rel="prefetch" href="/Notebook/assets/js/60.beb8a99d.js"><link rel="prefetch" href="/Notebook/assets/js/61.2313bfd8.js"><link rel="prefetch" href="/Notebook/assets/js/62.ae93bded.js"><link rel="prefetch" href="/Notebook/assets/js/63.c0de4f2c.js"><link rel="prefetch" href="/Notebook/assets/js/64.b42cacb6.js"><link rel="prefetch" href="/Notebook/assets/js/65.719a31bb.js"><link rel="prefetch" href="/Notebook/assets/js/66.5c0128e7.js"><link rel="prefetch" href="/Notebook/assets/js/67.6107a140.js"><link rel="prefetch" href="/Notebook/assets/js/68.ac7fc4fa.js"><link rel="prefetch" href="/Notebook/assets/js/69.122426ed.js"><link rel="prefetch" href="/Notebook/assets/js/7.fbf1f9ec.js"><link rel="prefetch" href="/Notebook/assets/js/70.66e6b252.js"><link rel="prefetch" href="/Notebook/assets/js/71.28956fa1.js"><link rel="prefetch" href="/Notebook/assets/js/72.fcf3fb10.js"><link rel="prefetch" href="/Notebook/assets/js/73.947d80fa.js"><link rel="prefetch" href="/Notebook/assets/js/74.1d9d59de.js"><link rel="prefetch" href="/Notebook/assets/js/75.bbe5b314.js"><link rel="prefetch" href="/Notebook/assets/js/76.d018671b.js"><link rel="prefetch" href="/Notebook/assets/js/77.fca59f83.js"><link rel="prefetch" href="/Notebook/assets/js/78.4a545e59.js"><link rel="prefetch" href="/Notebook/assets/js/79.a039fbdf.js"><link rel="prefetch" href="/Notebook/assets/js/8.c69b9065.js"><link rel="prefetch" href="/Notebook/assets/js/80.d203faaa.js"><link rel="prefetch" href="/Notebook/assets/js/81.d193c9f3.js"><link rel="prefetch" href="/Notebook/assets/js/82.4675ade1.js"><link rel="prefetch" href="/Notebook/assets/js/83.ee538b4f.js"><link rel="prefetch" href="/Notebook/assets/js/84.8962589d.js"><link rel="prefetch" href="/Notebook/assets/js/85.76922906.js"><link rel="prefetch" href="/Notebook/assets/js/86.ec43215f.js"><link rel="prefetch" href="/Notebook/assets/js/87.46322abb.js"><link rel="prefetch" href="/Notebook/assets/js/88.5594f40a.js"><link rel="prefetch" href="/Notebook/assets/js/89.7f421583.js"><link rel="prefetch" href="/Notebook/assets/js/9.e0bdbf17.js"><link rel="prefetch" href="/Notebook/assets/js/90.853bb5b2.js"><link rel="prefetch" href="/Notebook/assets/js/91.fa605797.js"><link rel="prefetch" href="/Notebook/assets/js/92.f770f194.js"><link rel="prefetch" href="/Notebook/assets/js/93.1f9e6fb6.js"><link rel="prefetch" href="/Notebook/assets/js/94.2260cf7f.js"><link rel="prefetch" href="/Notebook/assets/js/95.6b1244de.js"><link rel="prefetch" href="/Notebook/assets/js/96.39617d63.js"><link rel="prefetch" href="/Notebook/assets/js/97.e4b8e984.js"><link rel="prefetch" href="/Notebook/assets/js/98.85e69ce3.js"><link rel="prefetch" href="/Notebook/assets/js/99.e2930b98.js">
    <link rel="stylesheet" href="/Notebook/assets/css/0.styles.b1f38863.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notebook/" class="home-link router-link-active"><!----> <span class="site-name">Naluduo's Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/blogs/" class="nav-link">
  📖文章合集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识体系" class="dropdown-title"><span class="title">前端知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/web-framework/" class="nav-link">
  🐂web 框架
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">
  🤔复盘
</a></li><li class="dropdown-item"><h4>
          ️️🧘算法修炼
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/understand-the-computer/" class="nav-link">
  理解计算机
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">
  算法分类
</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">
  数据库
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">
  ☁️运维
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">
  🚬测试
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">
  🌍GIS
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/tools/" class="nav-link">
  ️️🖱️工具
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">
  ️️🐛网络工程
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/game-development/" class="nav-link">
  ️️🎮游戏开发
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-language/" class="nav-link router-link-active">
  🚶编程语言
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-paradigm/" class="nav-link">
  编程范式
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="/Notebook/math/" class="nav-link">
  𝜋数学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">
  🖌️UI
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://naluduo.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔗Github" class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/naluduo233" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jecyu github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/JS-Event-Loop/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 事件循环机制
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Web-Performance-Optimization/reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微谈 Web 前端性能优化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/blogs/" class="nav-link">
  📖文章合集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识体系" class="dropdown-title"><span class="title">前端知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/web-framework/" class="nav-link">
  🐂web 框架
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">
  🤔复盘
</a></li><li class="dropdown-item"><h4>
          ️️🧘算法修炼
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/understand-the-computer/" class="nav-link">
  理解计算机
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">
  算法分类
</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">
  数据库
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">
  ☁️运维
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">
  🚬测试
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">
  🌍GIS
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/tools/" class="nav-link">
  ️️🖱️工具
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">
  ️️🐛网络工程
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/game-development/" class="nav-link">
  ️️🎮游戏开发
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-language/" class="nav-link router-link-active">
  🚶编程语言
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-paradigm/" class="nav-link">
  编程范式
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="/Notebook/math/" class="nav-link">
  𝜋数学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">
  🖌️UI
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://naluduo.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔗Github" class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/naluduo233" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jecyu github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/JS-Event-Loop/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 事件循环机制
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Web-Performance-Optimization/reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微谈 Web 前端性能优化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>🚶不止前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/programming-language/" aria-current="page" class="sidebar-link">CSharp</a></li><li><a href="/Notebook/programming-language/node.html" class="sidebar-link">Node.js</a></li><li><a href="/Notebook/programming-language/java.html" class="sidebar-link">Java</a></li><li><a href="/Notebook/programming-language/c.html" class="sidebar-link">C 语言</a></li><li><a href="/Notebook/programming-language/ruby.html" class="sidebar-link">Ruby</a></li><li><a href="/Notebook/programming-language/lua.html" aria-current="page" class="active sidebar-link">Lua</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#基础" class="sidebar-link">基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#游戏选择-lua-的主要原因" class="sidebar-link">游戏选择 Lua 的主要原因</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#lua-和-c-的区别" class="sidebar-link">Lua 和 C# 的区别</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#lua-特性" class="sidebar-link">lua 特性</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#lua-环境安装" class="sidebar-link">Lua 环境安装</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#lua-编程" class="sidebar-link">lua 编程</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#lua-基本语法" class="sidebar-link">Lua 基本语法</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#值" class="sidebar-link">值</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#控制流" class="sidebar-link">控制流</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#对象和方法" class="sidebar-link">对象和方法</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#类" class="sidebar-link">类</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#其他特性" class="sidebar-link">其他特性</a></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#lua-断点调试" class="sidebar-link">Lua 断点调试</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/programming-language/lua.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lua"><a href="#lua" class="header-anchor">#</a> Lua</h1> <p>Lua 是一种轻量小巧的脚本语言，用标准 C 语言编写并以源代码形式开放，其设计的目的是为了嵌入应用程序中，从而为应用程序提供灵活的<code>扩展</code>和<code>定制</code>功能。</p> <p>应用：</p> <ul><li>热更新</li></ul> <p>Lua 不需要编译，可以在 Java、C# 等编译好后的代码中扩展功能，直接编写。</p> <h2 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h2> <h3 id="游戏选择-lua-的主要原因"><a href="#游戏选择-lua-的主要原因" class="header-anchor">#</a> 游戏选择 Lua 的主要原因</h3> <p>所以需要将部分代码作为资源进行管理，随时可以修改更新。更新资源不需要发布新版本，也不需要苹果爸爸审核，用 lua 的优势就体现出来了。</p> <p><u>无论是需要及时调整数值或是修 bug，这样的发布流程都是灾难。某些运营的新版本比如说春节大版本，所有的开发人员都在家过年了，没人来发版本。</u></p> <p>所以需要<u>将部分代码作为资源进行管理，随时可以修改更新。更新资源不需要发布新版本，也不需要苹果爸爸审核，用 lua 的优势几句体现出来了。</u></p> <p>在手游时代，脚本就是刚需。因为客户端发一个安装包很麻烦，在 ios 上每次更新都需要提交给苹果爸爸审核，审核通过以后才可以发出来给用户下载。</p> <p>不需要重新编译工程，直接写 lua 源代码就可以执行，实现热更新。</p> <p>lua 本身表现好也是它被选择的必然原因，它轻量级、高效并且简单。只增加几百 k；lua 的执行速度大概是 C++ 的几十分之一，比绝大部分脚本性能都要高得多；lua 很简单，它是真的只需要半天都能学会的语言。</p> <p>lua 驱动的 GUI。</p> <h3 id="lua-和-c-的区别"><a href="#lua-和-c-的区别" class="header-anchor">#</a> Lua 和 C# 的区别</h3> <p>需要重新下载安装包，才能更新。</p> <p>C# 不能在移动平台上编译，而 lua 可以直接在操作系统运行（类似 javaScript 可以直接在浏览器运行一样）。</p> <p>可以直接下载 lua 到移动平台上，只要操作系统本身支持编译的环境，具有 ISO（ANSI）C 编译器，就可以编译执行 Lua，开箱即用。不用像其他语言 C# 等要编译，lua 是解释型语言。</p> <h3 id="lua-特性"><a href="#lua-特性" class="header-anchor">#</a> lua 特性</h3> <ul><li>轻量级</li> <li>可扩展</li> <li>其他特性
<ul><li>支持面向过程和<code>函数式编程</code></li> <li>自动内存管理：只提供了一种通用类型的表（table），用它可以实现数组、哈希表、集合、对象。</li></ul></li> <li>兼容大部分可以编译 C 语言的系统</li></ul> <h3 id="lua-环境安装"><a href="#lua-环境安装" class="header-anchor">#</a> Lua 环境安装</h3> <h4 id="mac-os-x-系统上安装"><a href="#mac-os-x-系统上安装" class="header-anchor">#</a> Mac OS X 系统上安装</h4> <p>这里下载的是编译后的二进制文件，如果直接下载源码的话，还要用 C 编译器编译成 lua 程序。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -R -O http://www.lua.org/ftp/lua-5.3.0.tar.gz
<span class="token function">tar</span> zxf lua-5.3.0.tar.gz
<span class="token builtin class-name">cd</span> lua-5.3.0
<span class="token function">make</span> macosx <span class="token builtin class-name">test</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span> <span class="token comment"># 环境变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>进入 lua 环境，输入 <code>print(&quot;Hello World!&quot;)</code> 命令。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ lua
Lua <span class="token number">5.3</span>.5  Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">1994</span>-2018 Lua.org, PUC-Rio
<span class="token operator">&gt;</span> print<span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>
Hello World<span class="token operator">!</span>
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>直接通过 lua 解释器执行 <code>HelloWorld.lua</code> 文件：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ lua HelloWorld.lua
Hello World<span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>从上面看到的结果，跟安装完 node 后的环境很像，node 是 v8 引擎下执行 js，node 是 C++编写。而 lua 则是 C 编写，安装编译后的 lua 环境，即可解释执行 lua （编译执行一起）的文件程序。</p> <p>可以直接输入 <code>lua</code> 进入 lua 运行环境：</p> <h3 id="lua-编程"><a href="#lua-编程" class="header-anchor">#</a> lua 编程</h3> <h4 id="交互式编程"><a href="#交互式编程" class="header-anchor">#</a> 交互式编程</h4> <p>Lua 提供了交互式编程模式，我们可以在命令行中输入程序并立即查看效果。</p> <p>Lua 交互式编程可以通过命令 <code>lua -i</code> 或 <code>lua</code> 来启用。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>$ lua
Lua <span class="token number">5.3</span><span class="token number">.5</span>  <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">1994</span><span class="token operator">-</span><span class="token number">2018</span> Lua<span class="token punctuation">.</span>org<span class="token punctuation">,</span> PUC<span class="token operator">-</span>Rio
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在命令行中输入：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>
Hello World!
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="脚本式编程"><a href="#脚本式编程" class="header-anchor">#</a> 脚本式编程</h4> <p>我们可以将 Lua 程序代码保存到一个以 lua 结尾的文件，并执行，该模式称为脚本式编程。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>$ lua hello<span class="token punctuation">.</span>lua
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="lua-基本语法"><a href="#lua-基本语法" class="header-anchor">#</a> Lua 基本语法</h3> <p>end 表示一个代码块的结束</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>co2 <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token keyword">do</span>
            <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">then</span>
                <span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>co2<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--running</span>
                <span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">--thread:XXXXXX</span>
            <span class="token keyword">end</span>
            coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span>
<span class="token comment">-- 单行注释</span>
<span class="token comment">--[[ 多行注释
--]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="标志符"><a href="#标志符" class="header-anchor">#</a> 标志符</h4> <h4 id="关键词"><a href="#关键词" class="header-anchor">#</a> 关键词</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>and	<span class="token builtin class-name">break</span>	<span class="token keyword">do</span>	<span class="token keyword">else</span>
elseif	end	<span class="token boolean">false</span>	<span class="token keyword">for</span>
<span class="token keyword">function</span>	<span class="token keyword">if</span>	<span class="token keyword">in</span>	<span class="token builtin class-name">local</span>
nil	not	or	repeat
<span class="token builtin class-name">return</span>	<span class="token keyword">then</span>	<span class="token boolean">true</span>	<span class="token keyword">until</span>
<span class="token keyword">while</span>	goto
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="全局变量"><a href="#全局变量" class="header-anchor">#</a> 全局变量</h4> <p>在默认情况下，变量总是认为是全局的。</p> <p>全局变量不需要声明，给一个变量赋值即创建了这个全局变量，访问一个没有初始化的变量也不会出错，只不过得到的结果是：nil。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ lua
<span class="token operator">&gt;</span> b <span class="token operator">=</span> <span class="token number">10</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> print<span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token number">10</span>
<span class="token operator">&gt;</span> b
<span class="token number">10</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> b <span class="token operator">=</span> nil
<span class="token operator">&gt;</span> print<span class="token punctuation">(</span>b<span class="token punctuation">)</span>
nil
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="值"><a href="#值" class="header-anchor">#</a> 值</h3> <p>Lua 是动态类型语言，变量不需要类型定义，只需要为变量赋值。值可以存储在变量中，作为参数传递或结果返回。Lua 中有 8 个基本类型分别为：nil、boolean、number、string、userdata、functon、thread 和 table。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
string
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">10.4</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
number
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>print<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">function</span>
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">function</span>
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
boolean
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">nil</span>
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
string
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="基本数据"><a href="#基本数据" class="header-anchor">#</a> 基本数据</h4> <h5 id="nil"><a href="#nil" class="header-anchor">#</a> nil</h5> <p>nil 类型表示一种没有任何有效值，它只有一个 nil。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">nil</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>对于全局变量和 table，nil 还有一个 “删除” 作用，给全局变量或 table 表里的变量赋予一个 nil 值，等同于把它们删掉。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> tab1 <span class="token operator">=</span> <span class="token punctuation">{</span> key1 <span class="token operator">=</span> <span class="token string">&quot;val1&quot;</span><span class="token punctuation">,</span> key2 <span class="token operator">=</span> <span class="token string">&quot;val2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;val3&quot;</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>tab1<span class="token punctuation">)</span> <span class="token keyword">do</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span><span class="token string">&quot;-&quot;</span><span class="token operator">..</span>v<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token number">1</span><span class="token operator">-</span>val3
key1<span class="token operator">-</span>val1
key2<span class="token operator">-</span>val2
<span class="token operator">&gt;</span> tab1<span class="token punctuation">.</span>key1 <span class="token operator">=</span> <span class="token keyword">nil</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>tab1<span class="token punctuation">)</span> <span class="token keyword">do</span>                                                    <span class="token function">print</span><span class="token punctuation">(</span>k <span class="token operator">..</span><span class="token string">&quot;-&quot;</span><span class="token operator">..</span>v<span class="token punctuation">)</span>                                                                                                    <span class="token keyword">end</span>
<span class="token number">1</span><span class="token operator">-</span>val3
key2<span class="token operator">-</span>val2
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>nit 作比较时应该加上双引号 <code>&quot;</code>：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token function">type</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nil</span>
<span class="token keyword">false</span>
<span class="token operator">&gt;</span> <span class="token function">type</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'nil'</span>
<span class="token keyword">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="boolean"><a href="#boolean" class="header-anchor">#</a> boolean</h5> <p>boolean 类型只有两个可选值：true（真）和 false（假），Lua 把 false 和 nil 看作是 false，其他的都为 true，数字 0 也是 true：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
boolean
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
boolean
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">nil</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token keyword">if</span> <span class="token keyword">false</span> <span class="token keyword">or</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;至少有一个是 true&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">else</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;false 和 nil 都为 false&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token keyword">false</span> 和 <span class="token keyword">nil</span> 都为 <span class="token keyword">false</span>
<span class="token operator">&gt;</span> <span class="token keyword">if</span> <span class="token number">0</span> <span class="token keyword">then</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;数字 0 是 true&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">else</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;数字 0 为 false&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
数字 <span class="token number">0</span> 是 <span class="token keyword">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="number（数字）"><a href="#number（数字）" class="header-anchor">#</a> number（数字）</h5> <p>Lua 默认只有一种 number 类型：double（双精度）类型（默认类型可以修改 luaconf.h 里定义），以下几种写法都被看作是 number 类型：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
number
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">2.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
number
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
number
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">2e+1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
number
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">0.2e-1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
number
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token number">7.8263692594256e-06</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
number
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="string（字符串）"><a href="#string（字符串）" class="header-anchor">#</a> string（字符串）</h5> <p>字符串由一对双引号或单引号来表示。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> string1 <span class="token operator">=</span> <span class="token string">&quot;this is string1&quot;</span>
<span class="token operator">&gt;</span> string1
this is string1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也可以用 2 个方括号 <code>[[]]</code> 来表示“一块”字符串。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> html <span class="token operator">=</span> <span class="token string">[[
&gt;&gt; &lt;html&gt;
&gt;&gt; &lt;head&gt;&lt;/head&gt;
&gt;&gt; &lt;body&gt;
&gt;&gt; &lt;a href=&quot;http://www.jecyu.com&quot;&gt;Jecyu&lt;/a&gt;
&gt;&gt; &lt;/body&gt;
&gt;&gt; &lt;/html&gt;
&gt;&gt; ]]</span>
<span class="token operator">&gt;</span> html
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;http://www.jecyu.com&quot;</span><span class="token operator">&gt;</span>Jecyu<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>在对一个数字字符串上进行算术操作时，Lua 会尝试将这个数字字符串转成一个数字：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token string">&quot;2&quot;</span> <span class="token operator">+</span> <span class="token number">6</span>
<span class="token number">8.0</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;error&quot;</span> <span class="token operator">+</span> <span class="token number">1</span>
stdin<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">:</span> attempt to perform arithmetic on a string value
stack traceback<span class="token punctuation">:</span>
	stdin<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token keyword">in</span> main chunk
	<span class="token punctuation">[</span>C<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">in</span> ?
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>以上 “error” + 1 执行报错了，字符串连接使用的是 <code>..</code>，如</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">.</span><span class="token number">.1</span>
error1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用 <code>#</code> 来计算字符串的长度，放在字符串前面：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token operator">#</span>html
<span class="token number">85</span>
<span class="token operator">&gt;</span> <span class="token operator">#</span>string1
<span class="token number">15</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="数据结构"><a href="#数据结构" class="header-anchor">#</a> 数据结构</h4> <ul><li>userdata</li> <li>table</li></ul> <h5 id="table"><a href="#table" class="header-anchor">#</a> table</h5> <p>通过 table，可以实现<code>数组</code>、<code>哈希表</code>、<code>集合</code>和<code>对象</code>。</p> <p>在 Lua 里，table 的创建是通过“<code>构造表达式</code>”来完成，最简单构造表达式是 <code>{}</code>，用来创建一个空表。也可以在表里添加一些数据，直接初始化表：</p> <p>Lua 中的表（table）其实是一个“关联数组”（associative arrays），数组的索引可以是数字、字符串或表类型。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;value&quot;</span>
<span class="token operator">&gt;</span> a
table<span class="token punctuation">:</span> <span class="token number">0x7faaf1e02760</span>
<span class="token operator">&gt;</span> key <span class="token operator">=</span> <span class="token number">10</span>
<span class="token operator">&gt;</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">22</span>
<span class="token operator">&gt;</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">11</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">do</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token operator">..</span><span class="token string">&quot;:&quot;</span><span class="token operator">..</span>v<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token number">10</span><span class="token punctuation">:</span><span class="token number">33</span>
key<span class="token punctuation">:</span>value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>不同于其他语言的数组把 0 作为数组的初始索引，在 Lua 里表的默认索引一般以 1 开始：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> tbl2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pear&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;grape&quot;</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span> tbl2
table<span class="token punctuation">:</span> <span class="token number">0x7faaf1c0bd40</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> key<span class="token punctuation">,</span> val <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>tbl2<span class="token punctuation">)</span> <span class="token keyword">do</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Key&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
Key	<span class="token number">1</span>
Key	<span class="token number">2</span>
Key	<span class="token number">3</span>
Key	<span class="token number">4</span>
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>table 不会固定长度大小，有新数据添加时 table 长度会自动增长，没初始的 table 都是 nil。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token keyword">do</span>
<span class="token operator">&gt;&gt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token number">10</span>
<span class="token operator">&gt;</span> a3<span class="token punctuation">[</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;val&quot;</span>
<span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;val&quot;</span>
<span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">]</span>
val
<span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="userdata（自定义类型）"><a href="#userdata（自定义类型）" class="header-anchor">#</a> userdata（自定义类型）</h5> <p>userdata 是一种用户自定义的数据，用于表示一种由应用程序或 C/C++ 语言库所创建的类型，可以将任意 C/C++ 的任意数据类型的数据（通常是 struct 和指针）存储到 Lua 变量中调用。</p> <p>表示任意存储在变量中的 C 数据结构。</p> <h4 id="funciton（函数）"><a href="#funciton（函数）" class="header-anchor">#</a> funciton（函数）</h4> <p>在 Lua 中，函数是被看作是“第一类值（First-Class Value）”，函数可以存在变量里：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">then</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">return</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">else</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">120</span>
<span class="token operator">&gt;</span> factorial2 <span class="token operator">=</span> factorial
<span class="token operator">&gt;</span> <span class="token function">factorial2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">120</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>funciton 可以通过匿名（anonymous function）的方式通过参数传递：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token keyword">function</span> <span class="token function">testFn</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> fun<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span> <span class="token keyword">do</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">fun</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;</span> tab <span class="token operator">=</span> <span class="token punctuation">{</span> key1 <span class="token operator">=</span> <span class="token string">&quot;val1&quot;</span><span class="token punctuation">,</span> key2<span class="token operator">=</span><span class="token string">&quot;val2&quot;</span><span class="token punctuation">}</span>
t<span class="token operator">&gt;</span> <span class="token function">testFn</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token keyword">return</span> key<span class="token operator">..</span><span class="token string">&quot;=&quot;</span><span class="token operator">..</span>val <span class="token keyword">end</span><span class="token punctuation">)</span>
key2<span class="token operator">=</span>val2
key1<span class="token operator">=</span>val1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="thread（线程）"><a href="#thread（线程）" class="header-anchor">#</a> thread（线程）</h4> <p>在 Lua 里，最主要的线程是协同程序（coroutine）。它跟线程（thread）差不多，拥有自己<code>独立的栈、局部变量和指令指针，可以跟其他协同程序共享全局变量和其他大部分东西</code>。</p> <p>线程与协程的区别：线程可以同时多个运行，而协同程序需要彼此协作的运行，任意时刻只能运行一个，并且处于运行状态的协程只有被挂起（suspend）时才会暂停。</p> <p>协同程序有点类似同步的多线程，在等待同一个线程锁的几个线程有点类似协同。</p> <h5 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法</h5> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>coroutine.create()</td> <td>创建 coroutine，返回 coroutine，参数是一个函数，当和 resume 配合使用的时候就唤醒函数调用</td></tr> <tr><td>coroutine.resume()</td> <td>重启 coroutine，和 create 配合使用</td></tr> <tr><td>coroutine.yield()</td> <td>挂起 coroutine，将 coroutine 设置为挂起状态，这个和 resume 配合使用能有很多有用的效果</td></tr> <tr><td>coroutine.status()</td> <td>查看 coroutine 的状态：<br>注：coroutine 的状态有三种：dead、supspended，runinng</td></tr> <tr><td>coroutine.wrap()</td> <td>创建 coroutine，返回一个函数，一旦你调用这个函数，就进去 coroutine，和 create 功能重复</td></tr> <tr><td>coroutine.running()</td> <td>返回正在跑的 coroutine，一个 coroutine 就是一个线程，当使用 running 的时候，就是返回一个 coroutine 的线程号</td></tr></tbody></table> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> co <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token keyword">true</span>
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>co<span class="token punctuation">)</span><span class="token punctuation">)</span>
dead
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> co <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>
<span class="token operator">&gt;&gt;</span>     <span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>         <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&gt;&gt;</span>     <span class="token keyword">end</span>
<span class="token operator">&gt;&gt;</span> <span class="token punctuation">)</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> <span class="token function">co</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> co2 <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
<span class="token operator">&gt;&gt;</span>     <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>         <span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token keyword">do</span>
<span class="token operator">&gt;&gt;</span>             <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>             <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">then</span>
<span class="token operator">&gt;&gt;</span>                 <span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>co2<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--running</span>
<span class="token operator">&gt;&gt;</span>                 <span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">--thread:XXXXXX</span>
<span class="token operator">&gt;&gt;</span>             <span class="token keyword">end</span>
<span class="token operator">&gt;&gt;</span>             coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>         <span class="token keyword">end</span>
<span class="token operator">&gt;&gt;</span>     <span class="token keyword">end</span>
<span class="token operator">&gt;&gt;</span> <span class="token punctuation">)</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co2<span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token keyword">true</span>
<span class="token operator">&gt;</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co2<span class="token punctuation">)</span>
<span class="token number">2</span>
<span class="token keyword">true</span>
<span class="token operator">&gt;</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co2<span class="token punctuation">)</span>
<span class="token number">3</span>
running
thread<span class="token punctuation">:</span> <span class="token number">0x7fbf7be04ff8</span>	<span class="token keyword">false</span>
<span class="token keyword">true</span>
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>co2<span class="token punctuation">)</span><span class="token punctuation">)</span>
suspended
<span class="token operator">&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span>coroutine<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
thread<span class="token punctuation">:</span> <span class="token number">0x7fbf7c800008</span>	<span class="token keyword">true</span>
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><code>coroutine.running()</code> 可以看出，coroutine 在底层实现就是一个线程。当 <code>create</code> 一个 coroutine 的时候就是在新线程中<code>注册</code>了<code>事件</code>。当使用 <code>resume</code> 触发事件的时候，create 的 coroutine 函数就被执行了，当遇到 <code>yield</code> 的时候就代表挂起当前线程，等候再次 resume 触发事件。</p> <p>resume 和 yield 的配合强大之处在于，resume 处于主程中，它将外部状态（数据）传入到协同程序内部；而 yield 则将内部的状态（数据）返回到主程序中。</p> <h4 id="生产者和消费者问题"><a href="#生产者和消费者问题" class="header-anchor">#</a> 生产者和消费者问题</h4> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code>ocal newProductor

<span class="token keyword">function</span> <span class="token function">productor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token number">0</span>
     <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>
          i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
          <span class="token function">send</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>     <span class="token comment">-- 将生产的物品发送给消费者</span>
     <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>
          <span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment">-- 从生产者那里得到物品</span>
          <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
     <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">local</span> status<span class="token punctuation">,</span> value <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>newProductor<span class="token punctuation">)</span>
     <span class="token keyword">return</span> value
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">send</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
     coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>     <span class="token comment">-- x表示需要发送的值，值返回以后，就挂起该协同程序</span>
<span class="token keyword">end</span>

<span class="token comment">-- 启动程序</span>
newProductor <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>productor<span class="token punctuation">)</span>
<span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="控制流"><a href="#控制流" class="header-anchor">#</a> 控制流</h3> <h4 id="lua-条件"><a href="#lua-条件" class="header-anchor">#</a> Lua 条件</h4> <p>控制结构的条件表达式结果可以是任何值，Lua 认为 false 和 nil 为假，true 和 非 nil 为真。要注意的是 Lua 中 0 为 true。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">then</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;0 为 true&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token number">0</span> 为 <span class="token keyword">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="lua-循环"><a href="#lua-循环" class="header-anchor">#</a> Lua 循环</h4> <ul><li>while</li> <li>for</li> <li>repeat...until</li> <li>循环嵌套（while do...end; for...do...end; repeat...until）</li></ul> <h3 id="对象和方法"><a href="#对象和方法" class="header-anchor">#</a> 对象和方法</h3> <p>Lua 中的表不仅在某种意义上是一种对象。像对象一样，表也有状态（成员变量）；也有与对象的值独立的本性，特别是拥有两个不同值的对象（table）代表不同的对象；一个对象在不同的时候也可以有不同的值，但它始终是一个对象；与对象类似，表的生命周期与其由什么创建、在哪创建没有关系。对象有他们的成员函数。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> Account <span class="token operator">=</span> <span class="token punctuation">{</span>balance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span>                                                 <span class="token operator">&gt;</span> <span class="token keyword">function</span> Account<span class="token punctuation">.</span><span class="token function">withdraw</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>                                                  Account<span class="token punctuation">.</span>balance <span class="token operator">=</span> Account<span class="token punctuation">.</span>balance <span class="token operator">-</span> v                                           <span class="token keyword">end</span>
<span class="token operator">&gt;</span> Account<span class="token punctuation">.</span><span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token number">100.00</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> Account<span class="token punctuation">.</span>balance
<span class="token operator">-</span><span class="token number">100.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="类"><a href="#类" class="header-anchor">#</a> 类</h3> <p>我们知道，对象由属性和方法组成。LUA 中最基本的结构是 <code>table</code>，所以需要用 table 来描述对象的属性。</p> <p>lua 中的 <code>function</code> 可以用来表示方法。<strong>那么 LUA 中的类可以通过 table + function 模拟出来。</strong></p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token comment">-- 1. 元类</span>
<span class="token operator">&gt;</span> Rectangle <span class="token operator">=</span> <span class="token punctuation">{</span>area <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> breadth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> <span class="token comment">-- 2. 基本类的方法 new</span>
<span class="token operator">&gt;</span> <span class="token keyword">function</span> Rectangle<span class="token punctuation">:</span><span class="token function">new</span> <span class="token punctuation">(</span>o<span class="token punctuation">,</span>length<span class="token punctuation">,</span>breadth<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>   o <span class="token operator">=</span> o <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span>   <span class="token function">setmetatable</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> self<span class="token punctuation">)</span> <span class="token comment">-- 关键函数</span>
<span class="token operator">&gt;&gt;</span>   self<span class="token punctuation">.</span>__index <span class="token operator">=</span> self
<span class="token operator">&gt;&gt;</span>   self<span class="token punctuation">.</span>length <span class="token operator">=</span> length <span class="token keyword">or</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span>   self<span class="token punctuation">.</span>breadth <span class="token operator">=</span> breadth <span class="token keyword">or</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span>   self<span class="token punctuation">.</span>area <span class="token operator">=</span> length<span class="token operator">*</span>breadth<span class="token punctuation">;</span>
<span class="token operator">&gt;&gt;</span>   <span class="token keyword">return</span> o
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> <span class="token comment">-- 3. 基本类的方法 printArea</span>
<span class="token operator">&gt;</span> <span class="token keyword">function</span> Rectangle<span class="token punctuation">:</span><span class="token function">printArea</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;矩形面积为 &quot;</span><span class="token punctuation">,</span>self<span class="token punctuation">.</span>area<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;</span> Rectangle
table<span class="token punctuation">:</span> <span class="token number">0x7fe732c0c460</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token operator">&gt;</span> <span class="token comment">-- 创建对象</span>
<span class="token operator">&gt;</span> r <span class="token operator">=</span> Rectangle<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token comment">-- 访问属性</span>
<span class="token operator">&gt;</span> r<span class="token punctuation">.</span>length
<span class="token number">10</span>
<span class="token operator">&gt;</span> <span class="token comment">-- 访问成员函数</span>
<span class="token operator">&gt;</span> r<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
矩形面积为 	<span class="token number">200</span>
<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h4> <p>要实现继承，则需要在声明新变量时直接居于父类实例化一个值，然后再声明 new 函数：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">-- 元类</span>
<span class="token operator">&gt;</span> Shape <span class="token operator">=</span> <span class="token punctuation">{</span> area <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token comment">-- 基础类方法 new</span>
<span class="token operator">&gt;</span> <span class="token keyword">function</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> side<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> o <span class="token operator">=</span> o <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> self<span class="token punctuation">)</span> <span class="token comment">-- 关键函数</span>
<span class="token operator">&gt;&gt;</span> self<span class="token punctuation">.</span>__index <span class="token operator">=</span> self
<span class="token operator">&gt;&gt;</span> side <span class="token operator">=</span> side <span class="token keyword">or</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span> self<span class="token punctuation">.</span>area <span class="token operator">=</span> side <span class="token operator">*</span> side
<span class="token operator">&gt;&gt;</span> <span class="token keyword">return</span> o
<span class="token comment">-- 基础类方法 printArea</span>
<span class="token operator">&gt;</span> <span class="token keyword">function</span> Shape<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;面积为&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>area<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token comment">-- 创建对象</span>
<span class="token operator">&gt;</span> myshape <span class="token operator">=</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> myshape<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
面积为	<span class="token number">100</span>


<span class="token operator">&gt;</span> Rectangle <span class="token operator">=</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token comment">-- 派生类方法 new</span>
<span class="token operator">&gt;</span> <span class="token keyword">function</span> Rectangle<span class="token punctuation">:</span><span class="token function">new</span> <span class="token punctuation">(</span>o<span class="token punctuation">,</span>length<span class="token punctuation">,</span>breadth<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>   o <span class="token operator">=</span> o <span class="token keyword">or</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>   <span class="token function">setmetatable</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> self<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>   self<span class="token punctuation">.</span>__index <span class="token operator">=</span> self
<span class="token operator">&gt;&gt;</span>   self<span class="token punctuation">.</span>area <span class="token operator">=</span> length <span class="token operator">*</span> breadth
<span class="token operator">&gt;&gt;</span>   <span class="token keyword">return</span> o
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> <span class="token comment">-- 派生类方法 printArea，函数重写</span>
<span class="token operator">&gt;</span> <span class="token keyword">function</span> Rectangle<span class="token punctuation">:</span><span class="token function">printArea</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span>   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;矩形面积为 &quot;</span><span class="token punctuation">,</span>self<span class="token punctuation">.</span>area<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token keyword">end</span>
<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> <span class="token comment">-- 创建对象</span>
<span class="token operator">&gt;</span> myrectangle <span class="token operator">=</span> Rectangle<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> myrectangle<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
矩形面积为 	<span class="token number">200</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h4 id="模块和包"><a href="#模块和包" class="header-anchor">#</a> 模块和包</h4> <p>模块类似一个封装库，从 Lua 5.1 开始，Lua 假如了标准的模块管理机制，可以把一些公用的代码放在一个文件里，以 API 接口的形式在其他地方调用，有利于代码的重用和降低代码耦合度。</p> <p>Lua 的模块是由变量、函数等已知元素组成的 table，因此创建一个模块很简单，就是创建一个 table，然后把需要导出的常量、函数放入其中，最后返回这个 table 就行。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token comment">-- 定义一个名为 module 的模块</span>
module <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">-- 定义一个常量</span>
module<span class="token punctuation">.</span>constant <span class="token operator">=</span> <span class="token string">&quot;这是一个常量&quot;</span>

<span class="token comment">-- 定义一个函数</span>
<span class="token keyword">function</span> module<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;这是一个公有函数！\n&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;这是一个私有函数！&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> module<span class="token punctuation">.</span><span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">return</span> module<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>使用：</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">local</span> m <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./demo01.lua&quot;</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>constant<span class="token punctuation">)</span>
m<span class="token punctuation">.</span><span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="加载机制"><a href="#加载机制" class="header-anchor">#</a> 加载机制</h5> <p>对于自定义的模块，模块文件不是放到哪个文件目录都行，函数 require 有它自己的文件路径加载策略，它会尝试从 Lua 文件或 C 程序库中加载模块。</p> <p>require 用于搜索 Lua 文件的路径是存放在全局变量 package.path 中，当 Lua 启动后，会以环境变量 LUA_PATH 的值来初始化这个环境变量。如果没有找到环境变量，则使用一个编译时定义的默认路径来初始化。</p> <p>当然，如果没有 LUA_PATH 这个变量，也可以自定义设置，在当前用户根目录下打开 <code>.profile</code> 文件（没有则创建，打开 .bashrc 文件也可以），例如把 “~/lua/” 路径加入 LUA_PATH 环境变量里：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># LUA_PATH</span>
<span class="token builtin class-name">export</span> LUA_PATH <span class="token operator">=</span> <span class="token string">&quot;~/lua/?.lua&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="c-包（模块）"><a href="#c-包（模块）" class="header-anchor">#</a> C 包（模块）</h5> <p>Lua 和 C 是很容易结合的，使用 C 为 lua 写包。
与 Lua 中写包不同，C 包在使用前必须首先加载并连接，在大多数系统中最容易的实现方式是通过动态链接库机制。</p> <p>Lua 在一个叫 loadlib 的函数内提供了所有的动态连接的功能。这个函数有两个参数：库的绝对路径和初始化函数。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">local</span> path <span class="token operator">=</span> <span class="token string">&quot;/usr/local/lua/lib/libluasocket.so&quot;</span>
<span class="token keyword">local</span> f <span class="token operator">=</span> <span class="token function">loadlib</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">&quot;luaopen_socket&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>loadlib 函数加载指定的库并且连接到 Lua，然后它并不打开库（也就是说没有调用初始化函数），反之他返回初始化函数作为 Lua 的一个函数，这样我们就可以直接在 Lua 中调用它。</p> <div class="language-lua line-numbers-mode"><pre class="language-lua"><code><span class="token keyword">local</span> path <span class="token operator">=</span> <span class="token string">&quot;/usr/local/lua/lib/libluasocket.so&quot;</span>
<span class="token comment">-- 或者 path = &quot;C:\\windows\\luasocket.dll&quot;，这是 Window 平台下</span>
<span class="token keyword">local</span> f <span class="token operator">=</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">loadlib</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">&quot;luaopen_socket&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">-- 真正打开库</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="其他特性"><a href="#其他特性" class="header-anchor">#</a> 其他特性</h3> <h4 id="lua-变量"><a href="#lua-变量" class="header-anchor">#</a> Lua 变量</h4> <h3 id="lua-断点调试"><a href="#lua-断点调试" class="header-anchor">#</a> Lua 断点调试</h3> <h4 id="vscode"><a href="#vscode" class="header-anchor">#</a> vscode</h4> <p>在 vscode 中搜索 -&gt; lua debug，按照插件。</p> <p>然后在项目根目录下新建 .vscode 文件夹，新建 launch.json 文件，写入以下配置：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch lua process&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lua&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stopOnEntry&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;program&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}/examples/lua/demo01.lua&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}/?.lua&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cpath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}/?.dll&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;arg&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="lua-debug"><a href="#lua-debug" class="header-anchor">#</a> Lua Debug</h5> <p>模块功能</p> <ul><li><code>vscode-debugger-client.exe</code> 代理客户端。在 <code>launch</code> 模式中，vscode-debug-client.exe 会用 vscode-debug.dll 创建一个调试器进行调试。在 attach 模式中，vscode-debug-client.exe 会连接一个远程的调试器（也是由 vscode-debug.dll 创建的），vscode-debug-client.exe 只负责在 vscode-debug.dll 和 vscode 之间转发信息。</li> <li><code>vscode-debug.dll</code> 调试器的核心模块。你可以在你的程序中加载 vscode-debug.dll 并创建调试器，这样 vscode 就可以通过 attach 模式进行调试。</li> <li><code>luacore.dll</code> lua 核心模块。如果你的程序定制了 lua，你可以替换掉它。</li></ul> <ol><li>launch 模式，等同于使用 lua.exe 执行的入口文件
<ol><li>program，lua.exe 执行的入口文件</li> <li>cwd，lua.exe 的当前目录</li> <li>stopOnEntry，开始调试时是否先暂停</li> <li>lua带来了，指定 lua dll 的路径，如有不填会加载 luacore.dll</li> <li>path，用于初始化 package.path</li> <li>cpath，用于初始化 package。cpath</li> <li>arg，lua.exe 的命令行参数，用于初始化 arg</li> <li>console，lua 的标准输出的编码，可选择 utf8、ansi、none。为 none 时不会重定向标准输出到 vscode</li> <li>soureMaps 源码定向</li></ol></li></ol> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li>调试
<ul><li><a href="https://blog.csdn.net/x356982611/article/details/53029389" target="_blank" rel="noopener noreferrer">lua 5.3开发调试环境搭建<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.showdoc.cc/luaide?page_id=687553326343048" target="_blank" rel="noopener noreferrer">LuaIde<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><a href="https://www.zhihu.com/question/21717567" target="_blank" rel="noopener noreferrer">Lua 为什么在游戏编程领域被广泛运用？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.runoob.com/lua/lua-tutorial.html" target="_blank" rel="noopener noreferrer">菜鸟 Lua 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.sikiedu.com/course/85/task/16032/show#" target="_blank" rel="noopener noreferrer">siki 学院<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.lua.org/download.html" target="_blank" rel="noopener noreferrer">lua 官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.zhihu.com/question/395593519/answer/1236733229" target="_blank" rel="noopener noreferrer">为什么 lua 在游戏开发中应用普遍？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.zhihu.com/topic/19612186/top-answers" target="_blank" rel="noopener noreferrer">知乎 lua 话题 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>《lua 游戏开发》</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/17/2020, 3:32:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Notebook/programming-language/ruby.html" class="prev">
        Ruby
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Notebook/assets/js/app.accc6ad4.js" defer></script><script src="/Notebook/assets/js/4.2708dfb6.js" defer></script><script src="/Notebook/assets/js/234.f9dd9c73.js" defer></script>
  </body>
</html>
