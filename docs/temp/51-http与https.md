# http ä¸ https

- æ¦‚å¿µ
- chrome çš„å®‰å…¨è­¦å‘Šï¼Œä»ä»€ä¹ˆæ—¶å€™å¼€å§‹
- å‰åç«¯ç¼–ç çš„å·®å¼‚
- è‡ªç­¾åè¯ä¹¦ï¼ˆArcGIS çš„æœåŠ¡å‘å¸ƒï¼‰
- ä½•ä¸ºå¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†
- arcgis æ˜¯å¦‚ä½•è®¾ç½®æœåŠ¡åŒæ—¶æ”¯æŒ HTTP ä¸ HTTPSï¼Ÿ

ç›®æ ‡è¯»è€…
- å‰ç«¯å¼€å‘

## ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ HTTPS

![](../.vuepress/public/images/2020-08-11-21-22-31-https.png)

ä¸­é—´äººæ”»å‡»â€”â€”é€šè¿‡ DNS åŸŸååŠ«æŒï¼ˆä½œä¸ºä¸€ä¸ªä»£ç†è½¬å‘ï¼Œä¼ é€æ•°æ®ç»™æºæœåŠ¡å™¨ï¼‰

ä½ å®Œå…¨æ— æ³•å¾—çŸ¥ï¼Œä½ æ”¶åˆ°çš„ç»“æœæ˜¯å¦æ˜¯è¢«ç¯¡æ”¹åçš„ç»“æœï¼Œå½“ç„¶ï¼Œæ›´æ— æ³•ä¿è¯ï¼Œå³ä½¿æ²¡åŠ¨è¿‡çš„æ•°æ®ï¼Œæ˜¯ä¸æ˜¯ä¼šè¢«çªƒå¬ã€‚

æˆ‘ä»¬å«å›¾ä¸­çš„é‚£ä½é»‘å®¢ã€Œä¸­é—´äººã€ï¼Œä¹Ÿå°±ä¼šé€ æˆä¸Šæ–‡æ‰€è¯´çš„ä¸­é—´äººæ”»å‡»ã€‚

å› æ­¤åæ¥ï¼Œå¤§å®¶å°±æƒ³åˆ°äº†ï¼Œåªè¦æ‰‹æ¡ä¸€ä»½å¯†é’¥ï¼Œæ˜¯å¦å°±å¤©ä¸‹æˆ‘æœ‰äº†ã€‚

å¸¸è§çš„åŠ å¯†æœ‰ä¸¤ç§ï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ã€‚æ— è®ºå¯¹ç§°åŠ å¯†è¿˜æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œå¯†é’¥ä¸€æ—¦æ³„æ¼ï¼Œè¿˜æ˜¯æ²¡åŠæ³•ã€‚ï¼ˆå¯¹ç§°åŠ å¯†æ¯”è¾ƒå¿«ï¼Œä½†ä¸€ä»½å¯†é’¥éå¸¸å®¹æ˜“æ³„æ¼ï¼Œåœ¨éå¯¹åŠ å¯†ä¸­ï¼Œå…¬é’¥æœ¬èº«æ˜¯å…¬å¼€çš„ï¼Œåªè¦æˆªå–ç§é’¥è¿”å›ï¼Œéœ€è¦å…¬é’¥è§£å¯†çš„éƒ¨åˆ†ï¼Œç…§æ ·çš„æˆªè·æ•°æ®ã€‚ï¼‰ï¼ˆæ¯”å¦‚ JWT ä¸­çš„å­˜å‚¨é—®é¢˜xxxxï¼‰

äºæ˜¯ï¼Œæˆ‘ä»¬åˆæƒ³åˆ°äº†ä¸€ç§å‡çº§çš„åŠ å¯†æ–¹å¼ï¼šå¯¹ç§°ä¸éå¯¹ç§°ç»“åˆã€‚

![](../.vuepress/public/images/2020-08-11-21-22-46-https.png)

ç„¶åå°±å˜æˆäº†ä¸Šå›¾ä¸­çš„åŠ å¯†æ–¹å¼ï¼Œæˆ‘å…ˆç”¨éå¯¹ç§°åŠ å¯†çš„æ–¹å¼ä¼ è¾“å¯†é’¥ï¼Œç„¶åç”¨å¯¹ç§°åŠ å¯†ä¼ è¾“æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…äº†ä¼ è¾“è¿‡ç¨‹ä¸­å¯¹ç§°åŠ å¯†å¯†é’¥æ³„æ¼å’Œå…¬é’¥å…¬å¼€å¯¼è‡´çš„æˆªè·æ•°æ®ä¸¤ä¸ªé—®é¢˜äº†â€”â€”ä½†æ˜¯ï¼Œæ€ä¹ˆè¯æ˜ä½ æ˜¯ä¸ªå¥½äººå‘¢ï¼Ÿ

äºæ˜¯ï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªå¯ä¿¡çš„ä¸‰æ–¹æœºæ„ï¼šè¯ä¹¦å‘å¸ƒæœºæ„ã€‚

ä»ä¸Šå¾—çŸ¥ï¼ŒHTTPS å³é€šè®¯åŠ å¯†ï¼Œå¯ä»¥é¢„é˜²çªƒå¬å’Œä¸­é—´äººæ”»å‡»ã€‚å½“ç„¶ï¼Œå¯¹äºå¤§å¤šæ•°ç”¨æˆ·å’Œç½‘ç«™è€Œè¨€ï¼Œæœ€é‡è¦çš„æ˜¯é¿å…äº†å„å±‚çš„åŠ«æŒã€‚

Google æ€»ç»“ï¼š
- å–„æ„çš„æˆ–æ¶æ„çš„å…¥ä¾µè€…ä¼šåˆ©ç”¨ä½ çš„ç½‘ç«™å’Œç”¨æˆ·ä¹‹é—´ä¼ è¾“çš„æ¯ä¸ªæœªå—ä¿æŠ¤çš„èµ„æºã€‚
- è®¸å¤šå…¥ä¾µè€…éƒ½ä¼šæŸ¥çœ‹æ±‡æ€»çš„è¡Œä¸ºä»¥è¯†åˆ«ä½ çš„ç”¨æˆ·ã€‚
- HTTPS ä¸ä»…å¯ä»¥é˜»æ­¢ä½ çš„ç½‘ç«™è¢«ä½ æ»¥ç”¨ï¼Œä¹Ÿæ˜¯è®¸å¤šå…ˆè¿›åŠŸèƒ½ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä½œä¸ºç±»ä¼¼åº”ç”¨åŠŸèƒ½ï¼ˆå¦‚æœåŠ¡å·¥ä½œçº¿ç¨‹ï¼‰çš„å®ç°æŠ€æœ¯ã€‚

## HTTPS æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

ç®€å•çš„æ¥è¯´ HTTPS çš„ Sï¼Œå°±æ˜¯ SSL/TLSï¼ŒSSL æ˜¯ TLS çš„å‰èº«ï¼ŒåŸºæœ¬ä¸Šæˆ‘ä»¬å½“æˆåŒä¸€ä¸ª ï¼ˆSï¼‰çœ‹å°±è¡Œï¼Œæ¢è¨€ä¹‹ï¼ŒHTTPS = HTTP + SSL/TLSï¼Œåœ¨ TCP å±‚åˆ° HTTP å±‚ä¹‹é—´åŠ äº†ä¸€å±‚ SSLã€‚ï¼ˆå®‰å…¨å¥—æ¥å­—ï¼‰

![](../.vuepress/public/images/2020-08-11-20-41-10-https-01.png)

æµè§ˆå™¨ä¼šåœ¨å‘èµ·è¯·æ±‚æ—¶å¸®ä½ æ£€éªŒè¿™ä¸ªç½‘ç«™è¯ä¹¦ä¸­çš„ä¿¡æ¯æ˜¯å¦åˆæ³•ï¼Œæ˜¯å¦æ˜¯ç”±æˆä¿¡æœºæ„å‘å¸ƒçš„ï¼Œå¦‚æœä¸åˆæ³•ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå¦‚æœåˆæ³•ï¼Œé‚£ä¹ˆå°±ç”¨å¯¹åº”é¢å‘è€…çš„ CA å…¬é’¥è§£å¯†ï¼Œå¯¹æœåŠ¡å™¨è¯ä¹¦çš„ç­¾åè§£å¯†ã€‚

ä¹‹åä½¿ç”¨ Hash ç®—æ³•è®¡ç®—å¾—åˆ°çš„è¯ä¹¦å’ŒæœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦å¯¹åº” Hash æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´ï¼Œä»£è¡¨æ²¡æœ‰è¢«å†’å……ã€‚

ä¹‹åè¯»å–è¯ä¹¦ä¸­çš„å¯†é’¥ï¼Œç”¨äºåç»­åŠ å¯†é€šè®¯ã€‚ğŸ”

![](../.vuepress/public/images/2020-08-11-20-41-25-https-02.png)

## å¦‚ä½•ä¸ºä½ çš„ç½‘ç«™å‡çº§ HTTPS 

NGNIX é…ç½®

## æˆ‘å¯ä»¥ä½¿ç”¨è‡ªç­¾åè¯ä¹¦å—ï¼Ÿ

å½“ç„¶ï¼Œä½ è‡ªå·±å¯ä»¥ç”¨ openssl ç”Ÿæˆä¸€ä¸ªè¯ä¹¦ï¼Œä½†æ˜¯æŒ‰ç…§æˆ‘ä»¬æ‰€è®²çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¯ä¹¦æ˜¯ä¸å—ä¿¡ä»»çš„ï¼Œæ‰€ä»¥ä¼šæœ‰ä»¥ä¸‹æç¤ºï¼š

- ä½ çš„è¿æ¥ä¸æ˜¯ç§å¯†çš„

å› ä¸º CA ä½äºç¾å›½ï¼Œå®¢æˆ·å†…ç½‘æ— æ³•ä½¿ç”¨ CA è¯ä¹¦æ ¡éªŒçš„ã€‚éœ€è¦å®¢æˆ·ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ã€‚åœ¨æ¯ä¸ªç”µè„‘ç«¯ï¼Œè®©å®¢æˆ·ç«¯ä¸‹è½½ä¸€ä¸ªæ ¹è¯ä¹¦åˆ°è‡ªå·±ç”µè„‘ä¸Šã€‚è¿™æ ·ç¬¬äºŒæ¬¡è®¿é—®åï¼Œå°±ä¸ä¼šäº§ç”Ÿä¸å®‰å…¨çš„é—®é¢˜ã€‚

å¦å¤–å¯¹äºåœ°å›¾å‘å¸ƒçš„æœåŠ¡ï¼Œéœ€è¦è¿›è¡Œè°ƒæ•´æ”¯æŒ HTTP å’Œ HTTPSã€‚

![](../.vuepress/public/images/2020-10-30-15-58-30.png)

![](../.vuepress/public/images/2020-10-30-15-58-41.png)

HTTP åªèƒ½è®¿é—® HTTP çš„æ¥å£ï¼ŒHTTPS å¯ä»¥è®¿é—® HTTPã€HTTPSã€‚Arcgis API for JS 4.12 API ä¹‹å‰è·å–å®¢æˆ·çš„ä¸‰ç»´æœåŠ¡æ—¶ï¼Œå‡ºç°ä¸èƒ½è®¿é—®ï¼Œéœ€è¦é€šè¿‡ token æ¥è®¿é—®ã€‚

## HTTPS å¯¹ç°æœ‰ç½‘ç«™æœ‰å½±å“å—ï¼Ÿ

- ç¬¬ä¸€æ¬¡è¯·æ±‚ç¨æ…¢ï¼Œåç»­è·Ÿ HTTP ä¸€æ ·

- åœ¨ http é¡µé¢ä¸­è¯·æ±‚ https èµ„æºæœ‰é—®é¢˜å—ï¼Ÿ

- æœ‰ https é¡µé¢ä¸­è¯·æ±‚ http èµ„æºæœ‰é—®é¢˜å—ï¼Ÿ


ä¼ä¸šè¯ä¹¦çš„æ˜‚è´µï¼Œä»¥åŠ HTTPS éœ€è¦æ ¡éªŒè¯ä¹¦ï¼Œè¿™å¤šäº†ä¸€æ­¥ SSLï¼Œå› æ­¤ä¹Ÿå°±æ‹–å»¶äº†ä¸€äº›é€Ÿåº¦ï¼Œå¦å¤– HTTP -> HTTPS è½¬æ¢çš„æ—¶å€™å¯èƒ½ä¹Ÿä¼šå¢åŠ è€—æ—¶ï¼ˆç›´æ¥è®¿é—® HTTPS å°±ä¸ä¼šæœ‰è¿™ä¸ªçƒ¦æ¼å•¦ï¼‰

<!-- è§£ç­”äº†ä¸€äº› https çš„é—®é¢˜ -->

## å‚è€ƒèµ„æ–™

- [HTTPSæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ3åˆ†é’Ÿä»‹ç»HTTPS](https://www.bilibili.com/video/BV1j7411H7vV?from=search&seid=7467835790250645901)
- [ã€ç§‘æ™®ã€‘è°·æ­Œæµè§ˆå™¨æ˜¾ç¤ºä¸å®‰å…¨çš„ç½‘ç«™çœŸçš„ä¸å®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆä¸å®‰å…¨ï¼ŸHTTPä¸HTTPSç§‘æ™®](https://www.bilibili.com/video/BV1cb411T7Bd)
- [åˆ«é—¹ï¼è‡ªç­¾åè¯ä¹¦ï¼](https://zhuanlan.zhihu.com/p/41501360)
- [åœ¨httpsä¸­å¼•å…¥httpèµ„æºæ‰€å¯¼è‡´çš„é—®é¢˜](https://juejin.im/post/6844903745931706381)
- [JS(HTTPé¡µé¢)å‘é€HTTPSè¯·æ±‚ã€åŒæºç­–ç•¥
](https://blog.csdn.net/Tastill/article/details/87874684)