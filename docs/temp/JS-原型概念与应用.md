# JS åŸå‹æ¦‚å¿µä¸åº”ç”¨
<!-- JS åŸå‹ -->

å¤´è„‘é£æš´ï¼š

æ ¸å¿ƒé—®é¢˜ï¼šä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€æ˜¯å¦‚ä½•æ–°å»ºå¯¹è±¡ä»¥åŠç»§æ‰¿ç±»çš„ï¼Œè€Œä½¿ç”¨ç±»æ˜¯ä¸ºäº†å…±äº«ä¸€äº›å…¬å…±çš„æ–¹æ³•å’Œå±æ€§ã€‚

JS åˆæ˜¯å¦‚ä½•é€šè¿‡åŸå‹è¿™ä¸ªæ¦‚å¿µæ¥å®ç°è¿™ä¸¤ä¸ªæ¦‚å¿µçš„ï¼ŒåŸåˆ™ä¸Šæ˜¯åŸºäºç±»ç»§æ‰¿ä¸åŸºäºåŸå‹ç»§æ‰¿çš„ä¸¤ç§åŒºåˆ«ã€‚
- override è¦†å†™

ç›®æ ‡è¯»è€…ï¼š
- åˆçº§å‰ç«¯å¼€å‘ï¼Œå¯¹ JS åŸå‹æ¦‚å¿µä¸ç†Ÿæ‚‰è€…

<!-- å†ç¨¿åï¼Œå‘å¸ƒåˆ° blogs æ–‡ä»¶å¤¹ï¼Œä¹‹ååŒæ­¥æ˜é‡‘ã€ä¸ªäººåšå®¢-->

## å‰è¨€

å¦‚æœå‘ä½ è¯·æ•™â€œåŸå‹â€è¿™ä¸¤ä¸ªå­—æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½ ä¼šæ€ä¹ˆè§£é‡Šå‘¢ï¼Ÿä¸åŒé¢†åŸŸçš„äººå¯èƒ½æœ‰ä¸åŒçš„è§è§£ã€‚åœ¨æ–‡å­¦ç”µå½±ä½œå“é¢†åŸŸï¼Œä¸»çº¿å‰§æƒ…ä¾¿æ˜¯ä¸€ä¸ªåŸå‹ï¼Œä¾‹å¦‚ç½—å¯†æ¬§ä¸èŒ±ä¸½å¶æ˜¯æ˜¯é­é‡å®¶äººåå¯¹ä¸ºçˆ±æ®‰æƒ…ç”·å¥³çš„åŸå‹ï¼Œè·Ÿä¸­å›½æ•…äº‹çš„æ¢å±±ä¼¯ä¸ç¥è‹±å°å¾ˆåƒã€‚å¦å¤–ï¼Œæ•…äº‹ä¸­çš„äººç‰©ä¹Ÿå¯ä»¥æ˜¯åŸå‹ï¼Œä¾‹å¦‚è‹±é›„çš„åŸå‹ã€‚åœ¨äº’è”ç½‘é¢†åŸŸæ›´æ˜¯ç»†åˆ†ä¸å°‘ï¼Œåœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œä¸€ä¸ªåŸå‹æ˜¯å¯ä»¥å¿«é€Ÿè¯•ç©çš„ demoã€‚å¯¹äºç½‘ç«™å¼€å‘ï¼ŒåŸå‹å¯ä»¥èµ·å§‹äºäº§å“ç»ç†æ‰‹ä¸­çš„çº¿æ¡†å›¾ã€‚

é‚£ä¹ˆåŸå‹æ˜¯ä»€ä¹ˆå‘¢ï¼Œæ¥ä¸‹æ¥æœ¬æ–‡ä¼šä»ä¸€èˆ¬çš„åŸå‹è¯´åˆ° JS çš„åŸå‹ä»¥åŠ JS ä¸ºä»€ä¹ˆéœ€è¦åŸå‹ã€‚

**æ‘˜è¦**ï¼š

- ä»€ä¹ˆæ˜¯åŸå‹
- JS ä¸­çš„åŸå‹
- JS ä¸ºä»€ä¹ˆéœ€è¦åŸå‹é“¾
- **proto** ä¸ prototype çš„åŒºåˆ«
- åº”ç”¨åœºæ™¯

**é¢å‘è¯»è€…**ï¼šå¯¹äº JS åŸå‹é“¾æ¦‚å¿µæ¨¡ç³Šçš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œè¯´ä¸æ¸…`proto` ä¸ `prototype` çš„åŒºåˆ«ã€‚

## ä»€ä¹ˆæ˜¯åŸå‹ï¼Ÿ

ä¸¾ä¸ªä¾‹å­ï¼Œä½ è¿˜è®°å¾— 2016 å¹´å¤§ç«çš„åŠ¨ç”»ç”µå½±æ˜¯ä»€ä¹ˆï¼Ÿé‚£å°±æ˜¯æ–°æµ·è¯šçš„ä½œå“ã€Šä½ çš„åå­—ã€‹ï¼Œä¸”ä¸è¯´å¥ä¹åŠ¨å¬ï¼Œåœ¨å‰§æƒ…ä¸Šä¹Ÿè®©äººå¾ˆæ·±åˆ»ã€‚å‰§æƒ…å¹¶éä»¥å•çº¯æ‹çˆ±é¢˜æä¸ºä¸»ï¼Œè€Œæ˜¯â€œæœ‰ç€è§é¢çš„å‘½è¿ä½†è¿Ÿè¿Ÿæ— æ³•ç›¸è§çš„ä¸¤äººâ€ã€‚è€Œè¿™éƒ¨ä½œç”¨çš„åŸå‹ï¼Œä¾¿æ˜¯ä»¥æ—©æœŸçš„æ–°æµ·åŸ[ã€Šåå­—è·¯å£ã€‹è§†é¢‘é“¾æ¥]()ä¸ºåŸå‹ã€‚

![](../.vuepress/public/images/2020-06-08-07-53-09-js-prototype-01.png)

åœ¨æ–‡å­¦ç”µå½±åˆ›ä½œé¢†åŸŸï¼Œé™¤äº†å‰§æƒ…å¤–ï¼Œäººç‰©ä¸»è§’ä¹Ÿæ˜¯å…ˆä»åŸå‹åˆ¶ä½œè€Œæ¥ã€‚å¯ä»¥çœ‹çœ‹ã€Šè™æ€åŸå‹ã€‹è¿™ä¸ªæ¸¸æˆçš„ä¸»è§’çº¸é¢åŸå‹æ„é€ å›¾ï¼Œé™¤äº†è®¾å®šå¥½äººç‰©çš„å¤–è¡¨å¤–ï¼Œæ›´é‡è¦çš„æ˜¯è¦è®¾å®šä»–çš„è¡Œä¸ºï¼ˆåŠŸèƒ½ï¼‰ï¼š

[è™æ€åŸå‹ï¼Œäººç‰©æ„é€ å›¾]()

ã€‚æ— è®ºæ˜¯æ•…äº‹å‰§æƒ…ã€äººç‰©ï¼Œè¿˜æ˜¯åˆ¶é€ ä¸€ä¸ªå·¥ä¸šäº§å“ï¼Œæ‰€è°“åŸå‹å°±æ˜¯æœ€åˆçš„æ ·ä¾‹ã€æ¨¡å‹ï¼ˆå¾ˆå¤šæ—¶å€™æ¨¡å‹å’ŒåŸå‹è§†ä¸ºåŒä¸€ä¸ªä¸œè¥¿ï¼‰æˆ–è€…æ˜¯ä¸ºäº†æµ‹è¯•æ¦‚å¿µè€Œæ„å»ºçš„äº§å“ã€‚

### åŸå‹çš„ç‰¹ç‚¹ä¸ç›®çš„

åŸå‹æœ€æœ¬è´¨çš„ç‰¹ç‚¹æ˜¯ï¼Œå®ƒæ˜¯ä½ æœ€ç»ˆåˆ¶ä½œçš„æˆå“çš„æœ€å°è§„æ¨¡ï¼Œä½†å…·æœ‰æ ¸å¿ƒåŠŸèƒ½çš„ä¸œè¥¿ã€‚å®ƒçš„ç›®çš„æ˜¯ä¸ºäº†è®©æˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¤šæ¬¡æµ‹è¯•è‡ªå·±çš„æƒ³æ³•æ˜¯å¦æ­£ç¡®ï¼Œæ¯”å¦‚ä¸€ä¸ªæ¸¸æˆè®¾è®¡å¸ˆï¼Œä»–éœ€è¦ä¸æ–­åˆ¶ä½œå…·å¤‡æ ¸å¿ƒåŠŸèƒ½çš„æ¸¸æˆåŸå‹ï¼Œæµ‹è¯•æ¸¸æˆåŸå‹ï¼Œä»¥æ¥æµ‹è¯•æ¸¸æˆçš„æœºåˆ¶ã€è§„åˆ™ç­‰æ˜¯å¦åˆç†ã€‚å½“ç„¶åœ¨åˆ¶ä½œåˆ¶ä½œåŸå‹ï¼Œä»–ä¹Ÿå¯ä»¥å‚è€ƒæˆåŠŸçš„æ¸¸æˆçš„åŸå‹ã€‚

æœ€æ—©è§†è§‰ä¸Šå¯ä»¥äº¤äº’çš„åŸå‹ï¼Œä¾¿æ˜¯çº¸é¢åŸå‹ï¼ˆä¹Ÿå°±æ˜¯åœ¨çº¸ä¸Šç”»ç”»ï¼Œä»¥åŠä½¿ç”¨ä¸€äº›ç©å…·ç±»çš„ä¸œè¥¿æ„å»ºï¼‰ã€‚

åŸå‹çš„è§„æ¨¡å¤§å°æ˜¯ç›¸å¯¹æˆå“è€Œè¨€çš„ï¼Œè€Œåœ¨æ¯ä¸ªé˜¶æ®µéƒ½å¯ä»¥æˆä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µçš„åŸå‹ï¼Œä¹Ÿå°±æ˜¯è¯´åŸå‹ä¹‹é—´å¯ä»¥è¿›è¡Œ`ç»§æ‰¿`ï¼Œä»çº¸é¢åŸå‹åˆ°çœŸæ­£å¯ä»¥è¿›è¡Œäº¤äº’çš„åŸå‹ã€‚

[ä¸€ä¸ªæœºå™¨äººæˆ–è™æ€åŸå‹ï¼Œä»çº¸é¢åˆ°çœŸæ­£å¯ä»¥åŠ¨çš„æ¨¡å‹ gif]()

### åŸå‹ç»å†çš„é˜¶æ®µ

![](../.vuepress/public/images/2020-06-09-07-22-37-js-prototype-01.png)

ä»åŸå‹åˆ°æˆå“ï¼Œä¹Ÿä¸æ˜¯ä¸€æ¬¡åˆ°ä½ï¼Œå…¶ä¸­ä¹Ÿç»å†äº†å¾ˆå¤šçš„ç‰ˆæœ¬è¿­ä»£ï¼Œè·Ÿæˆ‘ä»¬ç¼–ç¨‹ä¸€æ ·çš„é“ç†ï¼Œè‚¯å®šä¸æ˜¯ä¸‹é¢è¿™æ ·ä¸€æ¬¡å®Œæˆã€‚

ï¼ˆç”»é©¬ï¼‰

## è®¡ç®—æœºç¼–ç¨‹ä¸­çš„åŸå‹

<!-- ### ä½¿ç”¨è®¡ç®—æœºè¯­è¨€æè¿°ç¨‹åº

TODO è¿™å—æçº²ä½¿ç”¨è®¡ç®—æœºè¯­è¨€æè¿°ç¨‹åºè€ƒè™‘æ˜¯å¦è¿˜éœ€è¦ï¼Œåç»­è€ƒè™‘æ˜¯å¦ä¿ç•™ã€‚

è¿™é‡Œç®€å•æè¿°ä¸‹å¦‚ä½•è®©è®¡ç®—æœºå®ç°æˆ‘ä»¬çš„å‘½ä»¤ï¼Œä»¥ä¾¿æ›´åŠ å¥½ç†è§£`é¢å‘è¿‡ç¨‹`ç¼–ç¨‹çš„ç”±æ¥ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªæè¿°äººç‰©çš„ç¨‹åºï¼Œä»–å…·æœ‰ä»ç«™ç«‹è½¬ä¸ºè¡Œèµ°çš„åŠŸèƒ½ã€‚

å¯¹äºè®¡ç®—æœºæ¥è¯´è¿™æ ·å¤æ‚çš„å‘½ä»¤éœ€è¦æ‹†åˆ†ä¸ºä¸€ç³»åˆ—ç®€å•å‘½ä»¤ï¼Œå¦‚ä½•ç”¨ç®€å•å‘½ä»¤æŒ‡æŒ¥å¦å¤–ä¸€ä¸ªäººä»ç«™ç«‹çŠ¶æ€è½¬ä¸ºè¡Œèµ°çŠ¶æ€å‘¢ï¼Ÿ

![](../.vuepress/public/images/2020-06-15-08-55-31-walk.png)

é¦–å…ˆï¼Œè®©åŒä¼´ç«™ç«‹åœ¨åœ°æ¿ä¸Šï¼Œç„¶åå‘Šè¯‰ä»–ä¸¥æ ¼æŒ‰ä½ æ‰€å‘å‡ºçš„å‘½ä»¤çš„å­—é¢å«ä¹‰åšç›¸åº”çš„åŠ¨ä½œã€‚ä½ çš„ç›®æ ‡æ˜¯å‘åŒä¼´å‘å‡ºä¸€ç³»åˆ—å‘½ä»¤ï¼Œä½¿ä»–èµ°èµ·æ¥ã€‚ä½†ä½ ä¸èƒ½ä½¿ç”¨â€œèµ°èµ·æ¥â€ä¹‹ç±»çš„å¤æ‚å‘½ä»¤ï¼Œåªèƒ½å‘æŒ‡æŒ¥æœºå™¨äººä¸€æ ·ä½¿ç”¨ç®€å•å‘½ä»¤ï¼Œä¾‹å¦‚ã€‚

1. ä»¥å·¦è„šä¸ºæ”¯æ’‘ï¼Œæèµ·ä½ çš„å³è„šï¼Œä»¥èº¯å¹²ä¸ºè½´å¿ƒï¼Œå‘å‰è·¨ 30 åº¦
2. å‘å‰ç”©åŠ¨ä½ çš„å·¦è‡‚ï¼Œå³è‡‚åŒæ—¶æœåæ‘†åŠ¨ã€‚
3. ä»¥å³è„šä¸ºæ”¯æ’‘ï¼Œæèµ·ä½ çš„å·¦è„šï¼Œä»¥èº¯å¹²ä¸ºè½´å¿ƒï¼Œå‘å‰è·¨ 30 åº¦
4. å‘å‰ç”©åŠ¨ä½ çš„å³è‡‚ï¼Œå·¦è‡‚åŒæ—¶æœåæ‘†åŠ¨ã€‚
5. é‡æ–°å›åˆ°ç¬¬ 1 æ­¥éª¤ã€‚

```js
// å®ç°ä¸€ä¸ª walk ç¨‹åºï¼Œè¿™é‡Œæ˜¯ä¼ªä»£ç è¯­è¨€ã€‚ç„¶åäº¤ç»™è®¡ç®—æœºè¿è¡Œ walk ç¨‹åºè¿›è¡Œè®¡ç®—å¤„ç†ã€‚
main()
  Walk() {
    LiftRightFoot()
    SwingLeftAndRightArm()
    LiftLeftFoot()
    SwingLeftAndRightArm()
  }
```

å¯ä»¥çœ‹åˆ°å¯¹äºäººç±»æ¥è¯´ä¸€ä¸ªç®€å•çš„ç«™ç«‹åŠ¨ä½œåœ¨è®¡ç®—æœºä¸Šéœ€è¦æ‹†åˆ†æˆå¤šä¸ªæ­¥éª¤çš„ï¼Œå®Œå…¨æ˜¯é¢å‘è¿‡ç¨‹çš„å®ç°ã€‚ è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ›´ä½çº§çš„è¯­è¨€å¦‚ C è¯­è¨€æ˜¯ä½¿ç”¨é¢å‘è¿‡ç¨‹çš„å†™æ³•äº†ã€‚-->

### è®¡ç®—æœºä¸­çš„åŸå‹

åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­æ˜¯é€šè¿‡`é¢å‘å¯¹è±¡ç¼–ç¨‹`æ¦‚å¿µå®ç°åŸå‹çš„ã€‚è¦æƒ³äº†è§£ä½•ä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œç›®çš„æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬å…ˆå›é¡¾`é¢å‘è¿‡ç¨‹`ç¼–ç¨‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨ç•Œé¢ä¸Šç”»å‡ºå››æ–¹å½¢ã€åœ†å½¢ä¸ä¸‰è§’å½¢ã€‚å½“ç”¨æˆ·ç‚¹é€‰å›¾å½¢æ—¶ï¼Œå›¾å½¢éœ€è¦é¡ºæ—¶é’Ÿæ–¹è½¬ 360åº¦å¹¶ä¾æ®å½¢çŠ¶çš„ä¸åŒæ’­æ”¾ä¸åŒçš„ AIF éŸ³æ•ˆæ–‡ä»¶ã€‚

<!-- ![å››æ–¹å½¢ã€ä¸‰è§’å½¢ã€åœ†å½¢ï¼Œç‚¹å‡» gif åŠ¨å›¾è®¾è®¡å›¾]() -->

å‰é¢ä¹Ÿæåˆ°è®¡ç®—æœºæ‰§è¡Œçš„æ˜¯ä¸€æ¡æ¡å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯é¢å‘è¿‡ç¨‹çš„æ€ç»´ï¼Œè¿™ä¸ªç¨‹åºè¦æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œï¼Œæˆ‘ä»¬ä¼šå†™å‡ºä»¥ä¸‹çš„ä»£ç ï¼š

```js
// ä½¿ç”¨å½¢çŠ¶ç¼–å·æ¥æ‰¾å¯»ç‰¹å®šç¼–å·çš„å›¾å½¢
rotate(shapeNum) {
 // æ—‹è½¬ 360Â°
}

playSound(shapeNum) {
  // æŸ¥è¯¢æ’­æ”¾å“ªä¸ª AIF éŸ³é¢‘æ–‡ä»¶
  // æ’­æ”¾
}
```

OKï¼Œçœ‹èµ·æ¥ç¨‹åºæ˜¯æ»¡è¶³éœ€æ±‚ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¦æ–°å¢ä¸€ä¸ªé˜¿å°”ç±³å·´åŸè™«ï¼ˆAmoebaï¼‰å½¢çŠ¶å¹¶æ’­æ”¾ .hifï¼ˆé«˜ä¿çœŸ(HiFi) éŸ³é¢‘ï¼‰å£°éŸ³æ–‡ä»¶ã€‚åŸæ¥çš„ rotate ç¨‹åºè¿˜å¯ä»¥ç”¨ï¼Œä½†æ˜¯ playSound éœ€è¦ä¿®æ”¹ã€‚

```js
play(shapeNum) {
  if ä¸æ˜¯ Amoeba
     // æŸ¥è¯¢ä½¿ç”¨å“ªä¸ª AIF æ–‡ä»¶
     // æ’­æ”¾
  else
    // æ’­æ”¾ amoeba.hif
}
```

è¿™ä¸ªæ—¶å€™å·²ç»å¯¹åŸæ¥æµ‹è¯•è¿‡çš„ç¨‹åºä»£ç è¿›è¡Œäº†ä¸€éƒ¨åˆ†çš„ä¿®æ”¹ã€‚å‡è®¾æˆ‘ä»¬æ˜¯é»˜è®¤å¯¹å½¢çŠ¶çš„æ—‹è½¬éƒ¨åˆ†æ˜¯è¿™æ ·å†™çš„ï¼š

1. æ‰¾å‡ºæŒ‡å®šå½¢çŠ¶çš„å¤–æ¥å››è¾¹å½¢
2. è®¡ç®—å‡ºå››è¾¹å½¢çš„ä¸­å¿ƒç‚¹ï¼Œä»¥æ­¤ç‚¹ä¸ºè½´åšæ—‹è½¬ã€‚

![å¤–æ¥å››è¾¹å½¢]()

è€Œç¨‹åºè¿›ä¸€æ­¥è¦æ±‚é˜¿å°”å·´åŸè™«çš„æ—‹è½¬è½´å¿ƒä¸æ˜¯å›¾å½¢çš„ä¸­å¿ƒï¼Œè€Œæ˜¯ç»•ç€ä¸€ç«¯æ—‹è½¬ï¼Œç±»ä¼¼ç§’é’ˆé‚£æ ·ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬ä¹Ÿè¦æ›´æ”¹æµ‹è¯•å¥½çš„ rotate ç¨‹åºäº†ï¼Œç»™å®ƒåŠ ä¸Šè½´å¿ƒç‚¹çš„å‚æ•°ã€‚

```js
rotate(shapNum, xPt, yPt) {
  if ä¸æ˜¯ Amoeba
     // è®¡ç®—ä¸­å¿ƒç‚¹
     // ç„¶åæ—‹è½¬
  else 
    // ä»¥ xPt å’Œ yPt ä½œä¸ºæ—‹è½¬ä¸­å¿ƒ
    // ç„¶åæ—‹è½¬
}
```

å¦‚æœç»§ç»­ç°åœ¨è¿˜è¦æ–°çš„å½¢çŠ¶ï¼Œå¯èƒ½ä¸å¾—ä¸åˆè¦å¯¹ rotate å’Œ playSound æ“åˆ€äº†ã€‚å¯è§è¿™æ ·çš„ä»£ç å¾ˆè„†å¼±ï¼Œåªè¦åŠ å…¥æ–°çš„åŠŸèƒ½å¾ˆå¯èƒ½å½±å“ç°æœ‰æ­£å¸¸çš„ç¨‹åºä»£ç ã€‚

é¢å‘è¿‡ç¨‹æ€è€ƒçš„è§’åº¦æ˜¯è¿™ä¸ªç¨‹åºè¦æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œï¼Œå¦‚æœä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ

é‚£é¢å‘å¯¹è±¡ï¼Œé¦–å…ˆå¾—æœ‰ä¸ªå¯¹è±¡ã€‚ç”Ÿæ´»ä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯è¿™æ ·çš„

![ç”·å¥³ç»“å¯¹ç¼–ç¨‹ğŸ‘€é¼“åŠ±å¸ˆ]() 

ç¼–ç¨‹ä¸­ï¼Œå¾—é€šè¿‡ç±»è¿›è¡Œå®ä¾‹åŒ–ç”Ÿæˆã€‚æ‰€ä»¥è¦å®ç°é¢å‘å¯¹è±¡ï¼Œå…ˆè¦å®ç°ç±»çš„å®šä¹‰ï¼Œå› ä¸ºå¯¹è±¡æ˜¯é ç±»çš„æ¨¡å‹å¡‘é€ å‡ºæ¥çš„ã€‚

```java
// å®šä¹‰
public class Person {
  private void walk() {}
}
// å®ä¾‹åŒ–
Person personA = new Person();
personA.walk()
Person personB = new Person();
personB.walk()
```

è¿™ä¸ªæ—¶å€™ personA å’Œ personB å…±äº« Person ç±»å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½å…·æœ‰è¡Œèµ°çš„åŠŸèƒ½ï¼Œå¤§å¤§æé«˜å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ï¼Œè¿™ä¸ªæ—¶å€™æ€è€ƒçš„è§’åº¦ä¾¿æ˜¯è¿™ä¸ªç¨‹åºæœ‰ä»€ä¹ˆæ ·çš„äº‹ç‰©ä¸è§’åº¦ï¼ˆPersonï¼‰ï¼Ÿè¿™äº›äº‹ç‰©æœ‰ä»€ä¹ˆäº‹ä»¶ä¸åŠ¨ä½œï¼ˆwalkï¼‰ï¼Ÿ

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´é‡æ„å‰é¢çš„ä»£ç ï¼Œé¦–å…ˆåˆ†åˆ«ä¸º 3 ä¸ªå½¢çŠ¶å„å†™å‡ºä¸€ä¸ªç±»ï¼š

![](../.vuepress/public/images/2020-06-22-07-43-50-class-diagram-01.png)

æˆ‘ä»¬å‘ç°è¿™ä¸‰ä¸ªç±»éƒ½æœ‰å…±åŒçš„ç±»æ–¹æ³• rotate()ã€playSound()ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å†æŠ½è±¡å‡ºä¸€ä¸ªçˆ¶ç±»å‡ºæ¥ï¼š

![](../.vuepress/public/images/2020-06-22-08-02-01-class-inherit.png)

è€Œå¯¹äºæ–°å¢çš„é˜¿å°”ç±³å·´åŸè™«å½¢çŠ¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ–°å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿äº Shape çˆ¶ç±»ï¼Œä½†æ˜¯åªéœ€è¦è¦†å†™çˆ¶ç±»çš„ rotate() å’Œ playSound æ–¹æ³•å³å¯ï¼Œæ— éœ€æ”¹åŠ¨å¦å¤–ä¸‰ä¸ªç±»ã€‚

![](../.vuepress/public/images/2020-06-22-08-09-03-class-inherit-02.png)

æ€»ç»“ä¸‹ï¼Œé¢å‘å¯¹è±¡çš„åŸºæœ¬å®šä¹‰ã€‚

- ç±»ï¼ˆå‰é¢ä¾‹å­çš„ Person ç±»ï¼‰
- ç±»æ–¹æ³•ï¼ˆwalk æ–¹æ³•ï¼‰ä¸å±æ€§
- ç±»å®ä¾‹ï¼ˆpersonA å’Œ personBï¼‰

åŸºæœ¬æ¦‚å¿µï¼š
- å°è£…ï¼ˆå¯¹äºè®¿é—®è€…æ¥è¯´ï¼Œè®¿é—®çš„æƒé™å¦‚ä½•ï¼‰
- ç»§æ‰¿ï¼ˆç±»ã€æ¥å£ä¹‹é—´çš„ç»§æ‰¿ï¼ŒæŠŠå…±åŒçš„ç¨‹åºä»£ç æ”¾åœ¨çˆ¶ç±»ä¸­ï¼‰
- å¤šæ€ï¼ˆåŒä¸€ä¸ªæ–¹æ³•ï¼Œä¸åŒçš„å¯¹è±¡è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼Œä¾‹å¦‚ rotateï¼‰
- æŠ½è±¡ï¼ˆæŠŠå­ç±»çš„å…±åŒå±æ€§å’Œè¡Œä¸ºæŠ½è±¡åˆ°çˆ¶ç±»ä¸­ï¼‰

æ¥ä¸‹æ¥æˆ‘ä»¬è¦å¦å¤–è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œå¯ä»¥è®©ç”¨æˆ·è®¾å®šå°†ä¸€ç¾¤åŠ¨ç‰©ä¸¢åˆ°æŸç§ç¯å¢ƒä¸­ä»¥è§‚å¯Ÿä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Œæˆ‘ä»¬ç°åœ¨åªå…³æ³¨è®¾è®¡ï¼Œä»¥ä¾¿åŠ æ·±é¢å‘å¯¹è±¡çš„ç†è§£ã€‚

å‡è®¾ç°åœ¨ç¨‹åºåªæœ‰ä¸€éƒ¨åˆ†çš„åŠ¨ç‰©ï¼Œåç»­ä¼šåŠ å…¥å…¶ä»–çš„åŠ¨ç‰©ã€‚æ¯ä¸ªåŠ¨ç‰©éƒ½ç”¨ä¸€ä¸ªå¯¹è±¡æ¥è¡¨ç¤ºï¼Œä¸”åŠ¨ç‰©ä¼šåœ¨ç¯å¢ƒä¸­æ´»åŠ¨ï¼Œæ‰§è¡Œä»»ä½•è¢«è®¾è®¡å‡ºçš„è¡Œä¸ºï¼Œåˆ†ææ­¥éª¤å¦‚ä¸‹ï¼š

1. åˆ†ææ‰¾å‡ºå…·æœ‰å…±åŒå±æ€§å’Œè¡Œä¸ºçš„å¯¹è±¡ï¼ˆpictureã€foodã€hungerã€boundariesã€makeNodesã€eatã€roamï¼‰ã€‚
2. è®¾è®¡ä»£è¡¨å…±åŒçŠ¶æ€ä¸è¡Œä¸ºçš„ç±»ï¼ˆAnimalï¼‰ã€‚
3. å†³å®šå­ç±»æ˜¯å¦éœ€è¦è®©æŸé¡¹è¡Œä¸ºæœ‰ç‰¹å®šä¸åŒçš„è¿ä½œæ–¹å¼ã€‚ï¼ˆè¦†ç›– eatã€makeNoiseï¼‰
4. é€šè¿‡å¯»æ‰¾ä½¿ç”¨å…±åŒè¡Œä¸ºçš„å­ç±»æ‰¾å‡ºæ›´å¤šæŠ½è±¡åŒ–çš„æœºä¼šï¼ˆCanine çŠ¬ç§‘ã€Feline çŒ«ç§‘ï¼‰ã€‚

![](../.vuepress/public/images/2020-06-23-07-56-58-inhert-Animal.png)

æœ€ç»ˆå¾—å‡ºä¸€ä¸ªç®€å•çš„åˆ†ç±»ç»“æ„ã€‚

- Animalï¼ˆåŠ¨ç‰©ç±»ï¼‰
  - Canineï¼ˆçŠ¬ç§‘ï¼‰
    - Dogï¼ˆç‹—ï¼‰
    - Wolfï¼ˆç‹¼ï¼‰
  - Felineï¼ˆçŒ«ç§‘ï¼‰
    - Lionï¼ˆç‹®å­ï¼‰
    - Tigerï¼ˆè€è™ï¼‰
    - Catï¼ˆçŒ«ï¼‰

å®ç°é¢å‘å¯¹è±¡æ€æƒ³æœ‰ä¸¤ç§æ–¹æ³•ï¼ŒåŸºäºç±»å®ç°å’ŒåŸºäºåŸå‹å®ç°ï¼Œä¸‹é¢å°†ä½¿ç”¨ Java å’Œ JS æ¥å®ç°ã€‚

### ä¼ ç»Ÿé¢å‘å¯¹è±¡è¯­è¨€

è¦ç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæœ€é‡è¦çš„ç‰¹ç‚¹å°±æ˜¯æ ¹æ®`ç±»å°è£…åˆ›å»ºå¯¹è±¡`ä¸`ç±»ä¹‹é—´ç»§æ‰¿`çš„æ¦‚å¿µäº†ã€‚åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å£°æ˜ä¸€ä¸ªç±»ä½œä¸ºåŸºç±»ï¼Œç„¶åé€šè¿‡ç»§æ‰¿è¿™ä¸ªåŸºç±»å®šä¹‰ä¸€ä¸ªæ–°ç±»ã€‚

æ ¹æ®ä¹‹å‰çš„æ ‘çŠ¶ç»“æ„ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰ Animal ç±»ï¼š

```java
public class Animal {
	public String picture; // åŠ¨ç‰© JPEG å›¾åƒçš„åç§°
	public String food; // æ­¤åŠ¨ç‰©æ‰€åƒçš„é£Ÿç‰©
	public int hunger; // ä»£è¡¨é¥¥é¥¿ç¨‹åº¦ã€‚å®ƒä¼šæ ¹æ®åŠ¨ç‰©åƒäº†å¤šå°‘ä¸œè¥¿è€Œæ”¹å˜
	public Boundaries boundaries; // ä»£è¡¨åŠ¨ç‰©æ´»åŠ¨èŒƒå›´åŒºåŸŸçš„é•¿å®½

	public Animal(String picture, String food, int hunger, Boundaries boundaries) {
		this.picture = picture;
		this.food = food;
		this.hunger = hunger;
		this.boundaries = boundaries;
	}

	public void makeNoise() { // åŠ¨ç‰©å‘å‡ºå£°éŸ³çš„è¡Œä¸º
		System.out.println("Animal makeNoise!");
	}

	public void eat() { // åŠ¨ç‰©é‡åˆ°é£Ÿç‰©æ—¶çš„è¡Œä¸ºç¨‹åº
		System.out.println("Animal eat!");
	}

	public void sleep() { // ç¡çœ çš„è¡Œä¸ºç¨‹åº
		System.out.println("Animal sleep!");
	}

	public void roam() { // ä¸åœ¨è¿›é£Ÿæˆ–ç¡çœ æ—¶çš„è¡Œä¸ºç¨‹åº
		System.out.println("Animal roam!");
	}
}
```

ç„¶åï¼ŒåŸºäº Animal ç»§ç»­æ‰©å±•å‡ºä¸€ä¸ª Canine å’Œ Feline ç±»ï¼Œå®ƒä»¬éƒ½è¦†ç›–äº† Animal çš„ makeNoise å’Œ eat æ–¹æ³•ã€‚

```java
public class Canine extends Animal {

	public Canine(String picture, String food, int hunger, Boundaries boundaries) {
		super(picture, food, hunger, boundaries);
	}

	public void makeNoise() {
		System.out.println("Canine makeNoise!");
	}

	public void eat() {
		System.out.println("Canine eat!");
	}
}
```

```java
public class Feline extends Animal {

	public Feline(String picture, String food, int hunger, Boundaries boundaries) {
		super(picture, food, hunger, boundaries);
	}

	public void makeNoise() {
		System.out.println("Feline makeNoise!");
	}

	public void eat() {
		System.out.println("Feline makeNoise!");
	}
}

```

ç„¶åï¼Œå†æ„å»ºç»§æ‰¿äº Feline å’Œ Canine ç±»çš„ Dog ç±» å’Œ Cat ç±»ï¼š

```java
public class Cat extends Feline {
	public Cat(String picture, String food, int hunger, Boundaries boundaries) {
		super(picture, food, hunger, boundaries);
	}
}
```

```java
public class Dog extends Canine {

	public Dog(String picture, String food, int hunger, Boundaries boundaries) {
		super(picture, food, hunger, boundaries);
	}
}
```

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® Dog ç±»å’Œ Cat ç±»è¿›è¡Œå®ä¾‹åŒ–å¹¶è¿›è¡Œè°ƒç”¨ï¼š

```java
public class Main {

	public static void main(String[] args) {
		Boundaries boundariesDog = new Boundaries();
		Boundaries boundariesCat = new Boundaries();
		Dog keji = new Dog("æŸ¯åŸº", "éª¨å¤´", 100, boundariesDog);
		Cat meiduan = new Cat("ç¾çŸ­", "é±¼", 100, boundariesCat);
		keji.makeNoise(); // Canine makeNoise!
		meiduan.makeNoise(); // Feline makeNoise!
	}
}
```

è®©æˆ‘ä»¬åˆ†æè¿™é‡Œçš„åŸå‹å…³ç³»ï¼Œ`Keji` çš„åŸå‹æ˜¯ `Dog`ï¼Œ`Dog` çš„åŸå‹æ˜¯ `Canine`ï¼Œè€Œ `Canine` çš„åŸå‹æ˜¯ `Animal`ã€‚ç±»ä¼¼çš„ï¼Œmeiduan ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ 

é™¤äº†è¿™ç§ç›´è§‚çš„åŸå‹å¤–ï¼Œè¿˜æœ‰æ•°æ®åŸå‹ï¼ˆæ•°æ®çš„è¿ç§»ã€é›†æˆï¼‰ç­‰ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹

### åŸºäºåŸå‹ç»§æ‰¿çš„é¢å‘å¯¹è±¡ JS

åœ¨ä¼ ç»Ÿçš„åŸºäº Class è¯­è¨€å¦‚ Javaã€C++ã€C# ä¸­ï¼Œç»§æ‰¿çš„æœ¬è´¨æ˜¯ï¼ˆ`extend`ï¼‰æ‰©å±•ä¸€ä¸ªå·²æœ‰çš„ Classï¼Œå¹¶ç”Ÿæˆæ–°çš„ Subclassï¼Œç„¶åé€šè¿‡ç±»çš„æ„é€ å‡½æ•°è¿›è¡Œå®ä¾‹åŒ–ã€‚è¿™ç±»è¯­è¨€ä¸¥æ ¼åŒºåˆ†ç±»å’Œå®ä¾‹ï¼Œç»§æ‰¿å®é™…ä¸Šæ˜¯ç±»å‹çš„æ‰©å±•ã€‚ä½†æ˜¯ï¼ŒJavaScript æ— æ³•ç›´æ¥æ‰©å±•ä¸€ä¸ª Classã€‚

å¯¹äºå¦‚ä½•å®šä¹‰ç±»å’Œç»§æ‰¿ï¼ŒJS æœ‰è‡ªå·±çš„æƒ³æ³•ã€‚å®ƒä½¿ç”¨`æ„é€ å‡½æ•°ï¼ˆconstructorï¼‰`ä¸`åŸå‹ï¼ˆprototypeï¼‰`é—´æ¥å®ç°é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚

#### å®šä¹‰ç±»

<!-- å› ä¸ºåœ¨ js è¯­è¨€ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼ˆä¸ºä»€ä¹ˆæ²¡æœ‰ï¼Ÿï¼‰ï¼Œå› æ­¤ä½¿ç”¨åŸå‹æ¥å®ç°æ–°å¯¹è±¡å®ä¾‹çš„åˆ›å»ºå’Œç»§æ‰¿ã€‚ -->

1. é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œä»»ä½•çš„ javaScript å‡½æ•°éƒ½å¯ä»¥æ˜¯æ„é€ å‡½æ•°
2. ç„¶åä½¿ç”¨ prototype å®šä¹‰å…¬å…±çš„å±æ€§å’Œæ–¹æ³•ä»¥æ­¤æ›¿ä»£æ²¡æœ‰ç±»çš„å®šä¹‰ã€‚

```js
function Animal(picture, food, hunger, boundaries) {
  this.picture = picture;
  this.food = food;
  this.hunger = hunger;
  this.boundaries = boundaries;
}

Animal.prototype.makeNoise = function() {
  console.log("Animal makeNoise!");
};

Animal.prototype.eat = function() {
  console.log("Animal eat!");
}

Animal.prototype.sleep = function() {
  console.log("Animal sleep!");
}

Animal.prototype.roam = function() {
  console.log("Animal roam!");
}

exports.Animal = Animal;
```

#### å­ç±»å’Œç»§æ‰¿

æˆ‘ä»¬é€šè¿‡è®¾ç½®å­ç±»çš„ protype çš„å€¼ä¸ºçˆ¶ç±»çš„å€¼ï¼Œå¹¶åœ¨å­ç±»çš„æ„é€ å‡½æ•°è°ƒç”¨è¶…ç±»çš„æ„é€ å‡½æ•°å®ç°ç»§æ‰¿ã€‚

```js
function inheri(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype); // å®ç°ç»§æ‰¿
  subClass.__proto__ = superClass;  // å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»
  // è¿™é‡Œçš„ä¸¤è¡Œä»£ç ç»§æ‰¿æ¯”ç›´æ¥ subClass.prototype =  new superClassï¼Œçµæ´»ï¼Œä¸ç”¨å®ä¾‹åŒ–ä¼ é€’å‚æ•°
  // è¡¥å›ä¸¢å¤±çš„å±æ€§
  Object.defineProperty(subClass, "constructor", {
    enumerable: false,
    value: subClass,
    writable: true
  })
}

function Canine(picture, food, hunger, boundaries) {
  return Animal.call(this, picture, food, hunger, boundaries);
}
inheri(Canine, Animal);
// Canine.prototype = new Animal(picture, food, hunger, boundaries);
// å¯¹æ–¹æ³•è¿›è¡Œè¦†ç›–
Canine.prototype.makeNoise = function() {
  console.log("Canine makeNoise!");
  return "Canine makeNoise!"
};

Canine.prototype.eat = function() {
  console.log("Canine eat!");
}

function Dog(picture, food, hunger, boundaries) {
  Canine.call(this, picture, food, hunger, boundaries);
}
inheri(Dog, Canine);
```

æœ€åå®ä¾‹åŒ– Dog
```js
const boundariesDog = new Boundaries(0, 0, 5, 5);
const keji = new Dog("æŸ¯åŸº", "éª¨å¤´", 100, boundariesDog);
keji.makeNoise();
```

æ³¨ï¼šè¿™é‡Œçš„ä»£ç éƒ½æ˜¯ç®€å•çš„ç»§æ‰¿ï¼Œå°‘äº†å¾ˆå¤šè¿è¡Œä¸Šçš„åˆ¤æ–­ï¼Œæ›´åŠ ä¸¥è°¨çš„å¤„ç†å¯ä»¥è¯•ä¸‹åœ¨ [Babel ä¸­ ç”¨ ES6 Class ç¼–å†™ï¼Œçœ‹çœ‹è¾“å‡ºçš„ ES5 ä»£ç ](https://babeljs.io/repl#?browsers=defaults%2C%20not%20ie%2011%2C%20not%20ie_mob%2011&build=&builtIns=false&spec=false&loose=false&code_lz=MYGwhgzhAECCB2BLAtmE0DeAoAkMA9vBAC4BOArsMfqQBQAOiV5pApgDTQBm--AJpwAW5eAHNWpTgCN8IvmFKJWEAJSZcOYoMQQAdI2ZtoAXmgHiLVgG4NWnbp78T3Xnxs5N2vcLETnP8VJ3T3sZOQUlGFMw-HlFZXcAXyxcVABrVgA5fB1WWjUMaAB6IuhACqVASydAReVAL8VAB41AZ_TAELdAGQjALjlcZNxWMGJ8zGLSysBxBMAGJUB9jIrAN9NWtsBoL0B4vU6U6FXoCBBWVnp-wpLoQEN3QAJ3WcXlrDXoUnwwZF3B6EBYOUAKdUBt-PHANCNjmfaznGSuqBIDAAMJgJDwVjQVgAD2IrFiMAQKDQ6lwBCIZEo1FI0FoZiYFjYnBc_BJAQkJJicUiBQ0EHI9AkDEJlk4jgE0Apkmg1IiyhUSRSOGg6SyOQgeTpHnOIp6fWlAKAA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=env%2Ces2015%2Ces2016%2Creact%2Cstage-2%2Ces2015-loose%2Cenv&prettier=false&targets=&version=7.10.4&externalPlugins=)ã€‚


### ä¸€å¼ å›¾å¯¹æ¯”

<!-- ä¸€å¼ å›¾å¯¹æ¯”çœ‹æ˜¯å¦éœ€è¦æ”¾åˆ°å…¶ä»–ä½ç½® -->

|Category|Class-basedï¼ˆJavaï¼‰|Prototyp-based ï¼ˆJavaScriptï¼‰|
|--|--|--|
|Class vs Instance|Class and instance are distinct entities|All objects can inherit from another object.|
|Definition|Defines a class with a class definitionï¼›instantiate a class with constructor methods.| Define and create a set of objects with constructor functions.|
|Creation of new object|Create a single object with the new operator.|Same. |
|Construction of object hierachy|Construct an object   hierarchy by usinig class definitions to define subclasses of existing classes.| Construct an object hierarchy by assigning an object as the prototype associated with a constructor function|

æ— è®ºæ˜¯åŸºäºç±»çš„ java è¿˜æ˜¯åŸºäºåŸå‹çš„ js ï¼Œéƒ½æ˜¯ä¸ºäº†å®ç°é¢å‘å¯¹è±¡çš„æ¦‚å¿µï¼Œå¯ä»¥ç»Ÿä¸€ç†è§£ä¸ºåŸºäºåŸå‹çš„å®ç°ã€‚åªä¸è¿‡ java é€šè¿‡ class å’Œç±»çš„æ„é€ å‡½æ•°å®šä¹‰åŸå‹ï¼Œè€Œ js é€šè¿‡ prototype å’Œæ„é€ å‡½æ•°æ¥å®šä¹‰åŸå‹ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åŸºäºåŸå‹å¼€å‘ã€‚

## ç»†è¯´ JS ä¸­çš„åŸå‹

ä¸‹é¢å…·ä½“è¯´è¯´ JS ä¸­çš„åŸå‹ã€‚åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ‰©å±•åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œè¿™ä¸ªæ˜¯é€šè¿‡åŸå‹çš„æ¦‚å¿µå®ç°ã€‚

æ¯ä¸ªå¯¹è±¡éƒ½æœ‰åŸå‹çš„å¼•ç”¨ï¼Œå½“æŸ¥æ‰¾å±æ€§æ—¶ï¼Œè‹¥å¯¹è±¡æœ¬èº«ä¸å…·æœ‰è¯¥å±æ€§ï¼Œåˆ™ä¼šæŸ¥æ‰¾åŸå‹ä¸Šæ˜¯å¦æœ‰è¯¥å±æ€§ã€‚ä¾‹å¦‚ï¼Œä½ æ­£åœ¨å’Œä¸€ç»„äººå…±åŒç©ä¸€ä¸ªæ¸¸æˆï¼Œæ¸¸æˆè§„åˆ™ä¸ºï¼šä¸»æŒäººæé—®ï¼Œå¦‚æœä½ çŸ¥é“ç­”æ¡ˆï¼Œåˆ™å¯ç›´æ¥å›ç­”ï¼›å¦‚æœä½ ä¸çŸ¥é“ç­”æ¡ˆï¼Œåˆ™å¯ä»¥è¯¢é—®ä½ çš„ä¸‹ä¸€ä¸ªäººã€‚

åœ¨ JS ä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå½“ä½¿ç”¨ new è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°ä¼šä½œä¸ºæ„é€ å‡½æ•°æ¥ä½¿ç”¨ï¼Œä»¥æ„é€ å‡½æ•°çš„ prototype ä½œä¸ºåŸå‹ï¼Œç„¶åè§¦å‘ä¸€ä¸ªæ–°å¯¹è±¡çš„åˆ†é…ï¼š

![](2020-08-06-14-15-46-prototype.png)

ninja2 æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡çš„å¼•ç”¨ï¼Œå…·æœ‰ swingSword æ–¹æ³•ï¼Œå¹¶è°ƒç”¨ swingSword æ–¹æ³•ã€‚

![](2020-08-06-14-24-09-prototype.png)

ç”±æ­¤å¯è§ï¼š
- æ¯ä¸€ä¸ªå‡½æ•°éƒ½å…·æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ `prototype`ã€‚
- æ¯ä¸€ä¸ªå‡½æ•°çš„åŸå‹ï¼ˆprototypeï¼‰éƒ½å…·æœ‰ä¸€ä¸ª `constructor` å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘å‡½æ•°æœ¬èº«ã€‚
- æ–°åˆ›å»ºçš„å¯¹è±¡ ninja2 çš„ `__proto__` å±æ€§æŒ‡å‘æ„é€ å™¨çš„åŸå‹å³ prototypeã€‚

å› æ­¤ï¼Œå¯ä»¥é€šè¿‡ ninja2 è°ƒç”¨æ–¹æ³• swingSwordï¼Œå°†æŸ¥æ‰¾è¯¥è®¿é—®å§”æ‰˜åˆ° Ninja çš„åŸå‹å¯¹è±¡ä¸Šã€‚

å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ constructor å±æ€§æ¥è¿›è¡Œç±»å‹çš„æ ¡éªŒã€‚

```js
const assert = require('assert');
function Ninja() {}
const ninja = new Ninja();

assert(typeof ninja === "object", true, "The type of instance is object."); // é€šè¿‡ typeof æ£€æµ‹ ninja çš„ç±»å‹ï¼Œä½†ä»ç»“æœä»…ä»…èƒ½å¤Ÿå¾—çŸ¥ ninja æ˜¯ä¸€ä¸ªå¯¹è±¡è€Œå·²

assert(ninja instanceof Ninja, true, "instanceof identifies the constructor."); // é€šè¿‡ instanceof æ£€æµ‹ ninja çš„ç±»å‹ï¼Œå…¶ç»“æœæä¾›æ›´å¤šä¿¡æ¯â€”â€” ninja æ˜¯ç”± Ninja æ„é€ è€Œæ¥çš„

assert(ninja.constructor === Ninja, true, "The ninja object was created by the Ninja function.");
```

### JS æ˜¯å¦‚ä½•ä½¿ç”¨åŸå‹æ„æˆåŸå‹é“¾è¿›è¡Œç±»çš„ç»§æ‰¿

æˆ‘ä»¬å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯åŸå‹ï¼Œä¹ŸçŸ¥é“å®ƒæ˜¯å¦‚ä½•ä½¿ç”¨åŸå‹æŸ¥æ‰¾å¼•ç”¨å±æ€§ã€‚åœ¨ JavaScript ä¸­ï¼Œç»§æ‰¿ï¼ˆInheritanceï¼‰æ˜¯åœ¨ä¸€ç§æ–°å¯¹è±¡ä¸Šå¤ç”¨ç°æœ‰å¯¹è±¡çš„å±æ€§çš„å½¢å¼ï¼Œè¿™æœ‰åŠ©äºé¿å…é‡å¤ä»£ç å’Œé‡å¤æ•°æ®ã€‚

æˆ‘ä»¬å°è¯•åœ¨ä»¥ä¸‹ä»£ç ä¸­å®ç°ç»§æ‰¿ï¼š

```js
function Animal() {}
// é€šè¿‡æ„é€ å‡½æ•°åŠå…¶åŸå‹ï¼Œåˆ›å»ºä¸€ä¸ªå…·æœ‰ makeNoise æ–¹æ³•çš„ Animal ç±»å‹
Animal.prototype.makeNoise = function() {
  console.log("Animal makeNoise!");
}; 

function Canine() {} // å®šä¹‰ Canine æ„é€ å‡½æ•°
Canine.prototype = { // è¯•å›¾é™„ç€ Animal çš„åŸå‹æ–¹æ³• makeNoise åˆ° Canine çš„åŸå‹ä¸Š 
  makeNoise: Animal.prototype.makeNoise 
}

const canine = new Canine();
assert.strictEqual(canine instanceof Canine, true, "canine receives functionality from the Canine prototype");

assert.strictEqual(canine instanceof Animal, false, "... and the Animal prototype.")
assert.strictEqual(canine instanceof Object, true, "... and the Object prototype.")
```

è™½ç„¶æˆ‘ä»¬æŠŠ Animal çš„ makeNoise å¤åˆ¶åˆ° Canine èº«ä¸Šï¼Œä½†æ˜¯æ— æ³•ä½¿å¾— Canine ç§°ä¸ºçœŸæ­£çš„ Animal ç±»å‹ã€‚è¿™ä¸æ˜¯çœŸæ­£çš„ç»§æ‰¿â€”â€”ä»…ä»…æ˜¯å¤åˆ¶ã€‚

è¦æƒ³å®ç°çœŸæ­£ç»§æ‰¿çš„è¯ï¼Œè¿˜éœ€è¦çŸ¥é“åŸå‹é“¾çš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åŸå‹æ„æˆåŸå‹é“¾è¿›è¡ŒçœŸæ­£æ„ä¹‰ä¸Šç±»çš„ç»§æ‰¿ã€‚åœ¨åŸå‹é“¾ä¸Šï¼Œkeji ç»§æ‰¿ Dogï¼ŒDog ç»§æ‰¿ Canineï¼Œ Canine ç»§æ‰¿ Animalï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¸€ç›´åˆ° Objectã€‚

åˆ›å»ºè¿™æ ·çš„åŸå‹é“¾çš„ä¸€ç§æ–¹å¼æ˜¯ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ç›´æ¥æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼š

```js
const assert = require('assert')
function Animal() {}
Animal.prototype.makeNoise = function() {}

function Canine() {}
Canine.prototype = new Animal(); // é€šè¿‡å°† Canine çš„åŸå‹èµ‹å€¼ä¸º Animal çš„å®ä¾‹ï¼Œå®ç° Canine ç»§æ‰¿ Animalï¼ŒCanine æŒ‡å‘æ–°çš„åŸå‹ï¼Œç¼ºç‚¹æ˜¯ä¸¢å¤±äº†åŸæ¥çš„ prototype çš„ constructor å±æ€§

const animal1 = new Animal();
const canine = new Canine();
assert.strictEqual(canine instanceof Canine, true, "canine receives functionlity from the Canine prototype.")
assert.strictEqual(canine instanceof Animal, true, "... and the Canine prototype.")
assert.strictEqual(typeof canine.makeNoise === "function", true, "... and the Object prototype.")
```

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°è®¿é—®å¯¹è±¡çš„å±æ€§ä¼šé€šè¿‡åŸå‹é“¾å±‚å±‚å‘ä¸Šå¯»æ‰¾äº†ï¼Œæ—¢å¯ä»¥è®¿é—® Animal çš„å®ä¾‹å±æ€§ï¼Œä¹Ÿå¯ä»¥è®¿é—®å®ƒåŸå‹ä¸Šçš„å±æ€§ã€‚

#### é‡å†™ contructor çš„é—®é¢˜

åœ¨å‰é¢æˆ‘ä»¬å®ç°ç»§æ‰¿çš„è¿‡ç¨‹ä¸­ï¼Œç›´æ¥æŠŠ Animal çš„å®ä¾‹å¯¹è±¡ä½œä¸º Canine çš„åŸå‹æ—¶ï¼Œæˆ‘ä»¬å·²ç»ä¸¢å¤±äº† Canine ä¸ Canine åˆå§‹åŸå‹ä¹‹é—´çš„å…³è”ã€‚è¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸º constructor å¯ä»¥ç”¨æ¥ç›‘æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ç”±æŸä¸€ä¸ªå‡½æ•°åˆ›å»ºçš„ã€‚

```js
assert(canine.constructor === Canine,  "The canine object was created by the Canine constructor.");
```

ä½†æ˜¯å‰é¢çš„ç¨‹åºæ˜¯å¦æ— æ³•é€šè¿‡è¿™ä¸ªæµ‹è¯•ã€‚

![](2020-08-11-14-31-17-prototype.png)

å¦‚å›¾æ‰€ç¤ºï¼Œæ— æ³•æŸ¥æ‰¾åˆ° Canine å¯¹è±¡çš„ constructor å±æ€§ã€‚å›è°ƒåŸå‹ä¸Šï¼ŒåŸå‹ä¸Šä¹Ÿæ²¡æœ‰ constructor å±æ€§ï¼ˆå› ä¸º __proto__ æŒ‡å‘ Animal å®ä¾‹å¯¹è±¡äº†ï¼‰ï¼Œç»§ç»­åœ¨åŸå‹é“¾ä¸Šè¿½æº¯ï¼Œåœ¨ Animal å¯¹è±¡çš„åŸå‹è¿˜æ˜¯é‚£ä¸ªå…·æœ‰æŒ‡å‘ Animal æœ¬èº«çš„ constructor å±æ€§ã€‚äº‹å®ä¸Šï¼Œå¦‚æœæˆ‘ä»¬è¯¢é—® Canine å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç­”æ¡ˆæ˜¯ Animalï¼Œä½†æ˜¯è¿™ä¸ªç­”æ¡ˆæ˜¯é”™è¯¯çš„ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¿®å¤è¿™ä¸ªç¼ºé™·ï¼š

```js
// ....
Canine.prototype = new Animal();
// åœ¨è¿™é‡Œæ·»åŠ 
Object.defineProperty(Canine.prototype, "constructor", { // å®šä¹‰ä¸€ä¸ªæ–°çš„ä¸å¯æšä¸¾çš„ constructor å±æ€§ï¼Œå±æ€§å€¼ä¸º Ninja
  enumerable: false,
  value: Canine,
  writable: true
});
//...
```

![](2020-08-11-15-11-54-prototype.png)

ä¿®å¤åï¼Œå¯ä»¥çœ‹åˆ° canine å¯¹è±¡å’Œ Canine éƒ½æœ‰ constructor å±æ€§äº†ã€‚

#### æ›´å¥½çš„ç»§æ‰¿æ–¹å¼

æˆ‘ä»¬æ€»ç»“ä¸‹å‰é¢çš„å®ç°æ–¹å¼å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼š`Canine.prototype = new Animal();`
1. æ²¡æœ‰åˆå§‹åŒ– Animal çš„å±æ€§ï¼Œæ¯”å¦‚ foodï¼Œpictureï¼Œå¦‚æœè¦åˆå§‹åŒ–åªèƒ½ä¼ é€’å‡½æ•°ã€‚

```js
function inheri(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype); // å®ç°ç»§æ‰¿
  subClass.__proto__ = superClass;  // å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»
  // è¿™é‡Œçš„ä¸¤è¡Œä»£ç ç»§æ‰¿æ¯”ç›´æ¥ subClass.prototype =  new superClassï¼Œçµæ´»ï¼Œä¸ç”¨å®ä¾‹åŒ–ä¼ é€’å‚æ•°
  // è¡¥å›ä¸¢å¤±çš„å±æ€§
  Object.defineProperty(subClass, "constructor", {
    enumerable: false,
    value: subClass,
    writable: true
  })
}

function Canine(picture, food, hunger, boundaries) {
  return Animal.call(this, picture, food, hunger, boundaries);
}
inheri(Canine, Animal);
```

#### ä¸€äº›æ“ä½œç¬¦ instanceof typeof in æ“ä½œç¬¦

### ä½¿ç”¨ ES6 çš„ class å®ç°ç»§æ‰¿

```js
class Animal {
	constructor(picture, food, hunger, boundaries) {
		this.picture = picture;
		this.food = food;
		this.hunger = hunger;
		this.boundaries = boundaries;
	}

	makeNoise() { // åŠ¨ç‰©å‘å‡ºå£°éŸ³çš„è¡Œä¸º
	}

	eat() { // åŠ¨ç‰©é‡åˆ°é£Ÿç‰©æ—¶çš„è¡Œä¸ºç¨‹åº
	}

    sleep() { // ç¡çœ çš„è¡Œä¸ºç¨‹åº
	}

    roam() { // ä¸åœ¨è¿›é£Ÿæˆ–ç¡çœ æ—¶çš„è¡Œä¸ºç¨‹åº
	}
}

class Canine extends Animal {

	constructor(picture, food, hunger, boundaries) {
		super(picture, food, hunger, boundaries);
	}

	makeNoise() {
	}

	eat() {
	}
}
```

<!-- ## æ„é€ å™¨ï¼ˆæ„é€ å‡½æ•°ï¼‰ä¸åŸå‹çš„å…³ç³»

### å±æ€§ __protoã€prototypeã€constructor åŒºåˆ«

æ„é€ å™¨ï¼ˆæ„é€ å‡½æ•°ï¼‰ï¼Œè‹±æ–‡æ˜¯ contructorï¼Œå®ƒæ˜¯å¯ä»¥æ ¹æ®åŸå‹æ„é€ å®ä¾‹å¯¹è±¡çš„æœºå™¨ï¼Œæä¾›æ¶ˆè´¹è€…ï¼ˆç”¨æˆ·ï¼‰å¯ä»¥åŸºäºè¿™ä¸ªåŸå‹ï¼ˆåœ¨ä¼ ç»Ÿé¢å‘å¯¹è±¡ä¸­å°±æ˜¯å½“å‰æ•´ä¸ªç±»ï¼‰è¿›è¡Œåˆå§‹åŒ–çŠ¶æ€æ‰€ç”¨ã€‚

ä¾‹å¦‚ `new bar()` è¿™ä¸ª `bar` æ˜¯åŸå‹ï¼Œè€Œ `bar` ç»§æ‰¿çš„ç±»ä¹Ÿæ˜¯åŸå‹ã€‚é€šå¸¸æˆ‘ä»¬ `a = new bar()` ä¹Ÿæ˜¯è°ƒç”¨ `bar` ç±»çš„æ„é€ å‡½æ•°ï¼Œç„¶ååŸºäºä»¥æ•´ä¸ªç±»ä¸ºåŸå‹è¿›è¡Œåˆ›å»ºæ–°çš„å¯¹è±¡ã€‚`bar` ä¸º `a` çš„æ„é€ å‡½æ•°ï¼Œåˆ™ `a` ä¸º `bar` çš„ä¸€ä¸ªå®ä¾‹ã€‚è€Œ bar ä½œä¸ºåŸå‹è¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–çš„åŸå‹ä¾‹å¦‚ `foo`ã€‚

C#ã€Java éƒ½é€šè¿‡ class è¿›è¡ŒåŸå‹çš„å®šä¹‰ï¼ŒJS é€šè¿‡ prototype å±æ€§ï¼Œè®©æˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹ JS ä¸­åŸºäºåŸå‹çš„å®ç°è¿‡ç¨‹ã€‚ï¼ˆä¸‹å›¾æ˜¯åœ¨ è°ƒè¯•å™¨ï¼ˆdebuggerï¼‰ä¸­æŸ¥çœ‹ Person å‡½æ•°çš„å±æ€§ï¼‰

![](../.vuepress/public/images/2020-08-05-14-20-18-prototype.png)

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºå‡½æ•° Person çš„ `prototype` å±æ€§åŒ…å«äº†ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯ construtor æ„é€ å™¨æŒ‡å‘æ„é€ å‡½æ•°ï¼Œè·Ÿä¼ ç»Ÿé¢å‘å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯ä¸€æ ·çš„é“ç†ã€‚ä¸€ä¸ªæ˜¯ `__proto__` æŒ‡å‘å®ƒçš„ä¸Šä¸€å±‚åŸå‹ Object å‡½æ•°ã€‚

è¿™ä¸ª prototype å…¶å®å°±å¯ä»¥ç±»æ¯” Java çš„ classï¼Œclass å¸¦æœ‰ æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ„é€ åŸå‹çš„å®ä¾‹ã€‚è€Œ `__proto__` åˆ™ç›¸å½“äºJava çš„ extend æ“ä½œç¬¦ã€‚ -->

<!-- ### **proto** ä¸ prototype çš„åŒºåˆ«

### constructor ä¸ prototype çš„åŒºåˆ« -->

## åº”ç”¨åœºæ™¯

é™¤äº†ç»§æ‰¿ä¹‹å¤–ï¼Œç†è§£è®¡ç®—æœºä¸­çš„åŸå‹å¯ä»¥è®©æˆ‘ä»¬åšä»€ä¹ˆã€‚

### æ›´æ–°è½®å­ï¼šç»™ç¬¬ä¸‰æ–¹åº“ã€æ¡†æ¶å¢åŠ å±æ€§

[vue-plugin-event-bus](https://github.com/shooterRao/vue-plugin-event-bus/blob/master/src/index.ts)

ç»™ vue å†™æ’ä»¶ã€‚(prototype)
é™¤äº†åœ¨ window å¯¹è±¡å¤–
è¦æ³¨æ„åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œprototype å±æ€§çš„å†²çªé—®é¢˜ã€‚

<!-- ### å†™ä¸ªè½®å­ï¼šä¸€æ£µæ ‘ -->
<!-- å†™ä¸€ä¸ª eventbus -->

## å°ç»“

é¢å‘å¯¹è±¡ç»§æ‰¿çš„ç¼ºç‚¹
<!-- æ„é€ å™¨ã€‚é¢å‘è¿‡ç¨‹ã€é¢å‘å¯¹è±¡ï¼Œç¨å¾®æä¸‹å‡½æ•°å¼ç¼–ç¨‹ï¼Œåƒé¢å‘è¿‡ç¨‹çš„ C è¯­è¨€æ˜¯å¦‚ä½•æé«˜å†™æ³•çš„å‘¢  ts-->

å¦å¤–ï¼Œåƒ UML å»ºæ¨¡ï¼Œé¡¾åæ€ä¹‰å»ºç«‹æ¨¡å‹ï¼Œä¹Ÿæ˜¯å»ºç«‹åŸå‹çš„è¿‡ç¨‹ï¼Œä¹‹åå†å¯¹ç³»ç»Ÿè¿›è¡Œå…·ä½“çš„ç¼–ç ã€‚

## å‚è€ƒèµ„æ–™

- é¢å‘å¯¹è±¡ç»§æ‰¿çš„ç¼ºç‚¹ï¼›
- [Details of the object model](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Details_of_the_Object_Model) å€¼å¾—ç²¾è¯»çš„ MDN æ–‡æ¡£ï¼Œå…³äºåŸºäºç±»ç»§æ‰¿ä¸åŸºäºåŸå‹ç»§æ‰¿çš„åŒºåˆ«è¯´å¾—æŒºæ¸…æ¥šçš„ã€‚
- [Object.prototype.constructor](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor)
- [æ·±å…¥æ¢ç©¶ Function & Object é¸¡è›‹é—®é¢˜](https://github.com/yygmind/blog/issues/35)
- [ã€è¿›é˜¶ 5-2 æœŸã€‘å›¾è§£åŸå‹é“¾åŠå…¶ç»§æ‰¿ä¼˜ç¼ºç‚¹](https://github.com/yygmind/blog/issues/35)
- [ã€è¿›é˜¶ 5-1 æœŸã€‘é‡æ–°è®¤è¯†æ„é€ å‡½æ•°ã€åŸå‹å’ŒåŸå‹é“¾](https://juejin.im/post/5c6a9c10f265da2db87b98f3)
- [wiki åŸå‹](https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%9E%8B)
- [Prototype](https://en.wikipedia.org/wiki/Prototype#cite_note-:0-1)
- [æ‰€è°“åŸå‹ï¼Œæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ](http://www.woshipm.com/pd/144880.html)
- [å»–é›ªå³° JavaScript æ•™ç¨‹](https://www.liaoxuefeng.com/wiki/1022910821149312/1023021997355072)
- [å†è°ˆ JavaScript é¢å‘å¯¹è±¡æ€æƒ³åŠç»§æ‰¿](https://segmentfault.com/a/1190000011770117)
- [JS å’Œå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€çš„åŒºåˆ«](https://www.jianshu.com/p/387677d13f99?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation)
- [Trying to understand the difference between prototype and constructor in JavaScript](https://stackoverflow.com/questions/28600238/trying-to-understand-the-difference-between-prototype-and-constructor-in-javascr)
- [java ç»§æ‰¿](https://www.liaoxuefeng.com/wiki/1252599548343744/1260454548196032)
- [ç®€å•ç²—æš´åœ°ç†è§£ js åŸå‹é“¾â€“js é¢å‘å¯¹è±¡ç¼–ç¨‹](https://mp.weixin.qq.com/s/93CQRYj8TraDIKeJxNGPAQ)
- ã€ŠHead First Javaã€‹
- [Babel â€”â€” ç¼–è¯‘ JS å·¥å…·](https://babeljs.io/) å¯ä»¥åœ¨çº¿ç¼–è¯‘
- ã€ŠJavaScript å¿è€…ç§˜ç±ã€‹