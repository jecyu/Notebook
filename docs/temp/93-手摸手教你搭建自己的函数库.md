# æ‰‹æ‘¸æ‰‹æ•™ä½ æ­å»ºè‡ªå·±çš„å‡½æ•°åº“

ï¼ˆè½®å­ç ”å‘æ€ç»´ï¼Œå¯ä»¥ review ç›¸å…³åšä¸»é€ è½®å­çš„è¿‡ç¨‹ï¼Œç»“åˆè½®å­ä¸€èµ·reviewï¼‰

## éœ€æ±‚åˆ†æ

æˆ‘æƒ³è¦è¾¾åˆ°çš„ç›®æ ‡

### éœ€æ±‚åˆ†æ

æœ‰äº›å‡½æ•°åº“ï¼Œä¸æ»¡è¶³é¡¹ç›®éœ€æ±‚æ—¶ã€‚

- æ—¥å¸¸å·¥ä½œä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œæå‡ºå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚
- æ—¥å¸¸å·¥ä½œçš„ç»“æ™¶ã€‚
- ä¸€äº›å·¥å…·ç±»å¤šç§å®ç°æ–¹å¼ï¼Œæ¯”å¦‚ä½¿ç”¨é€’å½’å’Œéé€’å½’æ–¹å¼ï¼Œæ€§èƒ½ä¸Šçš„è€ƒè™‘ç­‰ã€‚å¤šç§æ–¹å¼çš„å®ç°ï¼Œå¯ä»¥é€šè¿‡é€‚é…å™¨ï¼Œå…ˆè€ƒè™‘ä¸€ç§å®ç°ï¼Ÿ

ç›®æ ‡ï¼š

Sï¼šç›®æ ‡å¿…é¡»æ˜¯å…·ä½“çš„ï¼ˆSpecificï¼‰

- èƒ½å¤ŸæŠŠè¿™ä¸ªé¡¹ç›®å†™åˆ°ç®€å†ä¸­

Mï¼šç›®æ ‡å¿…é¡»æ˜¯å¯ä»¥è¡¡é‡çš„ï¼ˆMeasurableï¼‰

- è·å¾— 10 ä¸ª star 

Aï¼šç›®æ ‡å¿…é¡»æ˜¯å¯ä»¥è¾¾åˆ°çš„ï¼ˆAttainableï¼‰

- æœ€å¥½èƒ½å¤Ÿè¶…è¿‡ 10 ä¸ª

Rï¼šç›®æ ‡è¦ä¸å…¶ä»–ç›®æ ‡å…·æœ‰ä¸€å®šçš„ç›¸å…³æ€§ï¼ˆRelevantï¼‰

- èƒ½å¤Ÿè¾…åŠ©æ‰¾å·¥ä½œ
- ä¹Ÿèƒ½å¤ŸæŠŠæ—¥å¸¸å·¥ä½œä¸­é‡åˆ°çš„å·¥å…·ï¼Œæ€»ç»“ä¸‹æ¥ï¼ŒKPI æ™‹å‡ã€‚

Tï¼šç›®æ ‡å¿…é¡»å…·æœ‰æ˜ç¡®çš„æˆªæ­¢æœŸé™ï¼ˆTime-boundï¼‰

- 6 æœˆåº•è¾¾åˆ°

### æ ¸å¿ƒåŠŸèƒ½

- æ”¯æŒç®€å•çš„åœºæ™¯ä¾‹å­åœ¨çº¿æŸ¥çœ‹ï¼ˆä½¿ç”¨åœºæ™¯ï¼‰ï¼Œæ–¹ä¾¿åˆ«äººçŸ¥é“å¯ä»¥å¹²ä»€ä¹ˆã€‚å°±ç®—å‡ å¥è¯ä¹Ÿå¥½ã€‚åƒ 30seconds ä»…ä»…æ˜¯ä¸€ä¸ªå¾ˆæŠ½è±¡çš„ï¼Œå½“ç„¶è¿™ä¸ªæ˜¯æ­£å¸¸ï¼ˆå–ç‚¹ï¼‰
- ä½¿ç”¨ TypeScript 
- æœ‰æµ‹è¯•ç”¨ä¾‹
- è‡ªåŠ¨åŒ–æµ‹è¯•ã€é›†æˆ

### å–ä¸€ä¸ªåˆé€‚çš„åå­—

è¾“å…¥ä¸­æ–‡åï¼Œé€šè¿‡ google ç¿»è¯‘ï¼Œåœ¨ npm å¯»æ‰¾æ˜¯å¦å†²çªã€‚

na-toolkit

### å‘å¸ƒ npm

1. æ³¨å†Œ npm
2. npm addUser ç™»é™†è´¦æˆ·å’Œç”¨æˆ·
3. æ·»åŠ  package.json ç­‰æ–‡ä»¶
4. npm publish å‘å¸ƒåˆ° npm ä¸Š

### æ­å»ºæ„å»º || å¯»æ‰¾æ¨¡ç‰ˆ

> è¿™é‡Œå¯ä»¥æ–°å»ºä¸€ä¸ªé¢˜ç›®ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ rollup æ­å»º JavaScript åº“çš„ TypeScript å¼€å‘ç¯å¢ƒï¼Œæ‹†è§£ã€‚

è‡ªå·±æ­å»ºä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®æ¶å­ï¼Œæ˜¯ä¸€ä¸ªç›¸å½“æµªè´¹æ—¶é—´çš„äº‹æƒ…â€”â€”**ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡é€ è½®å­çš„æ—¶å€™**ã€‚å¯¹äºä¸€äº›æ¡†æ¶çš„æ’ä»¶ã€CLI å·¥å…·æ¥è¯´ï¼Œå¯èƒ½å®˜æ–¹ç›´æ¥æä¾›äº†ä¸€ä¸ª Hello, World æ¨¡æ¿ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€äº›æ—¶å€™å¾€å¾€æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚è¦ä¹ˆæ‰¾ä¸€ä¸ªå·®ä¸å¤šçš„æ¨¡æ¿ï¼Œå†æœ‰é’ˆå¯¹äºçš„ä¿®æ”¹ï¼›è¦ä¹ˆå¤åˆ¶ç°æœ‰çš„æ¶å­ï¼Œä»¥æˆ‘ä»¬çš„åç§°æ›¿æ¢å…¶ä¸­çš„åå­—ã€‚

å½“æˆ‘é€ è½®å­çš„æ—¶å€™ï¼Œæˆ‘ä¹ æƒ¯åœ¨ç½‘ä¸Šæœç´¢ç›¸åº”çš„æ¨¡æ¿ï¼Œæ¯”å¦‚è¯´ï¼š`javascript lib boilerplate`ã€`typescript lib boilerplate` æˆ–è€… `typescript cli starter`ã€‚åœ¨æ²¡æœ‰åˆé€‚çš„æƒ…å†µä¸‹ï¼Œå°±æ˜¯æ‰¾ä¸€äº›ä½¿ç”¨ TypeScript å†™çš„åº“ï¼Œåœ¨é‚£ä¹‹ä¸Šè¿›è¡Œä¿®æ”¹ã€‚

https://github.com/alexjoverm/typescript-library-starter

å‰ç«¯å·¥ç¨‹åŒ–ï¼šè‡ªåŠ¨åŒ–-è§„èŒƒåŒ–ï¼ˆæ–‡æ¡£åŒ–ç­‰ï¼‰-ç»„ä»¶åŒ–-æ¨¡å—åŒ–

- é›¶é…ç½®
  - Zero-setup. After running `npm install` things will setup for you ğŸ˜‰

####  å¼€å‘ç¯å¢ƒ

- Tests, coverage and interactive watch mode using **[Jest](http://facebook.github.io/jest/)**
- **[Prettier](https://github.com/prettier/prettier)** and **[TSLint](https://palantir.github.io/tslint/)** for code formatting and consistency

#### æäº¤ä»£ç 

- yarn commit

#### æ–‡æ¡£åŒ–

- **[RollupJS](https://rollupjs.org/)** for multiple optimized bundles following the [standard convention](http://2ality.com/2017/04/setting-up-multi-platform-packages.html) and [Tree-shaking](https://alexjoverm.github.io/2017/03/06/Tree-shaking-with-Webpack-2-TypeScript-and-Babel/)

- **Docs automatic generation and deployment** to `gh-pages`, using **[TypeDoc](http://typedoc.org/)**
- Automatic types `(*.d.ts)` file generation

#### æµ‹è¯•

[Lots of handlebars warnings with text+coverage reporter #9396](https://github.com/facebook/jest/issues/9396)

è§£å†³

```json
"coverageReporters": [
	"json",
	"lcovonly",
	"text",
  "clover"
]
```

#### æŒç»­é›†æˆ

> æŒç»­é›†æˆç”±å¾ˆå¤šæ“ä½œç»„æˆï¼Œæ¯”å¦‚æŠ“å–ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ç­‰

æŠŠæœ¬åœ°å¼€å‘ç¯å¢ƒæ‰‹åŠ¨åšçš„ä¸œè¥¿ï¼Œç›´æ¥æ”¾åˆ°æœåŠ¡å™¨ä¸Šè‡ªåŠ¨åšï¼Œä»æäº¤ä»£ç é‚£ä¸€åˆ»å¼€å§‹ï¼Œç›´æ¥æŠ“å–ï¼‰

##### Github Action

ï¼ˆ1ï¼‰**workflow** ï¼ˆå·¥ä½œæµç¨‹ï¼‰ï¼šæŒç»­é›†æˆä¸€æ¬¡è¿è¡Œçš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ª workflowã€‚

ï¼ˆ2ï¼‰**job** ï¼ˆä»»åŠ¡ï¼‰ï¼šä¸€ä¸ª workflow ç”±ä¸€ä¸ªæˆ–å¤šä¸ª jobs æ„æˆï¼Œå«ä¹‰æ˜¯ä¸€æ¬¡æŒç»­é›†æˆçš„è¿è¡Œï¼Œå¯ä»¥å®Œæˆå¤šä¸ªä»»åŠ¡ã€‚

ï¼ˆ3ï¼‰**step**ï¼ˆæ­¥éª¤ï¼‰ï¼šæ¯ä¸ª job ç”±å¤šä¸ª step æ„æˆï¼Œä¸€æ­¥æ­¥å®Œæˆã€‚

ï¼ˆ4ï¼‰**action** ï¼ˆåŠ¨ä½œï¼‰ï¼šæ¯ä¸ª step å¯ä»¥ä¾æ¬¡æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤ï¼ˆactionï¼‰

###### å®ç°éƒ¨ç½² gh-pages

è‡³äºå‘å¸ƒç‰ˆæœ¬è¿™å—ï¼Œå…ˆæ”¾ä¸€æ”¾ï¼Œä¸€æ­¥æ­¥æµ‹è¯•

æ³¨æ„ï¼šéœ€è¦æŒ‰ç…§ vscode æ‰©å±•æ¥æ£€æµ‹ç¼–å†™æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œé¿å…æäº¤åˆ°è¿œç¨‹ä»“åº“æ‰æ˜¾ç¤ºä¸æ­£ç¡®ã€‚

GitHub Actions

a step cannot have both the `uses` and `run` keysï¼Œæ³¨æ„ã€‚

######  å®ç° semantic å‘å¸ƒ Github å’Œ npm

##### Travis CI

- **[Travis](https://travis-ci.org/)** integration and **[Coveralls](https://coveralls.io/)** report
- `Travis CI` æä¾›çš„æ˜¯æŒç»­é›†æˆæœåŠ¡ï¼ˆContinuous Integrationï¼Œç®€ç§° CIï¼‰ã€‚å®ƒç»‘å®š Github ä¸Šé¢çš„é¡¹ç›®ï¼Œåªè¦æœ‰æ–°çš„ä»£ç ï¼Œå°±ä¼šè‡ªåŠ¨æŠ“å–ã€‚ç„¶åï¼Œæä¾›ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œæ‰§è¡Œæµ‹è¯•ï¼Œå®Œæˆæ„å»ºï¼Œè¿˜èƒ½éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚
- ä½¿ç”¨ Travis CI è‡ªåŠ¨éƒ¨ç½²ï¼Œéœ€è¦æ·»åŠ  GH_TOKEN æ¥è¿›è¡Œéƒ¨ç½²æ–‡æ¡£åˆ° GH_PAGES ä¸Šæ¥ã€‚ï¼ˆç°åœ¨è„šæœ¬æ˜¯ç”± Travis CI æ¥æ‰§è¡Œçš„ï¼Œéƒ¨ç½²çš„æ—¶å€™ï¼Œæ€ä¹ˆè®© Travis æœ‰æƒé™å¾€ Github æäº¤ä»£ç å‘¢ï¼Ÿæäº¤ GH_TOKENï¼‰

Travis é…ç½® 

```yml
language: node_js
cache:
  directories:
    - ~/.npm
notifications:
  email: false
node_js:
  - '10'
  - '11'
  - '8'
  - '6'
script:
  - npm run test:prod && npm run build
after_success:
  - npm run travis-deploy-once "npm run report-coverage"
  - if [ "$TRAVIS_BRANCH" = "master" -a "$TRAVIS_PULL_REQUEST" = "false" ]; then npm run travis-deploy-once "npm run deploy-docs"; fi
  - if [ "$TRAVIS_BRANCH" = "master" -a "$TRAVIS_PULL_REQUEST" = "false" ]; then npm run travis-deploy-once "npm run semantic-release"; fi
branches:
  except:
    - /^v\d+\.\d+\.\d+$/
```

test -> build -> coverage -> deploy-docs -> semantic-releaseï¼ˆci ç¯å¢ƒä¸‹è§¦å‘ï¼‰

æ¶‰åŠçš„ npm åŒ…

- travis-deploy-once

#### ç‰ˆæœ¬å‘å¸ƒ

å‘å¸ƒ

-  github
-  npm

ä¾èµ–å·¥å…·

- (Optional) **Automatic releases and changelog**, using [Semantic release](https://github.com/semantic-release/semantic-release), [Commitizen](https://github.com/commitizen/cz-cli), [Conventional changelog](https://github.com/conventional-changelog/conventional-changelog) and [Husky](https://github.com/typicode/husky) (for the git hooks) 

- [semantic-release](https://semantic-release.gitbook.io/semantic-release/)**æ›´é€‚åˆåœ¨ CI ç¯å¢ƒä¸­è¿è¡Œï¼Œå®ƒè‡ªå¸¦æ”¯æŒå„ç§ git server çš„è®¤è¯æ”¯æŒ**ï¼Œå¦‚ Githubï¼ŒGitlabï¼ŒBitbucket ç­‰ç­‰ï¼Œæ­¤å¤–ï¼Œè¿˜æ”¯æŒæ’ä»¶ï¼Œä»¥ä¾¿å®Œæˆå…¶ä»–åç»­çš„æµç¨‹æ­¥éª¤ï¼Œæ¯”å¦‚è‡ªåŠ¨ç”Ÿæˆ git tag å’Œ release note ä¹‹åå† push å›ä¸­å¤®ä»“åº“ï¼Œè‡ªåŠ¨å‘å¸ƒ npm åŒ…ç­‰ç­‰

- semantic-release å¤§è‡´çš„å·¥ä½œæµå¦‚ä¸‹:

  - æäº¤åˆ°ç‰¹å®šçš„åˆ†æ”¯è§¦å‘ release æµç¨‹
  - éªŒè¯ commit ä¿¡æ¯ï¼Œç”Ÿæˆ release noteï¼Œæ‰“ git tag
  - å…¶ä»–åç»­æµç¨‹ï¼Œå¦‚ç”Ÿæˆ`CHANGELOG.md`ï¼Œ`npm publish`ç­‰ç­‰ï¼ˆé€šè¿‡æ’ä»¶å®Œæˆï¼‰

  

æ›´æ–°æ—¶æœº

è§¦å‘ç‰ˆæœ¬æ›´æ–°çš„ï¼š

master åˆ†æ”¯ï¼Œå¹¶ä¸”æ˜¯å¸¦æœ‰ featã€bugfix çš„ commitï¼Œä¸»ç‰ˆæœ¬çš„æ›´æ–°åˆ™æ˜¯æœ‰é‡å¤§çš„ breakchange

semantic-cli ä½¿ç”¨ï¼š

```sh
semantic-release-cli setup
? What is your npm registry? 
KaydeMacBook-Pro:na-toolkit kayliang$ semantic-release-cli setup
? What is your npm registry? https://registry.npmjs.org/

? What is your npm username? jecyu
? What is your npm password? [hidden]
? Provide a GitHub Personal Access Token (create a token
 at https://github.com/settings/tokens/new?scopes=repo) 
2edc8e70803fb40754ded27b629710ebdd521de3
? What CI are you using? Travis CI
ERR! semantic-release no access token supplied
```

âš ï¸æ³¨æ„ï¼šGithub ç›®å‰çš„è®¤è¯ä¸å†æä¾›è®¤è¯æ¥å£ç«¯ç»™ Sematic Cli é€šè¿‡è®¤è¯ï¼Œå…·ä½“çœ‹https://github.com/semantic-release/cli/issues/345ï¼Œsemantic-release-cli setup éœ€è¦ è€Œ Sematic-Release é€‚åˆåœ¨ CI ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¯ä»¥è€ƒè™‘ç”¨ Github Action æ›¿ä»£ Travis ci ï¼Œå› ä¸º Github Action ä¸éœ€è¦è®¤è¯ Github Tokenã€‚

å…ˆæ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬å’Œæ–‡æ¡£ï¼Œåç»­å†ç ”ç©¶å¦‚ä½•ä½¿ç”¨ Github Action æ¥å‘å¸ƒç‰ˆæœ¬ï¼Œæ•´ä½“ä»£æ›¿æ‰ travisï¼Œå¯ä»¥å¦å¤–å¼€ä¸€ä¸ªåº“æ¥æ„å»ºã€‚è¿™ä¸ªå°±å…ˆä¸ç”¨å¤„ç†äº†ã€‚

ä½¿ç”¨ Github Action release å‘å¸ƒï¼Œtravis è¿›è¡Œæµ‹è¯•æ„å»ºï¼Ÿä¸è¦æ··ä¹±

é«˜æ•ˆå›¢é˜Ÿå¼€å‘æµç¨‹æ€»ç»“

### ç¼–å†™åŸå‹ï¼šæ ¸å¿ƒåŠŸèƒ½

æ ¸å¿ƒåŠŸèƒ½ï¼Œæ„å‘³ç€ï¼Œä¸åšè¿‡å¤šçš„é”™è¯¯å¤„ç†â€”â€”ã€Œ**å‡è®¾ç”¨æˆ·æ˜¯æŒ‰æˆ‘ä»¬çš„é¢„æœŸè¡Œä¸ºè¿›è¡Œçš„**ã€ã€‚ä¾å¾®è½¯å…¬å¸ï¼ˆSteve Ballmerï¼‰çš„ç»éªŒï¼Œ20% çš„ä»£ç æ˜¯åœ¨æ ¸å¿ƒçš„é€»è¾‘ä¸Šï¼Œè€Œæœ‰è¶…è¿‡ 80% çš„ä»£ç æ˜¯åœ¨å¤„ç†é”™è¯¯é€»è¾‘ä¸Šã€‚

æ‰€ä»¥ï¼Œåœ¨é‚£ä¹‹å‰ï¼Œè¯·å…ˆå®Œæˆæ ¸å¿ƒçš„åŠŸèƒ½ã€‚å®ƒå¯ä»¥è®©ä½ æ›´å¿«åœ°å‘å¸ƒæ—©æœŸçš„é¢„è§ˆç‰ˆï¼Œä»¥æ—©ç‚¹æ¥å—å¸‚åœºçš„åé¦ˆã€‚

æ„å»ºå¼€æºä¸æ„å»ºäº§å“æ˜¯ç±»ä¼¼çš„ï¼Œèƒ½è¶Šæ—©æ¨å‡ºæ—©æœŸç‰ˆæœ¬ï¼Œå°±è¶Šæœ‰æœºä¼šèµ¢å¾—å¸‚åœºï¼›èƒ½ä¸æ–­åœ°ç»§ç»­æ¥å—åé¦ˆå¹¶è¿›è¡Œæ”¹è¿›ï¼Œå°±è¶Šèƒ½å¸å¼•å¿ å®ç”¨æˆ·ï¼›èƒ½åšå¥½ä¸€äº›å¸‚åœºå·¥ä½œï¼Œä¹Ÿå°±è¶Šå¸å¼•æ›´å¤šç”¨æˆ·ã€‚

### 0.0.1

- âœ…å•å…ƒæµ‹è¯•
- âœ…TypeScript æ”¯æŒ
- è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ã€‚
- æ·»åŠ æ ‘çš„å·¥å…·ç±»å‡½æ•°
- æ–‡æ¡£

### 0.1.0

###  ç‰ˆæœ¬å‘å¸ƒç®¡ç†

npm çš„ç‰ˆæœ¬å‘å¸ƒï¼Œç›´æ¥åˆ‡æ¢åˆ°å¯¹åº”åˆ†æ”¯è¿›è¡Œç‰ˆæœ¬å‘å¸ƒã€‚

è‡³äºæºä»£ç ä¸Šçš„ç‰ˆæœ¬ç®¡ç†ï¼Œå…ˆå‘å¸ƒä¸º tagï¼Œæ¯”å¦‚ 4.17ï¼Œå‘å¸ƒåå¦‚æœè¿™ä¸ªç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œä¸€èˆ¬ä¼šåœ¨ä¸‹æ¬¡å‘å¸ƒçš„ç‰ˆæœ¬è¿›è¡Œä¿®å¤ã€‚

å¦‚æœåƒDME æ¨¡å‹è¿™æ ·ï¼Œä¼šåˆ†å‘å¤šä¸ªç‰ˆæœ¬ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚è¿™ä¸ªæ—¶å€™ 4.17 æœ‰é—®é¢˜ï¼Œè€Œç”¨æˆ·åˆä¸å¥½è¿›è¡Œå‡çº§æ—¶ï¼Œå°±éœ€è¦åˆ‡æ¢åˆ° 4.17 tagï¼Œåœ¨è¿™ä¸ª commit ä¸Šå»ºç«‹ä¸€ä¸ªåˆ†æ”¯ï¼Œè¿›è¡Œç‰ˆæœ¬çš„ä¿®å¤ï¼Œå¹¶å±…äºæ”¹ç‰ˆæœ¬è¿›è¡Œæ‰“åŒ…å³å¯ã€‚



## è®¾è®¡å®ç°

### æ•´ä½“æ¶æ„

### é€ä¸ªå®ç°

## å‚è€ƒèµ„æ–™

- [å¼€æºä¹‹ç¾ï¼šå¼€æºè½¯ä»¶å¼€å‘æµç¨‹](https://www.phodal.com/blog/how-to-build-a-opensource-project/)

- 