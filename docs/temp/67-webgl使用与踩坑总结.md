# WebGL ä»å…¥é—¨åˆ°å®æˆ˜æ€»ç»“

## å‰è¨€

**ä¸»è¦è§£å†³ï¼š**

- åœ°å›¾å¯¼å‡ºå›¾ç‰‡é—®é¢˜
- å›¾å±‚ç½®ç°é—®é¢˜ï¼ˆå¯ä»¥ review 4.13 æºç  swipe æ˜¯å¦‚ä½•ä¸å›¾å±‚å…³è”æ“ä½œçš„ã€‚ï¼‰
- ä¸‰ç»´åœ°å›¾ä¸äºŒç»´åœ°å›¾çš„æ¸²æŸ“åŒºåˆ«ï¼ˆåæ ‡ç³»ã€å®šä½ã€ç»˜åˆ¶ç­‰ï¼‰

å…¥é—¨æ•™ç¨‹

- å¼€å§‹ WebGL
- ç»™ WebGL çš„ä¸Šä¸‹æ–‡ç¯å¢ƒæ·»åŠ  2D å†…å®¹
- åœ¨ WebGL ä¸­ä½¿ç”¨ç€è‰²å™¨ï¼ˆshaderï¼‰å»èµ‹äºˆé¢œè‰²
- ç”¨ WebGL è®©å¯¹è±¡åŠ¨èµ·æ¥
- ä½¿ç”¨ WebGL åˆ›å»º 3D ç‰©ä½“
- åœ¨ WebGL ä¸­ä½¿ç”¨çº¹ç†è´´å›¾ï¼ˆtextureï¼‰
- WebGL ä¸­çš„ç¯å…‰
- WebGL ä¸­çš„åŠ¨ç”»çº¹ç†è´´å›¾

ã€Šåæ­¥å­¦ä¹ æ³•ã€‹

- äº†è§£å…¨å±€
- ç¡®å®šèŒƒå›´
- å®šä¹‰ç›®æ ‡
- å¯»æ‰¾èµ„æº
- åˆ›å»ºå­¦ä¹ è®¡åˆ’
  - åŸºæœ¬çš„ç»˜åˆ¶ 3d å›¾å½¢ï¼Œå¯¼å‡ºå›¾å½¢ï¼Œ
  - åˆ›å»ºä¸€ä¸ªè¿·å‹çš„ 3d åº“åŸç†å­¦ä¹ 
- ç­›é€‰èµ„æº
- å¼€å§‹å­¦ä¹ ï¼Œæµ…å°è¾„æ­¢
- åŠ¨æ‰‹æ“ä½œï¼Œè¾¹ç©è¾¹å­¦
- å…¨é¢æŒæ¡ï¼Œå­¦ä»¥è‡´ç”¨
- ä¹ä¸ºäººå¸ˆï¼Œèæ±‡è´¯é€š

ä»¥ä¸‹ä½¿ç”¨ WebGL 1.0 ç‰ˆæœ¬

## å…¥é—¨ï¼ˆå°ç™½ï¼‰

![](../.vuepress/public/images/2021-01-20-18-38-14.png)

### ä»€ä¹ˆæ˜¯ WebGL

WebGL ç¨‹åºçš„å·¥ä½œæµç¨‹å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š

1. ä½¿ç”¨ JavaScript ä»£ç åˆå§‹åŒ– WebGL ç¨‹åºï¼Œå¹¶ä½¿ç”¨å®ƒåœ¨ HTML5 Canvas çš„ WebGL ä¸Šä¸‹æ–‡ä¸Šç»˜åˆ¶ 2D æˆ– 3D åœºæ™¯ã€‚

2. é¦–å…ˆä½¿ç”¨ç¬¬ä¸€ä¸ªè¢«ç§°ä¸ºé¡¶ç‚¹ç€è‰²å™¨ï¼ˆvertex shaderï¼‰çš„ GLSL è„šæœ¬å¯¹åœºæ™¯ä¸­çš„æ‰€æœ‰é¡¶ç‚¹è¿›è¡Œç»˜åˆ¶ã€‚å®ƒè®¡ç®—åœºæ™¯çš„æŠ½è±¡æ•°å­¦æ¨¡å‹ï¼Œå¹¶å°†å…¶äº¤ç»™ç¬¬äºŒä¸ª GLSL è„šæœ¬ã€‚

3. ç¬¬äºŒä¸ª GLSL è„šæœ¬ç§°ä¸ºç‰‡æ®µç€è‰²å™¨ï¼ˆfragment shaderï¼‰ï¼Œå®ƒé’ˆå¯¹ç”»å¸ƒä¸­çš„æ¯ä¸ªå¯è§ç‰‡æ®µï¼ˆåƒç´ ï¼‰è¿›è¡Œç€è‰²ã€‚å®ƒé€šè¿‡ç§°ä¸ºæ …æ ¼åŒ–çš„è¿‡ç¨‹æ¥è®¡ç®—æ¯ä¸ªç‰‡æ®µçš„é¢œè‰²ã€‚

4. è¿™äº›ç‰‡æ®µï¼ˆfragmentsï¼‰ æ„æˆäº†åœ¨é¢œè‰²ç¼“å†²åŒºçš„ä½å›¾å›¾åƒï¼Œè¯¥å›¾åƒæœ€ç»ˆæ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Šã€‚

![](../.vuepress/public/images/2020-12-19-23-48-29.png)

### GLSL è¯­è¨€

ç€è‰²å™¨æºä»£ç å¯ä»¥æ”¾åœ¨ JavaScript å­—ç¬¦ä¸²ä¸­ï¼Œä¹Ÿå¯ä»¥ä»å•ç‹¬çš„æ–‡ä»¶ä¸­åŠ è½½ã€‚

ä»¥ä¸‹æ˜¯å…¶è¯­æ³•çš„ä¸»è¦åŠŸèƒ½ï¼š

- **int** æ•´æ•°: 0, 1, 2, -10,...ã€‚
- **float** æµ®ç‚¹æ•°ï¼š 0.0, 0.1, 1.0, -10.5,...ã€‚
- **bool** å¸ƒå°”å€¼ï¼šå–å€¼ä¸º true æˆ–è€… falseã€‚
- **vec4** æ˜¯ 4 ä¸ªæµ®ç‚¹ç»„æˆçš„æ•°ç»„ï¼Œä»£è¡¨é¡¶ç‚¹åæ ‡æˆ– 3D å‘é‡ï¼ˆx, y, z, wï¼‰ æˆ–é¢œè‰² (r, g, b, alpha)ã€‚åŒç†ä¹Ÿå­˜åœ¨ vec2(x, y) å’Œ vec3(x, y, z/r, g, b) ç±»å‹ã€‚
- **mat4** æ˜¯ 4 x 4 æµ®ç‚¹æ•°çš„çŸ©é˜µï¼ˆç½‘æ ¼ï¼‰ï¼Œå¯ç”¨äºè½¬æ¢ 3D ä¸­çš„é¡¶ç‚¹åæ ‡å’Œå‘é‡ã€‚ ä¹Ÿå­˜åœ¨ç±»å‹ mat2ï¼ˆ2x2ï¼‰å’Œ mat3ï¼ˆ3x3ï¼‰
- **sampler2D** æ˜¯å¯¹çº¹ç†å›¾åƒçš„å‚è€ƒï¼› **samplerCube**æ˜¯å¯¹â€œ 3D çº¹ç†â€ï¼ˆæ˜ å°„åˆ°å¤šç»´æ•°æ®é›†çš„ 6 ä¸ªçº¹ç†çš„é›†åˆï¼‰çš„å¼•ç”¨ã€‚
- A **variable** is declared with its type, for example: int i = -1, float f = 2.0 or vec4 v = vec4(1.0, 2.0, 3.0, 4.0).
- A **constant** is a variable with a fixed value: const int c = 100;.
- å¯ä»¥æå–å‘é‡çš„ xyzw/rgba åˆ†é‡ï¼Œå¹¶åœ¨å¦ä¸€ä¸ªå‘é‡ä¸­é‡æ–°ç»„åˆï¼ˆé‡ç»„ï¼‰ï¼Œä¾‹å¦‚ï¼šfloat f = v.xï¼Œvec3 rgb = v.rgbï¼Œvec4 w = v.zxxyã€‚
- æ¯ä¸ªæŒ‡ä»¤å¿…é¡»ä»¥ `;` ç»“å°¾ã€‚
- **Math functions**: cos, sin, tan, pow, exp, log, log2, sqrt, abs, sign, floor, ceil, round, trunc, fract, mod, min, max, clamp, mix, step, length, distance, dot, cross, reflect, normalize...
- **Math operators** (=, +, -, _, /, &&, ||, ==, !=, >, >=, <, <=, ++, --, ^^, +=, -=, _=, /=) only work between variables of the same type or same length (ex: int + int, float / float, mat4 \_ vec4 ...).
- **Type casting** ï¼ˆç±»å‹è½¬æ¢ï¼‰ allows to convert a type into another, when it's possible. Ex: `bool b = true; int i = int(b); /_ i = 1 _/ float f = float(i); /_ f = 1.0 \*/`.
- **Tests and loops**ï¼ˆæµ‹è¯•å’Œå¾ªç¯ï¼‰ are also available (if, else, switch, for, while), but loops must have a constant limit. (you can't do `for(int i = 0; i < j; i++){...} if j is variable)`.
- æ¯ä¸ªç€è‰²å™¨ï¼ˆshaderï¼‰ï¼ˆç¨‹åºæ‰§è¡Œå¼€å§‹çš„åœ°æ–¹ï¼‰çš„å…¥å£ç‚¹æ˜¯ä¸€ä¸ª `void main(){...}` å‡½æ•°ã€‚
- è‡ªå®šä¹‰å‡½æ•°ä¹Ÿå¯ä»¥ç”± mainï¼ˆï¼‰æˆ–å½¼æ­¤åˆ›å»ºå’Œè°ƒç”¨ï¼Œä½†æ˜¯ä¸å…è®¸é€’å½’ã€‚
- - å¯ä»¥åœ¨æ¯ä¸ªç€è‰²å™¨ä¸­ä½¿ç”¨æŒ‡ä»¤è®¾ç½® intã€float å’Œ Samplers2Ds çš„ç²¾åº¦ï¼ˆlowp/mediump/highpï¼‰ï¼Œä¾‹å¦‚ precision highp intï¼›
- è¿™äº›æŒ‡ä»¤å¿…é¡»ä½äºç€è‰²å™¨ä»£ç çš„å¼€å¤´ï¼Œä½†æ˜¯ç‰‡æ®µç¼“å†²åŒºä¸­ä»…æµ®ç‚¹ç²¾åº¦æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰å…¶ä»–å€¼å‡å…·æœ‰å€¼ã€‚
- é¡¶ç‚¹ç€è‰²å™¨å¿…é¡»è®¾ç½®ä¸€ä¸ªåŒ…å«å½“å‰é¡¶ç‚¹åæ ‡çš„å…¨å±€å˜é‡ `gl_Position`ï¼ˆåœ¨æ¸²æŸ“å•ä¸ªç‚¹æ—¶è¿˜å¿…é¡»è®¾ç½® `gl_PointSize`ï¼‰ã€‚
- ç‰‡æ®µç€è‰²å™¨ï¼ˆfragment shaderï¼‰å¿…é¡»è®¾ç½®ä¸€ä¸ªåŒ…å«å½“å‰ç‰‡æ®µé¢œè‰²çš„å…¨å±€å˜é‡ `gl_FragColor`ã€‚
  å®ƒå¯ä»¥è®¿é—® 3 ä¸ªå…¨å±€å˜é‡ï¼š`gl_FragCoord`ï¼ˆçª—å£åæ ‡ï¼‰ï¼Œ`gl_PointCoord`ï¼ˆç‚¹å†…åæ ‡ï¼‰å’Œ `gl_FrontFacing`ï¼ˆå½“å‰ä¸‰è§’å½¢æ–¹å‘ï¼‰ã€‚

### JavaScript å’Œ WebGL é€šä¿¡

![](../.vuepress/public/images/2020-12-20-10-30-35.png)

ä¸»è¦æœ‰å››ç§æœºåˆ¶ï¼Œç”¨æ¥åœ¨ä¸åŒè„šæœ¬ï¼ˆscriptsï¼‰ä¹‹é—´å‘é€æ•°æ®ï¼š

- **Attributes** æ˜¯ JavaScript ä¼ é€’ç»™é¡¶ç‚¹ç€è‰²å™¨ï¼ˆvertex shaderï¼‰çš„å…¨å±€å˜é‡ã€‚å®ƒä»¬çš„å€¼å¯ä»¥é’ˆå¯¹æ¯ä¸ªé¡¶ç‚¹è€Œå˜åŒ–ï¼ˆä¾‹å¦‚ï¼šé¡¶ç‚¹åæ ‡ï¼‰ã€‚
- **Uniforms** æ˜¯ JavaScript ä¼ é€’ç»™é¡¶ç‚¹ç€è‰²å™¨ï¼ˆvertex shaderï¼‰å’Œç‰‡æ®µç€è‰²å™¨ï¼ˆfragment shaderï¼‰ï¼ˆä¾‹å¦‚ï¼Œä¸€ç§é¢œè‰²ï¼‰çš„å…¨å±€å˜é‡ã€‚å®ƒä»¬çš„å€¼åœ¨æ•´ä¸ªå¸§ä¸­ä¿æŒä¸å˜ã€‚
- **Varyings** ä¸èƒ½è¢« JavaScript è®¿é—®ã€‚ å®ƒä»¬åªèƒ½è¢« vertex shader å†™å…¥å’Œ è¢« fragment shader è¯»å–ã€‚
- **Data buffers** are big arrays of numbers passed by JS to the vertex shader in chunks of 1 to 4 values.
  For example, if a long list of vertex coordinates (X,Y,Z, X,Y,Z, ...) is sent to the vertex buffer 3 by 3, the shader will receive each chunk in the form of an attribute vec3.

Each attribute, uniform and varying must be declared before main() in the shaders that uses them.

### åˆšåˆšå¤Ÿçš„æ•°å­¦çŸ¥è¯†

#### å‡ ä½•åŸºç¡€

- 2D ç‚¹å…·æœ‰ä¸¤ä¸ªç©ºé—´åæ ‡ç³»ï¼ˆæ°´å¹³ Xï¼Œå‚ç›´ Yï¼‰
- 3D ç‚¹å…·æœ‰æ·±åº¦çš„ç¬¬ä¸‰ä¸ª Z åæ ‡
- åŸç‚¹æ˜¯æ‰€æœ‰åæ ‡å‡ç­‰äº 0 çš„ç‚¹

![](../.vuepress/public/images/2020-12-17-22-05-38.png)

#### ä¸‰è§’å­¦åŸºç¡€

- è§’åº¦èŒƒå›´ 0 åˆ° 360 åº¦ï¼Œç­‰æ•ˆäºï¼š0 åˆ° 2 \* PI å¼§åº¦ï¼ˆPI å¼§åº¦æ˜¯åŠåœ†ï¼‰ã€‚
- é€šè¿‡å°†è§’åº¦ä¹˜ä»¥ Ï€/ 180ï¼Œå¯ä»¥å°†åº¦æ•°è½¬æ¢ä¸ºå¼§åº¦ã€‚
- å¼§åº¦è§’å¯ä»¥é€šè¿‡å°†å…¶ä¹˜ä»¥ 180 /Ï€ æ¥è½¬æ¢ä¸ºåº¦ã€‚
- ä¸‰è§’åœ†æ˜¯åŠå¾„ä¸º 1 çš„åœ†ï¼Œä»¥ 2D å¹³é¢çš„åŸç‚¹ä¸ºä¸­å¿ƒã€‚ è¯¥åœ†çš„æ¯ä¸ªç‚¹éƒ½å¯¹åº”ä¸€ä¸ªé€†æ—¶é’ˆæµ‹é‡çš„è§’åº¦ã€‚
- æœ€å³è¾¹çš„ç‚¹ä»£è¡¨è§’åº¦ 0ï¼ˆæˆ–`2 * Pi radï¼‰ï¼Œæœ€ä¸Šé¢çš„ç‚¹ä»£è¡¨Pi / 2 radï¼Œæœ€å·¦è¾¹çš„ç‚¹ä»£è¡¨`Pi rad`ï¼Œæœ€ä¸‹é¢çš„ç‚¹ä»£è¡¨ 3 \* Pi / 2 radã€‚
- å¤§äº 2 _ Pi æˆ–å°äº 0 çš„è§’åº¦ç±»ä¼¼äºç›¸åŒçš„è§’åº¦æ¨¡ 2 _ Piï¼ˆä¾‹å¦‚ï¼š5 _ Pi rad = Pi rad; -Pi / 2 rad = 3 _ Pi / 2 radï¼‰ã€‚
- è§’åº¦â€œÎ±â€çš„ä½™å¼¦æ˜¯ä¸‰è§’åœ†ä¸Šç›¸åº”ç‚¹çš„ X åæ ‡ï¼Œå¹¶ä¸”åœ¨-1 å’Œ 1 ä¹‹é—´æŒ¯è¡ã€‚
- æ­£å¼¦æ˜¯åŒä¸€ç‚¹çš„ Y åæ ‡ï¼Œä¹Ÿåœ¨-1 å’Œ 1 ä¹‹é—´æŒ¯è¡ã€‚
- åˆ‡çº¿æ˜¯åœ¨æ­¤ç‚¹å’Œ X è½´å‚ç›´äºåŠå¾„çš„çº¿æ®µçš„é•¿åº¦ã€‚ å®ƒçš„å€¼ä»‹äº-âˆ å’Œ+âˆ ä¹‹é—´ï¼Œç­‰äº sinï¼ˆÎ±ï¼‰/ cosï¼ˆÎ±ï¼‰ã€‚

![](../.vuepress/public/images/trigo.gif)

#### å‘é‡

- å‘é‡æ˜¯æ•°å­—æ•°ç»„ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºç©ºé—´ä¸­çš„ç‚¹ï¼ˆé¡¶ç‚¹ï¼‰ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºæ–¹å‘ï¼ˆåç§»ï¼‰ã€‚
- å½“å®ƒä»£è¡¨ä¸€ä¸ªç‚¹æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªåæ ‡åˆ—è¡¨ã€‚
  - ä¾‹å¦‚ï¼Œ[2, 4] å¯ä»¥è¡¨ç¤º 2D ç‚¹çš„ X å’Œ Y åæ ‡ï¼Œ[3, 5, 2] å¯ä»¥è¡¨ç¤º 3D çš„ Xï¼ŒY å’Œ Z åæ ‡ã€‚
- å½“æ˜¯æ–¹å‘æ—¶ï¼ˆä»ç©ºé—´ä¸­çš„ä½ç½®åˆ°å¦ä¸€ä¸ªä½ç½®ï¼‰ï¼Œå®ƒè¡¨ç¤ºåœ¨æ¯ä¸ªåæ ‡ä¸­å¦‚ä½•åº”ç”¨åç§»é‡ã€‚ä½ å¯ä»¥æƒ³è±¡å®ƒåƒç®­ä¸€æ ·ã€‚
  - ä¾‹å¦‚ï¼Œ[1, 2, 3] è¡¨ç¤º X åç§»ä¸º 1 ä¸ªå•ä½ï¼ŒY åç§» 2 ä¸ªå•ä½ï¼ŒZ åç§» 3 ä¸ªå•ä½ã€‚
- ä¸é¡¶ç‚¹ç›¸åï¼Œæ–¹å‘å‘é‡æ²¡æœ‰ä½ç½®ã€‚å®ƒä»¬ä»…ä»£è¡¨ä¸€ä¸ªåç§»é‡ï¼Œå¹¶ä¸”è¯¥åç§»é‡å¯ä»¥ä»ä»»ä½•ä½ç½®å¼€å§‹ã€‚
  - ä½ å¯ä»¥åƒè¿™æ ·æ„å»ºå‘é‡ ABï¼ˆä» A ç‚¹åˆ° B ç‚¹ï¼‰ï¼šAB = [xB - xA, yB - yA, zB - zA]ã€‚

![](../.vuepress/public/images/2020-12-17-23-13-23.png)

#### æ“ä½œå‘é‡

- å°†ä¸¤ä¸ªå‘é‡ç›¸åŠ ï¼Œå°±æ˜¯å°†å®ƒä»¬çš„é¡¹ä¸€ä¸€ç›¸åŠ ï¼š`V + W = [xV + xWï¼ŒyV + yWï¼ŒzV + zW]ã€‚`
- ç¼©æ”¾å‘é‡åŒ…æ‹¬å°†æ‰€æœ‰é¡¹ä¹˜ä»¥ç»™å®šçš„é‡ï¼š`V * n = [xV * n, yV * n, zV * n]ã€‚`
- æµ‹é‡å‘é‡çš„é•¿åº¦ï¼ˆæˆ–å¤§å°ï¼‰ç±»ä¼¼äºä½¿ç”¨æ¯•è¾¾å“¥æ‹‰æ–¯æµ‹é‡ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ï¼š`|| V || = sqrtï¼ˆxVÂ²+yVÂ²+zVÂ²ï¼‰`
- å¯¹å‘é‡è¿›è¡Œå½’ä¸€åŒ–åŒ…æ‹¬å°†å…¶é•¿åº¦è°ƒæ•´ä¸º 1 ä¸ªå•ä½ï¼Œè€Œä¸æ”¹å˜å…¶æ–¹å‘ã€‚ç­‰æ•ˆäºæŒ‰ `1 / || V ||` è¿›è¡Œç¼©æ”¾ã€‚
- å¯ä»¥ä½¿ç”¨**ç‚¹ç§¯**è®¡ç®—ä¸¤ä¸ªå½’ä¸€åŒ–å‘é‡ V å’Œ W ä¹‹é—´çš„ç›¸å¯¹è§’åº¦ï¼ˆæ–¹å‘å·®ï¼‰ï¼š`V.W = xV * xW + yV * yW + zV * zWã€‚`
  - ç‚¹ç§¯ç­‰äºå‘é‡ä¹‹é—´è§’åº¦çš„ä½™å¼¦å€¼ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œåˆ™ä¸º 1ï¼›å¦‚æœå‚ç›´ï¼Œåˆ™ä¸º 0ï¼›å¦‚æœç›¸åï¼Œåˆ™ä¸º-1ã€‚

![](./../.vuepress/public/images/dot.gif)

- ä¸¤ä¸ªå‘é‡ V å’Œ W çš„å‰ç§¯æ˜¯ä¸€ä¸ªå‚ç›´äºä¸¤ä¸ªå‘é‡çš„å‘é‡ã€‚ å¯ä»¥è¿™æ ·è®¡ç®—ï¼š`VÃ—W = [yV * zW-zV * yWï¼ŒzV * xW-xV * zWï¼ŒxV * yW-yV * xW]`ã€‚

![](../.vuepress/public/images/cross.gif)

- ä¸‰è§’å½¢ ABC çš„æ³•çº¿æ˜¯å‚ç›´äºå…¶è¡¨é¢çš„å‘é‡ï¼Œæ›´å‡†ç¡®åœ°è¯´ï¼Œå‚ç›´äºä¸‰è§’å½¢å†…éƒ¨çš„ä»»ä½•å‘é‡ã€‚
  - å¦‚æœç‚¹ Aï¼ŒB å’Œ C é€†æ—¶é’ˆæ’åˆ—ï¼Œåˆ™å¯ä»¥å°†å…¶è®¡ç®—ä¸ºå‘é‡ AB å’Œ BC çš„å‰ç§¯ã€‚ ï¼ˆå¦‚æœä¸ºé¡ºæ—¶é’ˆæ–¹å‘ï¼Œæ³•çº¿å°†æŒ‡å‘ç›¸åçš„æ–¹å‘ï¼‰ã€‚
  - é¡¾åæ€ä¹‰ï¼Œä¸‰è§’å½¢çš„æ³•çº¿å¿…é¡»å½’ä¸€åŒ–ï¼Œå› ä¸ºå®ƒç»å¸¸æ¶‰åŠç‚¹ç§¯ã€‚

![](../.vuepress/public/images/2020-12-18-13-55-32.png)

> å½’ä¸€åŒ–ï¼ˆnormalizeï¼‰ï¼šï¼‘ï¼‰æŠŠæ•°æ®å˜æˆ(ï¼ï¼Œï¼‘)æˆ–è€…ï¼ˆ1,1ï¼‰ä¹‹é—´çš„å°æ•°ã€‚ä¸»è¦æ˜¯ä¸ºäº†æ•°æ®å¤„ç†æ–¹ä¾¿æå‡ºæ¥çš„ï¼ŒæŠŠæ•°æ®æ˜ å°„åˆ° 0 ï½ 1 èŒƒå›´ä¹‹å†…å¤„ç†ï¼Œæ›´åŠ ä¾¿æ·å¿«é€Ÿã€‚ï¼’ï¼‰æŠŠæœ‰é‡çº²è¡¨è¾¾å¼å˜æˆæ— é‡çº²è¡¨è¾¾å¼ï¼Œä¾¿äºä¸åŒå•ä½æˆ–é‡çº§çš„æŒ‡æ ‡èƒ½å¤Ÿè¿›è¡Œæ¯”è¾ƒå’ŒåŠ æƒã€‚å½’ä¸€åŒ–æ˜¯ä¸€ç§ç®€åŒ–è®¡ç®—çš„æ–¹å¼ï¼Œå³å°†æœ‰é‡çº²çš„è¡¨è¾¾å¼ï¼Œç»è¿‡å˜æ¢ï¼ŒåŒ–ä¸ºæ— é‡çº²çš„è¡¨è¾¾å¼ï¼Œæˆä¸ºçº¯é‡ã€‚
> ä½œè€…ï¼šbrucep3
> é“¾æ¥ï¼šhttps://www.jianshu.com/p/95a8f035c86c
> æ¥æºï¼šç®€ä¹¦
> è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

#### çŸ©é˜µ

> åœ¨ 3D å›¾å½¢å¼•æ“ä¸­ï¼Œè®¡ç®—å¯ä»¥åœ¨å¤šä¸ªä¸åŒçš„ç¬›å¡å„¿åæ ‡ç©ºé—´ä¸­æ‰§è¡Œï¼Œä»ä¸€ä¸ªåæ ‡ç©ºé—´åˆ°å¦ä¸€ä¸ªåæ ‡ç©ºé—´éœ€è¦ä½¿ç”¨å˜æ¢çŸ©é˜µã€‚

å‚è€ƒèµ„æ–™
- è§†é¢‘ï¼šè¿™ä¸ªç³»åˆ—è§†é¢‘è®²å¾—æ¯”è¾ƒå…¨äº†ï¼Œéƒ½æ˜¯åŠ¨ç”»æ¼”ç¤ºï¼Œéå¸¸ç›´è§‚ã€‚è‡ªå·±æŒ‰éœ€è§‚çœ‹å§ï¼š
  è§†é¢‘åœ°å€ï¼šã€åŒè¯­å­—å¹•ã€‘ã€Œçº¿æ€§ä»£æ•°çš„æœ¬è´¨ã€åˆé›†ã€‚å¦‚ä½•ç›´è§‚ç†è§£çŸ©é˜µå’Œçº¿æ€§ä»£æ•°ï¼Ÿ å¼ å­Ÿæ¨çš„å›ç­” - çŸ¥ä¹
  https://www.zhihu.com/question/21082351/answer/126177114
- è¾…åŠ©ç†è§£ï¼šå¦‚ä½•ç›´è§‚ç†è§£çŸ©é˜µå’Œçº¿æ€§ä»£æ•°ï¼Ÿ - JHackçš„å›ç­” - çŸ¥ä¹
https://www.zhihu.com/question/21082351/answer/734162947

çŸ©é˜µæ˜¯æ•°å­—çš„ç½‘æ ¼ï¼ˆn è¡Œ m åˆ—æ•°å­—ç»„æˆçš„æ•°ç»„ï¼‰ã€‚ å®ƒè¡¨ç¤ºä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼Œå¯ä»¥é€šè¿‡ä¹˜æ³•åº”ç”¨äºä»»ä½•å‘é‡ã€‚å°†çŸ©é˜µä¸å‘é‡ç›¸ä¹˜åœ¨äºè®¡ç®—å‘é‡ä¸çŸ©é˜µçš„æ¯ä¸€è¡Œçš„ç‚¹ç§¯ã€‚

![](../.vuepress/public/images/2020-12-18-14-04-10.png)

ä¾‹å¦‚ï¼Œåœ¨ 3D ä¸­ï¼Œä¸‹é¢çš„â€œèº«ä»½â€çŸ©é˜µå°†å‘é‡è½¬æ¢æˆè‡ªèº«ï¼ˆè¿™æ˜¯ä¸­ç«‹çš„æ“ä½œã€‚

![](../.vuepress/public/images/2021-01-21-19-07-04.png)

å¦‚æœåœ¨å¯¹è§’çº¿ä¸Šä½¿ç”¨ä¸åŒäº 1 çš„å€¼ï¼Œåˆ™å‘é‡å°†è¢«ç¼©æ”¾ï¼š

![](../.vuepress/public/images/2021-01-21-19-12-14.png)

å¦‚æœåœ¨å…¶ä»–å­—æ®µä¸­ä½¿ç”¨é€‚å½“çš„å€¼ï¼Œåˆ™å¯ä»¥æ‰§è¡Œæ—‹è½¬ï¼š

- æ²¿ X è½´ï¼ˆå¼§åº¦çš„è§’åº¦ Ï†ï¼‰

![](../.vuepress/public/images/2021-01-21-19-14-57.png)

- æ²¿ Y è½´ï¼ˆå¼§åº¦è§’ Î¸ï¼‰ï¼š

![](../.vuepress/public/images/2021-01-21-19-17-45.png)

- æ²¿ Z è½´ï¼ˆå¼§åº¦ Ïˆï¼‰ï¼š

![](../.vuepress/public/images/2021-01-21-19-18-08.png)

å¼§åº¦ï¼š2ğœ‹

![](../.vuepress/public/images/2021-01-21-19-29-19.png)

è§’åº¦ï¼šÎ¸

#### çŸ©é˜µçš„è¿ç®—

- å¯ä»¥é€šè¿‡åè½¬çŸ©é˜µçš„æ°´å¹³å’Œå‚ç›´è½´ï¼ˆå¯¹è§’çº¿ä¿æŒä¸å˜ï¼‰æ¥è½¬ç½®çŸ©é˜µ
  - ![](../.vuepress/public/images/2021-01-21-19-37-08.png)
  - å¯ä»¥å°†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå¤§å°ç›¸ç­‰çš„çŸ©é˜µç›¸ä¹˜ï¼Œä»¥åˆå¹¶ï¼ˆç´¯åŠ ï¼‰å®ƒä»¬çš„å˜æ¢ã€‚
  - ç»“æœæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œå…¶ä¸­åŒ…å«ç¬¬ä¸€çŸ©é˜µçš„æ¯ä¸€è¡Œä¸ç¬¬äºŒçŸ©é˜µçš„æ¯ä¸€åˆ—çš„ç‚¹ç§¯ã€‚
  - ç»„åˆé¡ºåºå¾ˆé‡è¦ï¼Œä»å³åˆ°å·¦ã€‚ ä¾‹å¦‚ï¼Œæ‰§è¡Œå¹³ç§» Tï¼Œç„¶åæ—‹è½¬ Rï¼Œç„¶åæ¯”ä¾‹ S çš„çŸ©é˜µç­‰äº S * R *Tã€‚

æœ€åï¼ŒçŸ©é˜µå¯ä»¥æ±‚é€†ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªå¤æ‚çš„æ–¹ç¨‹å¼ï¼Œå®ƒå–æ¶ˆäº†åŸå§‹çŸ©é˜µæ‰€åšçš„è½¬æ¢ã€‚

`A * A-1 = identity`

`A * A-1 * V = V`

é½æ¬¡åæ ‡

- åœ¨å±å¹•ä¸Šæ¸²æŸ“é¡¶ç‚¹æ—¶ï¼Œåªæœ‰ xã€y å’Œ z åæ ‡é‡è¦ï¼Œå…ˆå‰ç”¨äºè®¡ç®—å¹³ç§»å’ŒæŠ•å½±çš„ W åæ ‡ä¼šè¢«ä¸¢å¼ƒã€‚

### 2D å›¾å½¢

#### Hello, point

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Helloï¼Œpoint</title>
  </head>
  <body>
    <canvas id="canvas" width="400" height="400"></canvas>
    <script>
      // Get the WebGL rendering context
      const canvas = document.querySelector("canvas");
      const gl = canvas.getContext("webgl");

      // Vertex shader
      const vshader = `
      void main() {
        // Set vertex position: vec4(x, y, z, 1.0)
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);

        // Point size in pixels: float
        gl_PointSize = 10.0;
      }`;

      // Fragment shader
      const fshader = `
      precision mediump float;
      void main() {
        // Set fragment color: vec4(r, g, b, alpha)
        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
      }`;

      // Compile the vertex shader
      const vs = gl.createShader(gl.VERTEX_SHADER);
      gl.shaderSource(vs, vshader);
      gl.compileShader(vs);

      // Compile the fragment shader
      const fs = gl.createShader(gl.FRAGMENT_SHADER);
      gl.shaderSource(fs, fshader);
      gl.compileShader(fs);

      // Create the WebGL program and use it
      const program = gl.createProgram();
      gl.attachShader(program, vs);
      gl.attachShader(program, fs);
      gl.linkProgram(program);
      gl.useProgram(program);

      // Log compilation errors, if any
      console.log("vertex shader:", gl.getShaderInfoLog(vs) || "OK");
      console.log("fragment shader:", gl.getShaderInfoLog(fs) || "OK");
      console.log("program:", gl.getProgramInfoLog(program) || "OK");

      // Set the clear color (black)
      gl.clearColor(0.0, 0.0, 0.0, 1.0);

      // Clear the canvas
      gl.clear(gl.COLOR_BUFFER_BIT);

      // Draw points
      gl.drawArrays(gl.POINTS, 0, 1); // mode, starting pint, number of points to draw
    </script>
  </body>
</html>
```

### 3D å›¾å½¢

## è¿›é˜¶

Arcgis äºŒç»´ä¸ä¸‰ç»´åœ°å›¾çš„å®ç°ã€‚

## è§£å†³é—®é¢˜

### åœ°å›¾å¯¼å‡ºå›¾ç‰‡é—®é¢˜

#### ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ¡ˆ toDataURL

```js
$("canvas").toDataURL();
```

åŸå› 

#### æ–¹æ¡ˆä¸€

#### åˆ†æ

### å›¾å±‚ç½®ç°é—®é¢˜

ç€è‰²å™¨ï¼Ÿreview å·å¸˜å·¥å…·çš„åŸç†

## å‚è€ƒèµ„æ–™

- è‹±æ–‡å…¥é—¨æ•™ç¨‹ï¼šWebGL guide (part 1/2)
  May 2020 https://xem.github.io/articles/webgl-guide.html
- MDN å…¥é—¨æ•™ç¨‹ï¼š[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API)
- è¿›é˜¶ï¼šå°å†Œã€ŠWebGL å…¥é—¨ä¸å®è·µã€‹
- ç³»ç»Ÿï¼šã€ŠWebGL ç¼–ç¨‹æŒ‡å—ã€‹
- æ·±å…¥
  - ã€Š3D æ¸¸æˆä¸è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„æ•°å­¦æ–¹æ³•ã€‹
- mapboxGL å¦‚ä½•ç»˜åˆ¶ã€Arcgis åˆæ˜¯å¦‚ä½•å¤„ç†ï¼Œä¸ºä»€ä¹ˆä¼šå¯¼å‡ºä¸äº†å›¾ç‰‡
- [https://mp.weixin.qq.com/s/0G8rGoWNZ0XkBA9FQQPXLg](https://mp.weixin.qq.com/s/0G8rGoWNZ0XkBA9FQQPXLg)
