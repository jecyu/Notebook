<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>游戏设计、原型与开发 | Naluduo&#39;s Notebook</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/Notebook/images/logo.jpeg">
    <meta name="description" content="📝每天记录一点点">
    <link rel="preload" href="/Notebook/assets/css/0.styles.b1f38863.css" as="style"><link rel="preload" href="/Notebook/assets/js/app.accc6ad4.js" as="script"><link rel="preload" href="/Notebook/assets/js/4.2708dfb6.js" as="script"><link rel="preload" href="/Notebook/assets/js/36.4ef6c0d1.js" as="script"><link rel="prefetch" href="/Notebook/assets/js/10.868273fb.js"><link rel="prefetch" href="/Notebook/assets/js/100.1b860150.js"><link rel="prefetch" href="/Notebook/assets/js/101.93399fce.js"><link rel="prefetch" href="/Notebook/assets/js/102.6cbb290c.js"><link rel="prefetch" href="/Notebook/assets/js/103.8ff3d751.js"><link rel="prefetch" href="/Notebook/assets/js/104.0a2f7daa.js"><link rel="prefetch" href="/Notebook/assets/js/105.155f54c6.js"><link rel="prefetch" href="/Notebook/assets/js/106.4d7d0c3a.js"><link rel="prefetch" href="/Notebook/assets/js/107.8373d2e5.js"><link rel="prefetch" href="/Notebook/assets/js/108.8c95a110.js"><link rel="prefetch" href="/Notebook/assets/js/109.85bb673d.js"><link rel="prefetch" href="/Notebook/assets/js/11.fb903a5e.js"><link rel="prefetch" href="/Notebook/assets/js/110.52ad03a9.js"><link rel="prefetch" href="/Notebook/assets/js/111.956208cd.js"><link rel="prefetch" href="/Notebook/assets/js/112.2009b21f.js"><link rel="prefetch" href="/Notebook/assets/js/113.82a49283.js"><link rel="prefetch" href="/Notebook/assets/js/114.3b3a5472.js"><link rel="prefetch" href="/Notebook/assets/js/115.7ee78dd6.js"><link rel="prefetch" href="/Notebook/assets/js/116.7c8bbb6c.js"><link rel="prefetch" href="/Notebook/assets/js/117.d0907fb0.js"><link rel="prefetch" href="/Notebook/assets/js/118.3fb43a39.js"><link rel="prefetch" href="/Notebook/assets/js/119.ec92ea48.js"><link rel="prefetch" href="/Notebook/assets/js/12.29652b2c.js"><link rel="prefetch" href="/Notebook/assets/js/120.35ff1e70.js"><link rel="prefetch" href="/Notebook/assets/js/121.d8b18139.js"><link rel="prefetch" href="/Notebook/assets/js/122.648ffe96.js"><link rel="prefetch" href="/Notebook/assets/js/123.ed3b8b2f.js"><link rel="prefetch" href="/Notebook/assets/js/124.142abf67.js"><link rel="prefetch" href="/Notebook/assets/js/125.329314b8.js"><link rel="prefetch" href="/Notebook/assets/js/126.3a121da0.js"><link rel="prefetch" href="/Notebook/assets/js/127.022c6641.js"><link rel="prefetch" href="/Notebook/assets/js/128.547c2d5c.js"><link rel="prefetch" href="/Notebook/assets/js/129.ecb5273b.js"><link rel="prefetch" href="/Notebook/assets/js/13.fa32345e.js"><link rel="prefetch" href="/Notebook/assets/js/130.2a0d3a19.js"><link rel="prefetch" href="/Notebook/assets/js/131.c7a84d57.js"><link rel="prefetch" href="/Notebook/assets/js/132.07da823d.js"><link rel="prefetch" href="/Notebook/assets/js/133.f851d5af.js"><link rel="prefetch" href="/Notebook/assets/js/134.de309ceb.js"><link rel="prefetch" href="/Notebook/assets/js/135.0b83f289.js"><link rel="prefetch" href="/Notebook/assets/js/136.99ddbb8e.js"><link rel="prefetch" href="/Notebook/assets/js/137.9ce91c54.js"><link rel="prefetch" href="/Notebook/assets/js/138.d1e6c7df.js"><link rel="prefetch" href="/Notebook/assets/js/139.9e57818f.js"><link rel="prefetch" href="/Notebook/assets/js/14.e6b1fa67.js"><link rel="prefetch" href="/Notebook/assets/js/140.b97a7c8d.js"><link rel="prefetch" href="/Notebook/assets/js/141.db0d7e4b.js"><link rel="prefetch" href="/Notebook/assets/js/142.c9528ba0.js"><link rel="prefetch" href="/Notebook/assets/js/143.5cd17cfd.js"><link rel="prefetch" href="/Notebook/assets/js/144.c8a3236c.js"><link rel="prefetch" href="/Notebook/assets/js/145.ce3e815f.js"><link rel="prefetch" href="/Notebook/assets/js/146.5d5fdead.js"><link rel="prefetch" href="/Notebook/assets/js/147.7ca58039.js"><link rel="prefetch" href="/Notebook/assets/js/148.0528dfc6.js"><link rel="prefetch" href="/Notebook/assets/js/149.e219ef4f.js"><link rel="prefetch" href="/Notebook/assets/js/15.ede5e660.js"><link rel="prefetch" href="/Notebook/assets/js/150.367684ad.js"><link rel="prefetch" href="/Notebook/assets/js/151.bb7cc840.js"><link rel="prefetch" href="/Notebook/assets/js/152.50e2b443.js"><link rel="prefetch" href="/Notebook/assets/js/153.5143d68e.js"><link rel="prefetch" href="/Notebook/assets/js/154.5f75c4d5.js"><link rel="prefetch" href="/Notebook/assets/js/155.2c97d8c7.js"><link rel="prefetch" href="/Notebook/assets/js/156.04597855.js"><link rel="prefetch" href="/Notebook/assets/js/157.27a46ea1.js"><link rel="prefetch" href="/Notebook/assets/js/158.b0e54b34.js"><link rel="prefetch" href="/Notebook/assets/js/159.980a2077.js"><link rel="prefetch" href="/Notebook/assets/js/16.7cea63af.js"><link rel="prefetch" href="/Notebook/assets/js/160.dd7c4dd5.js"><link rel="prefetch" href="/Notebook/assets/js/161.076ac5ad.js"><link rel="prefetch" href="/Notebook/assets/js/162.49697d65.js"><link rel="prefetch" href="/Notebook/assets/js/163.022e5acc.js"><link rel="prefetch" href="/Notebook/assets/js/164.8ceaf7a5.js"><link rel="prefetch" href="/Notebook/assets/js/165.d613540e.js"><link rel="prefetch" href="/Notebook/assets/js/166.c0af31ff.js"><link rel="prefetch" href="/Notebook/assets/js/167.e42b9f57.js"><link rel="prefetch" href="/Notebook/assets/js/168.fa026739.js"><link rel="prefetch" href="/Notebook/assets/js/169.1f7e3137.js"><link rel="prefetch" href="/Notebook/assets/js/17.b7ca32be.js"><link rel="prefetch" href="/Notebook/assets/js/170.c4c1402a.js"><link rel="prefetch" href="/Notebook/assets/js/171.d1075313.js"><link rel="prefetch" href="/Notebook/assets/js/172.31ae23b8.js"><link rel="prefetch" href="/Notebook/assets/js/173.283df959.js"><link rel="prefetch" href="/Notebook/assets/js/174.8a34b9ed.js"><link rel="prefetch" href="/Notebook/assets/js/175.3678f179.js"><link rel="prefetch" href="/Notebook/assets/js/176.c26a8292.js"><link rel="prefetch" href="/Notebook/assets/js/177.783e1466.js"><link rel="prefetch" href="/Notebook/assets/js/178.9fa7eae4.js"><link rel="prefetch" href="/Notebook/assets/js/179.44544c8c.js"><link rel="prefetch" href="/Notebook/assets/js/18.dbdceb5d.js"><link rel="prefetch" href="/Notebook/assets/js/180.15b47c99.js"><link rel="prefetch" href="/Notebook/assets/js/181.73b4c3aa.js"><link rel="prefetch" href="/Notebook/assets/js/182.6a5b17a2.js"><link rel="prefetch" href="/Notebook/assets/js/183.28ec67b1.js"><link rel="prefetch" href="/Notebook/assets/js/184.2cccbd70.js"><link rel="prefetch" href="/Notebook/assets/js/185.de7fec26.js"><link rel="prefetch" href="/Notebook/assets/js/186.0932e1a1.js"><link rel="prefetch" href="/Notebook/assets/js/187.8c1730fc.js"><link rel="prefetch" href="/Notebook/assets/js/188.300dd277.js"><link rel="prefetch" href="/Notebook/assets/js/189.a1bee58b.js"><link rel="prefetch" href="/Notebook/assets/js/19.3d59d024.js"><link rel="prefetch" href="/Notebook/assets/js/190.7663ddc6.js"><link rel="prefetch" href="/Notebook/assets/js/191.7c824181.js"><link rel="prefetch" href="/Notebook/assets/js/192.e85118bd.js"><link rel="prefetch" href="/Notebook/assets/js/193.e954b79c.js"><link rel="prefetch" href="/Notebook/assets/js/194.f4adcdbc.js"><link rel="prefetch" href="/Notebook/assets/js/195.62735b27.js"><link rel="prefetch" href="/Notebook/assets/js/196.e0fafeec.js"><link rel="prefetch" href="/Notebook/assets/js/197.07c5e539.js"><link rel="prefetch" href="/Notebook/assets/js/198.cd686b20.js"><link rel="prefetch" href="/Notebook/assets/js/199.d51b40b4.js"><link rel="prefetch" href="/Notebook/assets/js/2.fa311fa4.js"><link rel="prefetch" href="/Notebook/assets/js/20.b4b2d322.js"><link rel="prefetch" href="/Notebook/assets/js/200.e245b2cd.js"><link rel="prefetch" href="/Notebook/assets/js/201.bd88542b.js"><link rel="prefetch" href="/Notebook/assets/js/202.6eefc25c.js"><link rel="prefetch" href="/Notebook/assets/js/203.98180f0d.js"><link rel="prefetch" href="/Notebook/assets/js/204.cb560045.js"><link rel="prefetch" href="/Notebook/assets/js/205.db965c26.js"><link rel="prefetch" href="/Notebook/assets/js/206.f692627d.js"><link rel="prefetch" href="/Notebook/assets/js/207.885fb929.js"><link rel="prefetch" href="/Notebook/assets/js/208.cb1bebca.js"><link rel="prefetch" href="/Notebook/assets/js/209.7dac81a0.js"><link rel="prefetch" href="/Notebook/assets/js/21.4c9bb6e4.js"><link rel="prefetch" href="/Notebook/assets/js/210.21121b1f.js"><link rel="prefetch" href="/Notebook/assets/js/211.cfd188b5.js"><link rel="prefetch" href="/Notebook/assets/js/212.c691e30a.js"><link rel="prefetch" href="/Notebook/assets/js/213.1a9a1f8d.js"><link rel="prefetch" href="/Notebook/assets/js/214.8c871f29.js"><link rel="prefetch" href="/Notebook/assets/js/215.7dd76ed3.js"><link rel="prefetch" href="/Notebook/assets/js/216.b9c6e46d.js"><link rel="prefetch" href="/Notebook/assets/js/217.bbb09b50.js"><link rel="prefetch" href="/Notebook/assets/js/218.3c93e6af.js"><link rel="prefetch" href="/Notebook/assets/js/219.735de793.js"><link rel="prefetch" href="/Notebook/assets/js/22.6908c05f.js"><link rel="prefetch" href="/Notebook/assets/js/220.3531b68a.js"><link rel="prefetch" href="/Notebook/assets/js/221.220d5f13.js"><link rel="prefetch" href="/Notebook/assets/js/222.9d0535e5.js"><link rel="prefetch" href="/Notebook/assets/js/223.f870f2a0.js"><link rel="prefetch" href="/Notebook/assets/js/224.0b56afa6.js"><link rel="prefetch" href="/Notebook/assets/js/225.cc5b31fd.js"><link rel="prefetch" href="/Notebook/assets/js/226.f4ee0adc.js"><link rel="prefetch" href="/Notebook/assets/js/227.eb919eea.js"><link rel="prefetch" href="/Notebook/assets/js/228.6a28f264.js"><link rel="prefetch" href="/Notebook/assets/js/229.2a8bf537.js"><link rel="prefetch" href="/Notebook/assets/js/23.afd0f5c6.js"><link rel="prefetch" href="/Notebook/assets/js/230.a2f5121e.js"><link rel="prefetch" href="/Notebook/assets/js/231.b10cb770.js"><link rel="prefetch" href="/Notebook/assets/js/232.ae7ad32a.js"><link rel="prefetch" href="/Notebook/assets/js/233.cca18966.js"><link rel="prefetch" href="/Notebook/assets/js/234.f9dd9c73.js"><link rel="prefetch" href="/Notebook/assets/js/235.c9a4bfbe.js"><link rel="prefetch" href="/Notebook/assets/js/236.61c4fb4d.js"><link rel="prefetch" href="/Notebook/assets/js/237.fed9e8fe.js"><link rel="prefetch" href="/Notebook/assets/js/238.86670bd9.js"><link rel="prefetch" href="/Notebook/assets/js/239.9ec3d9e2.js"><link rel="prefetch" href="/Notebook/assets/js/24.c1da07f8.js"><link rel="prefetch" href="/Notebook/assets/js/240.355da7ac.js"><link rel="prefetch" href="/Notebook/assets/js/241.f3420570.js"><link rel="prefetch" href="/Notebook/assets/js/242.ba7e4bd1.js"><link rel="prefetch" href="/Notebook/assets/js/243.2a52effa.js"><link rel="prefetch" href="/Notebook/assets/js/244.7f4499d8.js"><link rel="prefetch" href="/Notebook/assets/js/245.8574f4ac.js"><link rel="prefetch" href="/Notebook/assets/js/246.9b36bc23.js"><link rel="prefetch" href="/Notebook/assets/js/247.107c7608.js"><link rel="prefetch" href="/Notebook/assets/js/248.d8d1aa96.js"><link rel="prefetch" href="/Notebook/assets/js/249.00f19ac8.js"><link rel="prefetch" href="/Notebook/assets/js/25.d24012cb.js"><link rel="prefetch" href="/Notebook/assets/js/250.9b97127c.js"><link rel="prefetch" href="/Notebook/assets/js/251.7c05b25d.js"><link rel="prefetch" href="/Notebook/assets/js/252.b3ee0f29.js"><link rel="prefetch" href="/Notebook/assets/js/253.aac3e92c.js"><link rel="prefetch" href="/Notebook/assets/js/254.694f77fc.js"><link rel="prefetch" href="/Notebook/assets/js/255.7fc65b86.js"><link rel="prefetch" href="/Notebook/assets/js/256.f559aa7a.js"><link rel="prefetch" href="/Notebook/assets/js/257.3855a8f5.js"><link rel="prefetch" href="/Notebook/assets/js/258.0236288d.js"><link rel="prefetch" href="/Notebook/assets/js/259.4a65ba3f.js"><link rel="prefetch" href="/Notebook/assets/js/26.7a74bf43.js"><link rel="prefetch" href="/Notebook/assets/js/260.e110d77b.js"><link rel="prefetch" href="/Notebook/assets/js/261.6ca5e50b.js"><link rel="prefetch" href="/Notebook/assets/js/262.974a7503.js"><link rel="prefetch" href="/Notebook/assets/js/263.b93c02d1.js"><link rel="prefetch" href="/Notebook/assets/js/264.7e9188c1.js"><link rel="prefetch" href="/Notebook/assets/js/265.f68b4748.js"><link rel="prefetch" href="/Notebook/assets/js/266.04a71924.js"><link rel="prefetch" href="/Notebook/assets/js/267.256e6833.js"><link rel="prefetch" href="/Notebook/assets/js/268.18b52093.js"><link rel="prefetch" href="/Notebook/assets/js/269.ddca242f.js"><link rel="prefetch" href="/Notebook/assets/js/27.4af13b47.js"><link rel="prefetch" href="/Notebook/assets/js/270.c63a6e91.js"><link rel="prefetch" href="/Notebook/assets/js/271.9d5de52b.js"><link rel="prefetch" href="/Notebook/assets/js/272.b3d8fe27.js"><link rel="prefetch" href="/Notebook/assets/js/273.aac68402.js"><link rel="prefetch" href="/Notebook/assets/js/274.8b89191a.js"><link rel="prefetch" href="/Notebook/assets/js/275.c748ef07.js"><link rel="prefetch" href="/Notebook/assets/js/276.477c27a9.js"><link rel="prefetch" href="/Notebook/assets/js/277.1084dbc6.js"><link rel="prefetch" href="/Notebook/assets/js/278.98e8be2a.js"><link rel="prefetch" href="/Notebook/assets/js/279.61378737.js"><link rel="prefetch" href="/Notebook/assets/js/28.1f5903ad.js"><link rel="prefetch" href="/Notebook/assets/js/280.c2fda5bf.js"><link rel="prefetch" href="/Notebook/assets/js/281.4497cf31.js"><link rel="prefetch" href="/Notebook/assets/js/282.6b02e04d.js"><link rel="prefetch" href="/Notebook/assets/js/283.c579b5f7.js"><link rel="prefetch" href="/Notebook/assets/js/284.25f19977.js"><link rel="prefetch" href="/Notebook/assets/js/285.1567c42d.js"><link rel="prefetch" href="/Notebook/assets/js/286.8729eefe.js"><link rel="prefetch" href="/Notebook/assets/js/287.5109124c.js"><link rel="prefetch" href="/Notebook/assets/js/288.aff2f2a1.js"><link rel="prefetch" href="/Notebook/assets/js/289.11ee7f93.js"><link rel="prefetch" href="/Notebook/assets/js/29.9750e313.js"><link rel="prefetch" href="/Notebook/assets/js/290.a080d505.js"><link rel="prefetch" href="/Notebook/assets/js/291.8a62b81f.js"><link rel="prefetch" href="/Notebook/assets/js/292.8f2b2816.js"><link rel="prefetch" href="/Notebook/assets/js/293.a6073f5d.js"><link rel="prefetch" href="/Notebook/assets/js/294.8036aeb4.js"><link rel="prefetch" href="/Notebook/assets/js/295.4aaf6175.js"><link rel="prefetch" href="/Notebook/assets/js/296.22622ba4.js"><link rel="prefetch" href="/Notebook/assets/js/297.598bfede.js"><link rel="prefetch" href="/Notebook/assets/js/298.68edb938.js"><link rel="prefetch" href="/Notebook/assets/js/299.1f0f84fe.js"><link rel="prefetch" href="/Notebook/assets/js/3.0cb2ce57.js"><link rel="prefetch" href="/Notebook/assets/js/30.5fc87000.js"><link rel="prefetch" href="/Notebook/assets/js/300.9c7600af.js"><link rel="prefetch" href="/Notebook/assets/js/301.0d95fc30.js"><link rel="prefetch" href="/Notebook/assets/js/302.b923baab.js"><link rel="prefetch" href="/Notebook/assets/js/303.d20079b9.js"><link rel="prefetch" href="/Notebook/assets/js/304.12a70192.js"><link rel="prefetch" href="/Notebook/assets/js/305.4ea4d8da.js"><link rel="prefetch" href="/Notebook/assets/js/306.282edebe.js"><link rel="prefetch" href="/Notebook/assets/js/307.3a37e321.js"><link rel="prefetch" href="/Notebook/assets/js/308.9221f97f.js"><link rel="prefetch" href="/Notebook/assets/js/309.c7c3ca1a.js"><link rel="prefetch" href="/Notebook/assets/js/31.18d6f54f.js"><link rel="prefetch" href="/Notebook/assets/js/310.5dde0eb7.js"><link rel="prefetch" href="/Notebook/assets/js/311.819aad83.js"><link rel="prefetch" href="/Notebook/assets/js/312.c2037cae.js"><link rel="prefetch" href="/Notebook/assets/js/313.52ee9f6c.js"><link rel="prefetch" href="/Notebook/assets/js/314.d0105766.js"><link rel="prefetch" href="/Notebook/assets/js/315.02d1beff.js"><link rel="prefetch" href="/Notebook/assets/js/316.69816787.js"><link rel="prefetch" href="/Notebook/assets/js/317.22d3b673.js"><link rel="prefetch" href="/Notebook/assets/js/318.483e3b5e.js"><link rel="prefetch" href="/Notebook/assets/js/319.bc984d80.js"><link rel="prefetch" href="/Notebook/assets/js/32.4ebe70c0.js"><link rel="prefetch" href="/Notebook/assets/js/320.d023db3c.js"><link rel="prefetch" href="/Notebook/assets/js/321.909f7332.js"><link rel="prefetch" href="/Notebook/assets/js/322.3b32a676.js"><link rel="prefetch" href="/Notebook/assets/js/323.9eb049fd.js"><link rel="prefetch" href="/Notebook/assets/js/324.5eae3717.js"><link rel="prefetch" href="/Notebook/assets/js/325.c9aa7e97.js"><link rel="prefetch" href="/Notebook/assets/js/326.2ec27286.js"><link rel="prefetch" href="/Notebook/assets/js/327.1096ac53.js"><link rel="prefetch" href="/Notebook/assets/js/328.17578c44.js"><link rel="prefetch" href="/Notebook/assets/js/329.f6f1b4fc.js"><link rel="prefetch" href="/Notebook/assets/js/33.4c170b35.js"><link rel="prefetch" href="/Notebook/assets/js/330.b84e8b18.js"><link rel="prefetch" href="/Notebook/assets/js/331.2ce71bd6.js"><link rel="prefetch" href="/Notebook/assets/js/332.d49f1076.js"><link rel="prefetch" href="/Notebook/assets/js/333.18846963.js"><link rel="prefetch" href="/Notebook/assets/js/334.07d784aa.js"><link rel="prefetch" href="/Notebook/assets/js/335.b2d18495.js"><link rel="prefetch" href="/Notebook/assets/js/336.27d6fdac.js"><link rel="prefetch" href="/Notebook/assets/js/337.e3b8a4d6.js"><link rel="prefetch" href="/Notebook/assets/js/338.4e17425d.js"><link rel="prefetch" href="/Notebook/assets/js/339.ca72b051.js"><link rel="prefetch" href="/Notebook/assets/js/34.4137a6d9.js"><link rel="prefetch" href="/Notebook/assets/js/340.a9c58e42.js"><link rel="prefetch" href="/Notebook/assets/js/341.015e17e5.js"><link rel="prefetch" href="/Notebook/assets/js/342.883cb2ad.js"><link rel="prefetch" href="/Notebook/assets/js/343.26e0511c.js"><link rel="prefetch" href="/Notebook/assets/js/344.5437611f.js"><link rel="prefetch" href="/Notebook/assets/js/345.26f6e7c4.js"><link rel="prefetch" href="/Notebook/assets/js/346.f7a3f23f.js"><link rel="prefetch" href="/Notebook/assets/js/347.27ccd6a8.js"><link rel="prefetch" href="/Notebook/assets/js/348.eff0a33d.js"><link rel="prefetch" href="/Notebook/assets/js/349.dd942ff5.js"><link rel="prefetch" href="/Notebook/assets/js/35.36b834f7.js"><link rel="prefetch" href="/Notebook/assets/js/350.9128eb0c.js"><link rel="prefetch" href="/Notebook/assets/js/351.e26fffba.js"><link rel="prefetch" href="/Notebook/assets/js/352.59cc3f38.js"><link rel="prefetch" href="/Notebook/assets/js/353.3ad59a15.js"><link rel="prefetch" href="/Notebook/assets/js/354.544a13c0.js"><link rel="prefetch" href="/Notebook/assets/js/355.d5f7255f.js"><link rel="prefetch" href="/Notebook/assets/js/356.7efdf2cd.js"><link rel="prefetch" href="/Notebook/assets/js/357.0b296e32.js"><link rel="prefetch" href="/Notebook/assets/js/358.a532d695.js"><link rel="prefetch" href="/Notebook/assets/js/359.01fd142f.js"><link rel="prefetch" href="/Notebook/assets/js/360.c71cb25e.js"><link rel="prefetch" href="/Notebook/assets/js/361.db70e72e.js"><link rel="prefetch" href="/Notebook/assets/js/362.670b7527.js"><link rel="prefetch" href="/Notebook/assets/js/363.ef0b3005.js"><link rel="prefetch" href="/Notebook/assets/js/364.63c1df56.js"><link rel="prefetch" href="/Notebook/assets/js/37.b0f3cb5d.js"><link rel="prefetch" href="/Notebook/assets/js/38.2ca6e078.js"><link rel="prefetch" href="/Notebook/assets/js/39.77206fea.js"><link rel="prefetch" href="/Notebook/assets/js/40.18d76f1c.js"><link rel="prefetch" href="/Notebook/assets/js/41.ed792d7a.js"><link rel="prefetch" href="/Notebook/assets/js/42.b983e72e.js"><link rel="prefetch" href="/Notebook/assets/js/43.3cdbe61c.js"><link rel="prefetch" href="/Notebook/assets/js/44.a4c1a462.js"><link rel="prefetch" href="/Notebook/assets/js/45.727fa84a.js"><link rel="prefetch" href="/Notebook/assets/js/46.a5665d33.js"><link rel="prefetch" href="/Notebook/assets/js/47.45efede1.js"><link rel="prefetch" href="/Notebook/assets/js/48.24e8e78b.js"><link rel="prefetch" href="/Notebook/assets/js/49.c426b444.js"><link rel="prefetch" href="/Notebook/assets/js/5.89a78b31.js"><link rel="prefetch" href="/Notebook/assets/js/50.41038e45.js"><link rel="prefetch" href="/Notebook/assets/js/51.3c34459c.js"><link rel="prefetch" href="/Notebook/assets/js/52.6df1c335.js"><link rel="prefetch" href="/Notebook/assets/js/53.69e41130.js"><link rel="prefetch" href="/Notebook/assets/js/54.591891ed.js"><link rel="prefetch" href="/Notebook/assets/js/55.d8d5bf6e.js"><link rel="prefetch" href="/Notebook/assets/js/56.c43a3733.js"><link rel="prefetch" href="/Notebook/assets/js/57.2c24f33c.js"><link rel="prefetch" href="/Notebook/assets/js/58.15a5e91b.js"><link rel="prefetch" href="/Notebook/assets/js/59.20cda08a.js"><link rel="prefetch" href="/Notebook/assets/js/6.f66bffc9.js"><link rel="prefetch" href="/Notebook/assets/js/60.beb8a99d.js"><link rel="prefetch" href="/Notebook/assets/js/61.2313bfd8.js"><link rel="prefetch" href="/Notebook/assets/js/62.ae93bded.js"><link rel="prefetch" href="/Notebook/assets/js/63.c0de4f2c.js"><link rel="prefetch" href="/Notebook/assets/js/64.b42cacb6.js"><link rel="prefetch" href="/Notebook/assets/js/65.719a31bb.js"><link rel="prefetch" href="/Notebook/assets/js/66.5c0128e7.js"><link rel="prefetch" href="/Notebook/assets/js/67.6107a140.js"><link rel="prefetch" href="/Notebook/assets/js/68.ac7fc4fa.js"><link rel="prefetch" href="/Notebook/assets/js/69.122426ed.js"><link rel="prefetch" href="/Notebook/assets/js/7.fbf1f9ec.js"><link rel="prefetch" href="/Notebook/assets/js/70.66e6b252.js"><link rel="prefetch" href="/Notebook/assets/js/71.28956fa1.js"><link rel="prefetch" href="/Notebook/assets/js/72.fcf3fb10.js"><link rel="prefetch" href="/Notebook/assets/js/73.947d80fa.js"><link rel="prefetch" href="/Notebook/assets/js/74.1d9d59de.js"><link rel="prefetch" href="/Notebook/assets/js/75.bbe5b314.js"><link rel="prefetch" href="/Notebook/assets/js/76.d018671b.js"><link rel="prefetch" href="/Notebook/assets/js/77.fca59f83.js"><link rel="prefetch" href="/Notebook/assets/js/78.4a545e59.js"><link rel="prefetch" href="/Notebook/assets/js/79.a039fbdf.js"><link rel="prefetch" href="/Notebook/assets/js/8.c69b9065.js"><link rel="prefetch" href="/Notebook/assets/js/80.d203faaa.js"><link rel="prefetch" href="/Notebook/assets/js/81.d193c9f3.js"><link rel="prefetch" href="/Notebook/assets/js/82.4675ade1.js"><link rel="prefetch" href="/Notebook/assets/js/83.ee538b4f.js"><link rel="prefetch" href="/Notebook/assets/js/84.8962589d.js"><link rel="prefetch" href="/Notebook/assets/js/85.76922906.js"><link rel="prefetch" href="/Notebook/assets/js/86.ec43215f.js"><link rel="prefetch" href="/Notebook/assets/js/87.46322abb.js"><link rel="prefetch" href="/Notebook/assets/js/88.5594f40a.js"><link rel="prefetch" href="/Notebook/assets/js/89.7f421583.js"><link rel="prefetch" href="/Notebook/assets/js/9.e0bdbf17.js"><link rel="prefetch" href="/Notebook/assets/js/90.853bb5b2.js"><link rel="prefetch" href="/Notebook/assets/js/91.fa605797.js"><link rel="prefetch" href="/Notebook/assets/js/92.f770f194.js"><link rel="prefetch" href="/Notebook/assets/js/93.1f9e6fb6.js"><link rel="prefetch" href="/Notebook/assets/js/94.2260cf7f.js"><link rel="prefetch" href="/Notebook/assets/js/95.6b1244de.js"><link rel="prefetch" href="/Notebook/assets/js/96.39617d63.js"><link rel="prefetch" href="/Notebook/assets/js/97.e4b8e984.js"><link rel="prefetch" href="/Notebook/assets/js/98.85e69ce3.js"><link rel="prefetch" href="/Notebook/assets/js/99.e2930b98.js">
    <link rel="stylesheet" href="/Notebook/assets/css/0.styles.b1f38863.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notebook/" class="home-link router-link-active"><!----> <span class="site-name">Naluduo's Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/blogs/" class="nav-link">
  📖文章合集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识体系" class="dropdown-title"><span class="title">前端知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/web-framework/" class="nav-link">
  🐂web 框架
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">
  🤔复盘
</a></li><li class="dropdown-item"><h4>
          ️️🧘算法修炼
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/understand-the-computer/" class="nav-link">
  理解计算机
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">
  算法分类
</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">
  数据库
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">
  ☁️运维
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">
  🚬测试
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">
  🌍GIS
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/tools/" class="nav-link">
  ️️🖱️工具
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">
  ️️🐛网络工程
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/game-development/" class="nav-link router-link-active">
  ️️🎮游戏开发
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-language/" class="nav-link">
  🚶编程语言
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-paradigm/" class="nav-link">
  编程范式
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="/Notebook/math/" class="nav-link">
  𝜋数学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">
  🖌️UI
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://naluduo.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔗Github" class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/naluduo233" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jecyu github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/JS-Event-Loop/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 事件循环机制
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Web-Performance-Optimization/reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微谈 Web 前端性能优化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link">
  📝日常记录
</a></div><div class="nav-item"><a href="/Notebook/blogs/" class="nav-link">
  📖文章合集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识体系" class="dropdown-title"><span class="title">前端知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/web-framework/" class="nav-link">
  🐂web 框架
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">
  🤔复盘
</a></li><li class="dropdown-item"><h4>
          ️️🧘算法修炼
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/understand-the-computer/" class="nav-link">
  理解计算机
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">
  算法分类
</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">
  数据库
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">
  ☁️运维
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">
  🚬测试
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">
  🌍GIS
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/tools/" class="nav-link">
  ️️🖱️工具
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">
  ️️🐛网络工程
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/game-development/" class="nav-link router-link-active">
  ️️🎮游戏开发
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-language/" class="nav-link">
  🚶编程语言
</a></li><li class="dropdown-item"><!----> <a href="/Notebook/programming-paradigm/" class="nav-link">
  编程范式
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="/Notebook/math/" class="nav-link">
  𝜋数学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">
  🖌️UI
</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">
  🏷书签整理
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://naluduo.vip/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔗Github" class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/naluduo233" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jecyu github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/JS-Event-Loop/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 事件循环机制
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://naluduo233.github.io/Web-Performance-Optimization/reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微谈 Web 前端性能优化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>游戏开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/game-development/design-prototype-development.html" aria-current="page" class="active sidebar-link">游戏设计、原型与开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏设计和纸质原型" class="sidebar-link">游戏设计和纸质原型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#像设计师一样思考" class="sidebar-link">像设计师一样思考</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏分析框架" class="sidebar-link">游戏分析框架</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#分层四元法" class="sidebar-link">分层四元法</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#内嵌层-2" class="sidebar-link">内嵌层</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#动态层-2" class="sidebar-link">动态层</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#文化层-2" class="sidebar-link">文化层</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#像一名设计师一样工作" class="sidebar-link">像一名设计师一样工作</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#设计目标" class="sidebar-link">设计目标</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#纸面原型" class="sidebar-link">纸面原型</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏测试" class="sidebar-link">游戏测试</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#数学和游戏平衡" class="sidebar-link">数学和游戏平衡</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#谜题设计" class="sidebar-link">谜题设计</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#指引玩家" class="sidebar-link">指引玩家</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#数字游戏产业" class="sidebar-link">数字游戏产业</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#数字原型" class="sidebar-link">数字原型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#数字化系统中的思维" class="sidebar-link">数字化系统中的思维</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#unity-开发环境简介" class="sidebar-link">Unity 开发环境简介</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#c-编程语言简介" class="sidebar-link">C#编程语言简介</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#hello-world：你的首个程序" class="sidebar-link">Hello World：你的首个程序</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#变量和组件" class="sidebar-link">变量和组件</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#布尔运算符和比较运算符" class="sidebar-link">布尔运算符和比较运算符</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#循环语句" class="sidebar-link">循环语句</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#list-和数组" class="sidebar-link">List 和数组</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#函数与参数" class="sidebar-link">函数与参数</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#代码调试" class="sidebar-link">代码调试</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#类" class="sidebar-link">类</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#面向对象思维" class="sidebar-link">面向对象思维</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#敏捷思维" class="sidebar-link">敏捷思维</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型实例和教程" class="sidebar-link">游戏原型实例和教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-1：《拾苹果》" class="sidebar-link">游戏原型 1：《拾苹果》</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-2：《爆破任务》" class="sidebar-link">游戏原型 2：《爆破任务》</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-3：《太空射击》" class="sidebar-link">游戏原型 3：《太空射击》</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-4：《矿工接龙》" class="sidebar-link">游戏原型 4：《矿工接龙》</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-5：《bartok》" class="sidebar-link">游戏原型 5：《Bartok》</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-6：《word-game》" class="sidebar-link">游戏原型 6：《Word Game》</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-7：quicksnap" class="sidebar-link">游戏原型 7：QuickSnap</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#游戏原型-8：omega-mage-原型" class="sidebar-link">游戏原型 8：Omega Mage 原型</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#附录" class="sidebar-link">附录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#附录-b-实用概念" class="sidebar-link">附录 B 实用概念</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#术语" class="sidebar-link">术语</a></li><li class="sidebar-sub-header"><a href="/Notebook/game-development/design-prototype-development.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/Notebook/game-development/" aria-current="page" class="sidebar-link">游戏梦工厂</a></li><li><a href="/Notebook/game-development/unity.html" class="sidebar-link">unity 游戏引擎</a></li><li><a href="/Notebook/game-development/graphic.html" class="sidebar-link">3D 游戏与计算机图形学中的数学方法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="游戏设计、原型与开发"><a href="#游戏设计、原型与开发" class="header-anchor">#</a> 游戏设计、原型与开发</h1> <p></p><div class="table-of-contents"><ul><li><a href="#游戏设计和纸质原型">游戏设计和纸质原型</a><ul><li><a href="#像设计师一样思考">像设计师一样思考</a></li><li><a href="#游戏分析框架">游戏分析框架</a></li><li><a href="#分层四元法">分层四元法</a></li><li><a href="#内嵌层">内嵌层</a></li><li><a href="#动态层">动态层</a></li><li><a href="#文化层">文化层</a></li><li><a href="#像一名设计师一样工作">像一名设计师一样工作</a></li><li><a href="#设计目标">设计目标</a></li><li><a href="#纸面原型">纸面原型</a></li><li><a href="#游戏测试">游戏测试</a></li><li><a href="#数学和游戏平衡">数学和游戏平衡</a></li><li><a href="#谜题设计">谜题设计</a></li><li><a href="#指引玩家">指引玩家</a></li><li><a href="#数字游戏产业">数字游戏产业</a></li></ul></li><li><a href="#数字原型">数字原型</a><ul><li><a href="#数字化系统中的思维">数字化系统中的思维</a></li><li><a href="#unity-开发环境简介">Unity 开发环境简介</a></li><li><a href="#c-编程语言简介">C#编程语言简介</a></li><li><a href="#hello-world：你的首个程序">Hello World：你的首个程序</a></li><li><a href="#变量和组件">变量和组件</a></li><li><a href="#布尔运算符和比较运算符">布尔运算符和比较运算符</a></li><li><a href="#循环语句">循环语句</a></li><li><a href="#list-和数组">List 和数组</a></li><li><a href="#函数与参数">函数与参数</a></li><li><a href="#代码调试">代码调试</a></li><li><a href="#类">类</a></li><li><a href="#面向对象思维">面向对象思维</a></li><li><a href="#敏捷思维">敏捷思维</a></li></ul></li><li><a href="#游戏原型实例和教程">游戏原型实例和教程</a><ul><li><a href="#游戏原型-1：《拾苹果》">游戏原型 1：《拾苹果》</a></li><li><a href="#游戏原型-2：《爆破任务》">游戏原型 2：《爆破任务》</a></li><li><a href="#游戏原型-3：《太空射击》">游戏原型 3：《太空射击》</a></li><li><a href="#游戏原型-4：《矿工接龙》">游戏原型 4：《矿工接龙》</a></li><li><a href="#游戏原型-5：《bartok》">游戏原型 5：《Bartok》</a></li><li><a href="#游戏原型-6：《word-game》">游戏原型 6：《Word Game》</a></li><li><a href="#游戏原型-7：quicksnap">游戏原型 7：QuickSnap</a></li><li><a href="#游戏原型-8：omega-mage-原型">游戏原型 8：Omega Mage 原型</a></li></ul></li><li><a href="#附录">附录</a><ul><li><a href="#附录-b-实用概念">附录 B 实用概念</a></li></ul></li><li><a href="#术语">术语</a></li><li><a href="#参考资料">参考资料</a></li></ul></div><p></p> <h2 id="游戏设计和纸质原型"><a href="#游戏设计和纸质原型" class="header-anchor">#</a> 游戏设计和纸质原型</h2> <h3 id="像设计师一样思考"><a href="#像设计师一样思考" class="header-anchor">#</a> 像设计师一样思考</h3> <p>我是一名游戏设计师。</p> <h4 id="bartok：游戏练习"><a href="#bartok：游戏练习" class="header-anchor">#</a> Bartok：游戏练习</h4> <h5 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h5> <h5 id="入门指南"><a href="#入门指南" class="header-anchor">#</a> 入门指南</h5> <h5 id="试玩测试"><a href="#试玩测试" class="header-anchor">#</a> 试玩测试</h5> <h5 id="分析：找准问题"><a href="#分析：找准问题" class="header-anchor">#</a> 分析：找准问题</h5> <p>每次试玩后，要找到问题所在，尽管它们大多数遵从下面的基本规则，但每个游戏的问题不尽相同：</p> <ul><li>游戏的难度对于目标受众是否合适？太难，太简单，还是刚好？</li> <li>游戏的结果靠运气还是策略？随机性是否占比太多，或是玩家一旦占了上风，就会锁定胜局，其他玩家难以翻盘。</li> <li>当你的回合结束，游戏还依然有趣吗？你是否影响别人回合的行动，或他们的回合对是否有直接影响？</li></ul> <h5 id="更改规则"><a href="#更改规则" class="header-anchor">#</a> 更改规则</h5> <p>优秀游戏设计的秘密就是迭代：</p> <ol><li>决定进行游戏时你想要的感觉；</li> <li>修改规则达到这种感觉；</li> <li>玩游戏；</li> <li>分析规则是如何影响游戏的感觉的；</li> <li>回到步骤 1，重复这个过程，直到你满意为止。</li></ol> <h4 id="游戏的定义"><a href="#游戏的定义" class="header-anchor">#</a> 游戏的定义</h4> <p>设计者们设定的目标：</p> <ul><li>体验式理解</li> <li>创造有趣的选择</li> <li>鼓励玩乐的态度 你的游戏应该鼓励玩家乐于接受规则的限制。</li></ul> <p>玩游戏的动机（需求）：</p> <ul><li>人类喜欢设计好的冲突。</li> <li>人类想要成为别人。</li> <li>人类想要刺激。</li></ul> <p>游戏设计是 1%的灵感和 99%的迭代。</p> <h3 id="游戏分析框架"><a href="#游戏分析框架" class="header-anchor">#</a> 游戏分析框架</h3> <h4 id="游戏学的常用框架"><a href="#游戏学的常用框架" class="header-anchor">#</a> 游戏学的常用框架</h4> <ul><li>MDA：机制（mechanics）、动态（dynamics）和美学（aesthetics）</li> <li>形式（formal）、戏剧（dramatic）和动态元素（dynamic elements）</li> <li>四元法（Elemental tetrad）：机制、美学、剧情和技术。</li></ul> <h4 id="mda：机制，动态和美学"><a href="#mda：机制，动态和美学" class="header-anchor">#</a> MDA：机制，动态和美学</h4> <ul><li>机制：游戏的数据层面上的组件和算法。</li> <li>动态：响应玩家输入和其他输出的实时行为。</li> <li>美学：玩家与游戏系统交互时，应当唤起的情绪反应。</li></ul> <p>成年人倾向于更具挑战性的游戏，希望自己获胜是因为策略而不是纯靠运气。基于此，设计师想让游戏看起来更有目的和策略性，仅仅通过修改规则（机制的元素之一）完全可以达到这种美学的改变。</p> <h4 id="规则，戏剧和动态元素"><a href="#规则，戏剧和动态元素" class="header-anchor">#</a> 规则，戏剧和动态元素</h4> <ul><li>形式：规则让游戏与其他媒体和互动区分开来是游戏的骨架。形式包括规则、资源和界限。</li> <li>戏剧：游戏的剧情和叙事，包括设定。戏剧元素让游戏成型，帮助玩家理解规则、促使玩家与游戏产生情感共鸣。</li> <li>动态：游戏运行的状态。一旦玩家真正地进行游戏，游戏就进入了动态。动态元素包括决策、行为和游戏实体间的关系。要注意这里的动态与 MDA 中的类似，但是范围更广，因为范围超越了机制的实时运行。</li></ul> <h5 id="形式元素"><a href="#形式元素" class="header-anchor">#</a> 形式元素</h5> <ul><li>**玩家交互模式：**玩家如何交互？单人、单挑、队伍对抗、乱斗（多个玩家互相对抗）、一对多、合作甚至多人分别对抗一个系统。</li> <li>**目标：**玩家在游戏中的目标是什么？怎样获取胜利。</li> <li>**规则：**股子额限制玩家的行动，告诉他们能做些什么？</li> <li>**过程：**玩家在游戏中的行动。《蛇与梯子》中的规则是根据骰子摇出的数字移动。</li> <li>**资源：**资源是游戏中有价值的各种元素。比如金钱、血量、物品和财产。</li> <li>**边界：**游戏与现实的界限在哪里？</li> <li>**结局：**游戏如何结束？除了终点，过程也不断导向结局。</li></ul> <h5 id="戏剧元素"><a href="#戏剧元素" class="header-anchor">#</a> 戏剧元素</h5> <ul><li>**前提：**游戏世界的背景故事。在《大富翁》中，玩家首先是地产商，努力在亚特兰大和新泽西垄断房地产。</li> <li>**角色：**角色是故事中的人物。电影导演的目标是让观众关心主角，而在游戏中玩家就是主角，设计师要决定让主角作为玩家的代言人（将玩家的意图传达到游戏世界中）或是让玩家扮演一个角色（玩家遵从游戏角色的意志）。</li> <li>**戏剧：**游戏的情节。戏剧包含了整个游戏过程的叙事内容。</li></ul> <p>戏剧元素的主要目的是帮助玩家理解规则。</p> <h5 id="动态元素"><a href="#动态元素" class="header-anchor">#</a> 动态元素</h5> <ul><li>**涌现：**简单规则的碰撞可以导致难以预期的结果。</li> <li>**涌现叙事：**游戏与生俱来有能力让玩家置身于不寻常的情景中，因此产生了有趣的故事。</li> <li>**试玩是唯一理解动态的方式：**成熟的游戏设计师更擅长预测游戏的动态行为和涌现，但是没人能在试玩之前准确理解游戏动态的运行。</li></ul> <h4 id="四元法"><a href="#四元法" class="header-anchor">#</a> 四元法</h4> <ul><li><strong>机制：</strong></li> <li>**美学：**美学解释了游戏如何被五感接受：视觉、听觉、嗅觉、味觉和触觉。</li> <li>**技术：**这个元素涵盖了所有游戏使用的技术。最明显的就是主机硬件、计算机软件、渲染管线等，它还包含了桌面游戏中的技术型元素。</li> <li><strong>剧情：</strong></li></ul> <h4 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h4> <p>这些用来刘鹗 ii 游戏和互动体验的框架分别从不同视角结局的：</p> <ul><li>MDA 试图展示玩家与设计师看待游戏的不同方式和目的，设计师通过玩家的视角可以更有效地审视自己的作品。</li> <li>形式、戏剧和动态元素将游戏设计细分为特定组件分别对待和改进。本意是帮助设计细分游戏的各组成部分，并分别优化。</li> <li>四元法以<code>游戏开发者</code>视角看待游戏。<u>它将原属于不同团队的游戏基本元素分区：设计师负责机制，艺术家负责美学，编剧负责剧情，还有程序员负责技术。</u></li></ul> <h3 id="分层四元法"><a href="#分层四元法" class="header-anchor">#</a> 分层四元法</h3> <h4 id="内嵌层"><a href="#内嵌层" class="header-anchor">#</a> 内嵌层</h4> <p>内嵌层类似 Schell 的四元法。</p> <p>四元素的定义类似 Schell 的理论，但它们仅存在于游戏层面。</p> <ul><li><strong>机制</strong>：定义玩家和游戏互动的系统，包括游戏的规则和 Fullerton 书中的形式元素：玩家互动模式、目标、规则、资源和边界。</li> <li><strong>美学</strong>：美学描述了游戏的色香味和感觉，包括从游戏原声到角色建模、包装和封面。</li> <li><strong>技术</strong>：对于电子游戏来说，技术元素主要依靠程序员，但对于设计者来说理解它也很重要，因为程序员为设计师的想法实现提供了基础。</li> <li><strong>叙事</strong>：Schell 在他的四元法中使用的是“剧情”，但我选择了范围更广的叙事（narrative），涵盖了背景、角色和情节。内在叙事包括所有脚本剧情和提前生成的游戏角色。</li></ul> <h4 id="动态层"><a href="#动态层" class="header-anchor">#</a> 动态层</h4> <p><u>如你所见，玩家是静态内嵌层到动态层的关键。</u>动态层所有的元素都源自玩家进行游戏，包括玩家控制的各类元素和它们交互产生的结果。动态层是涌现的乐土，复杂的行为从简单的规则里显现出来。游戏的涌现行为常常难以预料，但是游戏设计最重要的技能之一就是预测。动态的四元素是：</p> <ul><li><strong>机制</strong>：不同于内嵌层的机制，动态层的机制包括玩家如何与内在元素互动。<u>动态机制包括过程、策略、游戏的涌现行为和结局。</u></li> <li><strong>美学</strong>：动态层的美学包括游戏过程中创造的美学元素。</li> <li><strong>技术</strong>：动态的技术指的是<u>游戏过程中技术性组件的行为</u>，包括一对骰子的点数如何从来不符合数学预测的平滑钟形曲线，以及电子游戏的所有代码。游戏中敌人的 AI（人工智能）表现就是个例子，<u>这里的技术包括游戏启动后代码产生的所有行为。</u></li> <li><strong>叙事</strong>：<u>动态叙事指的是游戏过程中产生的剧情，</u>可以是《黑色洛城》和《暴雨》（Heavy Rain）中玩家选择剧情分支，或者玩《模拟人生》时产生的家族故事，甚至是与其他玩家结伴游玩的轶事。火影手游每个角色的独特故事线。</li></ul> <h4 id="文化层"><a href="#文化层" class="header-anchor">#</a> 文化层</h4> <p><u>分层四元法最后一层是文化层，超越游戏本身。</u>文化层涵盖了游戏对文化的相互作用。游戏的玩家社群产生了文化层，在这里玩家的力量比游戏设计师更大，设计师的社会责任在这变得清晰。</p> <p><img src="/Notebook/assets/img/three-layer-of-game.a723aecc.png" alt=""></p> <p>在文化层中四元素不那么泾渭分明，但仍然值得从四元素的角度来解读。</p> <ul><li><strong>机制</strong>：文化层机制最简单的表现形式就是游戏 mod （玩家直接改变游戏机制，如《蛇与梯子》可以选择蛇也可以选择滑梯模式）。同样也包括游戏即时行为对社会的影响。</li> <li><strong>美学</strong>：与机制类似，文化层美学涵盖了<u>同人作品、游戏音乐重制，或者其他美学上的行为，如 Cosplay（角色扮演，粉丝装扮成游戏角色的样子）</u>。这里的要点是经授权的跨媒体产品（游戏题材转换成其他媒体，比如《古墓丽影》电影版，《口袋妖怪》午餐盒）不属于文化层。因为它们属于游戏知识产权的所有者，而文化层美学是游戏玩家社群创造和控制的。</li> <li><strong>技术</strong>：<u>文化层技术涵盖了游戏技术的非游戏应用（比如群集算法可以用于机器人领域）以及影响游戏体验的技术。</u>在 NES 时代（任天堂娱乐系统），拥有 Advantage 或 Max 手柄允许玩家使用连发键（自动快速连按 A 或 B 键）。某些游戏中，这会是巨大优势，影响游戏体验。<u>文化层技术还包括不断探索游戏的可能性和游戏 mod 技术层面改变游戏内在元素。</u></li> <li><strong>叙事</strong>：文化层叙事涵盖了游戏同人跨媒体产品的叙事部分（比如同人小说，游戏 mod 和玩家自制游戏视频中的叙事部分）。它还包括了社会文化中关于游戏的故事，比如对哦《侠盗猎车手》的恶评和对《风之旅人》和 ICO 的美谈。</li></ul> <h4 id="设计师的责任"><a href="#设计师的责任" class="header-anchor">#</a> 设计师的责任</h4> <p><u>游戏设计师都明白要直接为游戏的形式层负责。</u>游戏开发当然要有明确的鬼子额，有趣的美术等鼓励玩家进行游戏。</p> <p><u>到了动态层，某些设计师就搞不清楚了。有的人会惊讶于他们游戏所显现的行为，想要将这部分责任推给玩家。</u>比如说，几年前 Valve 决定在《军团要塞 2》中加入帽子。他们选择的机制是随机奖励帽子给登录游戏的玩家。由于帽子奖励只依据玩家登录的时间来判断，导致玩家挂机刷帽子，而不是去玩游戏。Valve 觉察了这种行为，并收回行为可疑玩家的帽子作为惩罚。</p> <p>看起来是玩家在作弊，但也可以视作他们选择了最有效的获取帽子的方法，符号 Valve 制定的游戏规则。<u>因为系统设计为奖励在线玩家，并没提到要进行游戏，玩家就选择了最容易的方法。</u>玩家也许欺骗了帽子掉落系统的设计意图，但不是系统本身。玩家的动态行为完全符合 Valve 设计导向。如你所见，<u>设计师同样要对系统内含的动态层体验负责。事实上，游戏设计最重要的一点就是预测和打造玩家体验。</u>当然，做起来很难，但这是游戏好玩的关键。</p> <p>那么设计师在文化层面上的责任呢？由于大部分游戏设计师不曾考虑过，所以社会上普遍认为游戏幼稚粗俗，向年轻人贩卖暴力，歧视女性。你我都知道这本可以避免，并且言过其实，但它已经深植于大众的观念中。<u>游戏可用于教育、激励和治疗。游戏能造福社会，帮助玩家学习技能。嬉戏的态度和简单的规则可以让沉闷的工作变得有趣。</u>作为设计师，你要对游戏给社会和玩家产生的影响负责。我们已经更擅长制作让人沉迷甚至废寝忘食的游戏。还有些人诱骗小孩子在游戏上花费巨资。可悲的是，这类行为损耗了游戏在社会上的形象，让人们蔑视游戏或望而却步。我相信，作为设计师，这是我们的责任，通过游戏造福社会，尊重玩家和他们花费在游戏上的时间精力。</p> <h4 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h4> <p>如本章所示，<u>分层四元法重点在于理解三个层次表现的游戏从开发者到玩家的所有权转变。</u>内嵌层的所有内容同属于设计师和开发者，并且完全在开发者的掌控中。</p> <p>动态层是游戏的体验所在，所以游戏设计师需要玩家付诸行动，做出选择体验游戏。通过玩家的决定和对游戏系统的影响，玩家拥有部分体验，但总的来说还在开发者控制之下。如此一来，玩家和开发者共享动态层。</p> <p>在文化层，游戏脱离了开发者的控制。这也是为什么游戏 mod 适用于文化层：通过游戏 mod，玩家得以控制游戏内容。</p> <p>另外，文化层也包括社会中的非玩家对游戏的看法，它会受到玩家社群代表的游戏体验影响。不玩游戏的人通过媒体了解游戏，他们阅读的内容（但愿）是玩家所写。虽然说文化层大半由玩家控制，但是开发者和设计师依然有强大的影响力，并要对游戏的社会影响负责。</p> <h3 id="内嵌层-2"><a href="#内嵌层-2" class="header-anchor">#</a> 内嵌层</h3> <h4 id="机制内嵌"><a href="#机制内嵌" class="header-anchor">#</a> 机制内嵌</h4> <p>机制内嵌不包括步骤和结果，因为它们都由玩家控制，所以属于动态层。详见下方：</p> <ul><li><strong>目标</strong>：目标包括玩家在游戏中的目标。玩家想要达成什么？</li> <li><strong>玩家关系</strong>：定义玩家之间如何战斗和协作。玩家的目标如何相互影响，互相竞争还是互相帮助？</li> <li><strong>规则</strong>：规则明确和限制了玩家的行为。为了达到目标，玩家什么能做，什么不能做。</li> <li><strong>边界</strong>：边界定义游戏的界限，与魔力圈息息相关。游戏的边界在哪里？魔力圈的范围如何？</li> <li><strong>资源</strong>：资源包括游戏边界内的财产和价值。玩家在游戏中能获取什么奖励？</li> <li><strong>空间</strong>：空间定义游戏区域和其中可能的交互行为。最明显的是桌面游戏，桌面本身就是游戏的空间。</li> <li><strong>表格</strong>：表格定义游戏的数值数据。玩家如何升级变强？既定时间内玩家可做些什么？</li></ul> <h5 id="目标-2"><a href="#目标-2" class="header-anchor">#</a> 目标</h5> <p>许多游戏目标很简单明了——为了赢，但实际上，在游戏中玩家们会不停地权衡数个目标。<u>它们可以通过轻重缓急分类，而且对不同玩家，程度不尽相同。</u></p> <ul><li>目标的紧要性
<ul><li>短期</li> <li>中期</li> <li>长期</li></ul></li> <li>目标的重要性
<ul><li>主线目标</li> <li>支线目标</li></ul></li> <li>目标冲突
<ul><li>玩家游戏时间有限</li></ul></li></ul> <h5 id="玩家关系"><a href="#玩家关系" class="header-anchor">#</a> 玩家关系</h5> <p>玩家心中常有好几个目标，它们决定了玩家与游戏的关系。</p> <ul><li><strong>单人对抗游戏</strong>：玩家的目标就是打通游戏。</li> <li><strong>多人对抗游戏</strong>：数个玩家协作，每个人有不同的目标，但是彼此合作不多。</li> <li><strong>合作游戏</strong>：数个玩家一起通关游戏，目标一致。</li> <li><strong>玩家对玩家</strong>：两个玩家的目标就是击败对方。（决斗场）</li> <li><strong>多方竞赛</strong>：类似玩家对玩家，人数更多且互相对抗。</li> <li><strong>单方竞赛</strong>：一个玩家对一队玩家。</li> <li><strong>团队对抗</strong>：两队玩家互相对抗。</li></ul> <p>玩家关系和角色由目标定义。</p> <p>除了上面列出的交互模式，还有各种它们的组合。</p> <p>任何时候，玩家间的关系由所有玩家目标的组合构成。</p> <ul><li>主角：主角就是征服游戏的角色。</li> <li>竞争者：玩家试图征服其他玩家。</li> <li>合作者：玩家帮助他人。</li> <li>市民：玩家与其他人在同一世界，但不会合作或竞争。</li></ul> <h5 id="规则"><a href="#规则" class="header-anchor">#</a> 规则</h5> <p>规则限制玩家的行动。规则同样也是设计师概念最爱直观的体现。</p> <p>与纸笔游戏不同，电子游戏规则不能直接阅读，<u>而是通过游玩解读开发者用代码编写的规则。因为规则是设计师与玩家沟通最直接的方式，规则同时定义了许多其他元素。</u></p> <p>明文写出是最直观的，但也能通过规则暗示。比如玩扑克牌，规则暗示牛不能把牌藏在袖子中。</p> <h5 id="边界"><a href="#边界" class="header-anchor">#</a> 边界</h5> <p>边界定义了进行游戏的范围。在这个范围里，游戏规则才适用。</p> <h5 id="资源"><a href="#资源" class="header-anchor">#</a> 资源</h5> <p>资源是游戏中的价值物，这些东西可以是资产或只是数值。游戏中的资产如装备，数值常包括生命值、潜水时的氧气、经验值。</p> <h5 id="空间"><a href="#空间" class="header-anchor">#</a> 空间</h5> <p>设计师经常要负责创造空间。包括设计桌面游戏的桌板和电子游戏中的虚拟关卡。</p> <ul><li><strong>空间目的</strong>：创造合适的空间。</li> <li><strong>流程</strong>：空间是适合玩家通过还是限制行动？背后有何动机？在桌面游戏 Clue 中，玩家每回合摇骰子决定移动距离，穿过版面（版面尺寸 24x25，平均每次移动 3.5 需要 7 回合穿越版面）。意识到这点后，设计师加入了隐藏的传送点直达对角设计，帮助玩家快速移动。</li> <li><strong>地标</strong>：让玩家在虚拟 3D 空间记住地形比现实中更难。鉴于此，更需要在虚拟场景中设置地标让玩家围绕它行动。放置玩家容易识别的地标来节约玩家查看地图的时间。</li> <li><strong>经验</strong>：总的来说，游戏是一种体验，但游戏的地图或空间也需要布置一些玩家可以体验的兴趣点。在《刺客信条 4:黑棋》中，游戏地图是个缩小的真实的加勒比海。尽管真实的加勒比海岛屿之间相隔数天的航程，游戏中的加勒比海散布了许多活动保证玩家每隔几分钟都有事可做，可能是一个岛上的宝箱或者穿越整个敌军舰队。</li> <li><strong>短、中、长期目标</strong>：</li></ul> <h5 id="表格"><a href="#表格" class="header-anchor">#</a> 表格</h5> <p><u>表格是游戏平衡性的关键，尤其是现代的电子游戏。</u>简单地说，表格就是一堆数字，但也能用来设计和描绘各类其他东西。</p> <ul><li><strong>概率</strong>：表格可以用来定义特殊场景下的可能性。在桌游 Tales of the Arabian Nights 中，<u>玩家遇到生物时用一张表格列出一系列遭遇后可能的反应和结果。</u></li> <li><strong>进程</strong>：在纸面 RPG 游戏如《龙与地下城》中，<u>表格展示了玩家能力和属性的成长。</u></li> <li><strong>试玩数据</strong>：除了玩家使用表格进行游戏，设计师也用表格记录试玩数据和玩家体验。</li></ul> <p>当然，表格也是游戏中的一项计数，跨越了机制和技术界限。作为一种技术，它包括存储信息和在表格中进行演算（比如表格中的公式）。作为机制，表格包括设计师印刻在设计中的决定。</p> <h4 id="美学内嵌"><a href="#美学内嵌" class="header-anchor">#</a> 美学内嵌</h4> <p>美学内嵌是开发者置于游戏中的美学元素，包括所有的五感。作为设计师，你应该意识到玩家在进行游戏时能全部体会到。</p> <h5 id="五种美学感受"><a href="#五种美学感受" class="header-anchor">#</a> 五种美学感受</h5> <p>设计制作游戏时必须考虑五种感受，这些感受如下：</p> <ul><li><strong>视觉</strong>：在五感中，视觉是游戏中最引人注目的。考虑游戏中的视觉元素时，不要局限于 3D 美术或者桌面游戏中的画板。记得玩家（或潜在玩家）看到的一切都会影响其对游戏的印象和体验。过去一些开发者花费大量精力在游戏美术上，但游戏却隐藏在丑陋的封面包装之后。</li> <li><strong>听觉</strong>：如今游戏中音效的拟真度仅次于视觉。游戏音效包括声效、音乐和对话。另外在中大型团队中，三者交由不同的艺术家处理。
<table><thead><tr><th>音效类型</th> <th>即时性</th> <th>适用场景</th></tr></thead> <tbody><tr><td>声效</td> <td>立即</td> <td>提醒玩家，传达简单信息</td></tr> <tr><td>音乐</td> <td>中</td> <td>营造氛围</td></tr> <tr><td>对话</td> <td>中/长</td> <td>传达复杂信息</td></tr></tbody></table></li></ul> <p>还有一方面要注意的是背景噪声。对手机游戏来说，玩家几乎都是在嘈杂的环境下玩。</p> <ul><li><strong>触感</strong>：数字和桌面游戏的触感完全不同，但对玩家来说这是最直观的。在桌面游戏中，触感在于游戏道具、卡牌和桌面等。电子游戏也有触感。设计师要考虑手柄的手感和玩家操作时的疲劳感。随着平板和智能手机上的优秀越来越多，触摸手势也需要设计师用心考虑。</li> <li><strong>嗅觉</strong>：味道虽然不常见，但也不是没有。比如有些书用特别的印刷工艺制作气味，桌游印刷时也可以采用。</li></ul> <h5 id="美学目标"><a href="#美学目标" class="header-anchor">#</a> 美学目标</h5> <p><strong>情绪</strong>：美学帮助游戏营造情绪氛围的效果出众。虽然可以通过机制传达情绪，但视听比机制的影响力有效得多。
<strong>信息</strong>：颜色信息内置于我们哺乳动物的心智中。警示颜色红、黄、黑色在哺乳动物界随处可见。反之，蓝色和绿色通常代表平和。另外，可以训练玩家对特定美学的理解。</p> <h4 id="叙事内嵌"><a href="#叙事内嵌" class="header-anchor">#</a> 叙事内嵌</h4> <p>与其他形式的体验一样，剧情和叙事是许多交互体验的重要一环。</p> <h5 id="叙事内嵌的组件"><a href="#叙事内嵌的组件" class="header-anchor">#</a> 叙事内嵌的组件</h5> <ul><li><strong>前提</strong>：前提是叙事的基础，故事在此产生。</li> <li><strong>设定</strong>：设定是前提的骨架上扩展开来，详细描绘故事发生的世界。</li> <li><strong>角色</strong>：故事为角色服务，最棒的故事往往有着让我们在意的角色。</li> <li><strong>情节</strong>：情节是叙事时发生的一系列事件。</li></ul> <h5 id="传统戏剧"><a href="#传统戏剧" class="header-anchor">#</a> 传统戏剧</h5> <p>尽管互动叙事提供给编剧和开发者许多新机会，但整体还是要自己遵循传统戏剧结构。</p> <h6 id="五幕结构"><a href="#五幕结构" class="header-anchor">#</a> 五幕结构</h6> <ul><li>第一幕 铺垫：介绍前情、设置和重要角色。</li> <li>第二幕 情节上行：有事发生 导致了重要角色间和戏剧的张力上升。</li> <li>第三幕 高潮：所有的事情会首一处，结局定型。</li> <li>第四幕 情节下行： 剧情朝着结尾发展。</li> <li>第五幕 结局：故事结尾。</li></ul> <h6 id="三幕结构"><a href="#三幕结构" class="header-anchor">#</a> 三幕结构</h6> <ul><li>第一幕 铺垫：向观众介绍世界、背景设定和主要角色。</li> <li>钩子：迅速勾起观众的注意。</li> <li>引发事件：事件进入主角的生活，让他启程冒险。</li> <li>第一戏剧点：第一戏剧点随着第一幕结束，推进玩家向第二个触发。</li> <li>第二幕 对抗：主角踏上征途，但一路坎坷。</li> <li>第二戏剧点：第二戏剧点结束后推进主角作出决定，进入第三幕。</li> <li>第三幕 结局：故事结束，主角成功或失败。</li> <li>高潮：所有冲突的汇集，悬念落下。</li></ul> <h5 id="互动叙事和线性叙事的区别"><a href="#互动叙事和线性叙事的区别" class="header-anchor">#</a> 互动叙事和线性叙事的区别</h5> <p>玩家参与式不断影响媒体，成为互动叙事的动因。</p> <h6 id="情节-vs-自由意识"><a href="#情节-vs-自由意识" class="header-anchor">#</a> 情节 vs 自由意识</h6> <ul><li>限制可能性：</li> <li>允许玩家选择多个线性支线任务</li> <li>多个伏笔</li> <li>做一些佩剑 NPC 支持主角</li></ul> <h6 id="感情投入：角色-vs-化身"><a href="#感情投入：角色-vs-化身" class="header-anchor">#</a> 感情投入：角色 vs 化身</h6> <ul><li>角色扮演</li> <li>沉默的主角</li> <li>玩家的选择要有意义</li></ul> <h5 id="叙事内嵌的目标"><a href="#叙事内嵌的目标" class="header-anchor">#</a> 叙事内嵌的目标</h5> <ul><li>唤起情感</li> <li>动机和理由：叙事可以操纵情绪，同样可能促使玩家采取行动。</li> <li>进程和奖励：许多游戏用过场讲故事和奖励玩家。</li> <li>加强机制</li></ul> <h4 id="技术内嵌"><a href="#技术内嵌" class="header-anchor">#</a> 技术内嵌</h4> <h3 id="动态层-2"><a href="#动态层-2" class="header-anchor">#</a> 动态层</h3> <h4 id="玩家的角色"><a href="#玩家的角色" class="header-anchor">#</a> 玩家的角色</h4> <p>只有通过玩家行动，游戏才能从一系列内嵌要素转变成了一种体验。</p> <p>因为玩家非常重要，我们作为开发者要尊重他们，确保规则清晰易懂，以便顺利传达我们的设计意图。</p> <h4 id="涌现"><a href="#涌现" class="header-anchor">#</a> 涌现</h4> <p>本章最重要的概念就是涌现，它的核心是即使简单规则也能产生复杂的动态行为。</p> <p>想要预测涌现很难，所以你试玩才显得尤其重要。作为游戏开发者，及早测试，经常测试，留意异常情况。</p> <h4 id="动态机制"><a href="#动态机制" class="header-anchor">#</a> 动态机制</h4> <p>动态层中的动态机制让互动媒体与其他媒体区别分开来，成为了游戏。动态机制包括了步骤、有意义的玩法、策略、规则、玩家意图和结果。</p> <h5 id="有意义的玩法"><a href="#有意义的玩法" class="header-anchor">#</a> 有意义的玩法</h5> <ul><li>可识别</li> <li>可协调</li></ul> <h5 id="策略"><a href="#策略" class="header-anchor">#</a> 策略</h5> <p>当游戏允许有意义的行为，玩家通常会利用策略取胜。</p> <h6 id="最优策略"><a href="#最优策略" class="header-anchor">#</a> 最优策略</h6> <p>当游戏非常简单时，玩家可能会找出游戏的最优策略。</p> <p>通常意义上的最优策略指的是帮助玩家扩大赢面的笼统概念。</p> <h6 id="策略性设计"><a href="#策略性设计" class="header-anchor">#</a> 策略性设计</h6> <p>作为设计师，有好多种方式确保游戏更倾向策略性。首先，要记住提供给玩家多种获胜选择，每个都需要做出艰难的选择。另外，如果这些目标之间互相纠缠（比如两个目标的条件一样），在游戏时会让玩家朝特定角色发展。</p> <h6 id="自订规则"><a href="#自订规则" class="header-anchor">#</a> 自订规则</h6> <p>玩家自定义规则。</p> <h5 id="玩家意图"><a href="#玩家意图" class="header-anchor">#</a> 玩家意图</h5> <ul><li>成就型（方块 ♦️）：追求游戏中的最高分。想要称霸游戏。</li> <li>搜索型（黑桃 ♠️）：致力于探索游戏每个角落。想要了解优秀。</li> <li>社交型（红心 ♥️）：想和朋友一起玩游戏。希望了解其他玩家。</li> <li>杀手型（梅花 ♣️）：喜欢挑衅其他玩家。想要主宰其他玩家。</li></ul> <p>还有两类：</p> <ul><li>作弊者：在意输赢但不在乎游戏公平。作弊者会为了取胜扭曲规则。</li> <li>扫兴者：不在乎输赢也不在意游戏。扫兴者常常会破坏其他玩家的体验。</li></ul> <h5 id="结果"><a href="#结果" class="header-anchor">#</a> 结果</h5> <ul><li>直接结果：每个独立行为都有结果。</li> <li>任务结果：许多游戏中都有任务，完成后会给予奖励。</li> <li>积累结果：当玩家花费时间朝一个目标努力最终达成，这就叫积累结果。</li> <li>最终结果：大多数游戏结束是会有个结果。</li></ul> <h4 id="动态美学"><a href="#动态美学" class="header-anchor">#</a> 动态美学</h4> <ul><li>过程美学：美学是利用电子游戏中的代码生成（或者桌面游戏中利用机制生成）。这包括了游戏过程直接由代码生成的音乐和美术。</li> <li>环境美学：这是游戏进行中的环境，不太受到开发者控制。</li></ul> <h5 id="过程音乐"><a href="#过程音乐" class="header-anchor">#</a> 过程音乐</h5> <h5 id="过程美术"><a href="#过程美术" class="header-anchor">#</a> 过程美术</h5> <ul><li>粒子系统</li> <li>过程动画</li> <li>过程环境</li></ul> <h5 id="环境美学"><a href="#环境美学" class="header-anchor">#</a> 环境美学</h5> <h6 id="游戏环境视觉"><a href="#游戏环境视觉" class="header-anchor">#</a> 游戏环境视觉</h6> <ul><li>环境亮度</li> <li>玩家屏幕分辨率</li></ul> <h6 id="游戏声音环境"><a href="#游戏声音环境" class="header-anchor">#</a> 游戏声音环境</h6> <ul><li>环境噪音</li> <li>玩家控制音量</li></ul> <h6 id="体贴玩家"><a href="#体贴玩家" class="header-anchor">#</a> 体贴玩家</h6> <ul><li>色盲</li> <li>癫痫和偏头痛</li></ul> <h4 id="动态叙事"><a href="#动态叙事" class="header-anchor">#</a> 动态叙事</h4> <p>互动小说、通过共同体验构建关系</p> <h4 id="涌现叙事"><a href="#涌现叙事" class="header-anchor">#</a> 涌现叙事</h4> <h4 id="动态技术"><a href="#动态技术" class="header-anchor">#</a> 动态技术</h4> <h4 id="小结-3"><a href="#小结-3" class="header-anchor">#</a> 小结</h4> <h3 id="文化层-2"><a href="#文化层-2" class="header-anchor">#</a> 文化层</h3> <h4 id="文化机制"><a href="#文化机制" class="header-anchor">#</a> 文化机制</h4> <ul><li>游戏 mod：玩家改动游戏机制，制作成 mod。</li> <li>定制关卡</li></ul> <h4 id="美学文化"><a href="#美学文化" class="header-anchor">#</a> 美学文化</h4> <ul><li>同人图</li> <li>Cosplay</li> <li>游戏性的艺术</li></ul> <h4 id="叙事文化"><a href="#叙事文化" class="header-anchor">#</a> 叙事文化</h4> <ul><li>同人小说</li> <li>剧情 mod</li></ul> <h4 id="技术文化"><a href="#技术文化" class="header-anchor">#</a> 技术文化</h4> <ul><li>游戏外的游戏技术</li> <li>玩家制作的外部工具</li></ul> <h4 id="授权的跨媒体不属于文化层"><a href="#授权的跨媒体不属于文化层" class="header-anchor">#</a> 授权的跨媒体不属于文化层</h4> <h4 id="游戏的文化影响"><a href="#游戏的文化影响" class="header-anchor">#</a> 游戏的文化影响</h4> <h3 id="像一名设计师一样工作"><a href="#像一名设计师一样工作" class="header-anchor">#</a> 像一名设计师一样工作</h3> <h4 id="迭代设计"><a href="#迭代设计" class="header-anchor">#</a> 迭代设计</h4> <ul><li><strong>分析</strong>：分析阶段主要是弄清楚自己所处的位置和自己想要达成的目标。</li> <li><strong>设计</strong>：现在你已经清楚自己的位置以及期望的目标，用你现有的资源创造一个设计，这个设计要能够解决你的难题或是提供可利用的机会。通过头脑风暴的方式开始设计，最后决定一个切实可行的计划。</li> <li><strong>实现</strong>：你已经有设计方案了，现在开始贯彻实行它。有一句古谚语是这样说的：“直到有人开始玩它，它才是一个游戏。”该阶段的任务是把游戏设计的想法尽可能快地转换成可玩的原型。</li> <li><strong>测试</strong>：请一些人来玩你的作品，并观察他们的反应。随着你在设计上的经验不断积累，你就会更加清晰自己设计的游戏机制会带来什么样的玩家反应。</li></ul> <h5 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h5> <ol><li>我的游戏面向哪些玩家？</li></ol> <p>玩家想要什么内容和玩家喜欢什么内容和玩家喜欢什么内容是完全不同的。</p> <ol start="2"><li>我有什么资源？</li></ol> <p>正面看待自己现有的资源、优势和劣势，这样能帮助你更好地策划游戏。作为一名独立游戏开发者，你最主要的资源就是才能和时间。</p> <ol start="3"><li>现有技术有什么？</li></ol> <p>你必须要彻底搜索一遍同类型下有什么其他作品，这样你才能知道别人在处理同样一个问题的时候是如何应对的。即便有人和你有同样的创意，但是他肯定是用不同的方式实现的，从他们的成功和失败之处学习，你能够在自己的作品上设计得更出色。</p> <ol start="4"><li>我想快点做出一个能投入测试的可玩性高的游戏，有没有什么捷径？</li></ol> <p>想想你的作品里的核心机制是什么（比如在《超级玛丽》中，核心机制就是跳跃），再来设计和测试。这样你就知道值不值得接下来继续开发了。美工、音乐以及其他外观要素对于游戏开发的最后阶段尤为重要，但是在现在这个时间点上，你关注的重点还是应该在游戏的机制和游戏性上。先把这些弄明白，这是你作为一名游戏设计师的核心目标。</p> <h5 id="设计"><a href="#设计" class="header-anchor">#</a> 设计</h5> <ul><li><strong>倾听玩家的声音</strong>：你想要哪类玩家来玩你的游戏？你想要哪类玩家群体买你的作品？</li> <li><strong>倾听团队的声音</strong>：多数游戏项目里，你都要和其他才华横溢的团队成员一起工作。你作为设计师的职责就是搜集所有团队成员的想法，并合作挖掘出对于所瞄准的目标玩家最好的游戏创意。</li> <li><strong>倾听客户的声音</strong>：作为一名职业游戏设计师，在很长的一段时间里，你都在为客户工作（老板、委员会等），你也需要他们的投资。你的工作就是在各个阶段听取它们的想法：他们告诉你他们想要的是什么；他们心里想要的是什么但没有说出来的；甚至是他们自己都没承认但却是内心深处真正想要东西。</li> <li><strong>倾听作品的声音</strong>：作为一名设计师，你是最接近作品的游戏设计的，你也可以从整体的角度俯瞰作品的全貌。即使游戏的某个方面的设计非常巧妙，它也有可能和剩下的部分不融洽和谐。</li> <li><strong>倾听自己的声音</strong>：
<ul><li>听从你的直觉：在策划设计时如果你有了什么灵光一现，不如尝试一下。说不定是你的直觉比理性先一步找到了答案。</li> <li>注意你的健康：不要试图通过疯狂工作连夜的方式来解决任何问题。</li></ul></li> <li><strong>自己的声音别人听是什么样的</strong>：我听起来有礼貌吗？我听起来真的关系对方吗？我是不是应该听起来更在乎这个项目？成功人士总是表现得恭敬和关爱他人。</li></ul> <h5 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h5> <p>在迭代设计过程中为了有效实现自己的想法，测试游戏是最有用的方法。假如你要给《超级玛丽》《洛克人》这样的平台游戏做测试，你就需要做个数字化原型。然而，如果你是给图形用户界面（GUI）菜单系统做测试的话，你不用特地构建一个完整的数字版本，只需要打印出来菜单的不同页面，然后在你的电脑上操作画面的同时，给测试人员浏览这些页面就可以了。</p> <h5 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h5> <p>如你所见，纸上原型是项目早期阶段进行测试的一个便捷途径。提高设计水平的最好办法就是，尽可能多让别人来测试你的作品并获得他们的反馈。另外，测试人员在告诉你反馈内容时你最好能记录下来。</p> <table><thead><tr><th>地点</th> <th>反馈</th> <th>潜在问题</th> <th>严重程度</th> <th>提出的方法</th></tr></thead> <tbody><tr><td>Boss1</td> <td>“第一个 Boos 打完了我不知道应该去干什么。“我现在应该往哪走？”“好了，现在该干什么”</td> <td>玩家在打完第一个 Boss 后不知道下一步该做什么。在这之前玩的过程中指向性还是很强，但是现在玩家不知道应该去做什么</td> <td>高</td> <td>设计成在第一个 Boss 被击败后，让导师角色返回，给玩家第二个任务</td></tr></tbody></table> <p>最重要的是你要尽快完成修改，进行下一次测试，这样才会知道你的解决方法有没有凑效。</p> <h4 id="创新"><a href="#创新" class="header-anchor">#</a> 创新</h4> <p>世界上一共有两种创新：渐进型创新和交汇点创新。</p> <ul><li>渐进型创新
<ul><li>在可预知的情况下进行改善。</li> <li>可以预料，值得信赖。如果你在找人投资自己的项目的话，这样的创新很容易说服投资人投入资金。</li> <li>这种类型的创新永远不会瞬间出现飞跃性的成果。</li></ul></li> <li>交汇点创新
<ul><li>这种创新出现在两种截然不同的观念碰撞的时候，这同时也是很多伟大理念出现的时刻。</li> <li>然而，正是因为交汇点创新的成果过于新颖且难以预料，要让别人认同这种成果是非常困难的。</li></ul></li></ul> <p>头脑风暴同时利用了两种创新模式，可以让你创造出更棒的作品。</p> <h4 id="头脑风暴与构思"><a href="#头脑风暴与构思" class="header-anchor">#</a> 头脑风暴与构思</h4> <h5 id="步骤-1：拓展阶段"><a href="#步骤-1：拓展阶段" class="header-anchor">#</a> 步骤 1：拓展阶段</h5> <p>在这个阶段，不要担心自己写的内容，不要删掉任何内容，想到什么就写什么。</p> <h5 id="步骤-2：收集阶段"><a href="#步骤-2：收集阶段" class="header-anchor">#</a> 步骤 2：收集阶段</h5> <p>收集之前所有集思广益得来的想法，将它们每个依次写到卡片上。这些就叫作思想卡片。</p> <h5 id="步骤-3：碰撞阶段"><a href="#步骤-3：碰撞阶段" class="header-anchor">#</a> 步骤 3：碰撞阶段</h5> <p>把所有的思想卡片整理好，给每名团队成员发两张。每个人把自己的两张卡片放到白板上给所有人展示，然后大家根据这两站卡片的内容一起想出三个不同的游戏点子。（如果两张卡的想法都过于相似或是完全不能融合到一起的话，可以跳过这两张卡片）。</p> <h5 id="步骤-4-评分阶段"><a href="#步骤-4-评分阶段" class="header-anchor">#</a> 步骤 4: 评分阶段</h5> <p>所有人写完了以后，在最受欢迎的前三个想法旁边打对号。最后你就会发现，有的点子上的对号很多，有些则很少。</p> <h4 id="改变你的想法"><a href="#改变你的想法" class="header-anchor">#</a> 改变你的想法</h4> <p>重复设计过程中重要的一环就是改变自身的想法。随着你在作品里完成了各种各样不同的重复设计后，你就会不可避免地对自己的设计作出相应的改变。</p> <h5 id="随着开发的进行，你会越来越投入"><a href="#随着开发的进行，你会越来越投入" class="header-anchor">#</a> 随着开发的进行，你会越来越投入</h5> <p>上面描述的方法对于小型企划或是项目的产前阶段都很适用。但是如果项目的参与人数众多，成员又投入了大量的时间和精力的话，改变想法则是一件既困难又昂贵的事情。一个标准的专业游戏开发分为几个不同阶段：</p> <ul><li><strong>制作前（Preproduction）</strong>：在制作前的阶段，你要试验各种不同的原型，并找出最有趣且最吸引人的那一个。这样一个 demo 要给主管领导过目，由他来决定是否可以继续制作。</li> <li><strong>制作（Production）</strong>：在游戏行业里，作品进入制作阶段后，团队成员的规模将会显著增大。该阶段主要以 demo 为核心做出相应的高完成度内容。</li> <li><strong>内部测试（Alpha）</strong>：进入这个阶段时，所有的功能设计和游戏机制都已经 100% 确定了。在这个阶段，我们不能再对系统的设计作出更改，只能针对测试中出现的问题做出相应的更改。</li> <li><strong>Beta 测试</strong>：进入这个阶段时，作品已经基本完成了。在本阶段，你应该修复所有可能会崩溃游戏的 Bug，即便有的 Bug 仍然没被发现，这些 Bug 也只能是一些轻微的错误。Beta 阶段的主要目的是找到并修复余下的 Bug。</li> <li><strong>“黄金”阶段（Gold）</strong>：当你的项目进入“黄金”阶段，就离发售不远了。</li> <li><strong>发售后（Post-release）</strong>：发售后的这个时间段可以用来开发 DLC。因为 DLC 通常包含多个新任务和新关卡，所以每个 DLC 的开发要经历的过程和大型游戏开发是一样的（虽然规格相对较小）：制作前、制作、内部测试、Beta 测试以及”黄金阶段。</li></ul> <h4 id="规划作品的范围大小"><a href="#规划作品的范围大小" class="header-anchor">#</a> 规划作品的范围大小</h4> <p>作为一名游戏设计师，你要明白的一个重要概念是如何规划游戏内容的范围。根据你现有的时间和资源来合理压缩设计内容的过程就是规划范围，而过多的设计内容则是游戏项目的第一杀手。</p> <p>你所见到的和玩到的游戏都是由几十个人在几个月的时间里全职工作完成的。</p> <p>为了你自己，不要尝试做那些你能想到的知名游戏，像是《泰坦陨落》《魔兽世界》或是什么其他大作。<u>相反，你应该找到一个相对较小、非常棒的核心机制，在一个小尺寸范围里深度挖掘它。</u></p> <p>在你的事业蒸蒸日上的时候，你可能就有机会去做一些像《星际争霸》《侠盗猎车》的大型游戏，但是要记住，所有人都是从一个小作品开始。</p> <p>所以现在，你要将作品的设计范围规划得小一些。设法想出一些能在短时间内完整制作的点子，然后完成它。只要你能做得出色，之后你想要再添加什么内容都可以。</p> <h4 id="小结-4"><a href="#小结-4" class="header-anchor">#</a> 小结</h4> <p>重复迭代设计、快速制作原型及合理地规划内容范围是改善游戏设计的重点。</p> <h3 id="设计目标"><a href="#设计目标" class="header-anchor">#</a> 设计目标</h3> <h4 id="设计目标：一个不完整的清单"><a href="#设计目标：一个不完整的清单" class="header-anchor">#</a> 设计目标：一个不完整的清单</h4> <h5 id="以设计师为中心的目标"><a href="#以设计师为中心的目标" class="header-anchor">#</a> 以设计师为中心的目标</h5> <ul><li>财富</li> <li>名气</li> <li>团体</li> <li>个人表达</li> <li>更高的善</li> <li>成为一名出色的游戏策划</li></ul> <h5 id="以玩家为中心的目标"><a href="#以玩家为中心的目标" class="header-anchor">#</a> 以玩家为中心的目标</h5> <ul><li>趣味：你想要玩家喜欢玩你的作品。</li> <li>游戏性态度：你想要玩家投入游戏的幻想世界中来。</li> <li>心流：提供给玩家最优的挑战。</li> <li>结构化的冲突：你想提供呢一个玩家间竞争对抗的途径，这种途径对游戏系统也是极大的挑战。</li> <li>力量感：你想让玩家在游戏里感觉强大</li> <li>兴趣/关注/投入：你想要作品吸引玩家。</li> <li>有意义的决定：你想要玩家做出的选择对他们自身和游戏都有意义。</li> <li>体验式理解：你想要玩家通过玩游戏学到东西</li></ul> <h4 id="以设计师为中心的目标-2"><a href="#以设计师为中心的目标-2" class="header-anchor">#</a> 以设计师为中心的目标</h4> <h4 id="以玩家为中心的目标-2"><a href="#以玩家为中心的目标-2" class="header-anchor">#</a> 以玩家为中心的目标</h4> <p>只要作品能吸引住玩家，玩家是愿意玩趣味性低的游戏的。</p> <h5 id="趣味性"><a href="#趣味性" class="header-anchor">#</a> 趣味性</h5> <p>提供游戏趣味性的三个方面：</p> <ul><li>乐趣性</li> <li>吸引力</li> <li>满足感</li></ul> <h5 id="游戏性态度"><a href="#游戏性态度" class="header-anchor">#</a> 游戏性态度</h5> <p>指玩家愿意全身心投入到游戏中的态度。</p> <p>在社交游戏里，体力是一种资源，无论玩家是否登录，体力都在缓慢地恢复增长。</p> <h5 id="魔法圈理论"><a href="#魔法圈理论" class="header-anchor">#</a> 魔法圈理论</h5> <h5 id="心流"><a href="#心流" class="header-anchor">#</a> 心流</h5> <h5 id="冲突对抗"><a href="#冲突对抗" class="header-anchor">#</a> 冲突对抗</h5> <p>单纯的玩乐和游戏之间最本质的区别就是游戏总是包含对抗或竞争，这种竞争可能是玩家之间的竞争，也可以是玩家和游戏系统之间的对抗。</p> <h5 id="力量感"><a href="#力量感" class="header-anchor">#</a> 力量感</h5> <ul><li>内在动力</li> <li>表演</li></ul> <h4 id="小结-5"><a href="#小结-5" class="header-anchor">#</a> 小结</h4> <h3 id="纸面原型"><a href="#纸面原型" class="header-anchor">#</a> 纸面原型</h3> <p>纸面原型是游戏设计师迅速测试优秀和改变想法的重要工具之一，这个工具简便易用。虽然你的想法和概念最终都要数字化，但是它能告诉你作品还缺少了什么内容。</p> <h4 id="纸面原型的优势"><a href="#纸面原型的优势" class="header-anchor">#</a> 纸面原型的优势</h4> <h4 id="纸面原型工具"><a href="#纸面原型工具" class="header-anchor">#</a> 纸面原型工具</h4> <h4 id="一个纸面原型的例子"><a href="#一个纸面原型的例子" class="header-anchor">#</a> 一个纸面原型的例子</h4> <h4 id="纸面原型的优点"><a href="#纸面原型的优点" class="header-anchor">#</a> 纸面原型的优点</h4> <h4 id="纸面原型的缺点"><a href="#纸面原型的缺点" class="header-anchor">#</a> 纸面原型的缺点</h4> <h4 id="小结-6"><a href="#小结-6" class="header-anchor">#</a> 小结</h4> <h3 id="游戏测试"><a href="#游戏测试" class="header-anchor">#</a> 游戏测试</h3> <h3 id="数学和游戏平衡"><a href="#数学和游戏平衡" class="header-anchor">#</a> 数学和游戏平衡</h3> <h4 id="概率"><a href="#概率" class="header-anchor">#</a> 概率</h4> <p>骰子越多，得到的数值越接近平均值。</p> <h4 id="桌游中的乱数产生技术"><a href="#桌游中的乱数产生技术" class="header-anchor">#</a> 桌游中的乱数产生技术</h4> <h4 id="加权分布"><a href="#加权分布" class="header-anchor">#</a> 加权分布</h4> <p>加权分布指的是一些可能性更容易发生。设计想要一半玩家的攻击带有随机加成。</p> <h5 id="calc-中的概率加权"><a href="#calc-中的概率加权" class="header-anchor">#</a> Calc 中的概率加权</h5> <p>概率加权在电子游戏中随处可见。比如你想让敌人遇到玩家时，40%的概率攻击、40%的概率防御，20%的概率逃跑。你可以常见一个数组[攻击，攻击，防御，防御，逃跑]，并且让敌人的 AI 第一次遭遇玩家是取一个随机数。</p> <h4 id="排列"><a href="#排列" class="header-anchor">#</a> 排列</h4> <h4 id="正负反馈"><a href="#正负反馈" class="header-anchor">#</a> 正负反馈</h4> <p>理解游戏平衡最重要的一点就是搞清楚正反馈和负反馈。在一个拥有正反馈机制的游戏中，一名在游戏初期就取得了有利条件的玩家，将更容易取得优势并最终赢得游戏。在一个拥有负反馈机制的游戏中，一名正处于下风的玩家将被赋予更多的优势。负反馈机制让游戏中落后的玩家感到更加“公平”，而且总体上讲，这种机制还能让对抗的过程变得更长，而且让哪怕是落后了很多的玩家也感激自己还能翻盘的机会。</p> <h4 id="使用-calc-调整武器平衡"><a href="#使用-calc-调整武器平衡" class="header-anchor">#</a> 使用 Calc 调整武器平衡</h4> <p>电子表格在游戏设计中的另一大用处就是平衡不同武器或能力的属性。</p> <ul><li>射速。</li> <li>每发伤害量。</li> <li>一定距离内的命中率。</li></ul> <h5 id="计算单发命中率"><a href="#计算单发命中率" class="header-anchor">#</a> 计算单发命中率</h5> <h5 id="计算平均伤害值"><a href="#计算平均伤害值" class="header-anchor">#</a> 计算平均伤害值</h5> <h5 id="绘制平均伤害值的图表"><a href="#绘制平均伤害值的图表" class="header-anchor">#</a> 绘制平均伤害值的图表</h5> <h4 id="小结-7"><a href="#小结-7" class="header-anchor">#</a> 小结</h4> <h4 id="游戏平衡的意义"><a href="#游戏平衡的意义" class="header-anchor">#</a> 游戏平衡的意义</h4> <h4 id="按照-apache-openoffice-calc"><a href="#按照-apache-openoffice-calc" class="header-anchor">#</a> 按照 Apache OpenOffice Calc</h4> <h4 id="用-calc-检查骰子"><a href="#用-calc-检查骰子" class="header-anchor">#</a> 用 Calc 检查骰子</h4> <h4 id="概率-2"><a href="#概率-2" class="header-anchor">#</a> 概率</h4> <h4 id="桌游中的乱数产生技术-2"><a href="#桌游中的乱数产生技术-2" class="header-anchor">#</a> 桌游中的乱数产生技术</h4> <h4 id="加权分布-2"><a href="#加权分布-2" class="header-anchor">#</a> 加权分布</h4> <h4 id="排列-2"><a href="#排列-2" class="header-anchor">#</a> 排列</h4> <h4 id="正负反馈-2"><a href="#正负反馈-2" class="header-anchor">#</a> 正负反馈</h4> <h4 id="使用-calc-调整武器平衡-2"><a href="#使用-calc-调整武器平衡-2" class="header-anchor">#</a> 使用 Calc 调整武器平衡</h4> <h4 id="小结-8"><a href="#小结-8" class="header-anchor">#</a> 小结</h4> <h3 id="谜题设计"><a href="#谜题设计" class="header-anchor">#</a> 谜题设计</h3> <h4 id="谜题无处不在"><a href="#谜题无处不在" class="header-anchor">#</a> 谜题无处不在</h4> <h4 id="scott-kim-与谜题设计"><a href="#scott-kim-与谜题设计" class="header-anchor">#</a> Scott Kim 与谜题设计</h4> <h5 id="什么是谜题"><a href="#什么是谜题" class="header-anchor">#</a> 什么是谜题</h5> <p>妙趣横生的谜题都有一个正确的答案。</p> <p>谜题让人开心</p> <ul><li>新奇</li> <li>合适的难度</li> <li>棘手</li></ul> <h5 id="谜题的种类"><a href="#谜题的种类" class="header-anchor">#</a> 谜题的种类</h5> <ul><li>动作</li> <li>故事</li> <li>建造
<ul><li>（建造类解谜游戏融合了建造、工程以及空间推理谜题几个要素）</li></ul></li> <li>策略
<ul><li>策略类游戏一般都是将多人的游戏转变成单人的版本。（象棋）</li></ul></li></ul> <h5 id="玩解谜游戏的四大理由"><a href="#玩解谜游戏的四大理由" class="header-anchor">#</a> 玩解谜游戏的四大理由</h5> <ul><li>挑战</li> <li>打发时间</li> <li>角色和氛围</li> <li>心灵之旅</li></ul> <h5 id="解谜需要的思考模式"><a href="#解谜需要的思考模式" class="header-anchor">#</a> 解谜需要的思考模式</h5> <ul><li>填字</li> <li>画面
<ul><li>包括拼图、寻物解谜、2D/3D 空间解谜。</li></ul></li> <li>逻辑
<ul><li>许多游戏都是基于演绎推论：排除掉所有错误的可能性，只留下正确的一个。</li> <li>用归纳推理的游戏要比想象中的少：从明确的一个事实推论整体的可能性。</li></ul></li> <li>文字/画面</li> <li>图像/逻辑</li> <li>逻辑/文字</li></ul> <h5 id="数字谜题设计的八个步骤"><a href="#数字谜题设计的八个步骤" class="header-anchor">#</a> 数字谜题设计的八个步骤</h5> <ol><li>灵感（生活中的灵感源头）</li> <li>简单化：需要把原本的想法简单化才能变成可玩的谜题游戏。
<ol><li>找出谜题的核心机制，玩家需要的解题技巧。</li> <li>去除不相关的内容，聚焦重点内容。</li> <li>一体化。</li> <li>简化操作。</li></ol></li> <li>建造组件：制作一个可以简单快速制作谜题的工具。</li> <li>规则</li> <li>谜题</li> <li>测试</li> <li>排序</li> <li>外观</li></ol> <h5 id="谜题设计的七个目标"><a href="#谜题设计的七个目标" class="header-anchor">#</a> 谜题设计的七个目标</h5> <ul><li>用户友好</li> <li>入门简单</li> <li>即时反馈</li> <li>永动：游戏机制要刺激玩家机修游玩，并且在游戏过程中，不应该有明显的停止点。（Play Again 》 Game Over）</li> <li>清晰的目标：你要玩家清晰地知道谜题的主要目的。</li> <li>难度级别</li> <li>一些特别的内容</li></ul> <h4 id="动作解谜游戏的几种类型"><a href="#动作解谜游戏的几种类型" class="header-anchor">#</a> 动作解谜游戏的几种类型</h4> <ul><li>滑块/位置解谜
<ul><li>这种游戏通常都是第三人次动作游戏，要求玩家移动地面上的方块或箱子一类的东秀。</li></ul></li> <li>物理解谜
<ul><li>这个类型的游戏涉及物理环境模拟。玩家需要移动物品来击中目标。</li></ul></li> <li>横越解谜
<ul><li>这种类型的谜题的任务是让玩家到达一个目标地点，但是中间的过程很复杂。《刺客信条》</li></ul></li> <li>潜行谜题
<ul><li>这种类型的游戏中，要求玩家在不被敌人发现的前提下达到目标点，敌人巡逻的路径都是事先安排好的。</li></ul></li> <li>连锁反应
<ul><li>这种游戏里都有物理模拟系统，各种物品之间可以相互影响，可以制造爆炸等。</li></ul></li> <li>Boss 战
<ul><li>多数游戏的 Boss 战，玩家都要找到 Boss 攻击的模式和节奏才能打败 Boss。</li></ul></li></ul> <h4 id="小结-9"><a href="#小结-9" class="header-anchor">#</a> 小结</h4> <h3 id="指引玩家"><a href="#指引玩家" class="header-anchor">#</a> 指引玩家</h3> <h4 id="直接指引"><a href="#直接指引" class="header-anchor">#</a> 直接指引</h4> <ul><li><strong>及时性</strong>：指引信息必须在需要时立即传达给玩家。关于操作的指引应该在玩家需要使用到这项操作的时候才立刻出现在屏幕之上。</li> <li><strong>稀缺性</strong>：</li> <li><strong>简洁性</strong>：</li> <li><strong>明确性</strong>：</li></ul> <h5 id="直接指引的具体手段"><a href="#直接指引的具体手段" class="header-anchor">#</a> 直接指引的具体手段</h5> <ul><li>介绍</li> <li>尝试行动</li> <li>地图或导航系统</li> <li>弹出</li></ul> <h4 id="间接指引"><a href="#间接指引" class="header-anchor">#</a> 间接指引</h4> <ul><li>约束</li> <li>目标</li> <li>物理界面</li> <li>视觉设计
<ul><li>光线</li> <li>相似性</li> <li>路径</li> <li>路标</li> <li>箭头</li> <li>镜头</li> <li>对比
<ul><li>亮度</li> <li>材质</li> <li>颜色</li> <li>方向性</li></ul></li></ul></li> <li>音频设计</li> <li>玩家化身</li> <li>NPC
<ul><li>构建行为
<ul><li>消极的行为</li> <li>积极的行为</li> <li>安全</li> <li>情感联系</li></ul></li></ul></li></ul> <h4 id="介绍新技能和新概念"><a href="#介绍新技能和新概念" class="header-anchor">#</a> 介绍新技能和新概念</h4> <ul><li>排序
<ul><li>单独介绍</li> <li>扩展</li> <li>增加危险</li> <li>提升难度</li></ul></li> <li>融合</li></ul> <h4 id="小结-10"><a href="#小结-10" class="header-anchor">#</a> 小结</h4> <h3 id="数字游戏产业"><a href="#数字游戏产业" class="header-anchor">#</a> 数字游戏产业</h3> <h4 id="关于游戏产业"><a href="#关于游戏产业" class="header-anchor">#</a> 关于游戏产业</h4> <h4 id="游戏教育"><a href="#游戏教育" class="header-anchor">#</a> 游戏教育</h4> <h4 id="走进行业中去"><a href="#走进行业中去" class="header-anchor">#</a> 走进行业中去</h4> <h4 id="等不及开始做游戏了"><a href="#等不及开始做游戏了" class="header-anchor">#</a> 等不及开始做游戏了</h4> <h4 id="小结-11"><a href="#小结-11" class="header-anchor">#</a> 小结</h4> <h2 id="数字原型"><a href="#数字原型" class="header-anchor">#</a> 数字原型</h2> <h3 id="数字化系统中的思维"><a href="#数字化系统中的思维" class="header-anchor">#</a> 数字化系统中的思维</h3> <p>通过前面第一部分的学习，你可以认识到游戏是由互相关联的系统构建的。</p> <h4 id="棋类游戏中的系统思维"><a href="#棋类游戏中的系统思维" class="header-anchor">#</a> 棋类游戏中的系统思维</h4> <p>棋类游戏中有很多规则其实并未写入规则手册中，而是由玩家基于公平比赛的共识默契遵守。这一观念存在于虚拟现实的设想当中，也可以很大程度上解释为什么一群儿童可以自创游戏并且他们全都能凭直觉明白玩法。对大多数人类玩家来说，游戏玩法中隐藏着大量的默认规则。</p> <p><u>但是，计算机游戏做每件事时都要依赖明确的指令。</u>尽管计算机通过近几十年的发展，已经达到堪称强大的程度，但其本质仍然是无意识的机器，只能每秒上百万次地依次执行各条明确指令。<u>只有把你自己的想法编译成非常简单的指令让它执行，计算机才能产生貌似智能的行为表现。</u></p> <h4 id="简单命令练习"><a href="#简单命令练习" class="header-anchor">#</a> 简单命令练习</h4> <p>这里有个经典的练习，可以帮助学习计算机科学的学生理解如何从简单指令的角度思考问题，方法就是用简单命令指挥另外一个从卧姿转为站姿。</p> <p>首先，让同伴仰卧在地板上，然后告诉他严格按你所发出的命令的字面含义做相应动作。你的目标是向同伴发出一系列命令，使他站立起来。但你不能使用“站起来”之类的复杂命令，只能像指挥机器人一样使用简单命令。</p> <h5 id="计算机语言"><a href="#计算机语言" class="header-anchor">#</a> 计算机语言</h5> <h5 id="代码库"><a href="#代码库" class="header-anchor">#</a> 代码库</h5> <p>从上面的练习中你可以看到，比起花费力气发出很多低级命令，如果你能告诉同伴“站起来”的话，事情就会简单许多。在这里，“站起来”就相当于一个多功能高级命令，你可以把这个命令把你的要求告诉同伴，而不用考虑同伴最开始是什么姿势。在 C# 中，常用行为的高级命令集称为代码库（code library）。如果你使用 C# 和 Unity 进行开发，有上百个这样的代码库供你使用。</p> <p>最常用的代码库是把 C# 语言集成到 Unity 开发环境的代码库。这个代码库功能非常强大，以 UnityEngine 的名称导入。UnityEngine 代码库包含用于以下功能的代码：</p> <ul><li>卓越的光影效果，例如烟雾和反射。</li> <li>物理模拟，包括重力、碰撞，甚至是布料模拟。</li> <li>来自鼠标、键盘、游戏手柄、触摸平板的输入。</li> <li>上千种其他功能。</li></ul> <h5 id="开发环境"><a href="#开发环境" class="header-anchor">#</a> 开发环境</h5> <p>Unity 程序可以当作一个开发环境，我们先创建各个游戏组件，然后在这个开发环境中把所有组件组合在一起。在 Unity 中，三维模型、音乐和音频片段、二维图像和纹理以及你编写的 C# 脚本，这些资源都不是直接在 Unity 中创建的，但通过 Unity ，你可以把它们整合成一个完整的计算机游戏。Unity 还可以用来在三维空间中布置游戏中的对象，处理用户输入，设置屏幕中的虚拟摄像机，并最终把这些资源编译成一个可以运行的游戏。</p> <h5 id="把复杂问题分解为简单问题"><a href="#把复杂问题分解为简单问题" class="header-anchor">#</a> 把复杂问题分解为简单问题</h5> <p>通过前面的练习，你一定会注意到，如果不允许给出“站起来”这样的复杂指令，<u>你就需要把复杂命令分解为更细、更琐碎的命令。</u>尽管这在练习时很困难，但你会在编程过程中发现，把复杂命令分解为简单命令的技巧是你处理所面临的挑战时最重要的能留，让你把所创建的游戏一点一点建立起来。</p> <h4 id="游戏分析：《拾苹果》（apple-picker）"><a href="#游戏分析：《拾苹果》（apple-picker）" class="header-anchor">#</a> 游戏分析：《拾苹果》（Apple Picker）</h4> <h5 id="《拾苹果》游戏的基本玩法"><a href="#《拾苹果》游戏的基本玩法" class="header-anchor">#</a> 《拾苹果》游戏的基本玩法</h5> <p>玩家控制着屏幕下方的三个篮筐，可以用鼠标左右移动。苹果树在屏幕上方跨素左右移动，并隔一段时间掉下一个苹果，玩家必须在苹果落地之前用篮筐接住它们。玩家每接住一个苹果就会获得一定的分数，但如果苹果落地一个，所有的苹果会立即消失，而玩家会损失一个篮筐。玩家损失全部三个篮筐后，游戏结束。</p> <h5 id="《拾苹果》游戏中的游戏对象"><a href="#《拾苹果》游戏中的游戏对象" class="header-anchor">#</a> 《拾苹果》游戏中的游戏对象</h5> <p>在 Unity 的术语中，游戏中的任何物体（通常指屏幕上可以看到的任何物体）都称为游戏对象（GameObject）。</p> <p>**A. 篮筐：**篮筐由玩家控制，随鼠标左右移动。篮筐在碰到苹果时即可接住苹果，同时玩家得分。</p> <p>**B. 苹果：**苹果从苹果树上落下，并垂直向下坠落。如果苹果碰到任何一个篮筐，即被篮筐接住，同时从屏幕上消失（让玩家得分）。在碰到游戏窗口的底边时，苹果也会消失，并且会使其他苹果同时消失。这会使篮筐数目减少一个（按从下到上的顺序减少），然后苹果树上又重新开始掉苹果。</p> <p>**C. 苹果树：**苹果树会随机向左或向右移动，并不时掉下苹果。苹果掉落的时间间隔是固定的，因此，只有左右移动是随机行为。</p> <h5 id="《拾苹果》游戏中的游戏对象动作列表"><a href="#《拾苹果》游戏中的游戏对象动作列表" class="header-anchor">#</a> 《拾苹果》游戏中的游戏对象动作列表</h5> <p><strong>关注每个游戏对象各个时刻的动作。</strong></p> <p><strong>篮筐的动作：</strong></p> <p>篮筐的动作包括：</p> <ul><li>随玩家的鼠标左右移动</li> <li>如果篮筐碰到苹果，则接住苹果。</li></ul> <p><strong>苹果的动作</strong></p> <p>苹果的动作包括：</p> <ul><li>下落</li> <li>如果苹果碰到地面，它就会消失，并且使其他苹果一起消失</li></ul> <p><strong>苹果树的动作</strong></p> <p>苹果树的动作包括：</p> <ul><li>左右随机移动</li> <li>每隔 0.5 秒落下一个苹果</li></ul> <h5 id="《拾苹果》游戏中的游戏对象流程图"><a href="#《拾苹果》游戏中的游戏对象流程图" class="header-anchor">#</a> 《拾苹果》游戏中的游戏对象流程图</h5> <p>要考虑游戏中动作和决策流程，使用流程图通常是一个不错的方式。<strong>一开始时，我们只需要考虑单个回合中发生的动作。</strong></p> <p><strong>篮筐的流程图</strong></p> <p><img src="/Notebook/assets/img/Apple-Picker-1.8936d4bb.png" alt=""></p> <p><strong>苹果的流程图</strong></p> <p><img src="/Notebook/assets/img/Apple-Picker-2.b652e07d.png" alt=""></p> <p>苹果树的流程图</p> <ul><li>是否变化方向</li> <li>是否落下苹果</li></ul> <p><img src="/Notebook/assets/img/Apple-Picker-3.c925b402.png" alt=""></p> <p><strong>计算机游戏中的帧</strong></p> <p>“帧”的概念起源于电影行业。从前，电影影片是由上千张单独的胶片（称为帧）构成的，这些胶片在快速依次播放时（速度为 16 或 24 帧/秒），就会产生动态的效果。在电视领域，动态效果是由投射到屏幕上的一系列电子影像产生的，这些影像也称为帧（速度约为 30 帧/秒）。</p> <p><u>随着计算机图形快到足以显示动画和其他运动影像，在计算机屏幕上显示的各个单幅画面也被称为帧。</u>另外，使电脑屏幕上产生该画面的所有运算都是该帧的组成部分。<u>当 Unity 以 60 帧/秒的速度运行游戏时，它每秒在屏幕上显示 60 幅画面，同时，它还在进行大量必要的数学运算，使物体按要求从一帧运到到下一帧。</u></p> <h4 id="小结-12"><a href="#小结-12" class="header-anchor">#</a> 小结</h4> <p>如上，<strong>数字化游戏可以分解为一系列非常简单的选择和命令</strong>。这项工作暗含在本书创建模式的过程中，读者在设计和开发自己的游戏项目时也需要进行这项工作。</p> <h3 id="unity-开发环境简介"><a href="#unity-开发环境简介" class="header-anchor">#</a> Unity 开发环境简介</h3> <p>Unity 本身可以被视作一个组装程序，虽然 Unity 可以把优秀原型中的元素全部组装到一起，但大部分资源是在其他程序中创建的；在 MAYA、Autodest、3DS MAX 或 Blender 等三维建模程序中创建模型和材质；在 Photoshop 或 GIMP 等图像编辑软件中制作图像；在 Pro Tools 或 Audacity 等音频编辑软件中编辑声音。</p> <h4 id="下载-unity-软件"><a href="#下载-unity-软件" class="header-anchor">#</a> 下载 Unity 软件</h4> <h4 id="开发环境简介"><a href="#开发环境简介" class="header-anchor">#</a> 开发环境简介</h4> <h4 id="首次运行-unity-软件"><a href="#首次运行-unity-软件" class="header-anchor">#</a> 首次运行 Unity 软件</h4> <h4 id="设置-unity-的窗口布局"><a href="#设置-unity-的窗口布局" class="header-anchor">#</a> 设置 Unity 的窗口布局</h4> <h4 id="熟悉-unity-界面"><a href="#熟悉-unity-界面" class="header-anchor">#</a> 熟悉 Unity 界面</h4> <ul><li>场景（Scene）面板：场景面板为你提供三维场景内容的导航，允许你选择、移动、旋转或缩放场景中的对象。</li> <li>游戏（Game）面板：你可以在游戏中查看游戏运行时的实际画面。</li> <li>层级（Hierarchy）面板：层级面板展示当前场景中包含的每个游戏对象（GameObject）。在目前这个阶段，你可以把场景当作游戏的关卡。从摄像机到游戏角色，场景中存在的所有东西都是游戏对象。</li> <li>项目（Project）面板：项目面板包含了项目中所有的资源（Assets）。每一项资源都是构成项目的一个任何类型的文件，包括图像、三维模型、C#代码、文本文件、音频、字体等文件。项目面板是对 Assets 文件夹的一个映射，该文件夹位于电脑硬盘上 Unity 项目文件夹下。这些资源不一定出现在当前场景中。</li> <li>检视（Inspector）面板：当在项目面板中选中一项资源，<u>或在场景面板或层级面板中选中一个游戏对象时，你可以在检视面板中查看或编辑它的相关信息。</u></li> <li>控制台（Console）面板：你可以在控制台面板中查看 Unity 软件给出的关于错误或代码 Bug 的信息，也可以通过它帮助自己理解代码的内部运行情况。</li></ul> <h4 id="小结-13"><a href="#小结-13" class="header-anchor">#</a> 小结</h4> <h3 id="c-编程语言简介"><a href="#c-编程语言简介" class="header-anchor">#</a> C#编程语言简介</h3> <h4 id="理解-c-的特性"><a href="#理解-c-的特性" class="header-anchor">#</a> 理解 C# 的特性</h4> <ul><li>是编译型语言</li> <li>是托管代码</li> <li>是强类型语言</li> <li>基于函数</li> <li>面向对象</li></ul> <h5 id="c-是一种编译型语言"><a href="#c-是一种编译型语言" class="header-anchor">#</a> C#是一种编译型语言</h5> <p>编程语言还分为编译型</p> <h5 id="c-是托管代码"><a href="#c-是托管代码" class="header-anchor">#</a> C#是托管代码</h5> <p>幸运的是，C# 属于托管代码，也就是说，内存的分配和释放是自动进行的。在托管代码中仍然可能发生内存泄漏，但意外导致内存泄漏的情况会更难发生。</p> <h4 id="阅读和理解-c-语法"><a href="#阅读和理解-c-语法" class="header-anchor">#</a> 阅读和理解 C# 语法</h4> <h4 id="小结-14"><a href="#小结-14" class="header-anchor">#</a> 小结</h4> <h3 id="hello-world：你的首个程序"><a href="#hello-world：你的首个程序" class="header-anchor">#</a> Hello World：你的首个程序</h3> <h4 id="创建新项目"><a href="#创建新项目" class="header-anchor">#</a> 创建新项目</h4> <p>当在 Unity 中创建项目时，你实际上是创建了一个包含所有项目文件的文件夹。</p> <p>警告：在 Unity 程序运行时，千万不要修改项目文件夹的名称。 如果你在 Unity 程序运行时修改了项目文件夹的名称，Unity 程序会崩溃得很难看。Unity 程序在运行时，会在后台做很多文件管理工作，如果此时修改文件夹名称，几乎肯定会造成程序崩溃。如果你希望改变项目文件夹的名称，需要先退出 Unity，再修改文件夹名称，然后重新启动过 Unity。</p> <h4 id="新建-c-脚本"><a href="#新建-c-脚本" class="header-anchor">#</a> 新建 C# 脚本</h4> <p>将 HelloWorld 脚本拖动到主摄像机上，会将脚本绑定到主摄像机上，成为它的一个组件。<u>出现在场景层级面板上的所有对象（例如主摄像机）都是游戏对象，游戏对象是由组件构成的。</u></p> <h5 id="start-和-update-的区别"><a href="#start-和-update-的区别" class="header-anchor">#</a> Start() 和 Update() 的区别</h5> <p>Start() 函数和 Update() 都是 Unity 版 C# 语言中的特殊函数。Start() 函数会在每个项目的第一帧中被调用一次，而 Update() 函数会在每一帧中被调用一次。</p> <blockquote><p>提示：
如果你希望相同的消息在重复出现时只显示一次，你可以单击控制台面板上的折叠（Collapse）按钮，这会保证各种不同消息内容各只显示一次。</p></blockquote> <h4 id="让事情更有趣"><a href="#让事情更有趣" class="header-anchor">#</a> 让事情更有趣</h4> <p>检视面板的首要目的是使用户可以查看和编辑游戏对象的各个组件。Cube 游戏对象具有 Transform （变换）、Mesh Filter（网格过滤器）、Box Collider（盒碰撞器）和 Mesh Renderer （网格渲染器）组件。</p> <ul><li><strong>变换</strong>（Transform）：变换组件设置游戏对象的位置、旋转和缩放。这是唯一一个所有游戏对象都必有的组件。</li> <li><strong>Cube（Mesh Filter）</strong>：<u>Mesh Filter 组件为游戏对象提供三维外形，以三角形构成的网络建立模型。游戏中的三维模型通常是中空的，仅具有表面。</u>例如，鸡蛋的三维模型将只有模拟蛋壳形状的三角形网格，而不像真正的鸡蛋那样还包含蛋清和蛋黄。<u>网格过滤器在游戏对象上绑定一个三维模型。在立方体中，网格过滤器使用 Unity 中内置的简单三维立方体模型。但你也可以在项目面板中导入复杂的三维模型，在你的游戏中添加更加复杂的网格。</u></li> <li><strong>盒碰撞器（Box Collider）</strong>：碰撞器组件允许游戏对象在 Unity 的物理模拟系统中与其他对象发生交互。软件中有几种不同类型的碰撞器，最常用的有：球状、胶囊状、盒状和网格状（按运算复杂度从低到高排序）。<u>具有碰撞器组件的游戏对象（以及非刚体组件）会被当作空间中不可移动的物体，可与其他物体发生碰撞。</u></li> <li><strong>网格渲染器（Mesh Render）</strong>：虽然网格过滤器可以提供游戏对象的实际几何形状，但要游戏对象显示在屏幕上，要通过网格渲染器。没有渲染器，Unity 中任何物体都无法显示在屏幕上。<u>渲染器与主摄像机一起把网格过滤器的三维几何形状转化为屏幕上显示的像素。</u></li> <li><strong>刚体（Rigidbody）</strong>：刚体组件可以通知 Unity 对这个游戏对象进行<u>物理模拟。</u>其中包括重力、碰撞和拉拽等机械力。刚体可允许具有碰撞器的游戏对象在空间中移动。<u>如果没有刚体组件，即使游戏对象通过组件移动了位置，它的碰撞器组件仍然会停在原地。你如果希望一个游戏对象可以移动并且可以和其他碰撞器发生碰撞，就必须为它添加刚体组件。</u></li></ul> <p>Unity 中的所有物理模拟都基于公制单位。也就是说：</p> <ul><li>1 个距离单位 = 1 米（例如，变换中的位置单位）。</li> <li>1 个质量单位 = 1 千克（例如，刚体的质量单位）</li> <li>默认重力为 -9.8 = 9.8m/s2，方向向下（y 轴负方向）。</li> <li>普通人类角色的身高约为 2 个长度单位（2 米）。</li></ul> <h5 id="创建预设（prefab）"><a href="#创建预设（prefab）" class="header-anchor">#</a> 创建预设（Prefab）</h5> <p>现在，我们把立方体添加到预设中。<u>预设是指项目中的可重用元素，可以任意实例化。你可以把预设当成是游戏对象的模子，每个从预设中创建的游戏对象都称为预设的一个实例。（所以这个过程被称为实例化。）</u>要创建一个预设，需要在层级面板上单击 Cube，把它拖动到项目面板上之后松开鼠标。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CubeSpawner</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> cubePrefabVar<span class="token punctuation">;</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//Instantiate(cubePrefabVar);</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token function">Instantiate</span><span class="token punctuation">(</span>cubePrefabVar<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>和上一个脚本一样，它也需要绑定到其他对象上才能运行。</p> <h4 id="小结-15"><a href="#小结-15" class="header-anchor">#</a> 小结</h4> <h3 id="变量和组件"><a href="#变量和组件" class="header-anchor">#</a> 变量和组件</h3> <p>Unity 常见中的任何对象都是游戏对象，构成游戏对象的组件可以使游戏对象完成定位、物理模拟、特效、三维屏幕显示、角色动画等各种功能。</p> <h4 id="变量"><a href="#变量" class="header-anchor">#</a> 变量</h4> <h4 id="c-中的强类型变量"><a href="#c-中的强类型变量" class="header-anchor">#</a> C# 中的强类型变量</h4> <p>C# 中的变量是强类型变量，也就是说，变量只能接受指定类型的值，而不能被随意赋值。这种做法很有必要，因为计算机需要知道应该为各个变量分别分配多少内存空间。</p> <h4 id="重要的-c-变量类型"><a href="#重要的-c-变量类型" class="header-anchor">#</a> 重要的 C# 变量类型</h4> <p>所有这些 C# 基础变量都以小写字母开头，而 Unity 的数据类型则以大写字母开头。</p> <h4 id="变量的作用域"><a href="#变量的作用域" class="header-anchor">#</a> 变量的作用域</h4> <h4 id="命名惯例"><a href="#命名惯例" class="header-anchor">#</a> 命名惯例</h4> <ol><li>在所有名称中都使用驼峰命名法。</li> <li>变量名称应使用小写字母开头（例如 someVariableName）。</li> <li>函数名称应使用大写字母开头（例如 Start()、Update()）。</li> <li>类名称应使用大写字母开头（例如 GameObject、ScopeExample）。</li> <li>私有变量名称应以下画线开头（例如 _hiddenVariable）。</li> <li>静态变量名称应全部使用大写字母，并且使用蛇底式命名法。（例如 NUM_INSTANCES）。蛇底式命名法在多个单词之间使用下划线连接。</li></ol> <h4 id="unity-中的重要变量类型"><a href="#unity-中的重要变量类型" class="header-anchor">#</a> Unity 中的重要变量类型</h4> <h5 id="三维向量"><a href="#三维向量" class="header-anchor">#</a> 三维向量</h5> <p>三维向量是三维软件中常见的数据类型，常用于存储对象的三维空间位置。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Vector3</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">3.0f</span><span class="token punctuation">,</span> <span class="token number">4.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置 x，y，z 的值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>三维向量的实例变量和函数</p> <p>三维向量的静态类变量和函数</p> <h5 id="颜色（color）：带有透明度信息的颜色"><a href="#颜色（color）：带有透明度信息的颜色" class="header-anchor">#</a> 颜色（Color）：带有透明度信息的颜色</h5> <p>Color 变量类型可以存储关于颜色及透明度（alpha 值）的信息。C# 中的红、绿、蓝成分分别存储为一个 0.0f 到 1.0f 之间的浮点数，其中 0.0f 代表该颜色通道亮度为 0，而 1.0f 代表该颜色通道亮度为最高。</p> <p>颜色的实例变量和函数</p> <p>颜色的静态类变量和函数</p> <h5 id="四元数（quaternion）：旋转信息"><a href="#四元数（quaternion）：旋转信息" class="header-anchor">#</a> 四元数（Quaternion）：旋转信息</h5> <p>多数情况下，你会将欧拉旋转作为参数传入，使 Unity 可以将其转换成四元数，从而定义一个四元数：</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Quaternion</span> lookUp45Deg <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">45f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在这种情况下，传入 Quaternion.Euler() 函数的三个浮点数是沿 x、y 和 z 轴（在 Unity 中分别以红、绿、蓝色显示）旋转的角度。</p> <h5 id="数学运算（mathf）：一个数学函数库"><a href="#数学运算（mathf）：一个数学函数库" class="header-anchor">#</a> 数学运算（Mathf）：一个数学函数库</h5> <p>Mathf 不算一个真正的数据类型，而是一个非常实用的数学函数库。Mathf 附带的所有变量和函数都是静态的，你不能创建 Mathf 的实例。</p> <h5 id="屏幕（screen）：关于屏幕显示的信息"><a href="#屏幕（screen）：关于屏幕显示的信息" class="header-anchor">#</a> 屏幕（Screen）：关于屏幕显示的信息</h5> <p>屏幕是另一个类似 Mathf 的库，可提供关于 Unity 游戏所使用的特定计算机屏幕的信息。它与设备无关，因此不论你使用的 Window、OS X、iOS 设备还是安卓面板，它都可以提供精确的信息。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token function">print</span><span class="token punctuation">(</span> Screen<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 以像素为单位输出屏幕宽度</span>
<span class="token function">print</span><span class="token punctuation">(</span> Screen<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 以像素为单位输出屏幕高度</span>
Screen<span class="token punctuation">.</span>showCursor <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 隐藏光标</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="系统信息（systeminfo）：关于设备的信息"><a href="#系统信息（systeminfo）：关于设备的信息" class="header-anchor">#</a> 系统信息（SystemInfo）：关于设备的信息</h5> <p>系统信息可以提供关于游戏运行设备的特定信息。它包括关于操作系统、处理器数量、显示硬件等设备的信息。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token function">print</span><span class="token punctuation">(</span>SystemInfo<span class="token punctuation">.</span>operatingSystem<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="游戏对象（gameobject）：场景中任意对象的类型"><a href="#游戏对象（gameobject）：场景中任意对象的类型" class="header-anchor">#</a> 游戏对象（GameObject）：场景中任意对象的类型</h5> <p>GameObject 是 Unity 场景中所有实体的基类。你在 Unity 游戏屏幕上看到的所有东西都是游戏对象类的子类。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">GameObject</span> gObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">(</span><span class="token string">&quot;MyGO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个名为 MyGO 的游戏对象</span>
<span class="token function">print</span><span class="token punctuation">(</span>gObj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 MyGO，游戏对象 gObj 的名称</span>
<span class="token class-name">Transform</span> trans <span class="token operator">=</span> gObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Transform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 定义变量 trans 为 gObj 的变换组件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里的 <code>gObj.GetComponent&lt;Transform&gt;()</code> 方法特别重要，因为它可以用来访问游戏对象所绑定的组件。你有时会看到像 <code>GetComponent&lt;&gt;()</code> 这样带有尖括号（&lt;&gt;）的方法，我们称之为（generic methods），因为它们可用于多种不同的数据类型。在<code>GetComponent&lt;Transform&gt;()</code> 中，数据类型为变换，它通知 <code>GetComponent&lt;T&gt;()</code> 方法去查找游戏对象的变换组件并返回它。这种方法也可用来获取游戏对象的任何其他组件，只要在尖括号中输入该组件的名称即可。以下是其中几例：</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Render</span> rend <span class="token operator">=</span> gObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取渲染器组件</span>
<span class="token class-name">Collider</span> rend <span class="token operator">=</span> gObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Collider<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取碰撞器组件</span>
<span class="token class-name">HelloWorld</span> rend <span class="token operator">=</span> gObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HelloWorld<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取绑定在游戏对象上的任何 C#类的实例</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="unity-游戏对象和组件"><a href="#unity-游戏对象和组件" class="header-anchor">#</a> Unity 游戏对象和组件</h4> <h5 id="变换：定位、旋转和缩放"><a href="#变换：定位、旋转和缩放" class="header-anchor">#</a> 变换：定位、旋转和缩放</h5> <p>变换是所有游戏对象中都必然存在的组件。变换组件控制着游戏对象的定位（游戏对象的位置）、旋转（游戏对象的方向）和缩放（游戏对象的尺寸）。尽管在检视面板上不体现，但实际上变换组件还负责着层级面板中的父/子关系。若一个对象谁另一对象的子对象，它将像附着在父对象一样，随父对象同步移动。</p> <h5 id="网格过滤器（meshfilter）：你所看到的模型"><a href="#网格过滤器（meshfilter）：你所看到的模型" class="header-anchor">#</a> 网格过滤器（MeshFilter）：你所看到的模型</h5> <p>网格过滤器组件将项目面板中的 MeshFilter 绑定到游戏对象上。要使模型显示在屏幕上，游戏对象必须必须有一个网格过滤器（用于处理实际的三维网格数据）和一个网格渲染器（用于将网格与着色器或材质相关联，在屏幕上显示图形）。网格过滤器为游戏对象创建一个皮肤或表面，网格渲染器决定该表面的形状、颜色和纹理。</p> <h5 id="渲染器：使你能够查看游戏对象"><a href="#渲染器：使你能够查看游戏对象" class="header-anchor">#</a> 渲染器：使你能够查看游戏对象</h5> <p>渲染器组件（多数为网格渲染器）允许你从屏幕上查看场景和游戏面板中的游戏。<u>网格渲染器要求网格过滤器提供三维网格数据，如果你不希望看到一团丑陋的洋红色，还应至少为网格渲染器提供一种材质（材质决定对象的纹理）。</u>渲染器将 网格过滤器、材质和光照组合在一起，将游戏对象呈现在屏幕上。</p> <h5 id="碰撞器：游戏对象的物理存在"><a href="#碰撞器：游戏对象的物理存在" class="header-anchor">#</a> 碰撞器：游戏对象的物理存在</h5> <p>碰撞器组件使游戏对象在游戏世界中产生物理存在，可与其他对象发生碰撞。Unity 中有四种类型的碰撞器组件：</p> <ul><li>球状碰撞器：运算速度最快的碰撞器形状。为球体。</li> <li>胶囊碰撞器：两端为球体，中间部分为圆柱体的碰撞器。运算速度次之。</li> <li>盒状碰撞器：一种长方体。适用于箱子、汽车、人体躯干等。</li> <li>网格碰撞器：由三维网格构成的碰撞器。尽管它实用并且精确，但运算速度比另外三种碰撞器要慢很多。并且，<u>只有凸多面体（Convex）属性设置为 true 的网格碰撞器才可以与其他网格碰撞器发生碰撞。</u></li></ul> <p>Unity 中的物理过程和碰撞是通过 <u>NVIDIA PhysX 引擎处理的。</u>尽管它通常不能提供非常快速和精确的碰撞，但要知道所有的物理引擎都有其局限性，即使 PhysX 在处理高速对象或薄墙壁时偶尔也会出现问题。</p> <h5 id="刚体：物理模拟"><a href="#刚体：物理模拟" class="header-anchor">#</a> 刚体：物理模拟</h5> <p>刚体组件控制着游戏对象的物理模拟。刚体组件在每次f FixedUpdate（通常每隔 1/50 秒执行一次）函数中模拟加速度和速度，更新变换组件中的定位和旋转。<u>刚体组件还可以为重力、拉力、风力、爆炸力等各种力建模。</u>如果你希望直接设置游戏对象的位置，而不使用刚体所提供的物理过程，请将运动学模式（isKinematic）设置为 true。</p> <p><u>要使碰撞器随游戏对象移动，游戏对象必须有刚体组件。</u>否则，在 Unity 的 PhysX 物理模拟过程中，碰撞器将原地不动。也就是说，如果未添加刚体组件，游戏对象将在屏幕中移动，但在 PhysX 引擎中，游戏对象的碰撞器组件将保持原样，因此保留原来位置。</p> <h5 id="脚本：你编写的-c-脚本"><a href="#脚本：你编写的-c-脚本" class="header-anchor">#</a> 脚本：你编写的 C# 脚本</h5> <p>所有 C# 脚本也是游戏对象组件。把脚本当作组件处理的好处之一是你可以在每个游戏对象添加多个脚本。</p> <h4 id="小结-16"><a href="#小结-16" class="header-anchor">#</a> 小结</h4> <h3 id="布尔运算符和比较运算符"><a href="#布尔运算符和比较运算符" class="header-anchor">#</a> 布尔运算符和比较运算符</h3> <h4 id="布尔值"><a href="#布尔值" class="header-anchor">#</a> 布尔值</h4> <h4 id="比较运算符"><a href="#比较运算符" class="header-anchor">#</a> 比较运算符</h4> <h4 id="条件语句"><a href="#条件语句" class="header-anchor">#</a> 条件语句</h4> <h4 id="小结-17"><a href="#小结-17" class="header-anchor">#</a> 小结</h4> <h3 id="循环语句"><a href="#循环语句" class="header-anchor">#</a> 循环语句</h3> <h4 id="循环语句的种类"><a href="#循环语句的种类" class="header-anchor">#</a> 循环语句的种类</h4> <h4 id="创建项目"><a href="#创建项目" class="header-anchor">#</a> 创建项目</h4> <h4 id="while-循环"><a href="#while-循环" class="header-anchor">#</a> while 循环</h4> <h4 id="死循环的危害"><a href="#死循环的危害" class="header-anchor">#</a> 死循环的危害</h4> <h4 id="更实用的-while-循环"><a href="#更实用的-while-循环" class="header-anchor">#</a> 更实用的 while 循环</h4> <h4 id="do-while-循环"><a href="#do-while-循环" class="header-anchor">#</a> do......while 循环</h4> <h4 id="for-循环"><a href="#for-循环" class="header-anchor">#</a> for 循环</h4> <h4 id="foreach-循环"><a href="#foreach-循环" class="header-anchor">#</a> foreach 循环</h4> <h4 id="循环中的跳转语句"><a href="#循环中的跳转语句" class="header-anchor">#</a> 循环中的跳转语句</h4> <h4 id="小结-18"><a href="#小结-18" class="header-anchor">#</a> 小结</h4> <h3 id="list-和数组"><a href="#list-和数组" class="header-anchor">#</a> List 和数组</h3> <h4 id="c-的集合"><a href="#c-的集合" class="header-anchor">#</a> C# 的集合</h4> <p>集合是可通过一个变量引用的一组对象。在日常生活中，集合类似于一个人群、狮群，或鸟群。在 C# 中，有两种必须理解的重要集合类型：</p> <ul><li>**数组：**数组是最低等但速度最快的集合类型。<u>数组只能存储一种类型的数据，在定义数组时，必须同时确定它的长度。</u>另外还可以创建多维数组或交错数组（由数组构成的数组）。</li> <li>**List：**List 是更为灵活的数组，但仍然是强类型（即它们只能存储一种类型的对象）。<u>List 的长度是可以变化的，在不知道其中集合对象的具体数目时，List 会很实用。</u></li> <li>List 和数组的下标从零开始</li></ul> <h4 id="list"><a href="#list" class="header-anchor">#</a> List</h4> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span> <span class="token comment">// 让脚本可以使用 ArrayLists（第三种集合类型，为非强类型）</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span> <span class="token comment">// List 和其他泛型集合属于该库</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span> <span class="token comment">// 让脚本可以使用标准呢的 Unity 对象</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListEx</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> sList<span class="token punctuation">;</span>

  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//Start is called before the first frame update</span>
    sList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;Experience&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;what&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;you&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;when&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;you&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;didn't&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;what&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;you&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;wanted.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;sList Count = &quot;</span> <span class="token operator">+</span> sList<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;第 0 个元素为：&quot;</span> <span class="token operator">+</span> sList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;第 1 个元素为：&quot;</span> <span class="token operator">+</span> sList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;第 2 个元素为：&quot;</span> <span class="token operator">+</span> sList<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;第 8 个元素为：&quot;</span> <span class="token operator">+</span> sList<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sTemp <span class="token keyword">in</span> sList<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      str <span class="token operator">+=</span> sTemp <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h5 id="list-的重要属性和方法"><a href="#list-的重要属性和方法" class="header-anchor">#</a> List 的重要属性和方法</h5> <p>属性</p> <ul><li>sL[2]（下标访问）：返回由参数（2）所指定的下标的 List 元素。</li> <li>sL.Count：返回 List 中当前的元素个数。</li></ul> <p>方法</p> <ul><li>sL.Add(&quot;Hello&quot;)：在 sl 的末尾添加元素“Hello”。</li> <li>sL.Clear()：清除 sL 中现有的全部元素，使其变为空 List。</li> <li>sL.IndexOf(&quot;A&quot;)：查找 sL 中第一个为 “A”的元素，并且返回该元素的下标。如果 List 中不存在括号中的变量，该表达式将返回 -1.要确定 List 中是否包含某个元素，这是一种既快速又安全的方法。</li> <li>sL.Insert(2, &quot;B.5&quot;)：将元素 “B.5” 插入到 sL 第 2 个元素之前，其后的元素将逐个向后移动。</li> <li>sL.Remove(&quot;C&quot;)：从 List 中移除指定的元素。如果 List 中有两个元素的值都是“C”，则只有第一个被移除。</li> <li>sL.RemoveAt(0)：移除参数所指定的下标处的元素。</li></ul> <p>如果将 List 转换为数组</p> <ul><li>sL.ToArray()：生成一个包含 sL 所有元素的数组。新数组中的元素类型与原来的 List 相同。</li></ul> <h4 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h4> <p>数组是最为简单的集合类型，同时也是最快的。<u>使用数组不要求导入任何库（即使用 using 命令），因为它们是 C# 中核心的内置对象。</u>另外，数组中包括多维数组和交错数组，二者也非常实用。</p> <h5 id="基本数组的创建"><a href="#基本数组的创建" class="header-anchor">#</a> 基本数组的创建</h5> <p>数组长度是固定的，在定义数组时必须确定下来。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayEx</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArray<span class="token punctuation">;</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    sArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    sArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;这&quot;</span><span class="token punctuation">;</span>
    sArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;是&quot;</span><span class="token punctuation">;</span>
    sArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;几个&quot;</span><span class="token punctuation">;</span>
    sArray<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;词&quot;</span><span class="token punctuation">;</span>

    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;数组的长度为：&quot;</span> <span class="token operator">+</span> sArray<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sTemp <span class="token keyword">in</span> sArray<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      str <span class="token operator">+=</span> <span class="token string">&quot;|&quot;</span> <span class="token operator">+</span> sTemp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ol><li>数组被定义之后，将使用该数组所含数据类型的默认值垃填充相应的长度。整数或浮点数的默认值为 0。对于字符串和游戏对象等复杂对象，所有元素都被填充为 null（表示未赋予任何值）。</li></ol> <h5 id="数组中的空元素"><a href="#数组中的空元素" class="header-anchor">#</a> 数组中的空元素</h5> <p>数组中间允许存在空元素，这是 List 无法做到的。如果你的游戏中有一个类似计分板的东西，每名玩家在计分上有一种得分标记，但在标记之间可能有空位的话，数组的这种特性就非常实用了。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>sArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;这&quot;</span><span class="token punctuation">;</span>
sArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;是&quot;</span><span class="token punctuation">;</span>
sArray<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;几&quot;</span><span class="token punctuation">;</span>
sArray<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;词&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="数组的重要属性和方法"><a href="#数组的重要属性和方法" class="header-anchor">#</a> 数组的重要属性和方法</h5> <p><strong>属性</strong></p> <ul><li>sA[2]（下标访问）：返回由参数（2）指定的下标位置的数组元素。</li> <li>如果下标参数超出了数组下标的有效范围，则会产生一个运行时错误。</li> <li>sA[1] = &quot;Bravo&quot; （用浓郁赋值的下标访问）</li> <li>sA.Length：返回数组的总长度。所有元素都被计算在内，不论其是已赋值。</li></ul> <p><strong>静态方法</strong></p> <p>数组的静态方法属于 System.Array 类，可作用于数组，使其具有 List 的部分功能。</p> <ul><li>System.Array.IndexOf(sA, &quot;C&quot;)：从数组 sA 中查找第一个值为“C” 的元素并返回该元素的下标。如果数组中不存在要查找的变量，则返回 -1。</li> <li>System.Array.Resize(ref Sa, 6)：这个 C# 方法可以调整数组的长度。第一个参数是对数组的引用（所有需要在签名加上 ref 关键词），第二个参数是为数组指定的新长度。如果第二个参数所指定的长度小于数组原来的长度，多余的元素将被剔除出数组。System.Array.Resize() 方法对多维数组不起作用。</li></ul> <p>如何将数组转化为 List</p> <ul><li><code>List&lt;string&gt; sL = new List&lt;string&gt; (sA)</code>：这行代码将创建一个名为 sL 的 List，并复制数组 sA 中的元素。</li></ul> <h4 id="多维数组"><a href="#多维数组" class="header-anchor">#</a> 多维数组</h4> <p>另外，还可以创建具有两个或更多下标的多维数组，这种数组很实用。在多维数组中，方括号中的下标数目不止一个，而是两个或更多。<u>在创建可以容纳其他物体的二维网格时，这种多维数组非常实用。</u></p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Array2dEx</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> sArray2d<span class="token punctuation">;</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    sArray2d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    sArray2d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">;</span>
    sArray2d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">;</span>
    sArray2d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">;</span>
    sArray2d<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;数组 sArray2d 的长度为：&quot;</span> <span class="token operator">+</span> sArray2d<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sArray2d<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          str <span class="token operator">+=</span> <span class="token string">&quot;|&quot;</span> <span class="token operator">+</span> sArray2d<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
          str <span class="token operator">+=</span> <span class="token string">&quot;|_&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      str <span class="token operator">+=</span> <span class="token string">&quot;|&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>还应该注意，在 Unity 的检视面板中不显示多维你数组。事实上，如果检视面板不知道如何正确显示一个变量，它会彻底忽略这个变量，所以在检视面板中连多维数组的变量名也根本不显示。</p> <h4 id="交错数组"><a href="#交错数组" class="header-anchor">#</a> 交错数组</h4> <p>交错数组是由数组构成的数组，它与多维数组有些类似，但它允许其中的子数组具有不同的长度。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JaggedArrayEx</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> jArray<span class="token punctuation">;</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    jArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 以下用单行方式完成数组的初始化</span>
    jArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;E&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;F&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;G&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;H&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;I&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;J&quot;</span><span class="token punctuation">;</span>
    jArray<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;K&quot;</span><span class="token punctuation">;</span>

    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot; jArray 的长度是：&quot;</span> <span class="token operator">+</span> jArray<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =》4</span>

    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot; jArray[1] 的长度是：&quot;</span> <span class="token operator">+</span> jArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>

    <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArray <span class="token keyword">in</span> jArray<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sTemp <span class="token keyword">in</span> sArray<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sTemp <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          str <span class="token operator">+=</span> <span class="token string">&quot; | &quot;</span> <span class="token operator">+</span> sTemp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
          str <span class="token operator">+=</span> <span class="token string">&quot; | &quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        str <span class="token operator">+=</span> <span class="token string">&quot; | \n&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h5 id="交错-list"><a href="#交错-list" class="header-anchor">#</a> 交错 List</h5> <p>最后还有一类交错集合，即交错 List。可以用 <code>List&lt;List&lt;string&gt;&gt;</code> 语句声明一个交错的二维字符串 List。和交错数组一样，每个子 List 一开始均为 null，你必须初始化这些子 List，如下代码所示。与其他 List 一样，交错 List 也不允许空元素。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JaggedListTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> jaggedList<span class="token punctuation">;</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    jaggedList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 向 jaggedList 中添加两个 List&lt;string&gt;</span>
    jaggedList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jaggedList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 向 jaggedList[0] 中添加两个字符串</span>
    jaggedList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jaggedList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 向 jaggedList 添加第三个 List&lt;string&gt;，其中包含数据</span>
    jaggedList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;complex&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;initialization&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> sL <span class="token keyword">in</span> jaggedList<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sTemp <span class="token keyword">in</span> sL<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sTemp <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          str <span class="token operator">+=</span> <span class="token string">&quot; | &quot;</span> <span class="token operator">+</span> sTemp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
          str <span class="token operator">+=</span> <span class="token string">&quot; | &quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      str <span class="token operator">+=</span> <span class="token string">&quot; | \n&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h4 id="应该使用数组还是-list"><a href="#应该使用数组还是-list" class="header-anchor">#</a> 应该使用数组还是 List</h4> <p>数组和 List 集合类型的区别主要在于以下几个方面：</p> <ul><li>List 具有可变的长度，而数组的长度不太容易改变。</li> <li>数组速度稍快，但多数情况下感觉不出来。</li> <li>数组允许有多维下标。</li> <li>数组允许在集合中存在空元素。</li></ul> <p>因为 List 更容易使用，不需要事先筹划太多（因为它们的长度可以改变），我个人常倾向于使用 List，而不是数组。在制作游戏原型时，这种倾向更为明显，因为原型需要很大的灵活性。</p> <h4 id="小结-19"><a href="#小结-19" class="header-anchor">#</a> 小结</h4> <p>学会了 List 和数组的用户，你就可以在编写游戏时操作大量的对象了。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CubeSpawner3</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> cubePrefabVar<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> gameObjectList<span class="token punctuation">;</span> <span class="token comment">// 用于存储所有的立方体</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> scalingFactor <span class="token operator">=</span> <span class="token number">0.95f</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> numCubes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 已初始化的立方体数目</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    gameObjectList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    numCubes<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 使立方体数目增加1</span>

    <span class="token class-name">GameObject</span> gObj <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>cubePrefabVar<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span> <span class="token comment">/* as GameObject
    通知 C# 这个对象应当做游戏对象（GameObject）来处理 */</span>

    <span class="token comment">// 以下几行代码将设置新建立方体的一些属性值</span>
    gObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Cube&quot;</span> <span class="token operator">+</span> numCubes<span class="token punctuation">;</span>
    <span class="token class-name">Color</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Color</span><span class="token punctuation">(</span>Random<span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">,</span> Random<span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">,</span> Random<span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 为立方体随机指定一个颜色</span>
    gObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">=</span> c<span class="token punctuation">;</span>
    gObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Transform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>position <span class="token operator">=</span> Random<span class="token punctuation">.</span>insideUnitSphere<span class="token punctuation">;</span> <span class="token comment">/* 返回一个
    半径为 1 的球体（球心位于坐标 [0, 0, 0] 内的随机一个位置。这个代码使立方体随机分布在
    [0, 0, 0] 附近，而不是出现在同一点上。*/</span>

    gameObjectList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>gObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 需要从 gameObjectList 中删除的立方体的信息</span>
    <span class="token comment">// 将存储在这个 removeList 中</span>
    <span class="token comment">// c# 中不允许正在遍历该 List 的 foreach 循环中删除 List 中的元素</span>
    <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> removeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 遍历 gameObjectList 中的每个立方体</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">GameObject</span> goTemp <span class="token keyword">in</span> gameObjectList<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 获取立方体的大小</span>
      <span class="token class-name"><span class="token keyword">float</span></span> scale <span class="token operator">=</span> goTemp<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localScale<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
      scale <span class="token operator">*=</span> scalingFactor<span class="token punctuation">;</span>
      goTemp<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localScale <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one <span class="token operator">*</span> scale<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>scale <span class="token operator">&lt;=</span> <span class="token number">0.1f</span><span class="token punctuation">)</span> <span class="token comment">// 如果尺寸小于 0.1f</span>
      <span class="token punctuation">{</span>
        removeList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>goTemp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 则添加到 removeList 中</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">GameObject</span> goTemp <span class="token keyword">in</span> removeList<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      gameObjectList<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>goTemp<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">Destroy</span><span class="token punctuation">(</span>goTemp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 销毁立方体游戏对象</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h3 id="函数与参数"><a href="#函数与参数" class="header-anchor">#</a> 函数与参数</h3> <h4 id="创建函数示例的项目"><a href="#创建函数示例的项目" class="header-anchor">#</a> 创建函数示例的项目</h4> <h4 id="函数的定语"><a href="#函数的定语" class="header-anchor">#</a> 函数的定语</h4> <h4 id="函数的形式参数和实际参数"><a href="#函数的形式参数和实际参数" class="header-anchor">#</a> 函数的形式参数和实际参数</h4> <h4 id="函数的返回值"><a href="#函数的返回值" class="header-anchor">#</a> 函数的返回值</h4> <h4 id="使用合适的函数名称"><a href="#使用合适的函数名称" class="header-anchor">#</a> 使用合适的函数名称</h4> <h4 id="什么情况下应该使用函数"><a href="#什么情况下应该使用函数" class="header-anchor">#</a> 什么情况下应该使用函数</h4> <h4 id="函数重载"><a href="#函数重载" class="header-anchor">#</a> 函数重载</h4> <p>函数重载用于参数类型不多的情况，如果较多的话则可以采用抽象思想，策略模式来处理。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>  <span class="token comment">// 下面两个函数在 this.parts 中按名称或游戏对象查找某个组件</span>
  <span class="token return-type class-name">Part</span> <span class="token function">FindPart</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> n<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">Part</span> prt <span class="token keyword">in</span> parts<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>prt<span class="token punctuation">.</span>name <span class="token operator">==</span> n<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">return</span> prt<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token return-type class-name">Part</span> <span class="token function">FindPart</span><span class="token punctuation">(</span><span class="token class-name">GameObject</span> go<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">Part</span> prt <span class="token keyword">in</span> parts<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>prt<span class="token punctuation">.</span>go <span class="token operator">==</span> go<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">return</span> prt<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="可选参数"><a href="#可选参数" class="header-anchor">#</a> 可选参数</h4> <h4 id="param-关键字"><a href="#param-关键字" class="header-anchor">#</a> param 关键字</h4> <h4 id="递归函数"><a href="#递归函数" class="header-anchor">#</a> 递归函数</h4> <h4 id="小结-20"><a href="#小结-20" class="header-anchor">#</a> 小结</h4> <h3 id="代码调试"><a href="#代码调试" class="header-anchor">#</a> 代码调试</h3> <h4 id="如何开始调试"><a href="#如何开始调试" class="header-anchor">#</a> 如何开始调试</h4> <h4 id="绑定或移除脚本时出现的错误"><a href="#绑定或移除脚本时出现的错误" class="header-anchor">#</a> 绑定或移除脚本时出现的错误</h4> <h4 id="使用调试器逐语句运行代码"><a href="#使用调试器逐语句运行代码" class="header-anchor">#</a> 使用调试器逐语句运行代码</h4> <h4 id="小结-21"><a href="#小结-21" class="header-anchor">#</a> 小结</h4> <h3 id="类"><a href="#类" class="header-anchor">#</a> 类</h3> <h4 id="理解类"><a href="#理解类" class="header-anchor">#</a> 理解类</h4> <h4 id="创建-enemy-类示例的项目"><a href="#创建-enemy-类示例的项目" class="header-anchor">#</a> 创建 Enemy 类示例的项目</h4> <p>Enemy</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Enemy</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> speed <span class="token operator">=</span> <span class="token number">10f</span><span class="token punctuation">;</span> <span class="token comment">// 移动速度，单位为米/秒</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> fireRate <span class="token operator">=</span> <span class="token number">0.3f</span><span class="token punctuation">;</span> <span class="token comment">// 射击次数/秒</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token class-name">Vector3</span> tempPos <span class="token operator">=</span> pos<span class="token punctuation">;</span>
    tempPos<span class="token punctuation">.</span>y <span class="token operator">-=</span> speed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
    pos <span class="token operator">=</span> tempPos<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnCollisionEnter</span><span class="token punctuation">(</span><span class="token class-name">Collision</span> coll<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token class-name">GameObject</span> other <span class="token operator">=</span> coll<span class="token punctuation">.</span>gameObject<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Hero&quot;</span><span class="token punctuation">:</span>
        <span class="token comment">// 暂未实现，但这用于消灭游戏主角</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;HeroLaser&quot;</span><span class="token punctuation">:</span>
        <span class="token comment">// 敌人被消灭</span>
        <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token comment">// 属性</span>
  <span class="token keyword">public</span> <span class="token return-type class-name">Vector3</span> pos
  <span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>




<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p>EnemyZig 子类</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnemyZig</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Enemy</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token class-name">Vector3</span> temPos <span class="token operator">=</span> pos<span class="token punctuation">;</span>
    temPos<span class="token punctuation">.</span>x <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>Time<span class="token punctuation">.</span>time <span class="token operator">*</span> Mathf<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
    pos <span class="token operator">=</span> temPos<span class="token punctuation">;</span>
    <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类中的 Move() 方法</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>警告：要特别小心竞态条件（Race Condition）竞态条件是指两件事事务之间存在依赖关系，但你不确定哪件事务发生在前。LateUpdate() 是 Unity 中另一个每帧都会调用的内置函数。在每帧中，Unity 首先调用绑定到游戏对象上的所有类的 <code>Update()</code> 函数，在所有 Update() 都执行完毕后，Unity 会调用所有对象上的 LateUpdate() 函数。所有，我们可以在 LateUpdate() 函数放置一些需要在 Update() 后执行的逻辑。</p> <h4 id="类的继承"><a href="#类的继承" class="header-anchor">#</a> 类的继承</h4> <h4 id="小结-22"><a href="#小结-22" class="header-anchor">#</a> 小结</h4> <h3 id="面向对象思维"><a href="#面向对象思维" class="header-anchor">#</a> 面向对象思维</h3> <h4 id="面向对象的比喻"><a href="#面向对象的比喻" class="header-anchor">#</a> 面向对象的比喻</h4> <h4 id="面向对象的-boids-实现方法"><a href="#面向对象的-boids-实现方法" class="header-anchor">#</a> 面向对象的 Boids 实现方法</h4> <h4 id="小结-23"><a href="#小结-23" class="header-anchor">#</a> 小结</h4> <h3 id="敏捷思维"><a href="#敏捷思维" class="header-anchor">#</a> 敏捷思维</h3> <h4 id="敏捷软件开发宣言"><a href="#敏捷软件开发宣言" class="header-anchor">#</a> 敏捷软件开发宣言</h4> <h4 id="scrum-方法论"><a href="#scrum-方法论" class="header-anchor">#</a> Scrum 方法论</h4> <h4 id="小结-24"><a href="#小结-24" class="header-anchor">#</a> 小结</h4> <h2 id="游戏原型实例和教程"><a href="#游戏原型实例和教程" class="header-anchor">#</a> 游戏原型实例和教程</h2> <h3 id="游戏原型-1：《拾苹果》"><a href="#游戏原型-1：《拾苹果》" class="header-anchor">#</a> 游戏原型 1：《拾苹果》</h3> <h4 id="数字化原型的目的"><a href="#数字化原型的目的" class="header-anchor">#</a> 数字化原型的目的</h4> <h4 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h4> <h5 id="摄像机设置"><a href="#摄像机设置" class="header-anchor">#</a> 摄像机设置</h5> <p>摄像机位置是游戏中最不能出错的内容之一。对于《拾苹果》游戏来说，我们希望摄像机显示一个适当大小的游戏区域。因为这个游戏的玩法完全是二维的，所以我们需要一个**正投影（Orthographic）**摄像机，而不是透视投影（Perspective）摄像机。关于这两种摄像机的投影方式，详见下面专栏。</p> <h5 id="正投影摄像机和透视投影摄像机的对比"><a href="#正投影摄像机和透视投影摄像机的对比" class="header-anchor">#</a> 正投影摄像机和透视投影摄像机的对比</h5> <p><strong>透视投影摄像机</strong>类似于人的眼睛；因为光线经过透镜成像，所以靠近摄像机的物体显得较大，而远离摄像机的物体显得较小。这给透视摄影摄像机一个平截头四棱锥体（像一个削去尖顶的四棱金字塔）的视野（也称投影）。要查看这种效果，请单击层级中的主摄像机，在场景面板中拉远镜头，从摄像机延伸出的金字塔状网格线的就是平截头体视野，表示摄像机的可视范围。</p> <p>对于<strong>正投影摄像机</strong>，物体与摄像机的距离不会影响它的大小。正投影摄像机的投影是一个长方体，而非平截头体。要查看这种效果，请在层级面板中选中摄像机，在检视面板中你找到 Camera 组件，将 Projection 属性从 Perspective 改为 Orthogonal。现在，灰色的视野范围将是一个三维矩形，而非金字塔形。</p> <p>有时候，需要将场景面板设置为正投影而非透视投影。做法是：单击场景面板右上角坐标轴手柄下方的 <code>&lt;Persp 字样&gt;</code>。单击这个字样会在透视和等轴（缩写为 Iso）场景视图间切换，等轴是正投影的同义词。</p> <h4 id="开始工作：绘图资源"><a href="#开始工作：绘图资源" class="header-anchor">#</a> 开始工作：绘图资源</h4> <h4 id="编写《拾苹果》游戏原型的代码"><a href="#编写《拾苹果》游戏原型的代码" class="header-anchor">#</a> 编写《拾苹果》游戏原型的代码</h4> <h4 id="让游戏中的运动基于时间"><a href="#让游戏中的运动基于时间" class="header-anchor">#</a> 让游戏中的运动基于时间</h4> <p>**让游戏中的运动基于时间，是指不管游戏的帧速率是多少，运动都保持恒定的速度。**通过 <code>Time.deltaTime</code> 可以实现这一点，因为它能告诉我们从上一帧到现在经历了多少时间。<code>Time.deltaTime</code> 通常非常小。对于 25fps （帧/秒）的游戏来说，<code>Time.deltaTime</code> 为 0.04f，即每帧的时间为 4/100 秒。如果这行代码以 25 fps 的速度运行，结果将解析为：</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> speed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1.0f</span> <span class="token operator">*</span> <span class="token number">0.04f</span><span class="token punctuation">;</span>
pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">0.04f</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>因此，在 1/25 秒的时间内，<code>pos.x</code> 将递增 0.04 米。在 1 秒内，<code>pos.x</code> 将增加为 <code>0.04 米/帧 * 25 帧</code>，即 1 米/秒。这相当于将运动速度设置为 <code>1 米/秒</code>。</p> <p>如果游戏以 <code>100 fps</code> 的帧速率运行，该行代码将解析为：</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> speed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1.0f</span> <span class="token operator">*</span> <span class="token number">0.01f</span><span class="token punctuation">;</span>
pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">0.01f</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>所以，在 1/100 秒时间里，<code>pos.x</code> 每帧将递增 0.01f 米。在 1 秒钟的时间里，<code>pos.x</code> 的增量为 <code>0.01 米/秒 * 100 帧</code>，合计 <code>1 米/秒</code>。</p> <p>不管游戏的帧速率如何，基于时间的运动都可以保证游戏元素以恒定速度运动，这样可以保证游戏在最新配置和老配置的计算机上都可以玩。基于时间的编程在编写移动设备上运行的游戏时非常重要，因为移动设备的配置变化得非常快。</p> <p>补充：</p> <ol><li><strong>帧率为 25fps，即一秒变化 25 次，而帧率为 100 fps，即一秒变化 100 次，虽然基于时间的运动速度是一样，但是帧率低的由于变化次数少，变化的速率太慢骗不过眼睛，会让玩家明显感觉画面卡顿不流畅。</strong></li> <li>对于根据帧率计算随机率时，如果放在 <code>Update()</code> 时在每帧进行一次计算会不准确，因此低帧率的概率明显低于高帧率的概率。所以在 Unity 需要把这些逻辑放在 <code>FixUpdate()</code> 函数里，它根据时间来执行。</li></ol> <h5 id="设置游戏对象图层"><a href="#设置游戏对象图层" class="header-anchor">#</a> 设置游戏对象图层</h5> <p>图层是指对象的分组，我们可以规定各组对象之间是否发生碰撞。如果苹果树和苹果放在两个不同的图层中，并在图层管理器中规定两个图层不发生碰撞，这样苹果和苹果树也不会再撞到一起了。</p> <h4 id="图形用户界面（gui）和游戏管理"><a href="#图形用户界面（gui）和游戏管理" class="header-anchor">#</a> 图形用户界面（GUI）和游戏管理</h4> <p>游戏的最后一件工作是 GUI 和游戏管理，使其更像是一个真正的游戏。</p> <h5 id="脚本间的调用"><a href="#脚本间的调用" class="header-anchor">#</a> 脚本间的调用</h5> <p>在未接住苹果时结束本回合并消除篮筐，可以让《拾苹果》感觉更像一个真正的游戏。这时，由 Apple 对象负责销毁自身，这没有问题，但是 Apple 需要以某种方式将该事件通知 ApplePicker 脚本，以便让 Apple Picker 可以结束本回合并销毁其余的苹果。这涉及脚本间的相互调用。</p> <p>Apple.cs</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Apple</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">float</span></span> bottomY <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20f</span><span class="token punctuation">;</span>

  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> bottomY<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 获取对哦主摄像机的 ApplePicker 组件的引用</span>
      <span class="token class-name">ApplePicker</span> apScript <span class="token operator">=</span> Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ApplePicker<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 调用 apScript 的 AppleDestroyed 方法</span>
      apScript<span class="token punctuation">.</span><span class="token function">AppleDestroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>ApplePicker.cs</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>SceneManagement</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplePicker</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> basketPrefab<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> numBaskets <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> basketBottomY <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">14f</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> basketSpacingY <span class="token operator">=</span> <span class="token number">2f</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> basketList<span class="token punctuation">;</span>

  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    basketList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numBaskets<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token class-name">GameObject</span> tBasketGO <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>basketPrefab<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span>
      <span class="token class-name">Vector3</span> pos <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
      pos<span class="token punctuation">.</span>y <span class="token operator">=</span> basketBottomY <span class="token operator">+</span> <span class="token punctuation">(</span>basketSpacingY <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      tBasketGO<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> pos<span class="token punctuation">;</span>
      basketList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tBasketGO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AppleDestroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 消除所有下落中的苹果</span>
    <span class="token class-name">GameObject<span class="token punctuation">[</span><span class="token punctuation">]</span></span> tAppleArray <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">FindGameObjectsWithTag</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">GameObject</span> tGo <span class="token keyword">in</span> tAppleArray<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">Destroy</span><span class="token punctuation">(</span>tGo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 消除一个篮筐</span>
    <span class="token comment">// 获取 basketList 中最后一个篮筐的序号</span>
    <span class="token class-name"><span class="token keyword">int</span></span> basketIndex <span class="token operator">=</span> basketList<span class="token punctuation">.</span>Count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 取得该篮筐的引用</span>
    <span class="token class-name">GameObject</span> tBasketGO <span class="token operator">=</span> basketList<span class="token punctuation">[</span>basketIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 从列表中清除该篮筐并销毁该游戏对象</span>
    basketList<span class="token punctuation">.</span><span class="token function">RemoveAt</span><span class="token punctuation">(</span>basketIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Destroy</span><span class="token punctuation">(</span>tBasketGO<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 重新开始游戏，HighScore.score 不会受影响</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>basketList<span class="token punctuation">.</span>Count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">//Application.LoadLevel(&quot;_Scene_0&quot;);</span>
      SceneManager<span class="token punctuation">.</span><span class="token function">LoadScene</span><span class="token punctuation">(</span><span class="token string">&quot;_Scene_0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h5 id="添加最高得分记录"><a href="#添加最高得分记录" class="header-anchor">#</a> 添加最高得分记录</h5> <ol><li><code>Awake()</code> 是 Unity 的内置方法（类似 <code>Start()</code> 或 <code>Update()</code>），在首次创建 HighScore 实例时运行（因此 <code>Awake()</code> 总在 <code>Start()</code> 之前发生）。</li> <li><code>PlayerPrefs</code> 是一个关键字和数值的字典，可以通过关键字（即独一无二的字符串）引用值。</li></ol> <h4 id="小结-25"><a href="#小结-25" class="header-anchor">#</a> 小结</h4> <p>图层使用步骤：</p> <p>1.设置图层，可以设置各种不同类型的游戏对象的交互，控制对象之间是否发生碰撞。</p> <ul><li>图层是指对象的分组，我们可以规定各组对象之间是否发生碰撞。如果苹果树和苹果放在两个不同的图层中，并在图层管理器中规定两个图层不发生碰撞，这样苹果和苹果树也不会再撞到一起了。</li></ul> <ol start="2"><li>然后可以通过物理器 <code>Physics</code> 进行编辑图层的碰撞交互规则了。</li> <li>定义好图层之后，就可以为游戏对象指定合适的图层了。</li> <li>添加碰撞事件处理逻辑。</li></ol> <p>通过图层可以设置哪些图层的游戏对象可以发生碰撞，然后在碰撞时通过标签找到相关的游戏对象，进行逻辑的处理。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTriggerEnter</span><span class="token punctuation">(</span><span class="token class-name">Collider</span> other<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 当其他物体撞到触发器时</span>
    <span class="token comment">// 检查是否是弹丸</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">&quot;Projectile&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果是弹丸</span>
      Goal<span class="token punctuation">.</span>goalMet <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token comment">// 同时将颜色的不透明度设置得更高</span>
      <span class="token class-name">Renderer</span> renderer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Color</span> c <span class="token operator">=</span> renderer<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
      renderer<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">=</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="游戏原型-2：《爆破任务》"><a href="#游戏原型-2：《爆破任务》" class="header-anchor">#</a> 游戏原型 2：《爆破任务》</h3> <h4 id="游戏原型概念"><a href="#游戏原型概念" class="header-anchor">#</a> 游戏原型概念</h4> <p>在本游戏中，玩家将使用弹弓把弹丸发射到一座城堡中，目标是炸掉城堡。每座城堡会有一个目标区域，弹丸需要碰到这些区域才能进入下一关。</p> <p>以下是我们希望看到的事件顺序：</p> <ol><li>当玩家的鼠标光标处于弹弓附近的特定区域内时，弹弓会发光。</li> <li>玩家在弹弓发光时按下鼠标左键（Unity 中的 button 0），会在鼠标光标位置出现一发弹丸。</li> <li>玩家按下鼠标并拖动时，弹丸会随鼠标移动，但会保持在弹弓的球状碰撞器内。</li> <li>在弹弓架的两个分叉到弹丸之间会出现两条白线，增加真实感。</li> <li>玩家松开鼠标左键时，弹弓会哦把弹丸发射出去。</li> <li>城堡位于几米之外，玩家的目标是让城堡倒下并砸到其中的特定区域。</li> <li>玩家要达到目标，可发射任意数量的弹丸。每发弹丸会哦留下一条轨迹，玩家可以在下一次发射时作为参考。</li></ol> <h4 id="绘图资源"><a href="#绘图资源" class="header-anchor">#</a> 绘图资源</h4> <p>如果一个游戏对象（例如 Base）是其他游戏对象的子对象，当修改它的变换组件时，使用的是局部坐标，即设置 Base 相对于其父对象 Slingshot 的相对位置，而不是 Base 在游戏全局世界坐标的位置。</p> <p>当碰撞器的 Is Trigger 为 true 时，它被称作触发器。在 Unity 中，触发器是物理模拟的构建之一，当其他碰撞器或触发器穿过时，触发器可以发出通知信息。但是，其他对象不会被触发器弹开，这一点有别于普通的碰撞器。我们将使用这个触发器处理弹弓的鼠标交互。</p> <h4 id="编写游戏原型的代码"><a href="#编写游戏原型的代码" class="header-anchor">#</a> 编写游戏原型的代码</h4> <p>在你创建自己的代码时，这是一个很好的方式：实现一个容易编写的小功能并测试，然后再实现另一个小功能。</p> <h5 id="slingshot-类"><a href="#slingshot-类" class="header-anchor">#</a> Slingshot 类</h5> <p>鼠标移入移出</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>  <span class="token comment">//  OnMouseEnter 和 OnMouseExit 需要添加 collider 组件，并且 isTrigger = false</span>
  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnMouseEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//print(&quot;Slingshot: OnMouseEnter()&quot;);</span>
    launchPoint<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnMouseExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//print(&quot;Slingshot: OnMouseExit()&quot;);</span>
    launchPoint<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>游戏对象的 <code>SetActive()</code> 方法可以让游戏渲染或忽视该游戏对象。如果游戏对象的 <code>active</code> 属性设置为 <code>false</code>，它就不会显示在屏幕上，也不会接受 <code>Update()</code> 或 <code>OnCollisionEnter()</code> 等任何函数调用。这时，游戏对象并没有销毁，它只是未激活。在游戏对象的检视面板中，顶部游戏对象名称左侧的复选框代表了游戏的激活状态。</p> <p><u>游戏对象的组件也有类似的复选框，它表示该组件是否已启用。</u>对于大多数组件（例如渲染器 Renderer 和【碰撞器 Collider），可以通过代码设置其是否启用（例如 <code>Renderer.Enabled = false</code>），但出于某种原因，<code>Halo</code> 组件在 Unity 中不可访问，<u>也就是说，我们不能通过 C# 脚本操作 Halo 组件。在 Unity 中，你会时不时地遇到这类问题，你需要换一种方法解决。在这里，我们不能禁用 Halo，所以我们转而停用包含该组件的游戏对象。</u></p> <h5 id="实例化一个弹丸"><a href="#实例化一个弹丸" class="header-anchor">#</a> 实例化一个弹丸</h5> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Slingshot</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">Slingshot</span> S<span class="token punctuation">;</span> <span class="token comment">// FollowCam 的单例对象</span>
  <span class="token comment">// 在 Unity 检视面板中设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> prefabProjectile<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> velocityMult <span class="token operator">=</span> <span class="token number">4f</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> ______________________<span class="token punctuation">;</span>

  <span class="token comment">// 动态设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> launchPoint<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> launchPos<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> projectile<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> aimingMode<span class="token punctuation">;</span>


  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    S <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    launchPoint <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token string">&quot;LaunchPoint&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchPoint <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      launchPoint<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      launchPos <span class="token operator">=</span> launchPoint<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Transform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>position<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 如果弹弓未处于瞄准模（aimingMode），则跳过以下代码</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>aimingMode<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取鼠标光标在二维窗口中的坐标</span>
    <span class="token class-name">Vector3</span> mousePos2D <span class="token operator">=</span> Input<span class="token punctuation">.</span>mousePosition<span class="token punctuation">;</span>
    <span class="token comment">// 将鼠标光标位置转换为三维世界坐标</span>
    mousePos2D<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token operator">-</span>Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
    <span class="token class-name">Vector3</span> mousePos3D <span class="token operator">=</span> Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">ScreenToWorldPoint</span><span class="token punctuation">(</span>mousePos2D<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 计算 launchPos 到 mousePos3D 两点之间的坐ba差</span>
    <span class="token class-name">Vector3</span> mouseDelta <span class="token operator">=</span> mousePos3D <span class="token operator">-</span> launchPos<span class="token punctuation">;</span>

    <span class="token comment">// 将坐标差限制在弹弓的球状碰撞器半径范围内</span>
    <span class="token class-name"><span class="token keyword">float</span></span> maxMagnitude <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SphereCollider<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>radius<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mouseDelta<span class="token punctuation">.</span>magnitude <span class="token operator">&gt;</span> maxMagnitude<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      mouseDelta<span class="token punctuation">.</span><span class="token function">Normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保持 MouseDelta 方向不变将它长度变为1</span>
      mouseDelta <span class="token operator">*=</span> maxMagnitude<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将 projectitle 移动到新位置</span>
    <span class="token class-name">Vector3</span> projPos <span class="token operator">=</span> launchPos <span class="token operator">+</span> mouseDelta<span class="token punctuation">;</span>
    projectile<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> projPos<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButtonUp</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果已经公开鼠标</span>
      aimingMode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      projectile<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isKinematic <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      projectile<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> <span class="token operator">-</span>mouseDelta <span class="token operator">*</span> velocityMult<span class="token punctuation">;</span>
      FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi <span class="token operator">=</span> projectile<span class="token punctuation">;</span> <span class="token comment">// 同步摄像机兴趣点</span>
      projectile <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      MissionDemolition<span class="token punctuation">.</span><span class="token function">ShotFired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 增加发射次数</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//  OnMouseEnter 和 OnMouseExit 需要添加 collider 组件，并且 isTrigger = false</span>
  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnMouseEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//print(&quot;Slingshot: OnMouseEnter()&quot;);</span>
    launchPoint<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnMouseExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//print(&quot;Slingshot: OnMouseExit()&quot;);</span>
    launchPoint<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  `
  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnMouseDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 玩家在鼠标光标悬停在弹弓上方时按下了鼠标左键</span>
    aimingMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 实例化一个弹丸</span>
    projectile <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>prefabProjectile<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span>
    <span class="token comment">// 该实例的初始位置位于 launchPoint 处</span>
    projectile<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> launchPos<span class="token punctuation">;</span>
    <span class="token comment">// 设置当前的 Kinematic 属性</span>
    projectile<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isKinematic <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>`

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><ol><li>这里首先要注意的是 Slingshot 类代码最上方的附加字段（即变量）。有个全局布尔类型变量看起来特别奇怪：*<strong>*****</strong>__*<strong>*****</strong>。这个变量用于一种非常特殊的目的：<u>在检视面板中，它是 Slingshot 脚本组件的分隔线，它的上方是需要在检视面板中设置的变量，下方是在游戏运行时通过代码动态设置的变量。</u>因为在 Unity 检视面板中，序列化的全局变量是按其声明顺序排列的，所以在检视面板中，<u>由下划线构成的布尔型变量可以充当预先设置变量和动态设置变量的分隔线。</u></li> <li>当 Rigidbody 为运动学刚体（即 <code>isKinematic == true</code>）时，对象的运动不会自动遵循物流源流，但仍然属于物理模拟的构成部分（即刚体的运动不会收到碰撞和重力的影响，但仍然会影响其他非运动学刚体的运动）。</li> <li>向量加减运算是将各向量分别相加减。图中以二维向量为例，但三维向量也适用同样的方法。向量 A 和 B 的 x、y 分别相减，得到一个新的二维向量（2-5，8-3），即（-3，5）。<u>图中演示的 A-B 得到的是 A 和 B 之间的向量距离，同时也是从点 B 移动到点 A 所移动的方向和距离。</u>为方便记忆，可写为 AMBLAA（A Minus B Looks At A，即向量 A-B 的方向为指向 A 点）。</li></ol> <p><u>这在 <code>Update()</code> 方法中非常重要，因为弹丸需要位于从 launchPos 出发指向当前鼠标光标位置的向量之上，这一向量称作 mouseDelta。</u></p> <p><img src="/Notebook/assets/img/vector-calculation.0776b9da.png" alt=""></p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code> <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 如果弹弓未处于瞄准模（aimingMode），则跳过以下代码</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>aimingMode<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取鼠标光标在二维窗口中的坐标</span>
    <span class="token class-name">Vector3</span> mousePos2D <span class="token operator">=</span> Input<span class="token punctuation">.</span>mousePosition<span class="token punctuation">;</span>
    <span class="token comment">// 将鼠标光标位置转换为三维世界坐标</span>
    mousePos2D<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token operator">-</span>Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
    <span class="token class-name">Vector3</span> mousePos3D <span class="token operator">=</span> Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">ScreenToWorldPoint</span><span class="token punctuation">(</span>mousePos2D<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 计算 launchPos 到 mousePos3D 两点之间的坐ba差</span>
    <span class="token class-name">Vector3</span> mouseDelta <span class="token operator">=</span> mousePos3D <span class="token operator">-</span> launchPos<span class="token punctuation">;</span>

    <span class="token comment">// 将坐标差限制在弹弓的球状碰撞器半径范围内</span>
    <span class="token class-name"><span class="token keyword">float</span></span> maxMagnitude <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SphereCollider<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>radius<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mouseDelta<span class="token punctuation">.</span>magnitude <span class="token operator">&gt;</span> maxMagnitude<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      mouseDelta<span class="token punctuation">.</span><span class="token function">Normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保持 MouseDelta 方向不变将它长度变为1</span>
      mouseDelta <span class="token operator">*=</span> maxMagnitude<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将 projectitle 移动到新位置</span>
    <span class="token class-name">Vector3</span> projPos <span class="token operator">=</span> launchPos <span class="token operator">+</span> mouseDelta<span class="token punctuation">;</span>
    projectile<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> projPos<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="自动跟踪摄像机"><a href="#自动跟踪摄像机" class="header-anchor">#</a> 自动跟踪摄像机</h5> <p>在弹丸发射以后，我们需要让<u>主摄像机（_Main Camera）跟踪它</u>，但是摄像机的行为还要更为复杂一些。对摄像机行为的完整描述如下：</p> <ol><li>弹弓处于瞄准状态（aimingMode == true），摄像机固定于初始位置。</li> <li>弹丸发射之后，摄像机跟踪它（加一些平滑效果使画面更流畅）。</li> <li>摄像机随弹丸移到空中之后，要增加 <code>Camera.orthographiceSize</code>，使地面（Ground）始终保持在画面底部。</li> <li>当弹丸停止运动之后，摄像机停止跟踪并返回到初始位置。</li></ol> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FollowCam</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">FollowCam</span> S<span class="token punctuation">;</span> <span class="token comment">// FollowCam 的单例对象</span>
  <span class="token comment">// 在 unity 检视面板中设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> easing <span class="token operator">=</span> <span class="token number">0.05f</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector2</span> minXY<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> _______________________________<span class="token punctuation">;</span>

  <span class="token comment">// 动态设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> poi<span class="token punctuation">;</span> <span class="token comment">// 兴趣点</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> camZ<span class="token punctuation">;</span> <span class="token comment">// 摄像机的 Z 坐标</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    S <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    camZ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">;</span> <span class="token comment">// 摄像机初始 z 坐标</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">FixedUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token class-name">Vector3</span> destination<span class="token punctuation">;</span>
    <span class="token comment">// 如果兴趣点（poi）不存在，返回 P: [0, 0, 0]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>poi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      destination <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>

      <span class="token comment">// 获取兴趣点的位置</span>
      destination <span class="token operator">=</span> poi<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>

      <span class="token comment">// 如果兴趣点是一个 Projectile 实例，检查它是否已经静止</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">&quot;Projectile&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//print(poi.GetComponent&lt;Rigidbody&gt;().IsSleeping());</span>
        <span class="token comment">// 如果它处于 sleeping 状态（即未移动）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsSleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// 返回默认视图</span>
          poi <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
          <span class="token comment">// 在下一次更新</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 限定 x 和 y 的最小值</span>
    destination<span class="token punctuation">.</span>x <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>minXY<span class="token punctuation">.</span>x<span class="token punctuation">,</span> destination<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    destination<span class="token punctuation">.</span>y <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>minXY<span class="token punctuation">.</span>y<span class="token punctuation">,</span> destination<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在摄像机当前位置和目标位置之间增添插值</span>
    destination <span class="token operator">=</span> Vector3<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> destination<span class="token punctuation">,</span> easing<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 保持 destination.z 的值为 camZ</span>
    destination<span class="token punctuation">.</span>z <span class="token operator">=</span> camZ<span class="token punctuation">;</span>
    <span class="token comment">// 将摄像机设置到 destination</span>
    transform<span class="token punctuation">.</span>position <span class="token operator">=</span> destination<span class="token punctuation">;</span>
    <span class="token comment">// 设置摄像机的 orthographicSize，使地面始终处于画面之中</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Camera<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>orthographicSize <span class="token operator">=</span> destination<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>


  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//if (poi == null) return;</span>

    <span class="token comment">//// 获取兴趣点的位置</span>
    <span class="token comment">//Vector3 destination = poi.transform.position;</span>
    <span class="token comment">//// 在摄像机当前位置和目标位置之间增添插值</span>
    <span class="token comment">//destination = Vector3.Lerp(transform.position, destination, easing);</span>
    <span class="token comment">//// 保持 destination.z 的值为 camZ</span>
    <span class="token comment">//destination.z = camZ;</span>
    <span class="token comment">//// 将摄像机设置到 destination</span>
    <span class="token comment">//transform.position = destination;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div><p>首先，你会注意到在 FollowCam 代码的最上方是单例对象 S。“单例模式是一种设计模式，用于游戏中只存在唯一实例的类。”因为 Mission Demolition 游戏中只有一个摄像机，所以很适合使用单例模式。作为一个全局静态变量，单例对象 S 可以在代码任何位置通过 <code>FollowCam.S</code> 访问，这样我们可以随时通过 <code>FollowCam.S.poi</code> 设置全局字段 poi。</p> <p>你可能会注意到下面一些问题：</p> <p>A. 如果把场景面板拉得足够远，你会看到弹丸实际上已经飞出了地面的尽头。</p> <p>B. 如果朝向地面发射，你会看到弹丸在撞到地面以后既不反弹也不停下来。如果你在发射后按下暂停键，在层级面板中选中 Projectile，然后结束暂停，你会看到它在撞到地面上会无休止地向前滚动。</p> <p>C. 当弹丸刚发射时，摄像机会跳到 Projectile 的位置，看起来有些突兀。</p> <p>D. 弹丸到达一定高度之后，画面上只能看到天空，很难看出它的高度。</p> <ol><li>首先，要解决问题 A，可以把 Ground 的变换组件修改为 P:[100, -10, 0] R:[0, 0, 0] S:[400, 1, 1]。</li> <li>要解决问题 B，<u>需要为弹丸添加刚体约束和物理材质（Physic Material）。</u>请在项目面板中选择 Projectile 预设，单击 Rigidbody 组件左侧的三角形展开按钮，勾选 Freeze Position（冻结位置）z 和 Freeze Rotation（冻结旋转轴）x，y，z。Freeze Position z 可以冻结弹丸的 z 坐标，使它不会朝向摄像机移动或远离摄像机（使它与地面依旧将来要添加的城堡处于相同的 z 深度）。</li></ol> <p>这里，你还需要从<u>Collision Detection（碰撞检测）下拉菜单中选择 Continuous（连续）</u>。若想深入了解碰撞检测的类型，你可以单击 Rigidbody 组件右上角的帮助图标查看帮助文件。简而言之，<u>连续碰撞检测比 Discrete （非连续）更加耗费 CPU 资源，但能够更精确地处理快速移动的物体，例如这里的 Projectile。</u></p> <ol start="3"><li><u>这些刚体组件设置可以防止弹丸无休止地滚动下去，但是感觉仍然不真实。</u>你生活中一直在体验物理运动，你可以从中直观地感受到哪些行为更像自然、真实世界的物理运动。对于玩家来说，同样如此。也就是说，<u>尽管物理是一个需要大量数学建模的复杂系统，但如果你能让游戏中你的物理符合玩家的习惯，你就不必向他们解释太多数学原理。</u></li></ol> <p>为你的物理模拟对象添加一种物理材质，可以让它感觉更为真实。请在菜单栏中执行资源（Assets）-&gt; 创建（Create）-&gt; 物理材质（Physis Material）命令。将其应用到 <u>Projectile.ShereCollider</u>。选中 Projectile 预设，就能在检视面板中看到 PMat_projectile 已经赋给了球状碰撞器的材质。现在再单击播放按钮，你会看到弹丸在你触地之后会反弹起来，而不再是向前滑动。</p> <ol start="4"><li>问题 C 可以通过两种方法共同解决：通过插值使画面更平滑，并对摄像机位置加以限制.</li></ol> <p><u><code>Vector3.Lerp()</code> 方法返回两点之间的一个线性插值位置，取两点位置的加权平均值。</u>如果第三个参数 easing 的值为 0，<code>Lerp()</code> 会返回第一个参数（transform.position）的位置；如果 easing 的值为 1，<code>Lerp()</code> 将返回第二个参数（destination）的位置；如果 easing 值在 0 到 1 之间，则 <code>Lerp()</code> 返回值将位于两点之间（当 easing 为 0.5 时，返回两点的中点）。<u>这里让 easing = 0.05，告诉 Unity 让摄像机从当前位置将向兴趣点位置移动，每帧移动 5% 的距离。因为兴趣点的位置在持续移动，所以我哦们会得到一个平滑的摄像机跟踪运动。</u>请尝试使用不同的 easing 值，看看该值如何影响摄像机运动。这是一种非常简单的线性插值方法，并非是基于时间的。</p> <ol start="5"><li><p>即使有了上述平滑措施，你可能仍然感觉摄像机的运动有些卡顿和不稳定。<u>这是因为物理模拟的更新频率在 50 fps，而 <code>Update()</code> 则是以计算机能够达到的最高帧率调用的。在运行速度较快的计算机上，摄像机的更新频率远大于物理模拟，</u>这样一来，每次在弹丸的位置改变之前，摄像机的位置已经更新了数次。<u>要解决这一问题，将 <code>Update()</code> 方法的名称改为 <code>FixUpdate()</code>。<code>Update()</code> 中的代码每帧都会运行一次，而 <code>FixedUpdate()</code> 中的代码则是每个物理模拟帧运行一次（50fps），不论计算机速度如何。</u>修改完毕之后，跟踪摄像机的卡顿现象将会得到解决。</p></li> <li><p>现在，我们为跟踪摄像机的位置添加一些限制。</p></li></ol> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code> <span class="token comment">// 限定 x 和 y 的最小值</span>
 destination<span class="token punctuation">.</span>x <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>minXY<span class="token punctuation">.</span>x<span class="token punctuation">,</span> destination<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
 destination<span class="token punctuation">.</span>y <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>minXY<span class="token punctuation">.</span>y<span class="token punctuation">,</span> destination<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="7"><li>问题 D 可以通过动态调整摄像机的 orthographicSize 来解决。</li></ol> <h5 id="相对运动错觉和速度感"><a href="#相对运动错觉和速度感" class="header-anchor">#</a> 相对运动错觉和速度感</h5> <p>跟踪摄像机运动现在已经可以完美工作了，但仍然很难感觉出弹丸的运动快慢，当它在空中飞行的时候更是如此。<u>要解决这一问题，我们需要利用到相对运动错觉的概念。相对运动错觉是由于周围物体快速经过而造成运动感，在二维游戏中的视差滚动就是基于这一原理。在二维游戏中，视差滚动为使前景物体快速经过，而让背景物体以更慢的速度相对于主摄像机移动。</u></p> <p>绘制云朵</p> <ol><li>移除球状碰撞器</li> <li>新建一个材质，添加 Shader（着色器）组件旁边的下拉菜单中执行 Self-Illiumin（自发光） &gt; Diffuse （漫射光命令）。这个着色器是自发光的（它自身会发光），同时也会响应场景中的平行光。</li> <li>添加一个空对象，把云朵子对象放置进去。</li></ol> <p>新建一个名为 CloudCrafter 的脚本，将它拖放到 __Scripts 文件夹中并拖放到 _Main Camera 上。这会为 _Main Camera 添加第二个脚本组件，<u>在 Unity 中，只要两个脚本不互相冲突（例如，不会在每一帧设置同一游戏对象的位置），这样做没有任何问题。因为 FllowCam 脚本负责移动摄像机，而 CloudCrafter 脚本负责在空中摆放云朵，二者不会发生任何冲突。</u></p> <p>CloudCrafter.cs</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CloudCrafter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>

  <span class="token comment">// 在 unity 检视面板设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> numClouds <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token comment">// 要创建云朵的数量</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject<span class="token punctuation">[</span><span class="token punctuation">]</span></span> cloudPrefabs<span class="token punctuation">;</span> <span class="token comment">// 云朵预设的数组</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> cloudPosMin<span class="token punctuation">;</span> <span class="token comment">// 云朵位置的下限</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> cloudPosMax<span class="token punctuation">;</span> <span class="token comment">// 云朵位置的上限</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> cloudScaleMin <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//云朵的最小缩放比例</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> cloudScaleMax <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 云朵的最大缩放比例</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> cloudSpeedMult <span class="token operator">=</span> <span class="token number">0.5f</span><span class="token punctuation">;</span> <span class="token comment">// 调整云朵速度</span>

  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> _____________________<span class="token punctuation">;</span>
  <span class="token comment">// 在代码中动态设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject<span class="token punctuation">[</span><span class="token punctuation">]</span></span> cloudInstances<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个 cloudInstances 数组，用于存储所有云朵的实例</span>
    cloudInstances <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">[</span>numClouds<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 查找 CloudAnchor 父对象</span>
    <span class="token class-name">GameObject</span> anchor <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token string">&quot;CloudAnchor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 遍历 Cloud[数字]并创建实例</span>
    <span class="token class-name">GameObject</span> cloud<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numClouds<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 在 0 到 cloudPrefabs.Length - 1 之间选择一个整数</span>
      <span class="token comment">// Random.Range 返回值中不包含范围上限</span>
      <span class="token class-name"><span class="token keyword">int</span></span> prefabNum <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cloudPrefabs<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 创建一个实例</span>
      cloud <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>cloudPrefabs<span class="token punctuation">[</span>prefabNum<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span>

      <span class="token comment">// 设置云朵位置</span>
      <span class="token class-name">Vector3</span> cPos <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
      cPos<span class="token punctuation">.</span>x <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span>cloudPosMin<span class="token punctuation">.</span>x<span class="token punctuation">,</span> cloudPosMax<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
      cPos<span class="token punctuation">.</span>y <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span>cloudPosMin<span class="token punctuation">.</span>y<span class="token punctuation">,</span> cloudPosMax<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 设置云朵缩放比例</span>
      <span class="token class-name"><span class="token keyword">float</span></span> scaleU <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">;</span>
      <span class="token class-name"><span class="token keyword">float</span></span> scaleVal <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span>cloudScaleMin<span class="token punctuation">,</span> cloudScaleMax<span class="token punctuation">,</span> scaleU<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 较小的云朵（即 scaleU 值较小）离地面较近</span>
      cPos<span class="token punctuation">.</span>y <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span>cloudPosMin<span class="token punctuation">.</span>y<span class="token punctuation">,</span> cPos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> scaleU<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 较小的云朵距离较远</span>
      cPos<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">-</span> <span class="token number">90</span> <span class="token operator">*</span> scaleU<span class="token punctuation">;</span>
      <span class="token comment">// 将上述变换数值应用到云朵</span>
      cloud<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> cPos<span class="token punctuation">;</span>
      cloud<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localScale <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one <span class="token operator">*</span> scaleVal<span class="token punctuation">;</span>

      <span class="token comment">// 使云朵成为 CloudAnchor 的子对象</span>
      cloud<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>parent <span class="token operator">=</span> anchor<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
      <span class="token comment">// 将云朵添加到 CloudInstances 数组中</span>
      cloudInstances<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> cloud<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 遍历所有已创建的云朵</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">GameObject</span> cloud <span class="token keyword">in</span> cloudInstances<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 获取云朵的缩放比例和位置</span>
      <span class="token class-name"><span class="token keyword">float</span></span> scaleVal <span class="token operator">=</span> cloud<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localScale<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
      <span class="token class-name">Vector3</span> cPos <span class="token operator">=</span> cloud<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
      <span class="token comment">// 云朵越大，移动速度越快</span>
      cPos<span class="token punctuation">.</span>x <span class="token operator">-=</span> scaleVal <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime <span class="token operator">*</span> cloudSpeedMult<span class="token punctuation">;</span>
      <span class="token comment">// 如果云朵已经位于面板左侧较远位置</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cPos<span class="token punctuation">.</span>x <span class="token operator">&lt;=</span> cloudPosMin<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 则将它放置到最右侧</span>
        cPos<span class="token punctuation">.</span>x <span class="token operator">=</span> cloudPosMax<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 将新位置应用到云朵上</span>
      cloud<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> cPos<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><h5 id="创建城堡"><a href="#创建城堡" class="header-anchor">#</a> 创建城堡</h5> <ol><li>单击坐标轴小手柄 z 轴反方向的箭头，使场景面板切换到正投影视图的后视图。</li></ol> <h5 id="返回弹弓画面进行另一次发射"><a href="#返回弹弓画面进行另一次发射" class="header-anchor">#</a> 返回弹弓画面进行另一次发射</h5> <p>有了要击倒的城堡，现在需要添加更多游戏逻辑。当弹丸静止之后，摄像机应返回到弹弓的位置：</p> <ol><li>首先，<u>应该为 Projectile 预设添加一个 Projectile 标签。</u>在项目面板中选中 Projectile 预设，在检视面板中，点开 Tag 旁边的下拉菜单并选择 Add Tag（添加标签）。单击 Tags 旁边的三角形展开按钮，在 Element0 中输入 Projectile。再次在项目面板中点击 Projectile 预设，从检视面板中更新后的 Tag 列表中选中你 Projectile，为它添加标签。</li> <li>打开 Follow Cam 脚本，修改以下代码行：</li></ol> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">FixedUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token class-name">Vector3</span> destination<span class="token punctuation">;</span>
    <span class="token comment">// 如果兴趣点（poi）不存在，返回 P: [0, 0, 0]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>poi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      destination <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>

      <span class="token comment">// 获取兴趣点的位置</span>
      destination <span class="token operator">=</span> poi<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>

      <span class="token comment">// 如果兴趣点是一个 Projectile 实例，检查它是否已经静止</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">&quot;Projectile&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//print(poi.GetComponent&lt;Rigidbody&gt;().IsSleeping());</span>
        <span class="token comment">// 如果它处于 sleeping 状态（即未移动）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsSleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// 返回默认视图</span>
          poi <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
          <span class="token comment">// 在下一次更新</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="为弹丸添加轨迹"><a href="#为弹丸添加轨迹" class="header-anchor">#</a> 为弹丸添加轨迹</h5> <p>尽管 Unity 中确实有自带的轨迹渲染器（Trail Renderer）效果，但它不能达到我们所要实现的目标，因为我们需要对轨迹进行更多控制。这里，我们将在 <u>Line Renderer（线渲染器）组件的基础之上建立轨迹渲染器：</u></p> <ol><li><p>首先建立一个空白游戏对象，将其命名为 ProjectileLine，为其添加一个轨迹渲染器组件（执行 Components &gt; Effects &gt; Line Renderer 命令）。</p></li> <li><p>ProjectileLine.cs</p></li></ol> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProjectileLine</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">ProjectileLine</span> S<span class="token punctuation">;</span> <span class="token comment">// 单例对象</span>
  <span class="token comment">// 在 Unity 检视面板中设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> minDist <span class="token operator">=</span> <span class="token number">0.1f</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> _____________________________________<span class="token punctuation">;</span>

  <span class="token comment">// 在代码中动态设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name">LineRenderer</span> line<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">GameObject</span> _poi<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>Vector3<span class="token punctuation">&gt;</span></span> points<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    S <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 设置单例对象</span>
    <span class="token comment">// 获取对线渲染器（LineRennderer）的引用</span>
    line <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>LineRenderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 在需要使用 LineRenderer 之前，将其禁用</span>
    line<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化三维向量点的 List</span>
    points <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Vector3<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 这是一个属性，即伪装成字段的方法</span>
  <span class="token keyword">public</span> <span class="token return-type class-name">GameObject</span> poi
  <span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>_poi<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span>
    <span class="token punctuation">{</span>
      _poi <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>_poi <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 当把 _poi 设置为新对象时，将复位其所有内容</span>
        line<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        points <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Vector3<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">AddPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 这个函数用于直接清除线条</span>
  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    _poi <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    line<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    points <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Vector3<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AddPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>_poi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 用于在线条上添加一个点，记录发射点的位置</span>
    <span class="token class-name">Vector3</span> pt <span class="token operator">=</span> _poi<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>points<span class="token punctuation">.</span>Count <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>pt <span class="token operator">-</span> lastPoint<span class="token punctuation">)</span><span class="token punctuation">.</span>magnitude <span class="token operator">&lt;</span> minDist<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果该点与上一个点的位置不够远，则返回</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>points<span class="token punctuation">.</span>Count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果当前是发射点</span>
      <span class="token class-name">Vector3</span> launchPos <span class="token operator">=</span> Slingshot<span class="token punctuation">.</span>S<span class="token punctuation">.</span>launchPoint<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
      <span class="token class-name">Vector3</span> launchPosDiff <span class="token operator">=</span> pt <span class="token operator">-</span> launchPos<span class="token punctuation">;</span>
      <span class="token comment">// ... 则添加一根线条，帮助之后瞄准</span>
      points<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>pt <span class="token operator">+</span> launchPosDiff<span class="token punctuation">)</span><span class="token punctuation">;</span>
      points<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>pt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      line<span class="token punctuation">.</span>positionCount <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置两个点，两点形成一条直线</span>
      line<span class="token punctuation">.</span><span class="token function">SetPosition</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      line<span class="token punctuation">.</span><span class="token function">SetPosition</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 启动线渲染器</span>
      line<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 正常添加点的操作</span>
      points<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>pt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置线段的端点数</span>
      line<span class="token punctuation">.</span>positionCount <span class="token operator">=</span> points<span class="token punctuation">.</span>Count<span class="token punctuation">;</span>
      <span class="token comment">// 两点确定一条直线，所以我们没刷新一次，依次绘制一点就可以形成线段了</span>
      line<span class="token punctuation">.</span><span class="token function">SetPosition</span><span class="token punctuation">(</span>points<span class="token punctuation">.</span>Count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> lastPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
      line<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 返回最近添加的点的位置</span>
  <span class="token keyword">public</span> <span class="token return-type class-name">Vector3</span> lastPoint
  <span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>points <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 如果当前还没有点，返回 Vector3.zero</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>points<span class="token punctuation">[</span>points<span class="token punctuation">.</span>Count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Use this for initialization</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">FixedUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>poi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果兴趣点不存在，则找出一个</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">&quot;Projectile&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          poi <span class="token operator">=</span> FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 如果未找到兴趣点，则返回</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
    <span class="token comment">// 如果存在兴趣点，则在 FixedUpdate 中在其位置上增加一个点</span>
    <span class="token function">AddPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsSleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 当兴趣点静止时，将其清空（设置为 null）</span>
      poi <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br></div></div><p><strong>参考资料</strong></p> <ul><li><a href="https://gameinstitute.qq.com/community/detail/126849" target="_blank" rel="noopener noreferrer">Unity 中 lineRenderer 的使用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h5 id="击中目标"><a href="#击中目标" class="header-anchor">#</a> 击中目标</h5> <p>被弹丸击中后，城堡的目标需要做出响应：</p> <ol><li>创建一个名为 Goal 的脚本，将其绑定到 Goal 预设上。在 Goal 脚本中输入以下代码：</li></ol> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Goal</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token comment">// 可在代码任意位置访问的静态字段</span>
  <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> goalMet <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTriggerEnter</span><span class="token punctuation">(</span><span class="token class-name">Collider</span> other<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 当其他物体撞到触发器时</span>
    <span class="token comment">// 检查是否是弹丸</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">&quot;Projectile&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果是弹丸</span>
      Goal<span class="token punctuation">.</span>goalMet <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token comment">// 同时将颜色的不透明度设置得更高</span>
      <span class="token class-name">Renderer</span> renderer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Color</span> c <span class="token operator">=</span> renderer<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
      renderer<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">=</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="添加更多难度级别和游戏逻辑"><a href="#添加更多难度级别和游戏逻辑" class="header-anchor">#</a> 添加更多难度级别和游戏逻辑</h4> <p>游戏状态管理</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>
<span class="token comment">// 游戏状态管理</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">GameMode</span>
<span class="token punctuation">{</span>
  idle<span class="token punctuation">,</span>
  playing<span class="token punctuation">,</span>
  levelEnd
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MissionDemolition</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>

  <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">MissionDemolition</span> S<span class="token punctuation">;</span> <span class="token comment">// 单例对象</span>
  <span class="token comment">// 在 Unity 检视面板中设置的字段</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject<span class="token punctuation">[</span><span class="token punctuation">]</span></span> castles<span class="token punctuation">;</span> <span class="token comment">// 存储所有城堡对象的数组</span>
  <span class="token keyword">public</span> <span class="token class-name">Text</span> gtLevel<span class="token punctuation">;</span> <span class="token comment">// GT_Level 界面文字</span>
  <span class="token keyword">public</span> <span class="token class-name">Text</span> gtScore<span class="token punctuation">;</span> <span class="token comment">// GT_Score 界面文字</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> castlePos<span class="token punctuation">;</span> <span class="token comment">// 放置城堡的位置</span>

  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> _____________________________<span class="token punctuation">;</span>

  <span class="token comment">// 在代码中动态设置的变量</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> level<span class="token punctuation">;</span> <span class="token comment">// 当前级别</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> levelMax<span class="token punctuation">;</span> <span class="token comment">// 级别的数量</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> shotsTaken<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> castle<span class="token punctuation">;</span> <span class="token comment">// 当前城堡</span>
  <span class="token keyword">public</span> <span class="token class-name">GameMode</span> mode <span class="token operator">=</span> GameMode<span class="token punctuation">.</span>idle<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> showing <span class="token operator">=</span> <span class="token string">&quot;Slingshot&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 摄像机的模式</span>

  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    S <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 定义单例对象</span>
    level <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    levelMax <span class="token operator">=</span> castles<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
    <span class="token function">StartLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token function">ShowGT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 检查是否已完成该级别</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">==</span> GameMode<span class="token punctuation">.</span>playing <span class="token operator">&amp;&amp;</span> Goal<span class="token punctuation">.</span>goalMet<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 当完成级别时，改变 mode，停止检查</span>
      mode <span class="token operator">=</span> GameMode<span class="token punctuation">.</span>levelEnd<span class="token punctuation">;</span>
      <span class="token comment">// 缩写画面比例</span>
      <span class="token function">SwitchView</span><span class="token punctuation">(</span><span class="token string">&quot;Both&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 在2秒后开始下一级别</span>
      <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token string">&quot;NextLevel&quot;</span><span class="token punctuation">,</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">StartLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 如果已经有城堡存在，则清除原有的城堡</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>castle <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">Destroy</span><span class="token punctuation">(</span>castle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 清除原有的弹丸</span>
    <span class="token class-name">GameObject<span class="token punctuation">[</span><span class="token punctuation">]</span></span> gos <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">FindGameObjectsWithTag</span><span class="token punctuation">(</span><span class="token string">&quot;Projectile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">GameObject</span> pTemp <span class="token keyword">in</span> gos<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">Destroy</span><span class="token punctuation">(</span>pTemp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 实例化新城堡</span>
    castle <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>castles<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span>
    castle<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> castlePos<span class="token punctuation">;</span>
    shotsTaken <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 重置摄像机位置</span>
    <span class="token function">SwitchView</span><span class="token punctuation">(</span><span class="token string">&quot;Both&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ProjectileLine<span class="token punctuation">.</span>S<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 重置目标状态</span>
    Goal<span class="token punctuation">.</span>goalMet <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">ShowGT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mode <span class="token operator">=</span> GameMode<span class="token punctuation">.</span>playing<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowGT</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 设置界面文字</span>
    gtLevel<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;Level: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;of &quot;</span> <span class="token operator">+</span> levelMax<span class="token punctuation">;</span>
    gtScore<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;Shots Taken: &quot;</span> <span class="token operator">+</span> shotsTaken<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 在屏幕顶端绘制用户界面按钮，用于切换视图</span>
    <span class="token class-name">Rect</span> buttonRect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Screen<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>showing<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Slingshot&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>GUI<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span>buttonRect<span class="token punctuation">,</span> <span class="token string">&quot;查看城堡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          <span class="token function">SwitchView</span><span class="token punctuation">(</span><span class="token string">&quot;Castle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Castle&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>GUI<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span>buttonRect<span class="token punctuation">,</span> <span class="token string">&quot;查看全部&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          <span class="token function">SwitchView</span><span class="token punctuation">(</span><span class="token string">&quot;Both&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Both&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>GUI<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span>buttonRect<span class="token punctuation">,</span> <span class="token string">&quot;查看弹弓&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          <span class="token function">SwitchView</span><span class="token punctuation">(</span><span class="token string">&quot;Slingshot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// 允许在代码任意位置切换视图的静态方法，相当于算法中的订阅者</span>
  <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SwitchView</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> eView<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    S<span class="token punctuation">.</span>showing <span class="token operator">=</span> eView<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>showing<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Slingshot&quot;</span><span class="token punctuation">:</span>
        FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Castle&quot;</span><span class="token punctuation">:</span>
        FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi <span class="token operator">=</span> S<span class="token punctuation">.</span>castle<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Both&quot;</span><span class="token punctuation">:</span>
        FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token string">&quot;ViewBoth&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">NextLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    level<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>level <span class="token operator">==</span> levelMax<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      level <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">StartLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 允许在代码任意位置增加发射次数的代码</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShotFired</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    S<span class="token punctuation">.</span>shotsTaken<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br></div></div><h4 id="小结-26"><a href="#小结-26" class="header-anchor">#</a> 小结</h4> <h5 id="unity-相关知识点："><a href="#unity-相关知识点：" class="header-anchor">#</a> Unity 相关知识点：</h5> <ul><li>力学</li> <li>碰撞器与触发器</li> <li>不同脚本下的</li> <li>摄像机跟随目标</li> <li>点击按钮切换摄像机视图</li> <li>目标与触发器相碰</li> <li>向量</li> <li>游戏的 setActive</li> <li>单例对象</li> <li>Rigibody constrains 可以冻结物体的 x、y、z 轴</li> <li>添加标签
<ul><li>可以通过标签，判断一系列的游戏对象。（类似文章标签的用法）</li></ul></li></ul> <h5 id="编程技术"><a href="#编程技术" class="header-anchor">#</a> 编程技术</h5> <ul><li><p>单例对象（游戏状态管理、摄像机）</p></li> <li><p>枚举类型（游戏状态）</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token comment">// 游戏状态管理</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">GameMode</span>
<span class="token punctuation">{</span>
  idle<span class="token punctuation">,</span>
  playing<span class="token punctuation">,</span>
  levelEnd
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h4 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h4> <h5 id="_1-对于-line-render-还不是很熟悉，后续可以实现一个鼠标点击画线的效果。两点确定一条直线。（gis-应该用到）"><a href="#_1-对于-line-render-还不是很熟悉，后续可以实现一个鼠标点击画线的效果。两点确定一条直线。（gis-应该用到）" class="header-anchor">#</a> 1. 对于 line render 还不是很熟悉，后续可以实现一个鼠标点击画线的效果。两点确定一条直线。（GIS 应该用到）</h5> <p>https://gameinstitute.qq.com/community/detail/126849</p> <h5 id="_2-摄像机-projection-orthographic-的时候，size-为什么可以影响被摄物体的在视窗的显示大小？"><a href="#_2-摄像机-projection-orthographic-的时候，size-为什么可以影响被摄物体的在视窗的显示大小？" class="header-anchor">#</a> 2. 摄像机 Projection Orthographic 的时候，size 为什么可以影响被摄物体的在视窗的显示大小？</h5> <p>对于正投影摄像机，物体与摄像机的距离不会影响它的大小，但是改变 size 就可以？为什么呢？</p> <p>Size
当摄像机设成正交投影时，摄像机对应的那个长方体的大小，也就是被渲染的方块区域。渲染区域变大了，那么原来的物体在总体渲染区域的比例下变小了。</p> <p>参考资料：</p> <ul><li><a href="https://gameinstitute.qq.com/community/detail/118652" target="_blank" rel="noopener noreferrer">Unity3d 摄像机详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 分别说明每个参数</li> <li><a href="https://www.hangge.com/blog/cache/detail_1787.html" target="_blank" rel="noopener noreferrer">Three.js - 摄像机的使用详解（透视投影摄像机、正交投影摄像机）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 主要图文讲解了透视投影摄像机、正交投影摄像机的区别。</li> <li><a href="https://blog.csdn.net/shenziheng1/article/details/52890223" target="_blank" rel="noopener noreferrer">摄像机投射投影模型_综述及详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 摄像机成像原理</li> <li><a href="http://www.jiazhengblog.com/blog/2016/04/26/2965/" target="_blank" rel="noopener noreferrer">WebGL 摄像机详解之三：正投影摄像机及其用途<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 正交投影可以用在 2d 视图游戏上以及一些界面上的辅助信息。</li></ul> <p><img src="/Notebook/assets/img/camera-1.808c0974.png" alt=""></p> <p>其中，O 点称为摄像机光心，x 轴和 y 轴与图像的 X 轴、Y 轴平行，z 轴为摄像机光轴，他与图像平面垂直。光轴与图像平面的焦点即为图像坐标系的原点，<strong>由点 O 与 x、y、z 轴构成的直角坐标系称为摄像机坐标系。OO1 为摄像机焦距。</strong></p> <h5 id="_3-rigidbody-中的-iskinematic-作用是什么？"><a href="#_3-rigidbody-中的-iskinematic-作用是什么？" class="header-anchor">#</a> 3. Rigidbody 中的 isKinematic 作用是什么？</h5> <p>功能区别：</p> <p>Is Kinematic 是否为 Kinematic 刚体，如果启用该参数，则<strong>对象不会被物理所控制，只能通过直接设置位置、旋转和缩放来操作它</strong>，一般用来实现移动平台，或者带有 HingeJoint 的动画刚体</p> <p>当 Rigidbody 为运动学刚体（即 isKinematic == true）时，对象的运动不会自动遵循物理原理，但仍然属于物理模拟的构成部分（<strong>即刚体的运动不会收到碰撞和重力的影响，但仍然会影响其他非运动学刚体的运动</strong>）。</p> <p>举例说明：如图 10-19 所示，A 和 B 为两个刚体物体，A 在 B 的正上方，开始时 A 和 B 的重力感应都被关闭，都处于静止状态，且接受动力学模拟即 isKinematic 为 false。现在开启 A 的重力感应，则 A 从 1 处开始加速下落，当下落到 2 处时，关闭 A 的重力感应，但 isKinematic 依然为 false（即接受动力学模拟），则 A 将以当前速度匀速下落。但是此时若关闭物理感应，即 isKinematic=true，则 A 将立即停止移动。当 A 与 B 发生碰撞时，若 B 的重力感应依然关闭，但接受动力学模拟，即 isKinematic=false，则根据动量守恒 B 将产生一个向下的速度。但是若关闭 B 物体的动力学模拟，即 <code>isKinematic=true</code>，则 B 保持静止，不会因受到 A 的碰撞而下落。</p> <p>在 Unity 中在刚体不与其他物体接触的情况下 <code>velocity</code> 的值只与 Gravity、drag 及 <code>Kinematic</code> 有关，与质量 mass 及物体的 Scale 值无关。 <code>isKinematic</code> 为 true 时，<code>velocity</code> 将不起作用。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code> <span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButtonUp</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果已经公开鼠标</span>
      aimingMode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      projectile<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isKinematic <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      projectile<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> <span class="token operator">-</span>mouseDelta <span class="token operator">*</span> velocityMult<span class="token punctuation">;</span>
      FollowCam<span class="token punctuation">.</span>S<span class="token punctuation">.</span>poi <span class="token operator">=</span> projectile<span class="token punctuation">;</span> <span class="token comment">// 同步摄像机兴趣点</span>
      projectile <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      MissionDemolition<span class="token punctuation">.</span><span class="token function">ShotFired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 增加发射次数</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><a href="https://blog.csdn.net/QUAN2008HAPPY/article/details/39403785" target="_blank" rel="noopener noreferrer">Script<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/f786587718/article/details/49105437" target="_blank" rel="noopener noreferrer">Unity3D Rigidbody 详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h5 id="_4-unity-中标签与图层的区别？"><a href="#_4-unity-中标签与图层的区别？" class="header-anchor">#</a> 4. Unity 中标签与图层的区别？</h5> <p>通过图层可以设置哪些图层的游戏对象可以发生碰撞，然后在碰撞时通过标签找到相关的游戏对象，进行逻辑的处理。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTriggerEnter</span><span class="token punctuation">(</span><span class="token class-name">Collider</span> other<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 当其他物体撞到触发器时</span>
    <span class="token comment">// 检查是否是弹丸</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">&quot;Projectile&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 如果是弹丸</span>
      Goal<span class="token punctuation">.</span>goalMet <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token comment">// 同时将颜色的不透明度设置得更高</span>
      <span class="token class-name">Renderer</span> renderer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Color</span> c <span class="token operator">=</span> renderer<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
      renderer<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">=</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_5-collider-的作用以及-istrigger-的属性用法是什么？"><a href="#_5-collider-的作用以及-istrigger-的属性用法是什么？" class="header-anchor">#</a> 5. collider 的作用以及 isTrigger 的属性用法是什么？</h4> <p>OnMouseEnter 和 OnMouseExit 需要添加 collider 组件，并且 isTrigger = false。为什么呢，这里涉及到触发器和碰撞器。</p> <p>1.系统默认会给每个对象 (GameObject) 添加一个碰撞组件 (ColliderComponent)，一些背景对象则可以取消该组件。</p> <p>2.在 unity3d 中，能检测碰撞发生的方式有两种，<strong>一种是利用碰撞器，另一种则是利用触发器</strong>。这两种方式的应用非常广泛。为了完整的了解这两种方式，我们必须理解以下概念：</p> <p>（一）碰撞器是一群组件，它包含了很多种类，比如：<code>Box Collider</code>，<code>Capsule Collider</code> 等，这些碰撞器应用的场合不同，但都必须加到 <code>GameObjecet</code> 身上。
（二）所谓触发器，只需要在检视面板中的碰撞器组件中勾选 <code>IsTrigger</code> 属性选择框。
（三）在Unity3d中，主要有以下接口函数来处理这两种碰撞检测：</p> <ul><li>触发信息检测：</li></ul> <ol><li>MonoBehaviour.OnTriggerEnter( Collider other )当进入触发器</li> <li>MonoBehaviour.OnTriggerExit( Collider other )当退出触发器</li> <li>MonoBehaviour.OnTriggerStay( Collider other )当逗留触发器</li></ol> <ul><li>-碰撞信息检测：</li></ul> <ol><li>MonoBehaviour.OnCollisionEnter( Collision collisionInfo ) 当进入碰撞器</li> <li>MonoBehaviour.OnCollisionExit( Collision collisionInfo ) 当退出碰撞器</li> <li>MonoBehaviour.OnCollisionStay( Collision collisionInfo )  当逗留碰撞器</li></ol> <p>在目前掌握的情况分析，在Unity中参与碰撞的物体分2大块：<strong>1.发起碰撞的物体。2.接收碰撞的物体。</strong></p> <p><strong>1. 发起碰撞物体有</strong>：<code>Rigodbody</code> , <code>CharacterController</code> .</p> <p><strong>2. 接收碰撞物体由</strong>：所有的 <code>Collider</code> .</p> <p><strong>工作的原理为：发生碰撞的物体中必须要有“发起碰撞”的物体。否则，碰撞不响应。</strong></p> <p>比如：墙用 BoxCollider ，所以墙与墙之间无反应。</p> <p>比如：一个带有 <code>Rigidbody</code> 属性的箱子，能落到带有 <code>MeshCollider</code> 属性的地面上。</p> <p>比如：一个带有 <code>Rigidbody</code>属性的箱子，可以被一个带有 <code>CharacterController</code> 属性的人推着跑。</p> <p>就是此原因。</p> <p>在所有 <code>Collider</code>上有一个 <code>Is Trigger</code> 的 <code>boolean</code> 型参数。</p> <p>当发生碰撞反应的时候，会先检查此属性。</p> <p><u>当激活此选项时，会调用碰撞双方的脚本 <code>OnTrigger***</code>， 反之，脚本方面没有任何反应。</u></p> <p>当激活此选项时，不会发生后续物理的反应。反之，发生后续的物理反应。</p> <p><strong>总结：<code>Is Trigger</code> 好比是一个物理功能的开关， 是要“物理功能”还是要“OnTrigger脚本”。</strong></p> <p><code>OnTriggerEnter</code> 触发条件：</p> <ul><li>碰撞双方都必须是碰撞体</li> <li>碰撞双方其中一个碰撞体必须勾选 <code>IsTigger</code> 选项</li> <li>碰撞双方其中一个必须是刚体</li> <li>刚体的 <code>IsKinematic</code> 选项可以勾选也可以不勾选</li></ul> <p>只要满足上面两个条件，不管谁主动都会触发</p> <p>备注：</p> <ul><li><code>OnTriggerEnter</code> 方法的形参对象指的是碰撞双方中没有携带 <code>OnTriggerEnter</code> 方法的一方</li> <li><code>OnTriggerEnter</code> 方法前可以带上 <code>public</code> 或 <code>private</code>，或者干脆两个都不带</li></ul> <p>参考资料：</p> <ul><li><a href="https://blog.csdn.net/qq_30454411/article/details/79810922" target="_blank" rel="noopener noreferrer">Unity3D碰撞检测和OnTriggerEnter用法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 详细介绍了碰撞以及 OnTriggerEnter 的使用</li></ul> <h3 id="游戏原型-3：《太空射击》"><a href="#游戏原型-3：《太空射击》" class="header-anchor">#</a> 游戏原型 3：《太空射击》</h3> <p>在本章中，你将使用几种编程技术创建自己的射击游戏，这些技术包括<code>类继承</code>、<code>枚举类型（enum）</code>、<code>静态字段和方法</code>以及<code>单例模式</code>，在你的编程和原型制作生涯中，这些技术会派上用场。</p> <h4 id="准备工作-2"><a href="#准备工作-2" class="header-anchor">#</a> 准备工作</h4> <h5 id="导入-unity-资源包"><a href="#导入-unity-资源包" class="header-anchor">#</a> 导入 Unity 资源包</h5> <p>当你制作游戏原型时，它的玩法和体验要比外观重要，但我们要理解游戏如何运作，仍然需要用到绘图资源，比如一些材质（可以通过 Photoshop 制作）和着色器。</p> <p>着色器是让计算机知道如何在游戏对象上渲染材质的程序，可以让场景看起来更有真实感或卡通感，或者产生其他感觉，着色器是现代游戏图形的一个重要部分。Unity 使用自己独有的着色器语言 ShaderLab。</p> <h4 id="设置场景"><a href="#设置场景" class="header-anchor">#</a> 设置场景</h4> <p>因为游戏是垂直方向从下向上射击，所以我们需要为游戏面板设置一个纵向的宽高比。单击游戏面板上位于选项卡下方的宽高比弹出菜单，单击菜单项列表最下方的加号（+）图标。将游戏面板宽高比设置为新增加的 Portrait（3:4）。</p> <h4 id="创建主角飞船"><a href="#创建主角飞船" class="header-anchor">#</a> 创建主角飞船</h4> <p>在本章中，我们会一边创建图形一边写代码，而不是提前创建出所有的图形。这个思路也算是敏捷开发，按模块一步步创建。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hero</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">Hero</span> S<span class="token punctuation">;</span> <span class="token comment">// 单例对象</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> gameRestartDelay <span class="token operator">=</span> <span class="token number">2f</span><span class="token punctuation">;</span>

  <span class="token comment">// 以下字段用来控制飞船的运动</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> speed <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> rollMult <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">45</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> pitchMult <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> ______________________<span class="token punctuation">;</span>
 
  <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    S <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 设置单例对象</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 从 Input（用户输入）类中获取信息，读取水平和竖直轴</span>
    <span class="token class-name"><span class="token keyword">float</span></span> xAxis <span class="token operator">=</span> Input<span class="token punctuation">.</span><span class="token function">GetAxis</span><span class="token punctuation">(</span><span class="token string">&quot;Horizontal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">float</span></span> yAxis <span class="token operator">=</span> Input<span class="token punctuation">.</span><span class="token function">GetAxis</span><span class="token punctuation">(</span><span class="token string">&quot;Vertical&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 基于获取的水平轴和竖直轴信息修改 transform.position</span>
    <span class="token class-name">Vector3</span> pos <span class="token operator">=</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
    pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> xAxis <span class="token operator">*</span> speed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
    pos<span class="token punctuation">.</span>y <span class="token operator">+=</span> yAxis <span class="token operator">*</span> speed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
    transform<span class="token punctuation">.</span>position <span class="token operator">=</span> pos<span class="token punctuation">;</span>

    <span class="token comment">// 让飞船旋转一个角度，使它更具动感</span>
    transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span>yAxis <span class="token operator">*</span> pitchMult<span class="token punctuation">,</span> xAxis <span class="token operator">*</span> rollMult<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><a href="/Notebook/game-development/unity.html#用户输入">查看 InputManager 信息</a></p> <h5 id="主角飞船的护盾"><a href="#主角飞船的护盾" class="header-anchor">#</a> 主角飞船的护盾</h5> <p>_Hero 的护盾由透明度、带贴图的正方形（产生图像）和球状碰撞器（用于处理碰撞）组合而成。</p> <p>新建一个矩形（执行 GameObject &gt; 3D Object &gt; Quad 命令），将其命名为 Shield 并设置为 _Hero 的子对象。</p> <p>在层级面板中选中 Shield，你会在检视面板中看到 Mat_Shield 组件。将 Mat_Shield 的 <code>Shader</code> 组件设置为 <code>Custom &gt; UnlitAlpha</code>。在 Mat_Shield 下方有一块区域可以选择材质的<code>主色</code>和<code>纹理</code>。单击选择右下角的纹理区域，并选中名为 Shields 的纹理。单击颜色选取块，选择一种浅绿色，然后将 <code>Tiling.x</code> 的设置为 0.2，<code>Offset.x</code> 设置为 0.4，<u>前者使 Mat_Shield 在水平方向上只使用 Shield 纹理的 1/5，后者则指定是哪 1/5.</u></p> <p><code>Tiling.y</code> 应保持 1.0 不变，<code>Offset.y</code> 应保持 0 不变。这是因为纹理在水平方向上分为五部分，但竖直方向上只有一部分。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Shield</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> rotationsPerSecond <span class="token operator">=</span> <span class="token number">0.1f</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> __________________________<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> levelShown <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 读取 Hero 单例对象的当前护盾等级，向下取整确保 shield 纹理的水平偏移量为单幅纹理宽度的倍数，而不会偏移到两幅纹理图像之间</span>
    <span class="token class-name"><span class="token keyword">int</span></span> currLevel <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">FloorToInt</span><span class="token punctuation">(</span>Hero<span class="token punctuation">.</span>S<span class="token punctuation">.</span>shieldLevel<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">// 通过</span>
    <span class="token comment">// 如果当前护盾等级与显示的等级不符......</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>levelShown <span class="token operator">!=</span> currLevel<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      levelShown <span class="token operator">=</span> currLevel<span class="token punctuation">;</span>
      <span class="token class-name">Renderer</span> renderer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Material</span> mat <span class="token operator">=</span> renderer<span class="token punctuation">.</span>material<span class="token punctuation">;</span>
      <span class="token comment">// 则调整纹理偏移量，呈现正确的护盾画面</span>
      mat<span class="token punctuation">.</span>mainTextureOffset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">0.2f</span> <span class="token operator">*</span> levelShown<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 每秒钟将护盾旋转到一定角度</span>
    <span class="token class-name"><span class="token keyword">float</span></span> rZ <span class="token operator">=</span> <span class="token punctuation">(</span>rotationsPerSecond <span class="token operator">*</span> Time<span class="token punctuation">.</span>time <span class="token operator">*</span> <span class="token number">360</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">360f</span><span class="token punctuation">;</span> 
    transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> rZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><ul><li><a href="/Notebook/game-development/unity.html#Materials、Shaders&amp;Textures">材质、纹理、着色器</a></li></ul> <h5 id="将-hero-限制在屏幕内"><a href="#将-hero-限制在屏幕内" class="header-anchor">#</a> 将 _Hero 限制在屏幕内</h5> <p>边界框查看：<a href="/Notebook/game-development/unity.html#Bounds（边界框）">（Bounds）边界框</a></p> <h4 id="添加敌机"><a href="#添加敌机" class="header-anchor">#</a> 添加敌机</h4> <h4 id="随机生成敌机"><a href="#随机生成敌机" class="header-anchor">#</a> 随机生成敌机</h4> <h4 id="设置标签、图层和物理规则"><a href="#设置标签、图层和物理规则" class="header-anchor">#</a> 设置标签、图层和物理规则</h4> <h4 id="射击"><a href="#射击" class="header-anchor">#</a> 射击</h4> <h5 id="可序列化的-weapon-definition-类"><a href="#可序列化的-weapon-definition-类" class="header-anchor">#</a> 可序列化的 Weapon Definition 类</h5> <h5 id="用于-weapondefinition-的字典"><a href="#用于-weapondefinition-的字典" class="header-anchor">#</a> 用于 WeaponDefinition 的字典</h5> <h5 id="使用函数委托进行射击"><a href="#使用函数委托进行射击" class="header-anchor">#</a> 使用函数委托进行射击</h5> <ul><li>统一的武器初始化定义：<code>Main.cs</code></li> <li><code>Hero.cs</code> 声明武器 <code>weapons</code> 和函数委托 <code>fireDelegate</code>。
<ul><li>调用 <code>Weapon.SetType</code> 激活某一个 <code>weapon</code> 类型</li></ul></li> <li><code>Weapon.cs</code> 根据激活的 <code>weapon</code> 类型，从 <code>Main.cs</code> 中获取该武器类型的定义，从而在 <code>fire()</code> 函数中进行 <code>makeProjectile()</code> 的对应处理。</li></ul> <p>最后在玩家按发射键时，调用 <code>fireDelegate()</code>，依次调用 <code>fire()</code> 函数，发出子弹。</p> <p>可以通过调试，查看调用堆栈来理解这个过程。</p> <h4 id="解决代码中的竞态条件"><a href="#解决代码中的竞态条件" class="header-anchor">#</a> 解决代码中的竞态条件</h4> <p>各个脚本的生命周期函数的执行顺序会影响调用，这里跟 Web 开发应用框架 Vue 的组件生命周期函数很类似。</p> <h4 id="让敌机可以掉落道具"><a href="#让敌机可以掉落道具" class="header-anchor">#</a> 让敌机可以掉落道具</h4> <h4 id="为其他敌机编程"><a href="#为其他敌机编程" class="header-anchor">#</a> 为其他敌机编程</h4> <h4 id="添加粒子效果和背景"><a href="#添加粒子效果和背景" class="header-anchor">#</a> 添加粒子效果和背景</h4> <h4 id="小结-27"><a href="#小结-27" class="header-anchor">#</a> 小结</h4> <h5 id="各个游戏对象的动作组合以及状态调用"><a href="#各个游戏对象的动作组合以及状态调用" class="header-anchor">#</a> 各个游戏对象的动作组合以及状态调用</h5> <ul><li>Main Camera（）</li> <li>_Hero（Hero.cs）
<ul><li>Shield（Shield.cs）</li> <li>Cube</li> <li>Cockpit</li> <li>Weapon_0（Weapon.cs)</li> <li>Weapon_1</li> <li>Weapon_2</li> <li>Weapon_3</li> <li>Weapon_4</li></ul></li> <li>Enemy（Enemy）</li></ul> <p>分析游戏对象，可以更明白对象之间的调用</p> <ul><li>动作组合</li> <li>状态</li> <li>生命周期</li></ul> <p>英雄的不同装备，不同的脚本逻辑。不同类型的敌人，绑定了不同的脚本。</p> <h5 id="问题1：使用泛型与直接传参给函数，两者的使用区别？"><a href="#问题1：使用泛型与直接传参给函数，两者的使用区别？" class="header-anchor">#</a> 问题1：使用泛型与直接传参给函数，两者的使用区别？</h5> <p>首先就是不需要固定参数的类型，也不需要在函数内部进行判断。例如栈，栈的数据类型可以是任何类型，也就是泛型。</p> <h5 id="问题2：枚举类型作为-type-使用，有什么不同？"><a href="#问题2：枚举类型作为-type-使用，有什么不同？" class="header-anchor">#</a> 问题2：枚举类型作为 Type 使用，有什么不同？</h5> <h5 id="问题3-单一职责的应用：weapon-类型、projectile-类型、main-类里面的-weapondefinition-数据共用？"><a href="#问题3-单一职责的应用：weapon-类型、projectile-类型、main-类里面的-weapondefinition-数据共用？" class="header-anchor">#</a> 问题3:单一职责的应用：weapon 类型、projectile 类型、main 类里面的 weaponDefinition 数据共用？</h5> <h5 id="问题4：如何知道同一场景下，不同游戏对象的-awake-和-start-等执行的顺序？"><a href="#问题4：如何知道同一场景下，不同游戏对象的-awake-和-start-等执行的顺序？" class="header-anchor">#</a> 问题4：如何知道同一场景下，不同游戏对象的 Awake() 和 Start() 等执行的顺序？</h5> <p>举例子，A 对象的 Awake() 方法是否一定比 B 对象的 Start() 方法要早执行？还有就是派生类与父类的生命周期执行顺序，这个跟前端组件很类似。</p> <h3 id="游戏原型-4：《矿工接龙》"><a href="#游戏原型-4：《矿工接龙》" class="header-anchor">#</a> 游戏原型 4：《矿工接龙》</h3> <h3 id="游戏原型-5：《bartok》"><a href="#游戏原型-5：《bartok》" class="header-anchor">#</a> 游戏原型 5：《Bartok》</h3> <h3 id="游戏原型-6：《word-game》"><a href="#游戏原型-6：《word-game》" class="header-anchor">#</a> 游戏原型 6：《Word Game》</h3> <h3 id="游戏原型-7：quicksnap"><a href="#游戏原型-7：quicksnap" class="header-anchor">#</a> 游戏原型 7：QuickSnap</h3> <h3 id="游戏原型-8：omega-mage-原型"><a href="#游戏原型-8：omega-mage-原型" class="header-anchor">#</a> 游戏原型 8：Omega Mage 原型</h3> <h2 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h2> <h3 id="附录-b-实用概念"><a href="#附录-b-实用概念" class="header-anchor">#</a> 附录 B 实用概念</h3> <h4 id="函数授权"><a href="#函数授权" class="header-anchor">#</a> 函数授权</h4> <p>函数授权简单理解为</p> <p>第一步：定义授权类型</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">FloatOperationDelegate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> f0<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> f1<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上一行创建了一个 FloatOperationDelegate 授权定义，需要两个 float 作为输入。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DelegateExample</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. </span>
  <span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">FloatOperationDelegate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> f0<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> f1<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">FloatAdd</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> f0<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> f1<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">FloatMultiply</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> f0<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> f1<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

  <span class="token comment">// 类型声明一个 &quot;fod&quot; 变量</span>
  <span class="token keyword">public</span> <span class="token class-name">FloatOperationDelegate</span> fod<span class="token punctuation">;</span> <span class="token comment">// 授权变量</span>

  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为 fod 分配 FloatAdd() 方法</span>
    fod <span class="token operator">=</span> FloatAdd<span class="token punctuation">;</span>

    <span class="token comment">// 当 fod 作为方法时调用它；fod 接着调用 FloatAdd(</span>
      <span class="token function">fod</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 授权也可以多播，意味着多个目标方法可以分配给授权</span>
    fod <span class="token operator">+=</span> FloatMultiply<span class="token punctuation">;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="插值"><a href="#插值" class="header-anchor">#</a> 插值</h4> <p>插值是指两个值之间的任何数学结合。图形代码中元素的移动看起来平滑且饱满。通过使用各种形式的插值和贝塞尔曲线可实现。</p> <h5 id="线性插值"><a href="#线性插值" class="header-anchor">#</a> 线性插值</h5> <p><u>线性插值是一种数学方法，通过规定存在于两个现有值之间来定义一个新的值或位置。</u>所有的线性插值遵循相同的公式</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>p01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span>-u<span class="token punctuation">)</span> * p0 + u * p1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>代码看起来如下：</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Vector3</span> p0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Vector3</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">float</span></span> u <span class="token operator">=</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
<span class="token class-name">Vector3</span> p01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> p0 <span class="token operator">+</span> u <span class="token operator">*</span> p1<span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>p01<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印：p0和 p1 之间的半点 (0.5, 0.5, 0);</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在上面的代码中，通过在 P0 和 P1 之间插值创建一个新的点 p01。u 取值范围在 0 和 1 之间。其可以生成任何数量的维度，尽管我们在 Unity 中一般使用 Vector3s 插值。</p> <h5 id="基于时间的线性插值"><a href="#基于时间的线性插值" class="header-anchor">#</a> 基于时间的线性插值</h5> <p>在基于时间的线性插值中，可以保证插值将在一个指定的时间内完成，因为 u 的值是基于时间数量除以所需的总时间插值的结果。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Interpolator</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> p0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> timeDuration <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置 checkToCalculate 为 true 开始移动</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> checkToCalculate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> ________________________<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> p01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> moving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> timeStart<span class="token punctuation">;</span>

  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>checkToCalculate<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      checkToCalculate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      moving <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      timeStart <span class="token operator">=</span> Time<span class="token punctuation">.</span>time<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>moving<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token class-name"><span class="token keyword">float</span></span> u <span class="token operator">=</span> <span class="token punctuation">(</span>Time<span class="token punctuation">.</span>time <span class="token operator">-</span> timeStart<span class="token punctuation">)</span> <span class="token operator">/</span> timeDuration<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        u <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        moving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 标准线性插值函数</span>
      p01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> p0<span class="token punctuation">)</span> <span class="token operator">+</span> u <span class="token operator">*</span> p1<span class="token punctuation">;</span>
      transform<span class="token punctuation">.</span>position <span class="token operator">=</span> p01<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>这里因为 timeStart 固定后，<code>Time.time</code> 是不断增大的，所以最终 u 的值会达到 1，在这个过程中不断刷新帧，最终的效果是 <code>p01</code> 会逐渐移动到 <code>p1</code> 的位置上。当然如果 timeDuration 越大的话，那就 u 达到 1 需要的时间就越长。</p> <h5 id="利用-zeno-悖论的线性插值"><a href="#利用-zeno-悖论的线性插值" class="header-anchor">#</a> 利用 Zeno 悖论的线性插值</h5> <p>使用这个方法创建摄像机使它可以随意跟拍兴趣点</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZenosFollower</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">GameObject</span> poi<span class="token punctuation">;</span> <span class="token comment">// 兴趣点</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> u <span class="token operator">=</span> <span class="token number">0.1f</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> p0<span class="token punctuation">,</span> p1<span class="token punctuation">,</span> p01<span class="token punctuation">;</span>
  <span class="token comment">// Start is called before the first frame update</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 获取 this 和 poi 的位置</span>
    p0 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
    p1 <span class="token operator">=</span> poi<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>

    <span class="token comment">// 二插值</span>
    p01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> p0 <span class="token operator">+</span> u <span class="token operator">*</span> p1<span class="token punctuation">;</span>

    <span class="token comment">// 将 this 移动到新位置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> p01<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h5 id="其他插值"><a href="#其他插值" class="header-anchor">#</a> 其他插值</h5> <p>几乎可以插值任何类型的数值，在 Unity 中意味着我们可以很容易实现插值，如尺度、旋转以及颜色等。插值可以实现随时间而渐变的效果。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Interpolator2</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">Transform</span> c0<span class="token punctuation">,</span> c1<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> timeDuration <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 秒为单位</span>
  <span class="token comment">// 设置 checkToCalculate 为 true 开始移动</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> checkToCalculate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> _________________<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> p01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Color</span> c01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Quaternion</span> r01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> s01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> moving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> timeStart<span class="token punctuation">;</span>

  <span class="token comment">// Use this for initialization</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>checkToCalculate<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      checkToCalculate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      moving <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      timeStart <span class="token operator">=</span> Time<span class="token punctuation">.</span>time<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>moving<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token class-name"><span class="token keyword">float</span></span> u <span class="token operator">=</span> <span class="token punctuation">(</span>Time<span class="token punctuation">.</span>time <span class="token operator">-</span> timeStart<span class="token punctuation">)</span> <span class="token operator">/</span> timeDuration<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        u <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        moving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 标准线性插值函数</span>
      p01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> c0<span class="token punctuation">.</span>position <span class="token operator">+</span> u <span class="token operator">*</span> c1<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
      c01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> c0<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">+</span>
        u <span class="token operator">*</span> c1<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
      s01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> c0<span class="token punctuation">.</span>localScale <span class="token operator">+</span> u <span class="token operator">*</span> c1<span class="token punctuation">.</span>localScale<span class="token punctuation">;</span>
      <span class="token comment">// 旋转的处理方法稍有不同，因为四元数有点麻烦</span>
      r01 <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Slerp</span><span class="token punctuation">(</span>c0<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> c1<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 将上面的值赋给当前 Cube01</span>
      transform<span class="token punctuation">.</span>position <span class="token operator">=</span> p01<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">=</span> c01<span class="token punctuation">;</span>
      transform<span class="token punctuation">.</span>localScale <span class="token operator">=</span> s01<span class="token punctuation">;</span>
      transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> r01<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p>这段代码实现了 p01 从 c0 到 c1 的颜色、大小等渐变效果。</p> <h5 id="线性外插法"><a href="#线性外插法" class="header-anchor">#</a> 线性外插法</h5> <p>我们迄今为止所有插值的 u 值范围都是 0 到 1.如果让 u 超出这个范围，可以实现外插（如此命名因为不同于在两值之间内插值。）</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Interpolator2</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">Transform</span> c0<span class="token punctuation">,</span> c1<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> uMin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> uMax <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> timeDuration <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 秒为单位</span>
  <span class="token comment">// 设置 checkToCalculate 为 true 开始移动</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> checkToCalculate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> _________________<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> p01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Color</span> c01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Quaternion</span> r01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Vector3</span> s01<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> moving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> timeStart<span class="token punctuation">;</span>

  <span class="token comment">// Use this for initialization</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// Update is called once per frame</span>
  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>checkToCalculate<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      checkToCalculate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      moving <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      timeStart <span class="token operator">=</span> Time<span class="token punctuation">.</span>time<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>moving<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token class-name"><span class="token keyword">float</span></span> u <span class="token operator">=</span> <span class="token punctuation">(</span>Time<span class="token punctuation">.</span>time <span class="token operator">-</span> timeStart<span class="token punctuation">)</span> <span class="token operator">/</span> timeDuration<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// u &gt;= 1证明已经完成了动画，timeDuration</span>
      <span class="token punctuation">{</span>
        u <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        moving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 调整 u 的范围为 uMin 到 uMax</span>
      u <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> uMin <span class="token operator">+</span> u <span class="token operator">*</span> uMax<span class="token punctuation">;</span> <span class="token comment">// 线性内插也是这样做的。</span>

      <span class="token comment">// 标准线性插值函数</span>
      p01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> c0<span class="token punctuation">.</span>position <span class="token operator">+</span> u <span class="token operator">*</span> c1<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
      c01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> c0<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">+</span>
        u <span class="token operator">*</span> c1<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
      s01 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> c0<span class="token punctuation">.</span>localScale <span class="token operator">+</span> u <span class="token operator">*</span> c1<span class="token punctuation">.</span>localScale<span class="token punctuation">;</span>
      <span class="token comment">// 旋转的处理方法稍有不同，因为四元数有点麻烦</span>
      r01 <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Slerp</span><span class="token punctuation">(</span>c0<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> c1<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 将上面的值赋给当前 Cube01</span>
      transform<span class="token punctuation">.</span>position <span class="token operator">=</span> p01<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">=</span> c01<span class="token punctuation">;</span>
      transform<span class="token punctuation">.</span>localScale <span class="token operator">=</span> s01<span class="token punctuation">;</span>
      transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> r01<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h5 id="缓动线性插值"><a href="#缓动线性插值" class="header-anchor">#</a> 缓动线性插值</h5> <p>利用插值，配合时间，前端也可以实现一个迷型的动画库（也就是一些缓动函数）。在 Unity 中可以自动刷新帧（<code>Update()</code>），只需要根据时间刷新
u 的值，需要改变的东西要放到这个 Update() 里面去了。</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">float</span></span> u <span class="token operator">=</span> <span class="token punctuation">(</span>Time<span class="token punctuation">.</span>time <span class="token operator">-</span> timeStart<span class="token punctuation">)</span> <span class="token operator">/</span> timeDuration<span class="token punctuation">;</span>

<span class="token comment">// u &gt;= 1证明已经完成了动画，timeDuration</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>而对于 web 浏览器的话，则需要使用 <code>setTimeOut</code> 或者 <code>requestAnimationFrame</code> 来强制刷新帧。
需要推算 60 帧/秒（比较好的动画效果），从而得出一帧 16.7ms，最后根据 <code>during</code> 计算出完成这个动画需要的帧数，然后每刷新一次都执行 <code>callback(value)</code> 回调函数，去处理关联的东西的值。</p> <p>下面这个算法不是根据插值来计算的，需要重新理清楚。或者重写。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> animate <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// t: current time, b: begInnIng value, c: change In value, d: duration</span>
  animateType<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 匀速 // TODO 重构</span>
    <span class="token function">linear</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">/</span> d <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 先慢后快</span>
    <span class="token function">easeInQuad</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 先快后慢</span>
    <span class="token function">easeOutQuad</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span>c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  defaultOpts<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">from</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    to<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    during<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;easeInQuad&quot;</span><span class="token punctuation">,</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 增加动画算法</span>
  <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>animateType <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animateType<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/*
    * options 配置
      {
        from: 开始值,
        to: 目标值,
        during: 持续时间,
        type: 动画函数
        callback: 回调
      }
      return &lt;Promise&gt;
  */</span>
  <span class="token function">play</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> opts <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultOpts<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> during<span class="token punctuation">,</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> opts<span class="token punctuation">;</span>
      <span class="token comment">// 计算总共的帧数</span>
      <span class="token comment">// 1秒 = 60帧</span>
      <span class="token comment">// 1帧 = 16.7ms</span>
      <span class="token comment">// 根据毫秒数得出总共的帧数</span>
      <span class="token keyword">const</span> durFps <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>during <span class="token operator">/</span> <span class="token number">16.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// requestAnimationFrame的兼容处理</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>requestAnimationFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span><span class="token function-variable function">requestAnimationFrame</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">16.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 动画运动实际上就是 0 ~ 动画总帧数 的过程</span>
      <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token comment">// 运动</span>
      <span class="token keyword">const</span> <span class="token function-variable function">step</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 当前的运动位置</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animateType<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> to <span class="token operator">-</span> <span class="token keyword">from</span><span class="token punctuation">,</span> durFps<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 时间递增</span>
        start<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果还没有运动到位，继续</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">&lt;=</span> durFps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 动画结束，在promise.then中执行相关操作</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// 开始执行动画</span>
      <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> animate<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><h5 id="贝塞尔曲线"><a href="#贝塞尔曲线" class="header-anchor">#</a> 贝塞尔曲线</h5> <h5 id="递归贝塞尔曲线函数"><a href="#递归贝塞尔曲线函数" class="header-anchor">#</a> 递归贝塞尔曲线函数</h5> <h2 id="术语"><a href="#术语" class="header-anchor">#</a> 术语</h2> <ul><li>MMORPG：大型多人在线角色扮演游戏(Massively Multiplayer Online Role Playing Game)；</li></ul> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://mp.weixin.qq.com/s/dJ-KKyEjAVVG3ZgH4g1gfg" target="_blank" rel="noopener noreferrer">Epic Games 研究：Fortnite 和游戏行业的未来<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/15/2020, 8:57:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Notebook/game-development/" class="router-link-active">
        游戏梦工厂
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Notebook/assets/js/app.accc6ad4.js" defer></script><script src="/Notebook/assets/js/4.2708dfb6.js" defer></script><script src="/Notebook/assets/js/36.4ef6c0d1.js" defer></script>
  </body>
</html>
